DISA.ASM......PAGE 0001

LINE# LOC   CODE        LINE































































DISASSEMBLER128......PAGE 0002

LINE# LOC   CODE        LINE


00003  0000              ;*********************************
00004  0000              *=$1C01                ;START OF BASIC
00005  1C01              ;*********************************
00006  1C01              ; SET BSTUB TO ONE TO ALLOW FOR
00007  1C01              ; INSERTION OF BASIC STUB CODE
00008  1C01              ;*********************************
00009  1C01              BSTUB  = 1
00010  1C01              ;*********************************
00011  1C01              ;
00012  1C01              ;        DISASSEMBLER128
00013  1C01              ;    DISASSEMBLER.C128 V080282
00014  1C01              ;    SYMBOLIC DISASSEMBLER
00015  1C01              ;       BY DENTON MARLOWE
00016  1C01              ;
00017  1C01              ;  (C)1986 BY DENTON MARLOWE
00018  1C01              ;
00019  1C01              ; MACRO ASSEMBLER DEVELOPMENT SYSTEM
00020  1C01              ;  (C) 1982 BY COMMODORE MACHINES
00021  1C01              ;
00022  1C01              ;*********************************
00023  1C01              ;
00024  1C01              ; BASIC FORMAT PROGRAM
00025  1C01              ;
00026  1C01              ; 10 SYS (7183)
00027  1C01              ;
00028  1C01              ;*********************************
00029  1C01              ;.IF  BSTUB == 1
00031  1C01  0D 1C              .WORD BASIC     ;NEXT LINE POINTER
00032  1C03  0A                 .BYTE $0A,$00   ;LINE NUMBER
00032  1C04  00 
00033  1C05  9E                 .BYTE $9E       ;SYS COMMAND
00034  1C06  28 37              .BYTE '(7183)'  ;ASCII (7183)
00035  1C0C  00                 .BYTE 0         ;END OF LINE
00036  1C0D  00          BASIC  .BYTE 0,0       ;END OF BASIC
00036  1C0E  00 
00038  1C0F              ;.FI
00039  1C0F              ;*********************************
00040  1C0F              .LIB   DIS.ASM
00041  1C0F              ;*********************************
00042  1C0F              ; FILE DIS.ASM
00043  1C0F              ;*********************************
00044  1C0F              ;
00045  1C0F              ;        DISASSEMBLER128
00046  1C0F              ;    SYMBOLIC DISASSEMBLER
00047  1C0F              ;       BY DENTON MARLOWE
00048  1C0F              ;
00049  1C0F              ;  (C)1986 BY DENTON MARLOWE
00050  1C0F              ;
00051  1C0F              ;*********************************
00052  1C0F              ; KERNAL ADDRESS
00053  1C0F              ;*********************************
00054  1C0F              VICREG=$D011           ;SCREEN REGISTER
00055  1C0F              CHROUT=$FFD2           ;OUTPUT CHARACTER
00056  1C0F              CHKIN  =$FFC6          ;OPEN INPUT FILE
00057  1C0F              CHRIN  =$FFCF          ;GET KEYBOARD INPUT






DISASSEMBLER128......PAGE 0003

LINE# LOC   CODE        LINE


00058  1C0F              GETIN  =$FFE4          ;GET KEYBOARD CHAR
00059  1C0F              CLRCHN=$FFCC           ;RESET I/O CHANNELS
00060  1C0F              STOP   =$FFE1          ;CHECK FOR STOP
00061  1C0F              READST=$FFB7           ;READ ST
00062  1C0F              SETNAM=$FFBD           ;SET FILENAME
00063  1C0F              SETLFS=$FFBA           ;SET LOGICAL FILE
00064  1C0F              OPEN   =$FFC0          ;OPEN FILE
00065  1C0F              CHKOUT=$FFC9           ;OPEN OUTPUT CHANNEL
00066  1C0F              CLOSE  =$FFC3          ;CLOSE LOGICAL FILE
00067  1C0F              ;WREADY=$E391 ;BASIC RETURN
00068  1C0F              WREADY=$4D37           ;BASIC RETURN
00069  1C0F              ;*********************************
00070  1C0F              ; ZERO PAGE ADDRESS
00071  1C0F              ;
00072  1C0F              ; USED: $FA,$FB,$FC,$FD,$FE,$FF
00073  1C0F              ;*********************************
00074  1C0F              ;ZEROUR=$02 ;ZEROPAGE POINTER
00075  1C0F              ZEROLG=$FB             ;POINTER FOR LONG LDA/STA
00076  1C0F              ZEROUR=$FB             ;ZEROPAGE POINTER
00077  1C0F              ;MEMSIZ=$37 ;TOP OF FREE RAM+1
00078  1C0F              MEMSIZ=$39             ;TOP OF FREE RAM+1
00079  1C0F              ;********************************
00080  1C0F              ; EXTERNAL ADDRESS EQUATES
00081  1C0F              ;********************************
00082  1C0F              CURON  = $CD6F
00083  1C0F              CUROFF = $CD9F
00084  1C0F              ;
00085  1C0F              SETBNK = $FF68         ;JSETBNK
00086  1C0F              CLOSEA = $FF4A         ;CLOSE-ALL 
00087  1C0F              INDFET = $FF74         ;LONG LDA
00088  1C0F              INDSTA = $FF77         ;LONG STA
00089  1C0F              INDCMP = $FF7A         ;LONG CMP
00090  1C0F              ;
00091  1C0F              CLALL  = $FFE7
00092  1C0F              ;
00093  1C0F              PRIMM  = $FF7D
00094  1C0F              ;*********************************
00095  1C0F              ;        ENTRY POINT
00096  1C0F              ;*********************************
00097  1C0F              *=$1C0F
00098  1C0F              ;*********************************
00099  1C0F              ;        ENTRY POINT
00100  1C0F              ;*********************************
00101  1C0F              STARTD = *
00102  1C0F              ;*********************************
00103  1C0F              ; SET FLAG TO ALLOW BASIC
00104  1C0F              ; AND KERNAL (ERROR) MESSAGES
00105  1C0F              ; $80 FOR BASIC
00106  1C0F              ; $40 FOR KERNAL
00107  1C0F              ;*********************************
00108  1C0F              SETMSG=$FF90
00109  1C0F  A9 40              LDA #$40        ;ALLOW KERNAL MESSAGES
00110  1C11  20 90 FF           JSR SETMSG
00111  1C14              ;********************************
00112  1C14              ; SET MMU






DISASSEMBLER128......PAGE 0004

LINE# LOC   CODE        LINE


00113  1C14              ;********************************
00114  1C14  A9 00              LDA #$00        ;BANK 15
00115  1C16  8D 00 FF           STA $FF00       ;
00116  1C19                     
00117  1C19  A9 0E              LDA #$0E        ;NO BASIC ROM
00118  1C1B  8D 00 FF           STA $FF00       ;
00119  1C1E                     
00120  1C1E  A9 FC              LDA #$FC        ;SLOW SPEED
00121  1C20  8D 30 D0           STA $D030       ;
00122  1C23              ;********************************
00123  1C23              ; CLOSE ALL FILES
00124  1C23              ;********************************
00125  1C23  20 E7 FF           JSR CLALL
00126  1C26              ;********************************
00127  1C26              ; SET TOP OF MEMORY C128 AND PLUS4
00128  1C26              ;********************************
00129  1C26              MEMEND = $8000
00130  1C26  A9 00              LDA #<MEMEND
00131  1C28  85 39              STA MEMSIZ
00132  1C2A  A9 80              LDA #>MEMEND
00133  1C2C  85 3A              STA MEMSIZ+1
00134  1C2E              ;********************************
00135  1C2E              ; SETUP DISASSEMBLER
00136  1C2E              ;********************************
00137  1C2E  4C 40 1E           JMP DISASS
00138  1C31              ;*********************************
00139  1C31              ;       VARIABLES
00140  1C31              ;*********************************
00141  1C31  31          PASS   .BYTE '1'       ;PASS INDICATOR
00142  1C32  31          IPASS  .BYTE '1'       ;INTERNAL PASS
00143  1C33  32          EPASS  .BYTE '2'       ;EXTERNAL PASS
00144  1C34  33          CPASS  .BYTE '3'       ;PRINTING PASS
00145  1C35  34          SPASS  .BYTE '4'       ;SYMBOL PASS
00146  1C36              ;*********************************
00147  1C36  AA          XOPT   .BYTE $AA       ;LABEL GENERATION
00148  1C37  AA          ROPT   .BYTE $AA       ;REL ADDRESS OPT
00149  1C38  AA          DEVICE .BYTE $AA       ;OUTPUT DEVICE
00150  1C39  AA          OUTPUT .BYTE $AA       ;OUTPUT FLAG
00151  1C3A  AA          WINDOW .BYTE $AA       ;WINDOW FLAG
00152  1C3B  AA          FOROPT .BYTE $AA       ;FORMAT FLAG
00153  1C3C  AA          COMOPT .BYTE $AA       ;COMMENT FLAG
00154  1C3D              ;*********************************
00155  1C3D              ; DISASSEMBLY ADDRESS POINTERS
00156  1C3D              ;*********************************
00157  1C3D  AA AA       SA     .WORD $AAAA     ;START ADDRESS
00158  1C3F  AA AA       EA     .WORD $AAAA     ;END ADDRESS
00159  1C41  AA AA       SELECT .WORD $AAAA     ;BYTE POINTER
00160  1C43  AA AA       OFFSET .WORD $AAAA     ;ADDRESS OFFSET
00161  1C45  AA AA       SAGOL  .WORD $AAAA     ;GOLBAL START
00162  1C47  AA AA       EAGOL  .WORD $AAAA     ;GOLBAL END
00163  1C49  AA AA       SAOUT  .WORD $AAAA     ;START ADDRESS
00164  1C4B  AA AA       EAOUT  .WORD $AAAA     ;END ADDRESS
00165  1C4D              ;*********************************
00166  1C4D              ; INTERNAL ADDRESS TABLE
00167  1C4D              ;*********************************






DISASSEMBLER128......PAGE 0005

LINE# LOC   CODE        LINE


00168  1C4D  AA AA       TABINP .WORD $AAAA     ;TABLE POINTER
00169  1C4F  AA AA       TABINS .WORD $AAAA     ;TABLE START
00170  1C51  AA AA       TABINE .WORD $AAAA     ;TABLE END
00171  1C53              ;*********************************
00172  1C53              ; SORT TABLE POINTERS
00173  1C53              ;*********************************
00174  1C53  AA AA       SMALLS .WORD $AAAA     ;TABLE START
00175  1C55  AA AA       SMALLP .WORD $AAAA     ;TABLE POINTER
00176  1C57              ;*********************************
00177  1C57              ; SYMBOL TABLE
00178  1C57              ;*********************************
00179  1C57  AA          SYMBOL .BYTE $AA       ;SYMBOL OPTION
00180  1C58  AA AA       SYMBOP .WORD $AAAA     ;TABLE POINTER
00181  1C5A  AA AA       SYMBOS .WORD $AAAA     ;TABLE START
00182  1C5C  AA AA       SYMBOE .WORD $AAAA     ;TABLE END
00183  1C5E              ;*********************************
00184  1C5E              ; UNDEFINED SYMBOL TABLE
00185  1C5E              ;*********************************
00186  1C5E  AA AA       UYMBOP .WORD $AAAA     ;TABLE POINTER
00187  1C60  AA AA       UYMBOS .WORD $AAAA     ;TABLE START
00188  1C62  AA AA       UYMBOE .WORD $AAAA     ;TABLE END
00189  1C64              ;*********************************
00190  1C64              ; TEMP WORKING STORAGE
00191  1C64              ;*********************************
00192  1C64  AA AA       WORKED .WORD $AAAA     ;TWO BYTE OP
00193  1C66  AA AA       WORKER .WORD $AAAA     ;TWO BYTE OP
00194  1C68  AA AA       SAVEP  .WORD $AAAA     ;TWO BYTE OP
00195  1C6A  AA AA       SAVES  .WORD $AAAA     ;TWO BYTE OP
00196  1C6C  AA AA       SAVEE  .WORD $AAAA     ;TWO BYTE OP
00197  1C6E              ;*********************************
00198  1C6E              ; OTHER VARIABLES
00199  1C6E              ;*********************************
00200  1C6E  AA AA       ADRS   .WORD $AAAA
00201  1C70  AA          TEMP   .BYTE $AA
00202  1C71  AA          SAVA   .BYTE $AA
00203  1C72  AA          SAVX   .BYTE $AA
00204  1C73  AA          SAVY   .BYTE $AA
00205  1C74              ;*********************************
00206  1C74              ; PRINTER OUTPUT STORAGE
00207  1C74              ;*********************************
00208  1C74  AA AA       PAGECT .WORD $AAAA     ;PAGE COUNT
00209  1C76  AA          LISTCT .BYTE $AA       ;LINE COUNT
00210  1C77  AA AA       LINECT .WORD $AAAA     ;LINE COUNT
00211  1C79  AA AA       ERRCT  .WORD $AAAA     ;ERROR COUNT
00212  1C7B              ;*********************************
00213  1C7B              ; INPUT BUFFER
00214  1C7B              ;*********************************
00215  1C7B              BUF    = *
00216  1C7B  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00216  1C7C  00 
00216  1C7D  00 
00216  1C7E  00 
00216  1C7F  00 
00216  1C80  00 
00216  1C81  00 






DISASSEMBLER128......PAGE 0006

LINE# LOC   CODE        LINE


00216  1C82  00 
00216  1C83  00 
00216  1C84  00 
00217  1C85  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00217  1C86  00 
00217  1C87  00 
00217  1C88  00 
00217  1C89  00 
00217  1C8A  00 
00217  1C8B  00 
00217  1C8C  00 
00217  1C8D  00 
00217  1C8E  00 
00218  1C8F  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00218  1C90  00 
00218  1C91  00 
00218  1C92  00 
00218  1C93  00 
00218  1C94  00 
00218  1C95  00 
00218  1C96  00 
00218  1C97  00 
00218  1C98  00 
00219  1C99  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00219  1C9A  00 
00219  1C9B  00 
00219  1C9C  00 
00219  1C9D  00 
00219  1C9E  00 
00219  1C9F  00 
00219  1CA0  00 
00219  1CA1  00 
00219  1CA2  00 
00220  1CA3  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00220  1CA4  00 
00220  1CA5  00 
00220  1CA6  00 
00220  1CA7  00 
00220  1CA8  00 
00220  1CA9  00 
00220  1CAA  00 
00220  1CAB  00 
00220  1CAC  00 
00221  1CAD  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00221  1CAE  00 
00221  1CAF  00 
00221  1CB0  00 
00221  1CB1  00 
00221  1CB2  00 
00221  1CB3  00 
00221  1CB4  00 
00221  1CB5  00 
00221  1CB6  00 
00222  1CB7  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00222  1CB8  00 






DISASSEMBLER128......PAGE 0007

LINE# LOC   CODE        LINE


00222  1CB9  00 
00222  1CBA  00 
00222  1CBB  00 
00222  1CBC  00 
00222  1CBD  00 
00222  1CBE  00 
00222  1CBF  00 
00222  1CC0  00 
00223  1CC1  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00223  1CC2  00 
00223  1CC3  00 
00223  1CC4  00 
00223  1CC5  00 
00223  1CC6  00 
00223  1CC7  00 
00223  1CC8  00 
00223  1CC9  00 
00223  1CCA  00 
00224  1CCB  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00224  1CCC  00 
00224  1CCD  00 
00224  1CCE  00 
00224  1CCF  00 
00224  1CD0  00 
00224  1CD1  00 
00224  1CD2  00 
00224  1CD3  00 
00224  1CD4  00 
00225  1CD5  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00225  1CD6  00 
00225  1CD7  00 
00225  1CD8  00 
00225  1CD9  00 
00225  1CDA  00 
00225  1CDB  00 
00225  1CDC  00 
00225  1CDD  00 
00225  1CDE  00 
00226  1CDF              ;*********************************
00227  1CDF              ; FILE NAME BUFFER
00228  1CDF              ;*********************************
00229  1CDF  AA AA       LINEFL .WORD $AAAA
00230  1CE1  AA          VERSON .BYTE $AA
00231  1CE2  AA          NCHARS .BYTE $AA
00232  1CE3              NBUF   = *
00233  1CE3  30 3A              .BYTE '0:'
00234  1CE5  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
00234  1CE6  AA 
00234  1CE7  AA 
00234  1CE8  AA 
00234  1CE9  AA 
00234  1CEA  AA 
00234  1CEB  AA 
00234  1CEC  AA 
00235  1CED  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA






DISASSEMBLER128......PAGE 0008

LINE# LOC   CODE        LINE


00235  1CEE  AA 
00235  1CEF  AA 
00235  1CF0  AA 
00235  1CF1  AA 
00235  1CF2  AA 
00235  1CF3  AA 
00235  1CF4  AA 
00236  1CF5  AA                 .BYTE $AA,$AA,$AA,$AA
00236  1CF6  AA 
00236  1CF7  AA 
00236  1CF8  AA 
00237  1CF9              ;*********************************
00238  1CF9              ; SYMBOL TABLE BUFFER
00239  1CF9              ;*********************************
00240  1CF9              SYMBUF = *
00241  1CF9  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,
$AA
00241  1CFA  AA 
00241  1CFB  AA 
00241  1CFC  AA 
00241  1CFD  AA 
00241  1CFE  AA 
00241  1CFF  AA 
00241  1D00  AA 
00241  1D01  AA 
00241  1D02  AA 
00242  1D03              ;*********************************
00243  1D03              ; DATA TABLE
00244  1D03              ;*********************************
00245  1D03  AA AA       EAS    .WORD $AAAA
00246  1D05  AA          TEXTER .BYTE $AA
00247  1D06  AA AA       CDATA  .WORD $AAAA
00248  1D08  AA AA       NDATA  .WORD $AAAA
00249  1D0A  AA AA       DATABP .WORD $AAAA     ;DATA POINT
00250  1D0C  AA AA       DATABS .WORD $AAAA     ;DATA START
00251  1D0E  AA AA       DATABE .WORD $AAAA     ;DATA END
00252  1D10              ;*********************************
00253  1D10              ; DATA TABLE
00254  1D10              ;*********************************
00255  1D10  AA          TDATA  .BYTE $AA
00256  1D11              ;*********************************
00257  1D11                     *=*+$0100
00258  1E11              ;*********************************
00259  1E11  0D          MPASS  .BYTE $0D,'PASS',0
00259  1E12  50 41 
00259  1E16  00 
00260  1E17  0D          PMSG   .BYTE $0D,$12,' PAUSE ',$92,$0D,0
00260  1E18  12 
00260  1E19  20 50 
00260  1E20  92 
00260  1E21  0D 
00260  1E22  00 
00261  1E23  45 52       MSGERR .BYTE 'ERRORS = ',0
00261  1E2C  00 
00262  1E2D  45 4E       MSGDIS .BYTE 'END OF DISASSEMBLY',0
00262  1E3F  00 






DISASSEMBLER128......PAGE 0009

LINE# LOC   CODE        LINE


00263  1E40              ;*********************************
00264  1E40              ; INITIALIZE DISASSEMBLER
00265  1E40              ;*********************************
00266  1E40  A2 FF       DISASS LDX #$FF
00267  1E42  9A                 TXS
00268  1E43  D8                 CLD
00269  1E44  20 91 1F           JSR DOP         ;GET OPTIONS
00270  1E47  20 B8 2E           JSR INITIN      ;INIT POINTERS
00271  1E4A  A9 31              LDA #'1'        ;PASS ONE
00272  1E4C  8D 31 1C           STA PASS        ;SET PASS INDICATOR
00273  1E4F              ;*********************************
00274  1E4F              ; DISASSEMBLER LOOP
00275  1E4F              ;*********************************
00276  1E4F  20 A4 2D    DISA   JSR INTSA       ;SET SA
00277  1E52  A9 00              LDA #00         ;ZERO BYTE
00278  1E54  8D 06 1D           STA CDATA       ;SET TABLE NUMBER
00279  1E57  A9 11              LDA #<MPASS     ;PASS MSG
00280  1E59  A0 1E              LDY #>MPASS     ;
00281  1E5B  20 0E 28           JSR STRPNT      ;PRINT IT
00282  1E5E  AD 31 1C           LDA PASS        ;GET PASS
00283  1E61  20 64 28           JSR PCHAR       ;PRINT NUMBER
00284  1E64  20 47 2D           JSR CRLF        ;CR
00285  1E67              ;*********************************
00286  1E67  AD 31 1C           LDA PASS        ;GET PASS
00287  1E6A  CD 34 1C           CMP CPASS       ;IS IT LAST
00288  1E6D  F0 0E              BEQ DISB        ;IF SO PRINT
00289  1E6F  CD 33 1C           CMP EPASS       ;IS IT EXTERNAL
00290  1E72  D0 3A              BNE DLOOP       ;IF NOT GO ON
00291  1E74  20 D7 2E           JSR SAVINT      ;SAVE INTERNAL
00292  1E77  20 8B 37           JSR EQUINT      ;SET EQUATES
00293  1E7A  4C AE 1E           JMP DLOOP       ;GO ON
00294  1E7D              ;*********************************
00295  1E7D  A9 01       DISB   LDA #$01        ;ONE BYTE
00296  1E7F  8D 77 1C           STA LINECT      ;SET LINE # TO 1
00297  1E82  8D 74 1C           STA PAGECT      ;SET PAGE TO 1
00298  1E85  A9 00              LDA #$00        ;ZERO BYTE
00299  1E87  8D 78 1C           STA LINECT+1    ;SET LINE # TO 1
00300  1E8A  8D 75 1C           STA PAGECT+1    ;SET PAGE TO 1
00301  1E8D  8D 76 1C           STA LISTCT      ;SET LIST TO 0
00302  1E90  8D 79 1C           STA ERRCT       ;SET ERROR TO 0
00303  1E93  8D 7A 1C           STA ERRCT+1     ;SET ERROR TO 0
00304  1E96  8D DF 1C           STA LINEFL      ;SET LINE TO 0
00305  1E99  8D E0 1C           STA LINEFL+1    ;SET LINE TO 0
00306  1E9C  AD 39 1C           LDA OUTPUT      ;GET OUTPUT
00307  1E9F  8D 38 1C           STA DEVICE      ;SET OUTPUT
00308  1EA2              ;*********************************
00309  1EA2  20 CD 28           JSR HEADER      ;PRINT HEADER
00310  1EA5  20 CF 21           JSR OFILED      ;OPEN DISK FILE
00311  1EA8  20 8F 2C           JSR ORGIN       ;PRINT ORGIN LABEL
00312  1EAB  20 96 38           JSR EQUPRT      ;PRINT EQUATE
00313  1EAE              ;********************************
00314  1EAE  20 D1 29    DLOOP  JSR DSLINE      ;DIS ONE LINE
00315  1EB1  B0 2C              BCS NEXTP       ;IF EA STOP
00316  1EB3  20 D8 26           JSR LINECK      ;LINE COUNT
00317  1EB6  20 E1 FF           JSR STOP        ;CHECK STOP






DISASSEMBLER128......PAGE 0010

LINE# LOC   CODE        LINE


00318  1EB9  F0 57              BEQ QUITS       ;IF SO QUIT
00319  1EBB  20 E4 FF           JSR GETIN       ;GET KEY
00320  1EBE  F0 EE              BEQ DLOOP       ;IF NONE NEXT
00321  1EC0  C9 20              CMP #' '          ;IS IT A SPACE
00322  1EC2  D0 EA              BNE DLOOP       ;IF NOT NEXT
00323  1EC4              ;*********************************
00324  1EC4              ; PAUSE LISTING
00325  1EC4              ;********************************
00326  1EC4  AD 38 1C           LDA DEVICE
00327  1EC7  48                 PHA
00328  1EC8  A9 03              LDA #$03
00329  1ECA  8D 38 1C           STA DEVICE
00330  1ECD  A9 17              LDA #<PMSG
00331  1ECF  A0 1E              LDY #>PMSG
00332  1ED1  20 0E 28           JSR STRPNT
00333  1ED4  68                 PLA
00334  1ED5  8D 38 1C           STA DEVICE
00335  1ED8  20 E4 FF    PAUSE  JSR GETIN       ;PAUSE FOR KEY
00336  1EDB  F0 FB              BEQ PAUSE       ;
00337  1EDD  D0 CF              BNE DLOOP       ;NEXT LINE
00338  1EDF              ;********************************
00339  1EDF  EE 31 1C    NEXTP  INC PASS        ;INC PASS
00340  1EE2  AD 31 1C           LDA PASS        ;GET PASS
00341  1EE5  CD 34 1C           CMP CPASS       ;LAST PASS?
00342  1EE8  90 1F              BCC DISFUL      ;IF LESS AGAIN
00343  1EEA  D0 20              BNE DISC        ;FINISH
00344  1EEC  AD 3A 1C           LDA WINDOW      ;WINDOW FLAG
00345  1EEF  F0 18              BEQ DISFUL      ;FULL OUTPUT
00346  1EF1              ;*********************************
00347  1EF1              ; WINDOWED OUTPUT
00348  1EF1              ;*********************************
00349  1EF1  AD 49 1C           LDA SAOUT       ;
00350  1EF4  8D 3D 1C           STA SA          ;
00351  1EF7  AD 4A 1C           LDA SAOUT+1     ;
00352  1EFA  8D 3E 1C           STA SA+1        ;
00353  1EFD  AD 4B 1C           LDA EAOUT       ;
00354  1F00  8D 3F 1C           STA EA          ;
00355  1F03  AD 4C 1C           LDA EAOUT+1     ;
00356  1F06  8D 40 1C           STA EA+1        ;
00357  1F09              ;*********************************
00358  1F09  4C 4F 1E    DISFUL JMP DISA        ;LAST PASS
00359  1F0C  20 77 2D    DISC   JSR INCSL
00360  1F0F  20 A5 2C           JSR EFILE       ;END FILE MSG
00361  1F12              ;*********************************
00362  1F12  AD 38 1C    QUITS  LDA DEVICE      ;CHECK DEV
00363  1F15  29 08              AND #$08        ;DISK FILE?
00364  1F17  F0 10              BEQ QUTERR      ;IF NOT BRANCH
00365  1F19  A9 08              LDA #$08        ;DISK
00366  1F1B  20 C3 FF           JSR CLOSE       ;CLOSE IT
00367  1F1E  AD 39 1C           LDA OUTPUT      ;GET OUTPUT
00368  1F21  29 07              AND #07         ;MASK DISK
00369  1F23  8D 39 1C           STA OUTPUT      ;RESET OUTPUT
00370  1F26  8D 38 1C           STA DEVICE      ;RESET OUTPUT
00371  1F29              ;*********************************
00372  1F29              ; PRINT ERRORS






DISASSEMBLER128......PAGE 0011

LINE# LOC   CODE        LINE


00373  1F29              ;*********************************
00374  1F29  AD 39 1C    QUTERR LDA OUTPUT
00375  1F2C  09 03              ORA #$03
00376  1F2E  8D 39 1C           STA OUTPUT
00377  1F31  8D 38 1C           STA DEVICE
00378  1F34  20 51 27           JSR NEWLIN
00379  1F37  20 51 27           JSR NEWLIN
00380  1F3A  A9 23              LDA #<MSGERR
00381  1F3C  A0 1E              LDY #>MSGERR
00382  1F3E  20 0E 28           JSR STRPNT
00383  1F41  AE 79 1C           LDX ERRCT
00384  1F44  AD 7A 1C           LDA ERRCT+1
00385  1F47  20 2A 28           JSR PRTNUM
00386  1F4A              ;*********************************
00387  1F4A  AD 38 1C           LDA DEVICE      ;CHECK DEV
00388  1F4D  29 04              AND #$04        ;PRINTER?
00389  1F4F  F0 13              BEQ DONED       ;IF NOT DONE
00390  1F51  A9 04              LDA #$04        ;DEVICE 4
00391  1F53  8D 39 1C           STA OUTPUT      ;SET DEVICE
00392  1F56  8D 38 1C           STA DEVICE      ;SET DEVICE
00393  1F59  20 89 30           JSR INTPRT      ;PRINT INTABLE
00394  1F5C  A9 07              LDA #$07        ;DEVICE 3 AND 4
00395  1F5E  8D 38 1C           STA DEVICE      ;SET DEVICE
00396  1F61  8D 39 1C           STA OUTPUT      ;SET DEVICE
00397  1F64  20 51 27    DONED  JSR NEWLIN      ;NEWLINE
00398  1F67  20 51 27           JSR NEWLIN      ;NEWLINE
00399  1F6A  A9 2D              LDA #<MSGDIS    ;END MSG
00400  1F6C  A0 1E              LDY #>MSGDIS
00401  1F6E  20 0E 28           JSR STRPNT      ;PRINT IT
00402  1F71  20 51 27           JSR NEWLIN      ;NEW LINE
00403  1F74  AD 38 1C           LDA DEVICE      ;CHECK DEVICE
00404  1F77  29 04              AND #$04        ;PRINTER
00405  1F79  F0 08              BEQ DONE        ;
00406  1F7B  20 9B 28           JSR FINISH      ;FINISH PAGE
00407  1F7E  A9 04              LDA #$04        ;PRINTER
00408  1F80  20 C3 FF           JSR CLOSE       ;CLOSE FILE
00409  1F83              ;*********************************
00410  1F83  20 CC FF    DONE   JSR CLRCHN      ;RESET I/O
00411  1F86  20 5B 29           JSR SCRON       ;TURN SCREEN ON
00412  1F89                     
00413  1F89  A9 00              LDA #$00        ;BANK 15
00414  1F8B  8D 00 FF           STA $FF00       ; 
00415  1F8E                     
00416  1F8E  4C 37 4D           JMP WREADY      ;RETURN
00417  1F91              ;*********************************
00418  1F91              ;.FIL 0:OPTION.ASM
00419  1F91              ;*********************************
00420  1F91              .END
00421  1F91              ;*********************************
00422  1F91              .LIB   OPTION.ASM
00423  1F91              ;*********************************
00424  1F91              ; FILE OPTION.ASM
00425  1F91              ;*********************************
00426  1F91              ;
00427  1F91              ;        DISASSEMBLER128






DISASSEMBLER128......PAGE 0012

LINE# LOC   CODE        LINE


00428  1F91              ;    SYMBOLIC DISASSEMBLER
00429  1F91              ;       BY DENTON MARLOWE
00430  1F91              ;
00431  1F91              ;  (C)1986 BY DENTON MARLOWE
00432  1F91              ;
00433  1F91              ;*********************************
00434  1F91              ; DISASSEMBLER OPTIONS
00435  1F91              ;*********************************
00436  1F91  A9 03       DOP    LDA #$03        ;DEVICE #3 SCREEN
00437  1F93  8D 38 1C           STA DEVICE      ;CURRENT OUTPUT
00438  1F96  A9 00              LDA #$00        ;NO DEVICES
00439  1F98  8D 39 1C           STA OUTPUT      ;FINAL OUTPUT
00440  1F9B  A9 07              LDA #<MSG       ;START UP MSG
00441  1F9D  A0 24              LDY #>MSG
00442  1F9F  20 0E 28           JSR STRPNT      ;PRINT IT
00443  1FA2              ;*********************************
00444  1FA2              ; READ IN DISK FILE ?
00445  1FA2              ;*********************************
00446  1FA2  A9 54              LDA #<MSF1
00447  1FA4  A0 24              LDY #>MSF1
00448  1FA6  20 0E 28           JSR STRPNT
00449  1FA9  20 6F 27           JSR INSTNG
00450  1FAC  D0 03              BNE PFILE0
00451  1FAE  4C FE 20           JMP STARTS
00452  1FB1  A2 00       PFILE0 LDX #$00
00453  1FB3  BD A5 24    PFILE1 LDA PROGM,X
00454  1FB6  99 7B 1C           STA BUF,Y
00455  1FB9  C8                 INY
00456  1FBA  E8                 INX
00457  1FBB  E0 04              CPX #$04
00458  1FBD  D0 F4              BNE PFILE1
00459  1FBF  8C 71 1C           STY SAVA
00460  1FC2  20 DD 20           JSR INITD
00461  1FC5  20 AB 20           JSR PRFILE
00462  1FC8              ;*********************************
00463  1FC8              ; READ IN FILE FOR SA AND EA
00464  1FC8              ;*********************************
00465  1FC8  A2 08              LDX #$08        ;FILE #8
00466  1FCA  20 C6 FF           JSR CHKIN       ;INPUT FILE
00467  1FCD  20 CF FF           JSR CHRIN       ;GET LOW BYTE SA
00468  1FD0  8D 3D 1C           STA SA          ;SET START
00469  1FD3  20 CF FF           JSR CHRIN       ;GET HIGH BYTE SA
00470  1FD6  8D 3E 1C           STA SA+1        ;SET START
00471  1FD9  20 A4 2D           JSR INTSA       ;SET END
00472  1FDC              ;*********************************
00473  1FDC  A9 00              LDA #$00        ;ZERO BYTE
00474  1FDE  8D 6E 1C           STA ADRS        ;BYTE COUNTER
00475  1FE1  8D 6F 1C           STA ADRS+1      ;BYTE COUNTER
00476  1FE4  20 CF FF    PROGRD JSR CHRIN       ;INPUT BYTE
00477  1FE7  20 B7 FF           JSR READST      ;READ STATUS
00478  1FEA  D0 0D              BNE PROGED      ;IF NOT ZERO END
00479  1FEC  20 77 2D           JSR INCSL       ;INC END ADDRESS
00480  1FEF  EE 6E 1C           INC ADRS        ;INC BYTE COUNT
00481  1FF2  D0 03              BNE *+5         ;
00482  1FF4  EE 6F 1C           INC ADRS+1      ;






DISASSEMBLER128......PAGE 0013

LINE# LOC   CODE        LINE


00483  1FF7  D0 EB              BNE PROGRD      ;NEXT BYTE
00484  1FF9  AD 41 1C    PROGED LDA SELECT      ;
00485  1FFC  8D 3F 1C           STA EA          ;
00486  1FFF  AD 42 1C           LDA SELECT+1    ;
00487  2002  8D 40 1C           STA EA+1        ;
00488  2005              ;*********************************
00489  2005  A9 08              LDA #$08        ;FILE #8
00490  2007  20 C3 FF           JSR CLOSE       ;CLOSE IT
00491  200A  20 CC FF           JSR CLRCHN      ;RESET I/O
00492  200D              ;*********************************
00493  200D              ; PRINT PROGRAM LOAD ADDRESS
00494  200D              ; AND END ADDRESS
00495  200D              ;*********************************
00496  200D  A9 70              LDA #<MSF2
00497  200F  A0 24              LDY #>MSF2
00498  2011  20 0E 28           JSR STRPNT
00499  2014  AD 3D 1C           LDA SA
00500  2017  8D 64 1C           STA WORKED
00501  201A  AD 3E 1C           LDA SA+1
00502  201D  8D 65 1C           STA WORKED+1
00503  2020  20 16 2D           JSR PWORKD
00504  2023              ;
00505  2023  A9 2D              LDA #'-'
00506  2025              ;
00507  2025  20 64 28           JSR PCHAR
00508  2028  20 24 2D           JSR DOLLAR
00509  202B  20 0A 2D           JSR PSELEC
00510  202E  20 47 2D           JSR CRLF
00511  2031              ;*********************************
00512  2031              ; CALCULATE BUFFER ADDRESS
00513  2031              ;*********************************
00514  2031  A5 39              LDA MEMSIZ
00515  2033  8D 41 1C           STA SELECT
00516  2036  A5 3A              LDA MEMSIZ+1
00517  2038  8D 42 1C           STA SELECT+1
00518  203B  20 98 2D           JSR DECSL
00519  203E  38                 SEC
00520  203F  AD 41 1C           LDA SELECT
00521  2042  ED 6E 1C           SBC ADRS
00522  2045  8D 41 1C           STA SELECT
00523  2048  AD 42 1C           LDA SELECT+1
00524  204B  ED 6F 1C           SBC ADRS+1
00525  204E  8D 42 1C           STA SELECT+1
00526  2051              ;*********************************
00527  2051              ; CALCULATE ADDRESS OFFSET
00528  2051              ;*********************************
00529  2051  38                 SEC
00530  2052  AD 41 1C           LDA SELECT
00531  2055  ED 3D 1C           SBC SA
00532  2058  8D 43 1C           STA OFFSET
00533  205B  8D 64 1C           STA WORKED
00534  205E  AD 42 1C           LDA SELECT+1
00535  2061  ED 3E 1C           SBC SA+1
00536  2064  8D 44 1C           STA OFFSET+1
00537  2067  8D 65 1C           STA WORKED+1






DISASSEMBLER128......PAGE 0014

LINE# LOC   CODE        LINE


00538  206A  A9 00              LDA #<MSD4A
00539  206C  A0 25              LDY #>MSD4A
00540  206E  20 0E 28           JSR STRPNT
00541  2071  20 16 2D           JSR PWORKD
00542  2074  20 47 2D           JSR CRLF
00543  2077              ;*********************************
00544  2077              ; OPEN FILE AND READ PRG INTO BUF
00545  2077              ;*********************************
00546  2077  20 AB 20           JSR PRFILE      ;OPEN FILE
00547  207A  A2 08              LDX #$08        ;FILE #8
00548  207C  20 C6 FF           JSR CHKIN       ;INPUT FILE
00549  207F  20 CF FF           JSR CHRIN       ;GET LOW BYTE SA
00550  2082  20 CF FF           JSR CHRIN       ;GET HIGH BYTE SA
00551  2085  20 CF FF    PRO2RD JSR CHRIN       ;INPUT BYTE
00552  2088              ;
00553  2088  AE 41 1C           LDX SELECT      ;LOW BYTE POINTER
00554  208B  86 FB              STX ZEROUR      ;ZERO PAGE
00555  208D  AE 42 1C           LDX SELECT+1    ;HIGH BYTE POINTER
00556  2090  86 FC              STX ZEROUR+1    ;ZERO PAGE
00557  2092  A2 01              LDX #$01        ;RAM BANK 1
00558  2094  A0 00              LDY #$00        ;OFFSET
00559  2096  91 FB              STA (ZEROUR),Y  ;STORE BYTE
00560  2098              ; JSR INDSTA
00561  2098              ; 
00562  2098  20 77 2D           JSR INCSL       ;INC POINTER
00563  209B  20 B7 FF           JSR READST      ;READ STATUS
00564  209E  F0 E5              BEQ PRO2RD      ;NEXT BYTE
00565  20A0  A9 08              LDA #$08        ;FILE #8
00566  20A2  20 C3 FF           JSR CLOSE       ;CLOSE IT
00567  20A5  20 CC FF           JSR CLRCHN      ;RESET I/O
00568  20A8  4C 40 21           JMP WINDOP      ;WINDOW OPTION
00569  20AB              ;*********************************
00570  20AB              ; OPEN PROGRAM FILE
00571  20AB              ;*********************************
00572  20AB  AD 71 1C    PRFILE LDA SAVA
00573  20AE  A2 7B              LDX #<BUF
00574  20B0  A0 1C              LDY #>BUF
00575  20B2  20 BD FF           JSR SETNAM
00576  20B5  A9 08              LDA #$08
00577  20B7  A8                 TAY
00578  20B8  AA                 TAX
00579  20B9  20 BA FF           JSR SETLFS
00580  20BC              ;
00581  20BC  A9 00              LDA #$00        ;LOAD INTO BANK 1
00582  20BE  A2 00              LDX #$00        ;PROGRAM IN BANK 0
00583  20C0  20 68 FF           JSR SETBNK
00584  20C3              ;
00585  20C3  20 C0 FF           JSR OPEN
00586  20C6  20 17 27           JSR DISERR
00587  20C9  90 11              BCC PROGOK
00588  20CB  A9 08              LDA #$08
00589  20CD  20 C3 FF           JSR CLOSE
00590  20D0  68                 PLA
00591  20D1  68                 PLA
00592  20D2  68                 PLA






DISASSEMBLER128......PAGE 0015

LINE# LOC   CODE        LINE


00593  20D3  68                 PLA
00594  20D4                     
00595  20D4  A9 00              LDA #$00        ;BANK 15
00596  20D6  8D 00 FF           STA $FF00       ; 
00597  20D9                     
00598  20D9                     
00599  20D9  4C 37 4D           JMP WREADY
00600  20DC              ;*********************************
00601  20DC  60          PROGOK RTS
00602  20DD              ;*********************************
00603  20DD              ; INIT DISK
00604  20DD              ;*********************************
00605  20DD  A9 02       INITD  LDA #$02
00606  20DF  A0 24              LDY #>INIT
00607  20E1  A2 A9              LDX #<INIT
00608  20E3  20 BD FF           JSR SETNAM
00609  20E6  A9 0F              LDA #$0F
00610  20E8  A2 08              LDX #$08
00611  20EA  A0 0F              LDY #$0F
00612  20EC  20 BA FF           JSR SETLFS
00613  20EF              ;
00614  20EF  A9 00              LDA #$00        ;LOAD INTO BANK 1
00615  20F1  A2 00              LDX #$00        ;PROGRAM IN BANK 0
00616  20F3  20 68 FF           JSR SETBNK
00617  20F6              ;
00618  20F6  20 C0 FF           JSR OPEN
00619  20F9  A9 0F              LDA #$0F
00620  20FB  4C C3 FF           JMP CLOSE
00621  20FE              ;*********************************
00622  20FE              ; GET START ADDRESS
00623  20FE              ;*********************************
00624  20FE  A9 C4       STARTS LDA #<MSD1
00625  2100  A0 24              LDY #>MSD1
00626  2102  20 0E 28           JSR STRPNT
00627  2105  20 7E 27           JSR GETWRD
00628  2108  AD 6E 1C           LDA ADRS
00629  210B  8D 3D 1C           STA SA
00630  210E  AD 6F 1C           LDA ADRS+1
00631  2111  8D 3E 1C           STA SA+1
00632  2114              ;*********************************
00633  2114              ; GET END ADDRESS
00634  2114              ;*********************************
00635  2114  A9 D6              LDA #<MSD2
00636  2116  A0 24              LDY #>MSD2
00637  2118  20 0E 28           JSR STRPNT
00638  211B  20 7E 27           JSR GETWRD
00639  211E  AD 6E 1C           LDA ADRS
00640  2121  8D 3F 1C           STA EA
00641  2124  AD 6F 1C           LDA ADRS+1
00642  2127  8D 40 1C           STA EA+1
00643  212A              ;*********************************
00644  212A              ; ADDRRESS OFFSET
00645  212A              ;*********************************
00646  212A  A9 E6              LDA #<MSD4
00647  212C  A0 24              LDY #>MSD4






DISASSEMBLER128......PAGE 0016

LINE# LOC   CODE        LINE


00648  212E  20 0E 28           JSR STRPNT
00649  2131  20 7E 27           JSR GETWRD
00650  2134  AD 6E 1C           LDA ADRS
00651  2137  8D 43 1C           STA OFFSET
00652  213A  AD 6F 1C           LDA ADRS+1
00653  213D  8D 44 1C           STA OFFSET+1
00654  2140              ;*********************************
00655  2140              ; OUTPUT WINDOW
00656  2140              ;*********************************
00657  2140  A9 13       WINDOP LDA #<MSD5
00658  2142  A0 25              LDY #>MSD5
00659  2144  20 0E 28           JSR STRPNT
00660  2147  20 E3 27           JSR CRNO
00661  214A  B0 30              BCS WIND1
00662  214C  A9 C4              LDA #<MSD1
00663  214E  A0 24              LDY #>MSD1
00664  2150  20 0E 28           JSR STRPNT
00665  2153  20 7E 27           JSR GETWRD
00666  2156  AD 6E 1C           LDA ADRS
00667  2159  8D 49 1C           STA SAOUT
00668  215C  AD 6F 1C           LDA ADRS+1
00669  215F  8D 4A 1C           STA SAOUT+1
00670  2162  A9 D6              LDA #<MSD2
00671  2164  A0 24              LDY #>MSD2
00672  2166  20 0E 28           JSR STRPNT
00673  2169  20 7E 27           JSR GETWRD
00674  216C  AD 6E 1C           LDA ADRS
00675  216F  8D 4B 1C           STA EAOUT
00676  2172  AD 6F 1C           LDA ADRS+1
00677  2175  8D 4C 1C           STA EAOUT+1
00678  2178  A9 FF              LDA #$FF
00679  217A  30 02              BMI WIND2
00680  217C  A9 00       WIND1  LDA #$00
00681  217E  8D 3A 1C    WIND2  STA WINDOW
00682  2181              ;*********************************
00683  2181              ; SETUP GOBAL POINTER
00684  2181              ;*********************************
00685  2181  AD 3D 1C           LDA SA
00686  2184  8D 45 1C           STA SAGOL
00687  2187  AD 3E 1C           LDA SA+1
00688  218A  8D 46 1C           STA SAGOL+1
00689  218D  AD 3F 1C           LDA EA
00690  2190  8D 47 1C           STA EAGOL
00691  2193  AD 40 1C           LDA EA+1
00692  2196  8D 48 1C           STA EAGOL+1
00693  2199              ;*********************************
00694  2199              ; SOURCE FILE OUTPUT?
00695  2199              ;*********************************
00696  2199  A9 84       OUFILE LDA #<MSG1
00697  219B  A0 24              LDY #>MSG1
00698  219D  20 0E 28           JSR STRPNT
00699  21A0              ;*********************************
00700  21A0  A9 00              LDA #$00
00701  21A2  8D E2 1C           STA NCHARS
00702  21A5  20 6F 27           JSR INSTNG






DISASSEMBLER128......PAGE 0017

LINE# LOC   CODE        LINE


00703  21A8  F0 1A              BEQ NOFILE
00704  21AA  A9 30              LDA #'0'
00705  21AC  8D E1 1C           STA VERSON
00706  21AF  8C E2 1C           STY NCHARS
00707  21B2  A2 00              LDX #$00
00708  21B4  BD 7B 1C    GFILE0 LDA BUF,X
00709  21B7  9D E3 1C           STA NBUF,X
00710  21BA  E8                 INX
00711  21BB  EC E2 1C           CPX NCHARS
00712  21BE  D0 F4              BNE GFILE0
00713  21C0              ;*********************************
00714  21C0  A9 08       FILEOK LDA #$08
00715  21C2  D0 02              BNE FILE
00716  21C4  A9 00       NOFILE LDA #$00
00717  21C6  0D 39 1C    FILE   ORA OUTPUT
00718  21C9  8D 39 1C           STA OUTPUT
00719  21CC  4C 31 22           JMP PRTGET
00720  21CF              ;*********************************
00721  21CF              ;     OPEN SOURCE DISK FILE
00722  21CF              ;*********************************
00723  21CF  AC E2 1C    OFILED LDY NCHARS
00724  21D2  F0 03              BEQ NOID
00725  21D4  20 DD 20           JSR INITD
00726  21D7  20 4B 29    NOID   JSR SCROFF
00727  21DA              ;*********************************
00728  21DA  AC E2 1C    OFILE  LDY NCHARS
00729  21DD  F0 51              BEQ OFILE4
00730  21DF  AD E1 1C           LDA VERSON
00731  21E2  C9 30              CMP #'0'
00732  21E4  F0 07              BEQ OFILE1
00733  21E6  AD E1 1C           LDA VERSON
00734  21E9  99 E3 1C           STA NBUF,Y
00735  21EC  C8                 INY
00736  21ED  EE E1 1C    OFILE1 INC VERSON
00737  21F0  A2 00              LDX #$00
00738  21F2  BD A1 24    OFILE2 LDA WRITE,X
00739  21F5  99 E3 1C           STA NBUF,Y
00740  21F8  C8                 INY
00741  21F9  E8                 INX
00742  21FA  E0 04              CPX #$04
00743  21FC  D0 F4              BNE OFILE2
00744  21FE  98                 TYA
00745  21FF  A0 1C              LDY #>NBUF
00746  2201  A2 E3              LDX #<NBUF
00747  2203  20 BD FF           JSR SETNAM
00748  2206  A9 08              LDA #$08
00749  2208  AA                 TAX
00750  2209  A8                 TAY
00751  220A  20 BA FF           JSR SETLFS
00752  220D              ;
00753  220D  A9 00              LDA #$00        ;LOAD INTO BANK 1
00754  220F  A2 00              LDX #$00        ;PROGRAM IN BANK 0
00755  2211  20 68 FF           JSR SETBNK
00756  2214              ;
00757  2214  20 C0 FF           JSR OPEN






DISASSEMBLER128......PAGE 0018

LINE# LOC   CODE        LINE


00758  2217  20 17 27           JSR DISERR
00759  221A  90 14              BCC OFILE4
00760  221C              ;*********************************
00761  221C              ;  CLOSE OUT FILE ON ERROR
00762  221C              ;*********************************
00763  221C  A9 08       OFILE3 LDA #$08
00764  221E  20 C3 FF           JSR CLOSE
00765  2221  20 CC FF           JSR CLRCHN
00766  2224  68                 PLA
00767  2225  68                 PLA
00768  2226  68                 PLA
00769  2227  68                 PLA
00770  2228                     
00771  2228  A9 00              LDA #$00        ;BANK 15
00772  222A  8D 00 FF           STA $FF00       ; 
00773  222D                     
00774  222D  4C 37 4D           JMP WREADY
00775  2230  60          OFILE4 RTS
00776  2231              ;*********************************
00777  2231              ; GET PRINTER OPTION
00778  2231              ;*********************************
00779  2231  A9 AB       PRTGET LDA #<MSG2
00780  2233  A0 24              LDY #>MSG2
00781  2235  20 0E 28           JSR STRPNT
00782  2238  20 D6 27           JSR CRYS
00783  223B  B0 2D              BCS NOPRT
00784  223D  A9 00              LDA #$00
00785  223F  20 BD FF           JSR SETNAM
00786  2242  A9 04              LDA #$04
00787  2244  A2 04              LDX #$04
00788  2246  A0 00              LDY #$00
00789  2248  20 BA FF           JSR SETLFS
00790  224B              ;
00791  224B  A9 00              LDA #$00        ;LOAD INTO BANK 1
00792  224D  A2 00              LDX #$00        ;PROGRAM IN BANK 0
00793  224F  20 68 FF           JSR SETBNK
00794  2252              ;
00795  2252  20 C0 FF           JSR OPEN
00796  2255  A2 04              LDX #$04
00797  2257  20 C9 FF           JSR CHKOUT
00798  225A  20 B7 FF           JSR READST
00799  225D  29 80              AND #$80
00800  225F  08                 PHP
00801  2260  20 CC FF           JSR CLRCHN
00802  2263  28                 PLP
00803  2264  30 04              BMI NOPRT
00804  2266  A9 04              LDA #$04
00805  2268  D0 02              BNE PRINT
00806  226A  A9 03       NOPRT  LDA #$03
00807  226C  0D 39 1C    PRINT  ORA OUTPUT
00808  226F  8D 39 1C           STA OUTPUT
00809  2272              ;*********************************
00810  2272              ; GO GET SYMBOLIC OPTION
00811  2272              ;*********************************
00812  2272  20 16 37           JSR SOP






DISASSEMBLER128......PAGE 0019

LINE# LOC   CODE        LINE


00813  2275              ;*********************************
00814  2275              ; GET RELATIVE ADDRESS OPTION
00815  2275              ;*********************************
00816  2275  A9 2F              LDA #<MSR1
00817  2277  A0 25              LDY #>MSR1
00818  2279  20 0E 28           JSR STRPNT
00819  227C  20 D6 27           JSR CRYS
00820  227F  90 04              BCC DOP2
00821  2281  A9 01              LDA #$01
00822  2283  D0 02              BNE DOP3
00823  2285  A9 00       DOP2   LDA #$00
00824  2287  8D 37 1C    DOP3   STA ROPT
00825  228A              ;*********************************
00826  228A              ; GET BIT INSTRUCTION CODING OPTION
00827  228A              ;*********************************
00828  228A  20 9F 43           JSR BITOPT
00829  228D              ;*********************************
00830  228D              ; DATA TABLE OPTION
00831  228D              ;*********************************
00832  228D  AD 5C 1C    AOP    LDA SYMBOE
00833  2290  8D 0A 1D           STA DATABP
00834  2293  8D 0C 1D           STA DATABS
00835  2296  8D 0E 1D           STA DATABE
00836  2299  85 FB              STA ZEROUR
00837  229B  AD 5D 1C           LDA SYMBOE+1
00838  229E  8D 0B 1D           STA DATABP+1
00839  22A1  8D 0D 1D           STA DATABS+1
00840  22A4  8D 0F 1D           STA DATABE+1
00841  22A7  85 FC              STA ZEROUR+1
00842  22A9              ;*********************************
00843  22A9  A9 BD              LDA #<MSAOP
00844  22AB  A0 25              LDY #>MSAOP
00845  22AD  20 0E 28           JSR STRPNT
00846  22B0  20 6F 27           JSR INSTNG
00847  22B3  D0 03              BNE BOP
00848  22B5  4C 3F 23           JMP NOTABS
00849  22B8              ;*********************************
00850  22B8  98          BOP    TYA
00851  22B9  48                 PHA
00852  22BA  20 DD 20           JSR INITD
00853  22BD  68                 PLA
00854  22BE  A8                 TAY
00855  22BF  A2 00              LDX #$00
00856  22C1  BD 86 3A    AFILE  LDA NAMS,X
00857  22C4  99 7B 1C           STA BUF,Y
00858  22C7  C8                 INY
00859  22C8  E8                 INX
00860  22C9  E0 04              CPX #$04
00861  22CB  D0 F4              BNE AFILE
00862  22CD  98                 TYA
00863  22CE  A0 1C              LDY #>BUF
00864  22D0  A2 7B              LDX #<BUF
00865  22D2  20 BD FF           JSR SETNAM
00866  22D5  A9 03              LDA #$03
00867  22D7  A2 08              LDX #$08






DISASSEMBLER128......PAGE 0020

LINE# LOC   CODE        LINE


00868  22D9  A0 03              LDY #$03
00869  22DB  20 BA FF           JSR SETLFS
00870  22DE              ;
00871  22DE  A9 00              LDA #$00        ;LOAD INTO BANK 1
00872  22E0  A2 00              LDX #$00        ;PROGRAM IN BANK 0
00873  22E2  20 68 FF           JSR SETBNK
00874  22E5              ;
00875  22E5  20 C0 FF           JSR OPEN
00876  22E8  20 17 27           JSR DISERR
00877  22EB  B0 1B              BCS AGET1
00878  22ED  A2 03              LDX #$03
00879  22EF  20 C6 FF           JSR CHKIN
00880  22F2              ;*********************************
00881  22F2              ; READ IN DATA TABLE
00882  22F2              ;*********************************
00883  22F2  A0 00              LDY #$00
00884  22F4  20 CF FF           JSR CHRIN
00885  22F7  8D 08 1D           STA NDATA
00886  22FA  F0 0C              BEQ AGET1
00887  22FC  20 CF FF    AGET   JSR CHRIN
00888  22FF  99 10 1D           STA TDATA,Y
00889  2302  C8                 INY
00890  2303  20 B7 FF           JSR READST
00891  2306  F0 F4              BEQ AGET
00892  2308  A9 03       AGET1  LDA #$03
00893  230A  20 C3 FF           JSR CLOSE
00894  230D  20 CC FF           JSR CLRCHN
00895  2310              ;*********************************
00896  2310              ; PRINT DATA TABLE
00897  2310              ;*********************************
00898  2310  AD 08 1D    PRTDAS LDA NDATA
00899  2313  8D 06 1D           STA CDATA
00900  2316  A0 00              LDY #$00
00901  2318  8C 73 1C           STY SAVY
00902  231B  20 47 2D    PRTNEX JSR CRLF
00903  231E  A2 05              LDX #$05
00904  2320  8E 72 1C           STX SAVX
00905  2323  AC 73 1C    PRTDAL LDY SAVY
00906  2326  B9 10 1D           LDA TDATA,Y
00907  2329  20 F8 27           JSR PRBYT
00908  232C  20 59 2D           JSR SPACE
00909  232F  EE 73 1C           INC SAVY
00910  2332  CE 72 1C           DEC SAVX
00911  2335  D0 EC              BNE PRTDAL
00912  2337  CE 06 1D           DEC CDATA
00913  233A  D0 DF              BNE PRTNEX
00914  233C              ;*********************************
00915  233C  4C DC 23           JMP XOP0
00916  233F              ;*********************************
00917  233F              ; READ DATA FOR KEYBOARD
00918  233F              ;*********************************
00919  233F  A9 DC       NOTABS LDA #<MSA1      ;NUMBER OF DATA
00920  2341  A0 25              LDY #>MSA1
00921  2343  20 0E 28           JSR STRPNT
00922  2346  20 7E 27           JSR GETWRD      ;INPUT HEX BYTE






DISASSEMBLER128......PAGE 0021

LINE# LOC   CODE        LINE


00923  2349  AD 6E 1C           LDA ADRS        ;GET BYTE
00924  234C  8D 08 1D           STA NDATA       ;SET NUM TABLES
00925  234F  D0 03              BNE AOPX        ;0 DATA THEN END
00926  2351  4C DC 23           JMP XOP0        ;RETURN
00927  2354  A9 00       AOPX   LDA #$00        ;ZERO OFFSET
00928  2356  8D 06 1D           STA CDATA       ;FIRST TABLE
00929  2359              ;*********************************
00930  2359              ; CALCULATE TABLE OFFSET
00931  2359              ;*********************************
00932  2359  AD 06 1D    AOP1   LDA CDATA       ;GET TABLE NUMBER
00933  235C  0A                 ASL A           ;*2
00934  235D  0A                 ASL A           ;*4
00935  235E  18                 CLC             ;C=0
00936  235F  6D 06 1D           ADC CDATA       ;*5
00937  2362  8D 73 1C           STA SAVY        ;STORE AS OFFSET
00938  2365              ;*********************************
00939  2365  A9 FE              LDA #<MSA2
00940  2367  A0 25              LDY #>MSA2
00941  2369  20 0E 28           JSR STRPNT      ;PRINT MSG
00942  236C  20 7E 27           JSR GETWRD      ;GET ADDRESS
00943  236F  AC 73 1C           LDY SAVY        ;GET OFFSET
00944  2372  AD 6E 1C           LDA ADRS
00945  2375  99 10 1D           STA TDATA,Y
00946  2378  C8                 INY
00947  2379  AD 6F 1C           LDA ADRS+1
00948  237C  99 10 1D           STA TDATA,Y
00949  237F  C8                 INY
00950  2380  8C 73 1C           STY SAVY
00951  2383              ;*********************************
00952  2383              ; END OF DATA TABLE
00953  2383              ;*********************************
00954  2383  A9 16       AOP2   LDA #<MSA3
00955  2385  A0 26              LDY #>MSA3
00956  2387  20 0E 28           JSR STRPNT
00957  238A  20 7E 27           JSR GETWRD      ;GET ADDRESS
00958  238D  AC 73 1C           LDY SAVY
00959  2390  AD 6E 1C           LDA ADRS
00960  2393  99 10 1D           STA TDATA,Y
00961  2396  C8                 INY
00962  2397  AD 6F 1C           LDA ADRS+1
00963  239A  99 10 1D           STA TDATA,Y
00964  239D  C8                 INY
00965  239E  8C 73 1C           STY SAVY
00966  23A1              ;*********************************
00967  23A1              ; GET TYPE OF TABLE
00968  23A1              ;*********************************
00969  23A1  A9 2C              LDA #<MSG5      ;TABLE TYPE
00970  23A3  A0 26              LDY #>MSG5
00971  23A5  20 0E 28           JSR STRPNT
00972  23A8  20 E4 FF    AOP3   JSR GETIN
00973  23AB  F0 FB              BEQ AOP3
00974  23AD  C9 30              CMP #'0'
00975  23AF  F0 14              BEQ ASC
00976  23B1  C9 31              CMP #'1'
00977  23B3  F0 10              BEQ ASC






DISASSEMBLER128......PAGE 0022

LINE# LOC   CODE        LINE


00978  23B5  C9 32              CMP #'2'
00979  23B7  F0 0C              BEQ ASC
00980  23B9  C9 33              CMP #'3'
00981  23BB  F0 08              BEQ ASC
00982  23BD  C9 34              CMP #'4'
00983  23BF  F0 04              BEQ ASC
00984  23C1  C9 53              CMP #'S'
00985  23C3  D0 E3              BNE AOP3
00986  23C5  20 D2 FF    ASC    JSR CHROUT
00987  23C8  AC 73 1C           LDY SAVY
00988  23CB  99 10 1D           STA TDATA,Y
00989  23CE              ;*********************************
00990  23CE  EE 06 1D           INC CDATA       ;INC TABLE COUNT
00991  23D1  AD 06 1D           LDA CDATA       ;GET TABLE COUNT
00992  23D4  CD 08 1D           CMP NDATA       ;ALL TABLES?
00993  23D7  F0 03              BEQ XOP0        ;IF NOT GET MORE
00994  23D9  4C 59 23           JMP AOP1        ;IF NOT GET MORE
00995  23DC              ;*********************************
00996  23DC              ; GET LABEL GENERATION OPTION
00997  23DC              ;*********************************
00998  23DC  A9 98       XOP0   LDA #<MSB4
00999  23DE  A0 26              LDY #>MSB4
01000  23E0  20 0E 28           JSR STRPNT
01001  23E3  20 D6 27           JSR CRYS
01002  23E6  B0 04              BCS XOP1
01003  23E8  A9 01              LDA #$01
01004  23EA  D0 02              BNE XOP2
01005  23EC  A9 00       XOP1   LDA #$00
01006  23EE  8D 36 1C    XOP2   STA XOPT
01007  23F1              ;*********************************
01008  23F1              ; OUTPUT FORMAT OPTION
01009  23F1              ;*********************************
01010  23F1  A9 B8              LDA #<MSB5
01011  23F3  A0 26              LDY #>MSB5
01012  23F5  20 0E 28           JSR STRPNT
01013  23F8  20 D6 27           JSR CRYS
01014  23FB  B0 04              BCS FOP1
01015  23FD  A9 00              LDA #$00
01016  23FF  F0 02              BEQ FOP2
01017  2401  A9 FF       FOP1   LDA #$FF
01018  2403  8D 3B 1C    FOP2   STA FOROPT
01019  2406              ;*********************************
01020  2406  60                 RTS
01021  2407              ;*********************************
01022  2407              ;   COMMAND MESSAGES
01023  2407              ;*********************************
01024  2407  0D          MSG    .BYTE $0D,$0D
01024  2408  0D 
01025  2409  43 42       .BYTE  'CBM RESIDENT DISASSEMBLER'
01026  2422  20 56       .BYTE  ' V080282'
01027  242A  0D          .BYTE  $0D
01028  242B  28 43       .BYTE  '(C) 1982 BY COMMODORE '
01029  2441  42 55       .BYTE  'BUSINESS MACHINES'
01030  2452  0D          .BYTE  $0D
01031  2453  00          .BYTE  0






DISASSEMBLER128......PAGE 0023

LINE# LOC   CODE        LINE


01032  2454              ;*********************************
01033  2454  0D          MSF1   .BYTE $0D
01034  2455  50 52       .BYTE  'PROGRAM FILE (CR OR NAME):'
01035  246F  00          .BYTE  0
01036  2470  0D          MSF2   .BYTE $0D
01037  2471  50 52       .BYTE  'PROGRAM ADDRESS: $'
01038  2483  00          .BYTE  0
01039  2484              ;*********************************
01040  2484  0D          MSG1   .BYTE $0D
01041  2485  45 44       .BYTE  'EDITOR64 FILE (CR OR NAME):'
01042  24A0  00          .BYTE  0
01043  24A1              ;*********************************
01044  24A1  2C 53       WRITE  .BYTE ',S,W'
01045  24A5  2C 50       PROGM  .BYTE ',P,R'
01046  24A9  49 30       INIT   .BYTE 'I0'
01047  24AB              ;*********************************
01048  24AB  0D          MSG2   .BYTE $0D
01049  24AC  48 41       .BYTE  'HARD COPY (Y/CR OR N)? '
01050  24C3  00          .BYTE  0
01051  24C4              ;*********************************
01052  24C4  0D          MSD1   .BYTE $0D
01053  24C5  53 54       .BYTE  'START ADDRESS :$'
01054  24D5  00          .BYTE  0
01055  24D6              ;*********************************
01056  24D6  0D          MSD2   .BYTE $0D
01057  24D7  45 4E       .BYTE  'END ADDRESS :$'
01058  24E5  00          .BYTE  0
01059  24E6              ;*********************************
01060  24E6  0D          MSD4   .BYTE $0D
01061  24E7  41 44       .BYTE  'ADDRESS OFFSET (OR CR):$'
01062  24FF  00          .BYTE  0
01063  2500              ;*********************************
01064  2500  0D          MSD4A  .BYTE $0D
01065  2501  41 44       .BYTE  'ADDRESS OFFSET :$'
01066  2512  00          .BYTE  0
01067  2513              ;*********************************
01068  2513  0D          MSD5   .BYTE $0D
01069  2514  57 49       .BYTE  'WINDOW OUTPUT(Y OR N/CR)? '
01070  252E  00          .BYTE  0
01071  252F              ;*********************************
01072  252F  0D          MSR1   .BYTE $0D
01073  2530  52 45       .BYTE  'RELATIVE BRANCH TO LABEL '
01074  2549  28 59       .BYTE  '(Y/CR OR N)? '
01075  2556  00          .BYTE  0
01076  2557              ;*********************************
01077  2557  0D          MSB1   .BYTE $0D
01078  2558  42 49              .BYTE 'BIT INSTRUCTION CODING'
01079  256E  0D                 .BYTE $0D,$0D
01079  256F  0D 
01080  2570  30 2F              .BYTE '0/CR STANDARD',$0D
01080  257D  0D 
01081  257E  31 20              .BYTE '1     $2C ABS',$0D
01081  258B  0D 
01082  258C  32 20              .BYTE '2     $24 ZP',$0D
01082  2598  0D 






DISASSEMBLER128......PAGE 0024

LINE# LOC   CODE        LINE


01083  2599  33 20              .BYTE '3     $2C AND $24',$0D
01083  25AA  0D 
01084  25AB  0D                 .BYTE $0D
01085  25AC  45 4E              .BYTE 'ENTER BIT CODE: '
01086  25BC  00                 .BYTE 0
01087  25BD              ;*********************************
01088  25BD  0D          MSAOP  .BYTE $0D
01089  25BE  44 41       .BYTE  'DATA TABLE FILE (CR OR NAME):'
01090  25DB  00          .BYTE  0
01091  25DC  0D          MSA1   .BYTE $0D
01092  25DD  4E 55       .BYTE  'NUMBER OF DATA TABLES (OR CR) :$'
01093  25FD  00          .BYTE  0
01094  25FE  0D          MSA2   .BYTE $0D
01095  25FF  54 41       .BYTE  'TABLE START ADDRESS :$'
01096  2615  00          .BYTE  0
01097  2616  0D          MSA3   .BYTE $0D
01098  2617  54 41       .BYTE  'TABLE END ADDRESS :$'
01099  262B  00          .BYTE  0
01100  262C  0D          MSG5   .BYTE $0D,$0D
01100  262D  0D 
01101  262E  44 49              .BYTE 'DISASSEMBLY OPTIONS'
01102  2641  0D                 .BYTE $0D,$0D
01102  2642  0D 
01103  2643  30 20              .BYTE '0 ASCII',$0D
01103  264A  0D 
01104  264B  31 20              .BYTE '1 BYTE',$0D
01104  2651  0D 
01105  2652  32 20              .BYTE '2 WORD',$0D
01105  2658  0D 
01106  2659  33 20              .BYTE '3 DBYTE',$0D
01106  2660  0D 
01107  2661  34 20              .BYTE '4 WORD-1',$0D
01107  2669  0D 
01108  266A  53 20              .BYTE 'S SKIP ADDRESS RANGE',$0D
01108  267E  0D 
01109  267F  45 4E              .BYTE 'ENTER DISASSEMBLY CODE: '
01110  2697  00                 .BYTE 0
01111  2698              ;*********************************
01112  2698  0D          MSB4   .BYTE $0D
01113  2699  4C 41       .BYTE  'LABLE GENERATION (Y/CR OR N)? '
01114  26B7  00          .BYTE  0
01115  26B8              ;*********************************
01116  26B8  0D          MSB5   .BYTE $0D
01117  26B9  46 4F       .BYTE  'FORMATED LISTING (Y/CR OR N)? '
01118  26D7  00          .BYTE  0
01119  26D8              ;*********************************
01120  26D8              ;.FIL 0:UTIL.ASM
01121  26D8              ;*********************************
01122  26D8              .END
01123  26D8              ;*********************************
01124  26D8              .LIB   UTIL.ASM
01125  26D8              ;*********************************
01126  26D8              ; FILE UTIL.ASM
01127  26D8              ;*********************************
01128  26D8              ;






DISASSEMBLER128......PAGE 0025

LINE# LOC   CODE        LINE


01129  26D8              ;        DISASSEMBLER128
01130  26D8              ;    SYMBOLIC DISASSEMBLER
01131  26D8              ;       BY DENTON MARLOWE
01132  26D8              ;
01133  26D8              ;  (C)1986 BY DENTON MARLOWE
01134  26D8              ;
01135  26D8              ;*********************************
01136  26D8              ;      *** UTILITIES ***
01137  26D8              ;*********************************
01138  26D8              ; CHECK LINE COUNT FOR OUTPUT FILE
01139  26D8              ;*********************************
01140  26D8  AD 31 1C    LINECK LDA PASS
01141  26DB  CD 34 1C           CMP CPASS
01142  26DE  D0 36              BNE LINECO
01143  26E0  AD 38 1C           LDA DEVICE
01144  26E3  29 08              AND #$08
01145  26E5  F0 2F              BEQ LINECO
01146  26E7              ;*********************************
01147  26E7              ; CLOSE SOURCE FILE AND OPEN NEXT
01148  26E7              ;*********************************
01149  26E7  38                 SEC
01150  26E8  AD DF 1C           LDA LINEFL
01151  26EB  E9 20              SBC #$20
01152  26ED  8D 70 1C           STA TEMP
01153  26F0  AD E0 1C           LDA LINEFL+1
01154  26F3  E9 03              SBC #$03
01155  26F5  0D 70 1C           ORA TEMP
01156  26F8  90 1C              BCC LINECO
01157  26FA  EA                 NOP
01158  26FB  EA                 NOP
01159  26FC  EA                 NOP
01160  26FD  20 A5 2C           JSR EFILE
01161  2700  A9 08              LDA #$08
01162  2702  20 C3 FF           JSR CLOSE
01163  2705  20 DA 21           JSR OFILE
01164  2708  A9 00              LDA #$00
01165  270A  8D DF 1C           STA LINEFL
01166  270D  8D E0 1C           STA LINEFL+1
01167  2710  20 8F 2C           JSR ORGIN
01168  2713  20 B5 2C           JSR COMENT
01169  2716  60          LINECO RTS
01170  2717              ;*********************************
01171  2717              ;  DISK ERROR CHECK
01172  2717              ;*********************************
01173  2717  A9 08       DISERR LDA #$08        ;DEV #8
01174  2719  85 BA              STA $BA         ;PUT IN DEV TABLE
01175  271B  20 B4 FF           JSR $FFB4       ;SEND TALK
01176  271E  A9 6F              LDA #$6F        ;SECONDARY ADDRESS
01177  2720  85 B9              STA $B9         ;PUT IN TABLE
01178  2722  20 96 FF           JSR $FF96       ;SEND SEC
01179  2725  20 A5 FF           JSR $FFA5       ;GET FIRST BYTE
01180  2728  C9 30              CMP #$30        ;IS IT A ZERO
01181  272A  D0 0C              BNE DLOOC       ;IF NOT ZERO ERROR
01182  272C  20 A5 FF    DLOOE  JSR $FFA5       ;GET BYTE
01183  272F  C9 0D              CMP #$0D        ;IS IT CR?






DISASSEMBLER128......PAGE 0026

LINE# LOC   CODE        LINE


01184  2731  D0 F9              BNE DLOOE       ;GET NEXT BYTE
01185  2733  20 AB FF           JSR $FFAB       ;UNTALK
01186  2736  18                 CLC             ;NO ERROR FLAG
01187  2737  60                 RTS             ;RETURN
01188  2738              ;*********************************
01189  2738              ; PRINT DISK ERROR
01190  2738              ;*********************************
01191  2738  48          DLOOC  PHA             ;STACK BYTE
01192  2739  A9 0D              LDA #$0D        ;ASCII CR
01193  273B  20 D2 FF           JSR CHROUT      ;PRINT IT
01194  273E  68                 PLA             ;GET BYTE
01195  273F  20 D2 FF           JSR CHROUT      ;PRINT IT
01196  2742  20 A5 FF    DLOOA  JSR $FFA5       ;GET NEXT BYTE
01197  2745  20 D2 FF           JSR CHROUT      ;PRINT IT
01198  2748  C9 0D              CMP #$0D        ;IS IT CR
01199  274A  D0 F6              BNE DLOOA       ;GET NEXT BYTE
01200  274C  20 AB FF           JSR $FFAB       ;UNTALK
01201  274F  38                 SEC             ;SET ERROR FLAG
01202  2750  60                 RTS             ;RETURN
01203  2751              ;*********************************
01204  2751              ; START NEW LINE AND INC COUNT
01205  2751              ;*********************************
01206  2751  EE 77 1C    NEWLIN INC LINECT
01207  2754  D0 03              BNE *+5
01208  2756  EE 78 1C           INC LINECT+1
01209  2759  EE DF 1C           INC LINEFL
01210  275C  D0 03              BNE *+5
01211  275E  EE E0 1C           INC LINEFL+1
01212  2761  20 47 2D           JSR CRLF
01213  2764  AD 38 1C           LDA DEVICE
01214  2767  29 04              AND #$04
01215  2769  F0 03              BEQ NEWEXT
01216  276B  20 C0 28           JSR NEXLIN
01217  276E  60          NEWEXT RTS
01218  276F              ;*********************************
01219  276F              ; INPUT UTILITIES
01220  276F              ;*********************************
01221  276F              ; INPUT STRING ROUTINE
01222  276F              ;*********************************
01223  276F  A0 00       INSTNG LDY #$00
01224  2771  20 CF FF    INSTN1 JSR CHRIN
01225  2774  99 7B 1C           STA BUF,Y
01226  2777  C8                 INY
01227  2778  C9 0D              CMP #$0D
01228  277A  D0 F5              BNE INSTN1
01229  277C  88                 DEY
01230  277D  60                 RTS
01231  277E              ;*********************************
01232  277E              ; INPUT HEX CHAR STRING
01233  277E              ;*********************************
01234  277E  A9 00       GETWRD LDA #$00
01235  2780  8D 6E 1C           STA ADRS
01236  2783  8D 6F 1C           STA ADRS+1
01237  2786  20 6F 27           JSR INSTNG
01238  2789  88                 DEY






DISASSEMBLER128......PAGE 0027

LINE# LOC   CODE        LINE


01239  278A  30 15              BMI INEND
01240  278C              ;*********************************
01241  278C              ; PROCESS INPUT
01242  278C              ;*********************************
01243  278C  20 A2 27           JSR GETBYT
01244  278F  AD 70 1C           LDA TEMP
01245  2792  8D 6E 1C           STA ADRS
01246  2795  88                 DEY
01247  2796  30 09              BMI INEND
01248  2798  20 A2 27           JSR GETBYT
01249  279B  AD 70 1C           LDA TEMP
01250  279E  8D 6F 1C           STA ADRS+1
01251  27A1  60          INEND  RTS
01252  27A2              ;*********************************
01253  27A2              ; COVERT BUFFER INTO BYTES
01254  27A2              ;*********************************
01255  27A2  B9 7B 1C    GETBYT LDA BUF,Y
01256  27A5  20 BF 27           JSR BINARY
01257  27A8  8D 70 1C           STA TEMP
01258  27AB  88                 DEY
01259  27AC  30 10              BMI INENX
01260  27AE  B9 7B 1C           LDA BUF,Y
01261  27B1  20 BF 27           JSR BINARY
01262  27B4  0A                 ASL A
01263  27B5  0A                 ASL A
01264  27B6  0A                 ASL A
01265  27B7  0A                 ASL A
01266  27B8  0D 70 1C           ORA TEMP
01267  27BB  8D 70 1C           STA TEMP
01268  27BE  60          INENX  RTS
01269  27BF              ;*********************************
01270  27BF              ; CONVERT A INTO HEX NIBBLE
01271  27BF              ;*********************************
01272  27BF  38          BINARY SEC
01273  27C0  E9 30              SBC #'0'
01274  27C2  90 0E              BCC NOHEX
01275  27C4  C9 0A              CMP #$0A
01276  27C6  90 0C              BCC YSHEX
01277  27C8  E9 07              SBC #$07
01278  27CA  C9 10              CMP #$10
01279  27CC  B0 04              BCS NOHEX
01280  27CE  C9 0A              CMP #$0A
01281  27D0  B0 02              BCS YSHEX
01282  27D2  38          NOHEX  SEC
01283  27D3  60                 RTS
01284  27D4  18          YSHEX  CLC
01285  27D5  60                 RTS
01286  27D6              ;*********************************
01287  27D6              ; GET OPTION (CR/Y OR N): Y=C=0
01288  27D6              ;*********************************
01289  27D6  20 CF FF    CRYS   JSR CHRIN
01290  27D9  C9 59              CMP #'Y'
01291  27DB  F0 11              BEQ CRYS1
01292  27DD  C9 0D              CMP #$0D
01293  27DF  F0 0D              BEQ CRYS1






DISASSEMBLER128......PAGE 0028

LINE# LOC   CODE        LINE


01294  27E1  D0 0D              BNE CRNO1
01295  27E3              ;*********************************
01296  27E3              ; GET OPTION (Y OR CR/N): Y=C=0
01297  27E3              ;*********************************
01298  27E3  20 CF FF    CRNO   JSR CHRIN
01299  27E6  C9 4E              CMP #'N'
01300  27E8  F0 06              BEQ CRNO1
01301  27EA  C9 0D              CMP #$0D
01302  27EC  F0 02              BEQ CRNO1
01303  27EE  18          CRYS1  CLC
01304  27EF  60                 RTS
01305  27F0  38          CRNO1  SEC
01306  27F1  60                 RTS
01307  27F2              ;*********************************
01308  27F2              ; PRINT UTILITES
01309  27F2              ;*********************************
01310  27F2              ; PRINT WORD MSB IN Y LSB IN A
01311  27F2              ;*********************************
01312  27F2  48          PRBYTS PHA             ;PUT A ON STACK
01313  27F3  98                 TYA             ;PUT HIH BYTE IN A
01314  27F4  20 F8 27           JSR PRBYT       ;PRINT MSB
01315  27F7  68                 PLA             ;GET LSB
01316  27F8              ;*********************************
01317  27F8              ; PRINT BYTE IN A
01318  27F8              ;*********************************
01319  27F8  48          PRBYT  PHA             ;PUT BYTE ON STACK
01320  27F9  4A                 LSR A           ;4 RIGHT SHIFTS
01321  27FA  4A                 LSR A           ;TO MOVE HIGH
01322  27FB  4A                 LSR A           ;NIBBLE TO LOW
01323  27FC  4A                 LSR A           ;NIB WITH HIGH 0'S
01324  27FD  A8                 TAY             ;USE AS POINTER
01325  27FE  B9 64 29           LDA HEXA,Y      ;GET ASCII
01326  2801  20 64 28           JSR PCHAR       ;PRINT
01327  2804  68                 PLA             ;PULL BYTE OUT
01328  2805  29 0F              AND #$0F        ;MASK HIGH NIBBLE
01329  2807  A8                 TAY             ;USE AS POINTER
01330  2808  B9 64 29           LDA HEXA,Y      ;GET ASCII
01331  280B  4C 64 28           JMP PCHAR       ;PRINT
01332  280E              ;*********************************
01333  280E              ; STRING OUTPUT ROUTINE
01334  280E              ;*********************************
01335  280E  85 FB       STRPNT STA ZEROUR      ;POINTER TO
01336  2810  84 FC              STY ZEROUR+1    ;MESSAGE
01337  2812  A0 00              LDY #$00        ;OFFSET
01338  2814  B1 FB       SOUT   LDA (ZEROUR),Y  ;GET CHAR
01339  2816  F0 06              BEQ SEXIT       ;IF ZERO EXIT
01340  2818  20 64 28           JSR PCHAR       ;PRINT
01341  281B  C8                 INY             ;INC OFFSET
01342  281C  D0 F6              BNE SOUT        ;LOOP
01343  281E  60          SEXIT  RTS             ;RETURN
01344  281F              ;*********************************
01345  281F              ; PRINT DEC NUMBER (0000)
01346  281F              ;*********************************
01347  281F  86 FB       PRTPAG STX ZEROUR      ;LOW  BYTE NUM
01348  2821  85 FC              STA ZEROUR+1    ;HIGH BYTE NUM






DISASSEMBLER128......PAGE 0029

LINE# LOC   CODE        LINE


01349  2823  A2 03              LDX #$03        ;4 CHARS
01350  2825  8E 72 1C           STX SAVX        ;SAVE COUNT
01351  2828  D0 09              BNE PRTNU1      ;BRANCH
01352  282A              ;*********************************
01353  282A              ; PRINT DEC NUMBER (00000)
01354  282A              ;*********************************
01355  282A  86 FB       PRTNUM STX ZEROUR      ;LOW  BYTE NUM
01356  282C  85 FC              STA ZEROUR+1    ;HIGH BYTE NUM
01357  282E  A2 04              LDX #$04        ;5 CHARS
01358  2830  8E 72 1C           STX SAVX        ;SAVE COUNT
01359  2833              ;*********************************
01360  2833              ; PRINT DEC NUMBER AND LEADING 0
01361  2833              ;*********************************
01362  2833  AE 72 1C    PRTNU1 LDX SAVX
01363  2836  A0 30              LDY #$30
01364  2838  D0 01              BNE PRTNU3
01365  283A  C8          PRTNU2 INY 
01366  283B  38          PRTNU3 SEC 
01367  283C  A5 FB              LDA ZEROUR
01368  283E  FD 74 29           SBC CONST0,X
01369  2841  85 FB              STA ZEROUR
01370  2843  A5 FC              LDA ZEROUR+1
01371  2845  FD 79 29           SBC CONST1,X
01372  2848  85 FC              STA ZEROUR+1
01373  284A  B0 EE              BCS PRTNU2
01374  284C  A5 FB              LDA ZEROUR
01375  284E  7D 74 29           ADC CONST0,X
01376  2851  85 FB              STA ZEROUR
01377  2853  A5 FC              LDA ZEROUR+1
01378  2855  7D 79 29           ADC CONST1,X
01379  2858  85 FC              STA ZEROUR+1
01380  285A  98                 TYA
01381  285B  20 64 28           JSR PCHAR
01382  285E  CE 72 1C           DEC SAVX
01383  2861  10 D0              BPL PRTNU1
01384  2863  60                 RTS
01385  2864              ;*********************************
01386  2864              ;  OUTPUT CHAR TO OPEN CHANNEL
01387  2864              ;*********************************
01388  2864  48          PCHAR  PHA             ;SAVE CHAR
01389  2865  AD 38 1C           LDA DEVICE      ;GET FILE FLAG
01390  2868  29 08              AND #$08        ;CHECK FOR DISK
01391  286A  F0 0D              BEQ PRIN        ;IF NONE BRANCH
01392  286C  A2 08              LDX #$08        ;DISK FILE #1
01393  286E  20 C9 FF           JSR CHKOUT      ;FILE IS OUTPUT
01394  2871  68                 PLA             ;GET CHAR
01395  2872  48                 PHA             ;RESAVE CHAR
01396  2873  20 D2 FF           JSR CHROUT      ;OUTPUT TO DISK
01397  2876  20 CC FF           JSR CLRCHN      ;RESET OUTPUT
01398  2879  AD 38 1C    PRIN   LDA DEVICE      ;GET DEVICE FLAG
01399  287C  29 04              AND #$04        ;CHECK FOR PRINTER
01400  287E  F0 0D              BEQ SCREN       ;IF NOT BRANCH
01401  2880  A2 04              LDX #$04        ;PRINT FILE #4
01402  2882  20 C9 FF           JSR CHKOUT      ;FILE IS OUTPUT
01403  2885  68                 PLA             ;GET CHAR






DISASSEMBLER128......PAGE 0030

LINE# LOC   CODE        LINE


01404  2886  48                 PHA             ;RESAVE CHAR
01405  2887  20 D2 FF           JSR CHROUT      ;OUTPUT TO PRINTER
01406  288A  20 CC FF           JSR CLRCHN      ;RESET OUTPUT
01407  288D  AD 38 1C    SCREN  LDA DEVICE      ;GET DEVICE FLAG
01408  2890  29 03              AND #$03        ;CHECK FOR SCREEN
01409  2892  F0 05              BEQ PEXIT       ;IF NOT BRANCH
01410  2894  68                 PLA             ;GET CHAR
01411  2895  48                 PHA             ;RESAVE CHAR
01412  2896  20 D2 FF           JSR CHROUT      ;OUTPUT TO SCREEN
01413  2899  68          PEXIT  PLA             ;GET CHAR
01414  289A  60                 RTS             ;RETURN
01415  289B              ;*********************************
01416  289B              ; PRINTER OUTPUT ROUTINES
01417  289B              ;*********************************
01418  289B              ; FINISH OUT PAGE WITH CR
01419  289B              ;*********************************
01420  289B  20 AE 28    FINISH JSR CRLFPR      ;PRINT CR
01421  289E  EE 76 1C           INC LISTCT      ;INC LINE COUNT
01422  28A1  AD 76 1C           LDA LISTCT      ;GET COUNT
01423  28A4  C9 42              CMP #$42        ;66 LINES
01424  28A6  D0 F3              BNE FINISH      ;IF NOT MORE
01425  28A8  A9 00              LDA #$00        ;ZERO BYTE
01426  28AA  8D 76 1C           STA LISTCT      ;RESET COUNT
01427  28AD  60                 RTS             ;RETURN
01428  28AE              ;*********************************
01429  28AE              ; PRINT CR TO PRINTER
01430  28AE              ;*********************************
01431  28AE  A9 04       CRLFPR LDA #$04        ;DEVICE #4
01432  28B0  8D 38 1C           STA DEVICE      ;SET PRINTER
01433  28B3  20 47 2D           JSR CRLF        ;CR
01434  28B6  AD 39 1C           LDA OUTPUT      ;GET DEVICE
01435  28B9  8D 38 1C           STA DEVICE      ;RESET DEVICE
01436  28BC  60                 RTS             ;RETURN
01437  28BD              ;*********************************
01438  28BD              ; START NEWLINE AND CHECK COUNT
01439  28BD              ;*********************************
01440  28BD  20 AE 28    NEXPTR JSR CRLFPR      ;PRINT CR
01441  28C0  EE 76 1C    NEXLIN INC LISTCT      ;INC LINE COUNT
01442  28C3  AD 76 1C           LDA LISTCT      ;GET COUNT
01443  28C6  C9 3C              CMP #$3C        ;48 LINES
01444  28C8  D0 45              BNE LINEOK      ;IF NOT BRANCH
01445  28CA  20 9B 28           JSR FINISH      ;FINISH PAGE
01446  28CD              ;*********************************
01447  28CD              ; START NEW PAGE WITH HEADING
01448  28CD              ;*********************************
01449  28CD  AD 38 1C    HEADER LDA DEVICE      ;CHECK DEVICE
01450  28D0  29 04              AND #$04        ;PRINTER?
01451  28D2  F0 3B              BEQ LINEOK      ;IF NOT EXIT
01452  28D4  20 BD 28           JSR NEXPTR      ;NEXT LINE
01453  28D7  A9 04              LDA #$04        ;DEVICE #4
01454  28D9  8D 38 1C           STA DEVICE      ;SET DEVICE
01455  28DC  A9 7E              LDA #<XTITLE    ;HEADER
01456  28DE  A0 29              LDY #>XTITLE    ;
01457  28E0  20 0E 28           JSR STRPNT      ;PRINT IT
01458  28E3              ;*********************************






DISASSEMBLER128......PAGE 0031

LINE# LOC   CODE        LINE


01459  28E3              ; PRINT PAGE COUNT AND HEADER
01460  28E3              ;*********************************
01461  28E3  AE 74 1C           LDX PAGECT
01462  28E6  AD 75 1C           LDA PAGECT+1
01463  28E9  20 1F 28           JSR PRTPAG
01464  28EC  20 BD 28           JSR NEXPTR
01465  28EF  20 BD 28           JSR NEXPTR
01466  28F2  A9 04              LDA #$04
01467  28F4  8D 38 1C           STA DEVICE
01468  28F7  A9 9A              LDA #<LTITLE
01469  28F9  A0 29              LDY #>LTITLE
01470  28FB  20 0E 28           JSR STRPNT
01471  28FE  20 BD 28           JSR NEXPTR
01472  2901              ;*********************************
01473  2901              ; INC PAGE COUNT
01474  2901              ;*********************************
01475  2901  EE 74 1C           INC PAGECT
01476  2904  D0 03              BNE PAGER1
01477  2906  EE 75 1C           INC PAGECT+1
01478  2909  20 BD 28    PAGER1 JSR NEXPTR
01479  290C  20 BD 28           JSR NEXPTR
01480  290F  60          LINEOK RTS 
01481  2910              ;*********************************
01482  2910              ; SYMBOL TABLE ROUTINES
01483  2910              ;*********************************
01484  2910              ; START NEWLINE AND CHECK COUNT
01485  2910              ;*********************************
01486  2910  20 AE 28    NEXPTS JSR CRLFPR      ;PRINT CR
01487  2913  EE 76 1C           INC LISTCT      ;INC LINE COUNT
01488  2916  AD 76 1C           LDA LISTCT      ;GET COUNT
01489  2919  C9 3C              CMP #$3C        ;48 LINES
01490  291B  D0 1D              BNE HEADOK      ;IF NOT BRANCH
01491  291D  20 9B 28           JSR FINISH      ;FINISH PAGE
01492  2920              ;*********************************
01493  2920              ; START NEW PAGE WITH HEADING
01494  2920              ;*********************************
01495  2920  20 10 29    HEADES JSR NEXPTS      ;NEXT LINE
01496  2923  A9 B7              LDA #<XTITLS    ;HEADER
01497  2925  A0 29              LDY #>XTITLS    ;
01498  2927  20 0E 28           JSR STRPNT      ;PRINT IT
01499  292A  20 10 29           JSR NEXPTS
01500  292D  20 10 29           JSR NEXPTS
01501  2930  A9 C4              LDA #<LTITLS
01502  2932  A0 29              LDY #>LTITLS
01503  2934  20 0E 28           JSR STRPNT
01504  2937  20 10 29           JSR NEXPTS
01505  293A  60          HEADOK RTS
01506  293B              ;*********************************
01507  293B              ; CHECK FOR NEW PAGE FOR SYMBOL
01508  293B              ;*********************************
01509  293B  AD 76 1C    HEADSY LDA LISTCT
01510  293E  C9 35              CMP #$35
01511  2940  B0 06              BCS HEADFX
01512  2942  20 10 29           JSR NEXPTS
01513  2945  4C 10 29           JMP NEXPTS






DISASSEMBLER128......PAGE 0032

LINE# LOC   CODE        LINE


01514  2948  4C 9B 28    HEADFX JMP FINISH
01515  294B              ;*********************************
01516  294B              ; SCREEN UTILITES
01517  294B              ;*********************************
01518  294B  AD 38 1C    SCROFF LDA DEVICE
01519  294E  29 04              AND #$04
01520  2950  F0 08              BEQ SCRNO1
01521  2952  AD 11 D0           LDA VICREG
01522  2955  29 EF              AND #$EF
01523  2957  8D 11 D0           STA VICREG
01524  295A  60          SCRNO1 RTS
01525  295B              ;*********************************
01526  295B  AD 11 D0    SCRON  LDA VICREG
01527  295E  09 10              ORA #$10
01528  2960  8D 11 D0           STA VICREG
01529  2963  60                 RTS
01530  2964              ;*********************************
01531  2964              ; HEX-TO-ASCII TABLE
01532  2964              ;*********************************
01533  2964  30 31       HEXA   .BYTE '0123456789ABCDEF'
01534  2974              ;*********************************
01535  2974              ; CONSTANTS FOR PRTNUM ROUTINE
01536  2974              ;*********************************
01537  2974  01          CONST0 .BYTE $01,$0A,$64,$E8,$10
01537  2975  0A 
01537  2976  64 
01537  2977  E8 
01537  2978  10 
01538  2979  00          CONST1 .BYTE $00,$00,$00,$03,$27
01538  297A  00 
01538  297B  00 
01538  297C  03 
01538  297D  27 
01539  297E              ;*********************************
01540  297E              ; PAGE TITLE
01541  297E              ;*********************************
01542  297E  44 49       XTITLE .BYTE 'DISASSEMBLER128.......PAGE '
01543  2999  00                 .BYTE $00
01544  299A  4C 49       LTITLE .BYTE 'LINE# LOC   CODE        LINE'
01545  29B6  00                 .BYTE $00
01546  29B7              ;********************************
01547  29B7              ; SYMBOL PAGE TITLE
01548  29B7              ;********************************
01549  29B7  53 59       XTITLS .BYTE 'SYMBOL TABLE',0
01549  29C3  00 
01550  29C4  53 59       LTITLS .BYTE 'SYMBOL VALUE',0
01550  29D0  00 
01551  29D1              ;*********************************
01552  29D1              ;.FIL 0:MODE.ASM
01553  29D1              ;*********************************
01554  29D1              .END
01555  29D1              ;*********************************
01556  29D1              .LIB   MODE.ASM
01557  29D1              ;*********************************
01558  29D1              ; FILE MODE.ASM






DISASSEMBLER128......PAGE 0033

LINE# LOC   CODE        LINE


01559  29D1              ;*********************************
01560  29D1              ;
01561  29D1              ;        DISASSEMBLER128
01562  29D1              ;    SYMBOLIC DISASSEMBLER
01563  29D1              ;       BY DENTON MARLOWE
01564  29D1              ;
01565  29D1              ;  (C)1986 BY DENTON MARLOWE
01566  29D1              ;
01567  29D1              ;*********************************
01568  29D1              ; ADDRESSING MODE UTILITIES
01569  29D1              ;*********************************
01570  29D1              ;      DISASSEMBLE ONE LINE
01571  29D1              ;*********************************
01572  29D1  20 FF 30    DSLINE JSR DATAOP      ;CHECK FOR DATA
01573  29D4  30 3D              BMI BYTT        ;N=1 THEN FOUND
01574  29D6              ;*********************************
01575  29D6              ; CHECK BIT ZP DECODING OPTIONS
01576  29D6              ;*********************************
01577  29D6  AD CC 43           LDA BITFLG      ;CHECK BIT FLAG
01578  29D9  F0 0D              BEQ DISL        ;IF ZERO NO BIT
01579  29DB                     
01580  29DB  20 80 2D           JSR GETSL       ;GET BYTE
01581  29DE  C9 24              CMP #$24        ;ZEROPAGE BIT
01582  29E0  F0 34              BEQ BYZBIT      ;
01583  29E2  C9 2C              CMP #$2C        ;ZEROPAGE BIT
01584  29E4  F0 55              BEQ BYABIT      ;
01585  29E6  D0 00              BNE DISL        ;
01586  29E8              ;*********************************
01587  29E8              ; CHECK BIT ABS DECODING OPTIONS
01588  29E8              ;*********************************
01589  29E8              
01590  29E8              ;********************************
01591  29E8              ; PROCESS LINE OF CODE
01592  29E8              ;********************************
01593  29E8              DISL   = *
01594  29E8  20 80 2D           JSR GETSL       ;GET BYTE
01595  29EB  AE 31 1C           LDX PASS        ;GET PASS COUNT
01596  29EE  EC 34 1C           CPX CPASS       ;LAST
01597  29F1  F0 06              BEQ DISL1       ;IF LAST BRANCH
01598  29F3  20 C7 33           JSR OPERN1      ;IF LAST BRANCH
01599  29F6  4C 13 2A           JMP BYTT        ;NEXT INSTRUCTION
01600  29F9              ;********************************
01601  29F9              ; PRINT DISASSEMBLY ADDRESS
01602  29F9              ;********************************
01603  29F9  20 BA 33    DISL1  JSR PRTASS      ;PRINT LINE DATA
01604  29FC  20 DE 2C           JSR PRAD        ;PRINT ADDRESS
01605  29FF  20 59 2D           JSR SPACE       ;SPACE OVER
01606  2A02              ;********************************
01607  2A02              ; PRINT INSTRUCTION
01608  2A02              ;********************************
01609  2A02  20 80 2D           JSR GETSL       ;GET BYTE
01610  2A05  48                 PHA             ;STORE
01611  2A06  20 9B 33           JSR MNEMON      ;PRINT MNEMONIC
01612  2A09  20 59 2D           JSR SPACE       ;SPACE OVER
01613  2A0C  68                 PLA             ;GET BYTE






DISASSEMBLER128......PAGE 0034

LINE# LOC   CODE        LINE


01614  2A0D  20 CF 33           JSR OPERND      ;PRINT OPERAND
01615  2A10  20 51 27    FINAL  JSR NEWLIN      ;START NEW LINE
01616  2A13  4C 5E 2D    BYTT   JMP NEXTSL      ;NEXT INSTRUCTION
01617  2A16              ;********************************
01618  2A16              ;      BIT ZP SKIP TRICK
01619  2A16              ;
01620  2A16              ; THE SKIP WILL ALWAYS INVOLVE
01621  2A16              ; A FOLLWING OPCODE THAT IS EITHER
01622  2A16              ; AN OPCODE WITH NO OPERAND OR
01623  2A16              ; OR ONE BYTE OPERAND LIKE A BRANCH
01624  2A16              ; OR ZERO PAGE INSTRUCTION
01625  2A16              ;*********************************
01626  2A16              BYZBIT = *
01627  2A16  AD CC 43           LDA BITFLG
01628  2A19  29 02              AND #$02
01629  2A1B  F0 CB              BEQ DISL
01630  2A1D              ;********************************
01631  2A1D              ;      TO SKIP OR NOT
01632  2A1D              ;*********************************
01633  2A1D  20 77 2D           JSR INCSL       ;INC TO OPERAND
01634  2A20  20 80 2D           JSR GETSL       ;GET OPERAND
01635  2A23  48                 PHA
01636  2A24  20 98 2D           JSR DECSL
01637  2A27  68                 PLA
01638  2A28                                     ;CHECK FOR SKIP
01639  2A28  C9 10              CMP #$10        ;BPL SKIP
01640  2A2A  F0 40              BEQ B0000
01641  2A2C  C9 18              CMP #$18        ;CLC SKIP
01642  2A2E  F0 3C              BEQ B0000
01643  2A30  C9 30              CMP #$30        ;BMI
01644  2A32  F0 38              BEQ B0000
01645  2A34  C9 38              CMP #$38        ;SEC
01646  2A36  F0 34              BEQ B0000
01647  2A38              ;
01648  2A38  4C E8 29           JMP DISL
01649  2A3B              ;********************************
01650  2A3B              ;      BIT ABS SKIP TRICK
01651  2A3B              ;*********************************
01652  2A3B              BYABIT = *
01653  2A3B  AD CC 43           LDA BITFLG
01654  2A3E  29 01              AND #$01
01655  2A40  F0 A6              BEQ DISL
01656  2A42              ;********************************
01657  2A42              ;      TO SKIP OR NOT
01658  2A42              ;*********************************
01659  2A42  20 77 2D           JSR INCSL       ;INC TO OPERAND
01660  2A45  20 80 2D           JSR GETSL       ;GET OPERAND
01661  2A48  48                 PHA
01662  2A49  20 98 2D           JSR DECSL
01663  2A4C  68                 PLA
01664  2A4D                                     ;CHECK FOR SKIP
01665  2A4D  C9 A1              CMP #$A1        ;LDY A IMMEDIATE SKIP
01666  2A4F  F0 1B              BEQ B0000
01667  2A51  C9 A2              CMP #$A2        ;LDA A IMMEDIATE SKIP
01668  2A53  F0 17              BEQ B0000






DISASSEMBLER128......PAGE 0035

LINE# LOC   CODE        LINE


01669  2A55  C9 A9              CMP #$A9        ;LDX A IMMEDIATE SKIP
01670  2A57  F0 13              BEQ B0000
01671  2A59                     
01672  2A59  C9 65              CMP #$65        ;ADC ZP
01673  2A5B  F0 0F              BEQ B0000
01674  2A5D                     
01675  2A5D  C9 85              CMP #$85        ;STA ZP
01676  2A5F  F0 0B              BEQ B0000
01677  2A61                     
01678  2A61  C9 B1              CMP #$B1        ;LDA (ZP),Y
01679  2A63  F0 07              BEQ B0000
01680  2A65                     
01681  2A65  C9 E6              CMP #$E6        ;INC
01682  2A67  F0 03              BEQ B0000
01683  2A69              ;
01684  2A69  4C E8 29           JMP DISL
01685  2A6C              ;********************************
01686  2A6C              ;      PRINTING PASS?
01687  2A6C              ;*********************************
01688  2A6C              B0000  = *
01689  2A6C  AD 31 1C           LDA PASS        ;GET PASS COUNT
01690  2A6F  CD 34 1C           CMP CPASS       ;LAST
01691  2A72  D0 9F              BNE BYTT        ;IF NOT NEXT BYTE
01692  2A74              ;*********************************
01693  2A74              ;  PRINT LINE DATA FOR .BYTE
01694  2A74              ;*********************************
01695  2A74  20 B5 2C           JSR COMENT      ;COMENT LINE
01696  2A77              ;
01697  2A77  20 5B 2E           JSR PRTDAT      ;PRINT LINE DATA
01698  2A7A  20 E8 2D           JSR PRTONE      ;ONE BYTE
01699  2A7D  20 DE 2C           JSR PRAD        ;PRINT ADDRESS
01700  2A80  20 59 2D           JSR SPACE       ;SPACE OVER
01701  2A83  A9 B1              LDA #<MSGBIT    ;.BYTE $
01702  2A85  A0 2D              LDY #>MSGBIT    ;
01703  2A87  20 0E 28           JSR STRPNT      ;PRINT IT
01704  2A8A              ;
01705  2A8A  20 80 2D           JSR GETSL       ;GET BYTE
01706  2A8D  20 F8 27           JSR PRBYT       ;PRINT BYTE
01707  2A90              ;
01708  2A90  A9 B9              LDA #<MSGBZP    ;BIT COMMENT
01709  2A92  A0 2D              LDY #>MSGBZP    ;
01710  2A94  20 0E 28           JSR STRPNT      ;PRINT IT
01711  2A97              ;
01712  2A97  20 51 27           JSR NEWLIN      ;PRINT BYTE
01713  2A9A                                     ;JSR INCSL    ;INC SELECT
01714  2A9A  20 BB 2C           JSR COMET       ;COMENT LINE
01715  2A9D                                     ;JSR DECSL    ;REASET SELE
CT
01716  2A9D  4C 10 2A           JMP FINAL       ;CR AND NEXT BYTE
01717  2AA0              ;*********************************
01718  2AA0              ;BYTEXT JMP DISL1
01719  2AA0              ;*********************************
01720  2AA0              ; ADDRESSING MODE UTILITIES
01721  2AA0              ;*********************************
01722  2AA0              ;
01723  2AA0              ;*********************************






DISASSEMBLER128......PAGE 0036

LINE# LOC   CODE        LINE


01724  2AA0              ; ANALYSIS OPERAND ROUTINES
01725  2AA0              ;*********************************
01726  2AA0              ;    BIT ZP ONE-BYTE OPERAND
01727  2AA0              ; ZERO PAGE BIT IS ALMOST ALWAYS
01728  2AA0              ;   A BIT TRICK TO SKIP THE NEXT
01729  2AA0              ;          OPCODE
01730  2AA0              ;********************************
01731  2AA0  EA          ONEBIT NOP
01732  2AA1              ;*********************************
01733  2AA1              ;      ONE-BYTE OPERAND
01734  2AA1              ;********************************
01735  2AA1  20 77 2D    ONEBYT JSR INCSL       ;INC TO BYTE
01736  2AA4  20 80 2D           JSR GETSL       ;GET BYTE
01737  2AA7  8D 64 1C           STA WORKED      ;STORE OPERAND
01738  2AAA  A9 00              LDA #$00        ;ZERO BYTE
01739  2AAC  8D 65 1C           STA WORKED+1    ;ZERO HIGH BYTE
01740  2AAF  AD 31 1C           LDA PASS        ;GET PASS COUNT
01741  2AB2  CD 32 1C           CMP IPASS       ;INTERNAL
01742  2AB5  F0 54              BEQ OPCPUT      ;TABLE OPERAND
01743  2AB7  CD 33 1C           CMP EPASS       ;EXTERNAL
01744  2ABA  F0 52              BEQ OPCSYM      ;EXTERNAL EQUATE
01745  2ABC              ;*********************************
01746  2ABC              ; OUTPUT OPERAND
01747  2ABC              ;*********************************
01748  2ABC  20 B2 37           JSR SYMOP       ;CHECK FOR SYMBOL
01749  2ABF  B0 50              BCS TWOB        ;SYMBOL FOUND
01750  2AC1  20 92 2E           JSR RANGE       ;IS IT INTERNAL
01751  2AC4  90 06              BCC ONEBY       ;GENERATE LABEL
01752  2AC6  20 24 2D           JSR DOLLAR      ;EXTERNAL
01753  2AC9  4C CF 2A           JMP ONEBX       ;PRINT ADDRESS
01754  2ACC  20 D4 2C    ONEBY  JSR PRLA        ;PRINT XX
01755  2ACF  AD 64 1C    ONEBX  LDA WORKED      ;GET OPERAND
01756  2AD2  4C F8 27           JMP PRBYT       ;PRINT BYTE
01757  2AD5              ;********************************
01758  2AD5              ;      BIT ABS TWO-BYTE OPERAND
01759  2AD5              ;********************************
01760  2AD5  EA          TWOBIT NOP
01761  2AD6              ;********************************
01762  2AD6              ;      TWO-BYTE OPERAND
01763  2AD6              ;********************************
01764  2AD6  20 77 2D    TWOBYT JSR INCSL       ;INC TO BYTE
01765  2AD9  20 80 2D           JSR GETSL       ;GET BYTE
01766  2ADC  8D 64 1C           STA WORKED      ;STORE LOW BYTE
01767  2ADF  20 77 2D           JSR INCSL       ;INC TO BYTE
01768  2AE2  20 80 2D           JSR GETSL       ;GET BYTE
01769  2AE5  8D 65 1C           STA WORKED+1    ;STORE HIGH BYTE
01770  2AE8  AD 31 1C           LDA PASS        ;GET PASS COUNT
01771  2AEB  CD 32 1C           CMP IPASS       ;INTERNAL
01772  2AEE  F0 1B              BEQ OPCPUT      ;TABLE OPERNAD
01773  2AF0  CD 33 1C           CMP EPASS       ;EXTERNAL
01774  2AF3  F0 19              BEQ OPCSYM      ;EXTERNAL EQUATE
01775  2AF5              ;********************************
01776  2AF5              ;  OUTPUT OPERAND
01777  2AF5              ;********************************
01778  2AF5  20 B2 37           JSR SYMOP       ;CHECK SYMBOL






DISASSEMBLER128......PAGE 0037

LINE# LOC   CODE        LINE


01779  2AF8  B0 17              BCS TWOB        ;C=1 FOUND ONE
01780  2AFA  20 92 2E           JSR RANGE       ;IS IT INTERNAL
01781  2AFD  90 06              BCC TWOBY       ;GERNERATE LABEL
01782  2AFF  20 24 2D           JSR DOLLAR      ;EXTERNAL
01783  2B02  4C 08 2B           JMP TWOBX       ;
01784  2B05              ;********************************
01785  2B05              ;  OUTPUT OPERAND
01786  2B05              ;********************************
01787  2B05              TWOBY  =*
01788  2B05  20 D4 2C           JSR PRLA        ;PRINT XX
01789  2B08              TWOBX  = *
01790  2B08  4C 16 2D           JMP PWORKD      ;PRINT ADDRESS
01791  2B0B              OPCPUT = *
01792  2B0B  4C 09 2F           JMP PUTI        ;PUT IN TABLE
01793  2B0E              OPCSYM = *
01794  2B0E  4C B2 37           JMP SYMOP       ;CHECK EXT EQUATE
01795  2B11              TWOB   = *
01796  2B11  60                 RTS             ;RETURN
01797  2B12              ;*********************************
01798  2B12              ; ILLEGAL MODES, UNUSED OPCODES
01799  2B12              ;
01800  2B12              ; ZZZZ XX .BYTE $XX ;'Y' ;??? ILLEGAL OPCODE
01801  2B12              ;
01802  2B12              ;*********************************
01803  2B12  EE 79 1C    ILLEGL INC ERRCT       ;INC ERROR COUNT
01804  2B15  D0 03              BNE *+5         ;SKIP NEXT LINE
01805  2B17  EE 7A 1C           INC ERRCT+1     ;INC ERROR COUNT
01806  2B1A  A0 33              LDY #>MBYTE     ;.BYTE
01807  2B1C  A9 82              LDA #<MBYTE     ;
01808  2B1E  20 0E 28           JSR STRPNT      ;PRINT STRING
01809  2B21  20 24 2D           JSR DOLLAR      ;PRINT $
01810  2B24  20 80 2D           JSR GETSL       ;GET ILLEGAL BYTE
01811  2B27                     
01812  2B27              ;BEGIN REV 2017-3
01813  2B27  48                 PHA             ;PUT BYTE ON STACK
01814  2B28              ;
01815  2B28  20 F8 27           JSR PRBYT       ;PRINT IT
01816  2B2B  20 59 2D           JSR SPACE       ;SPACE OVER
01817  2B2E              ;
01818  2B2E  68                 PLA             ;POP BYTE OFF STACK
01819  2B2F  20 8A 32           JSR CASCII      ;IS IT PRINTABLE ASCII
01820  2B32  B0 18              BCS ISKIP       ;IF NOT EXIT
01821  2B34  48                 PHA             ;STACK IT
01822  2B35  20 59 2D           JSR SPACE       ;SPACE OVER
01823  2B38  20 1F 2D           JSR SEMIC       ;COMMENT
01824  2B3B  A9 27              LDA #'''        ;QUOTE
01825  2B3D  20 64 28           JSR PCHAR       ;PRINT IT
01826  2B40  68                 PLA             ;POP IT
01827  2B41  20 64 28           JSR PCHAR       ;PRINT IT
01828  2B44  A9 27              LDA #'''        ;QUOTE
01829  2B46  20 64 28           JSR PCHAR       ;PRINT IT
01830  2B49  20 59 2D           JSR SPACE       ;SPACE OVER
01831  2B4C              ;
01832  2B4C              ISKIP  = *
01833  2B4C              ;END REV 2017-3






DISASSEMBLER128......PAGE 0038

LINE# LOC   CODE        LINE


01834  2B4C  A0 2D              LDY #>ILLMSG
01835  2B4E  A9 D4              LDA #<ILLMSG
01836  2B50  4C 0E 28           JMP STRPNT
01837  2B53              ;********************************
01838  2B53              ;      ACCUMULATOR MODE
01839  2B53              ;********************************
01840  2B53  A9 41       ACC    LDA #'A'        ;ASCII A
01841  2B55  4C 64 28           JMP PCHAR       ;PRINT IT
01842  2B58              ;********************************
01843  2B58              ;       IMMEDIATE MODE
01844  2B58              ;********************************
01845  2B58  20 77 2D    IMMEDT JSR INCSL       ;INC TO DATA BYTE
01846  2B5B  AE 31 1C           LDX PASS        ;GET PASS
01847  2B5E  EC 34 1C           CPX CPASS       ;LAST PASS
01848  2B61  D0 2A              BNE IMEXIT      ;EXIT
01849  2B63  A9 23              LDA #'#'        ;ASCII #
01850  2B65  20 64 28           JSR PCHAR       ;PRINT IT
01851  2B68  20 24 2D           JSR DOLLAR      ;PRINT $
01852  2B6B  20 80 2D           JSR GETSL       ;GET BYTE
01853  2B6E  48                 PHA             ;STACK IT
01854  2B6F  20 F8 27           JSR PRBYT       ;PRINT IT
01855  2B72  68                 PLA             ;POP IT
01856  2B73  20 8A 32           JSR CASCII      ;PRINTABLE ASCII
01857  2B76  B0 15              BCS IMEXIT      ;IF NOT EXIT
01858  2B78  48                 PHA             ;STACK IT
01859  2B79  20 4C 2D           JSR SPAC6       ;SPACE OVER
01860  2B7C  20 1F 2D           JSR SEMIC       ;COMMENT
01861  2B7F  A9 27              LDA #'''        ;QUOTE
01862  2B81  20 64 28           JSR PCHAR       ;PRINT IT
01863  2B84  68                 PLA             ;POP IT
01864  2B85  20 64 28           JSR PCHAR       ;PRINT IT
01865  2B88  A9 27              LDA #'''        ;QUOTE
01866  2B8A  20 64 28           JSR PCHAR       ;PRINT IT
01867  2B8D  60          IMEXIT RTS             ;EXIT
01868  2B8E              ;*********************************
01869  2B8E              ;      BIT ZERO PAGE MODE
01870  2B8E              ;*********************************
01871  2B8E  EA          ZERBIT NOP
01872  2B8F              ;*********************************
01873  2B8F              ;      ZERO PAGE MODE
01874  2B8F              ;*********************************
01875  2B8F  4C A1 2A    ZEROPG JMP ONEBYT      ;PRINT ONE BYTE
01876  2B92              ;*********************************
01877  2B92              ;      ZERO PAGE,X MODE
01878  2B92              ;********************************
01879  2B92  20 A1 2A    ZEROX  JSR ONEBYT      ;PRINT ONE BYTE
01880  2B95  4C 33 2D           JMP XINDEX      ;PRINT ,X
01881  2B98              ;********************************
01882  2B98              ;       ZERO PAGE,Y MODE
01883  2B98              ;********************************
01884  2B98  20 A1 2A    ZEROY  JSR ONEBYT      ;PRINT ONE BYTE
01885  2B9B  4C 3D 2D           JMP YINDEX      ;PRINT ,Y
01886  2B9E              ;*********************************
01887  2B9E              ;         BIT ABSOLUTE MODE
01888  2B9E              ;*********************************






DISASSEMBLER128......PAGE 0039

LINE# LOC   CODE        LINE


01889  2B9E  EA          ABSBIT NOP
01890  2B9F              ;*********************************
01891  2B9F              ;         ABSOLUTE MODE
01892  2B9F              ;*********************************
01893  2B9F  20 D6 2A    ABSLUT JSR TWOBYT      ;PRINT TWO BYTE
01894  2BA2  20 98 2D           JSR DECSL       ;DEC TO SECOND
01895  2BA5  20 98 2D           JSR DECSL       ;DEC TO OPCODE
01896  2BA8  20 80 2D           JSR GETSL       ;GET BYTE
01897  2BAB  48                 PHA
01898  2BAC  20 77 2D           JSR INCSL
01899  2BAF  20 77 2D           JSR INCSL
01900  2BB2  68                 PLA
01901  2BB3  C9 4C              CMP #$4C        ;IS IT JMP
01902  2BB5  D0 0C              BNE ABSEXT      ;IF NOT EXIT
01903  2BB7  20 51 27           JSR NEWLIN      ;NEXT LINE
01904  2BBA  20 77 2D           JSR INCSL
01905  2BBD  20 BB 2C           JSR COMET       ;COMMENT LINE
01906  2BC0  20 98 2D           JSR DECSL
01907  2BC3  60          ABSEXT RTS             ;RETURN
01908  2BC4              ;*********************************
01909  2BC4              ;       ABSOLUTE,X MODE
01910  2BC4              ;********************************
01911  2BC4  20 D6 2A    ABSX   JSR TWOBYT      ;PRINT TWO BYTE
01912  2BC7  4C 33 2D           JMP XINDEX      ;PRINT ,X
01913  2BCA              ;********************************
01914  2BCA              ;       ABSOLUTE,Y MODE
01915  2BCA              ;********************************
01916  2BCA  20 D6 2A    ABSY   JSR TWOBYT      ;PRINT TWO BYTE
01917  2BCD  4C 3D 2D           JMP YINDEX      ;PRINT ,Y
01918  2BD0              ;********************************
01919  2BD0              ;       IMPLIED MODE
01920  2BD0              ;********************************
01921  2BD0  20 80 2D    IMPLID JSR GETSL       ;GET BYTE
01922  2BD3  F0 09              BEQ IMPLI1      ;BRK
01923  2BD5  C9 60              CMP #$60        ;CHECK CODE
01924  2BD7  F0 05              BEQ IMPLI1      ;RTS
01925  2BD9  C9 40              CMP #$40        ;CHECK CODE
01926  2BDB  F0 01              BEQ IMPLI1      ;RTI
01927  2BDD  60          IMPONE RTS             ;RETURN
01928  2BDE  20 51 27    IMPLI1 JSR NEWLIN      ;PRINT NEW LINE
01929  2BE1  20 77 2D           JSR INCSL
01930  2BE4  20 BB 2C           JSR COMET       ;COMMENT LINE
01931  2BE7  4C 98 2D           JMP DECSL
01932  2BEA              ;********************************
01933  2BEA              ;       INDIRECT MODE
01934  2BEA              ;********************************
01935  2BEA  20 29 2D    INDRCT JSR LPAREN      ;PRINT (
01936  2BED  20 D6 2A           JSR TWOBYT      ;PRINT TWO BYTE
01937  2BF0  20 2E 2D           JSR RPAREN      ;PRINT )
01938  2BF3  20 51 27           JSR NEWLIN      ;NEXT LINE
01939  2BF6  20 77 2D           JSR INCSL
01940  2BF9  20 BB 2C           JSR COMET       ;COMMENT LINE
01941  2BFC  4C 98 2D           JMP DECSL
01942  2BFF              ;********************************
01943  2BFF              ;     INDIRECT,X MODE






DISASSEMBLER128......PAGE 0040

LINE# LOC   CODE        LINE


01944  2BFF              ;********************************
01945  2BFF  20 29 2D    INDX   JSR LPAREN      ;PRINT (
01946  2C02  20 92 2B           JSR ZEROX       ;PRINT $HH,X
01947  2C05  4C 2E 2D           JMP RPAREN      ;PRINT )
01948  2C08              ;********************************
01949  2C08              ;     INDIRECT,Y MODE
01950  2C08              ;********************************
01951  2C08  20 29 2D    INDY   JSR LPAREN      ;PRINT (
01952  2C0B  20 A1 2A           JSR ONEBYT      ;PRINT ONE BYTE
01953  2C0E  20 2E 2D           JSR RPAREN      ;PRINT )
01954  2C11  4C 3D 2D           JMP YINDEX      ;PRINT ,Y
01955  2C14              ;*********************************
01956  2C14              ;      RELATIVE MODE
01957  2C14              ;*********************************
01958  2C14  20 77 2D    RELATV JSR INCSL       ;INC BYTE POINTER
01959  2C17  AD 31 1C           LDA PASS        ;GET PASS COUNT
01960  2C1A  CD 33 1C           CMP EPASS       ;EXTERNAL
01961  2C1D  F0 44              BEQ RELSYM      ;EXIT ON EXTERNAL
01962  2C1F              ;
01963  2C1F  AD 41 1C           LDA SELECT      ;GET LOW POINTER
01964  2C22  8D 64 1C           STA WORKED      ;STORE TEMP
01965  2C25  AD 42 1C           LDA SELECT+1    ;GET HIGH POINTER
01966  2C28  8D 65 1C           STA WORKED+1    ;STORE TEMP
01967  2C2B  EE 64 1C           INC WORKED      ;ADD 1 TO ADDRESS
01968  2C2E  D0 03              BNE *+5         ;ZERO MEANS CARRY
01969  2C30  EE 65 1C           INC WORKED+1    ;INC HIGH ADDRESS
01970  2C33              ;
01971  2C33  20 80 2D           JSR GETSL       ;GET BYTE BRANCH OFFSET
01972  2C36  C9 00              CMP #$00        ;IS IT ZERO
01973  2C38  10 03              BPL FORWRD      ;IF SO BRANCH
01974  2C3A  CE 65 1C           DEC WORKED+1    ;DEC HIGH POINTER
01975  2C3D  18          FORWRD CLC             ;CLEAR CARRY FLAG
01976  2C3E  6D 64 1C           ADC WORKED      ;ADD IN OPERAND
01977  2C41  90 03              BCC RELND       ;TO SELECT ADDRES
01978  2C43  EE 65 1C           INC WORKED+1    ;AND NOW POINTS
01979  2C46  8D 64 1C    RELND  STA WORKED      ;TARGET ADDRESS
01980  2C49              ;
01981  2C49  AD 31 1C           LDA PASS        ;GET PASS COUNT
01982  2C4C  CD 32 1C           CMP IPASS       ;INTERNAL
01983  2C4F  F0 0F              BEQ RELPUT      ;ADDRESS TABLE
01984  2C51              ;
01985  2C51  20 B2 37           JSR SYMOP       ;CHECK FOR SYMBOL
01986  2C54  B0 0D              BCS RELSYM      ;C=1 SYMBOL
01987  2C56              ;
01988  2C56  AD 37 1C           LDA ROPT        ;CHECK OPTION
01989  2C59  C9 01              CMP #$01        ;REL TO * ?
01990  2C5B  F0 07              BEQ RELPC       ;IF SO DO IT
01991  2C5D              ;
01992  2C5D  4C 13 2D           JMP PWORK       ;PRINT ADDRESS
01993  2C60              ;
01994  2C60              RELPUT = *
01995  2C60  4C 09 2F           JMP PUTI        ;PUT IN TABLE
01996  2C63              ;
01997  2C63  60          RELSYM RTS             ;RETURN
01998  2C64              ;*********************************






DISASSEMBLER128......PAGE 0041

LINE# LOC   CODE        LINE


01999  2C64              ; PRINT RELATIVE TO PC
02000  2C64              ;*********************************
02001  2C64  20 80 2D    RELPC  JSR GETSL       ;GET BRANCH DATA
02002  2C67  48                 PHA             ;SAVE ON STACK
02003  2C68  30 07              BMI RELNEG      ;BACKWARD ?
02004  2C6A  A9 C7              LDA #<POSREL
02005  2C6C  A0 2D              LDY #>POSREL
02006  2C6E  4C 75 2C           JMP RELPM
02007  2C71  A9 CB       RELNEG LDA #<NEGREL
02008  2C73  A0 2D              LDY #>NEGREL
02009  2C75  20 0E 28    RELPM  JSR STRPNT
02010  2C78  68                 PLA             ;GET BRANCH DATA
02011  2C79  18                 CLC             ;CLEAR CARRY
02012  2C7A  69 02              ADC #$02        ;ADD 2 FOR BRANCH
02013  2C7C  10 05              BPL RELP        ;FORWARD ?
02014  2C7E  18                 CLC             ;CLEAR CARRY
02015  2C7F  49 FF              EOR #$FF        ;COMPLMENT
02016  2C81  69 01              ADC #$01        ;ADD 1 FOR 2'S
02017  2C83  20 F8 27    RELP   JSR PRBYT       ;PRINT BRANCH
02018  2C86  20 4C 2D           JSR SPAC6       ;SPACE
02019  2C89  20 1F 2D           JSR SEMIC       ;COMMENT CHAR
02020  2C8C  4C 13 2D           JMP PWORK       ;PRINT ADDRESS
02021  2C8F              ;*********************************
02022  2C8F              ;  ORGIN LABEL
02023  2C8F              ;*********************************
02024  2C8F  20 7F 2E    ORGIN  JSR PRTOTH      ;PRINT LINE DATA
02025  2C92  A9 2A              LDA #'*'        ;PC
02026  2C94  20 64 28           JSR PCHAR       ;PRINT IT
02027  2C97  A9 3D              LDA #'='        ;EQUALS
02028  2C99  20 64 28           JSR PCHAR       ;PRINT IT
02029  2C9C  20 24 2D           JSR DOLLAR      ;ASCII $
02030  2C9F  20 0A 2D           JSR PSELEC      ;PRINT ADDRESS
02031  2CA2  4C 51 27           JMP NEWLIN      ;START NEWLINE
02032  2CA5              ;*********************************
02033  2CA5              ; END OF FILE LABLE
02034  2CA5              ;*********************************
02035  2CA5  20 B5 2C    EFILE  JSR COMENT      ;COMMENT LINE
02036  2CA8  20 7F 2E           JSR PRTOTH      ;PRINT LINE DATA
02037  2CAB  A9 CF              LDA #<MSGEND    ;END MESSAGE
02038  2CAD  A0 2D              LDY #>MSGEND
02039  2CAF  20 0E 28           JSR STRPNT      ;PRINT IT
02040  2CB2  4C 51 27           JMP NEWLIN      ;NEW LINE
02041  2CB5              ;*********************************
02042  2CB5              ; PRINT COMMENT LINE
02043  2CB5              ;*********************************
02044  2CB5  20 BB 2C    COMENT JSR COMET       ;PRINT COMMENT
02045  2CB8  4C 51 27           JMP NEWLIN      ;NEXT LINE
02046  2CBB              ;*********************************
02047  2CBB  20 7F 2E    COMET  JSR PRTOTH      ;PRINT LINE DATA
02048  2CBE  20 1F 2D           JSR SEMIC       ;PRINT COMMENT
02049  2CC1  AD 3B 1C           LDA FOROPT
02050  2CC4  D0 03              BNE CSHORT
02051  2CC6  A0 20              LDY #$20        ;COUNTER
02052  2CC8  2C                 .BYTE $2C
02053  2CC9  A0 10       CSHORT LDY #$10






DISASSEMBLER128......PAGE 0042

LINE# LOC   CODE        LINE


02054  2CCB  A9 2A       COMPT  LDA #'*'        ;STAR
02055  2CCD  20 64 28           JSR PCHAR       ;PRINT CHAR
02056  2CD0  88                 DEY             ;DEC COUNTER
02057  2CD1  D0 F8              BNE COMPT       ;20 OR 10 STARS
02058  2CD3  60                 RTS             ;RETURN
02059  2CD4              ;*********************************
02060  2CD4              ;     PRINT SELECTED ADDRESS
02061  2CD4              ;*********************************
02062  2CD4  A9 58       PRLA   LDA #'X'        ;XX LABEL
02063  2CD6  20 64 28           JSR PCHAR       ;
02064  2CD9  A9 58              LDA #'X'        ;
02065  2CDB  4C 64 28           JMP PCHAR       ;
02066  2CDE              ;*********************************
02067  2CDE              ; PRINT CODE ADDRESS
02068  2CDE              ;*********************************
02069  2CDE  20 9E 37    PRAD   JSR SYM         ;CHECK FOR SYMBOLIC
02070  2CE1  B0 1F              BCS NPRAD1      ;C=1 SYMBOLIC LABEL
02071  2CE3  AD 36 1C           LDA XOPT        ;CHECK GENERATION
02072  2CE6  F0 10              BEQ P1          ;NO LABELS
02073  2CE8  20 68 2F           JSR INTCHA      ;IS ADDRESS IN TAB
02074  2CEB  B0 0B              BCS P1          ;C=1 YES
02075  2CED  AD 3B 1C           LDA FOROPT      ;CHECK FORMAT
02076  2CF0  F0 03              BEQ POVER       ;STD FORMAT
02077  2CF2  4C 59 2D           JMP SPACE       ;ONE SPACE
02078  2CF5  4C 4C 2D    POVER  JMP SPAC6       ;SPACE OVER
02079  2CF8              ;*********************************
02080  2CF8              ; PRINT ADDRESS AS LABEL
02081  2CF8              ;*********************************
02082  2CF8  20 D4 2C    P1     JSR PRLA        ;PRINT XX
02083  2CFB  20 0A 2D           JSR PSELEC      ;PRINT ADDRESS
02084  2CFE  EA                 NOP
02085  2CFF  EA                 NOP
02086  2D00  EA                 NOP
02087  2D01  60          NPRAD  RTS             ;RETURN
02088  2D02              ;*********************************
02089  2D02  AD 3B 1C    NPRAD1 LDA FOROPT
02090  2D05  D0 FA              BNE NPRAD
02091  2D07  4C 4F 38           JMP FIXSYM
02092  2D0A              ;*********************************
02093  2D0A              ; PRINT SELECT ADDRESS
02094  2D0A              ;*********************************
02095  2D0A  AD 41 1C    PSELEC LDA SELECT      ;LOW BYTE
02096  2D0D  AC 42 1C           LDY SELECT+1    ;HIGH BYTE
02097  2D10  4C F2 27           JMP PRBYTS      ;PRINT THEM
02098  2D13              ;*********************************
02099  2D13              ; PRINT WORKED ADDRESS WITH XX
02100  2D13              ;*********************************
02101  2D13  20 D4 2C    PWORK  JSR PRLA        ;PRINT XX
02102  2D16              ;*********************************
02103  2D16              ; PRINT WORKED ADDRESS
02104  2D16              ;*********************************
02105  2D16  AD 64 1C    PWORKD LDA WORKED      ;LOW BYTE
02106  2D19  AC 65 1C           LDY WORKED+1    ;HIGH BYTE
02107  2D1C  4C F2 27           JMP PRBYTS      ;PRINT THEM
02108  2D1F              ;********************************






DISASSEMBLER128......PAGE 0043

LINE# LOC   CODE        LINE


02109  2D1F              ; PRINT SEMICOLON FOR COMMENT
02110  2D1F              ;********************************
02111  2D1F  A9 3B       SEMIC  LDA #';'
02112  2D21  4C 64 28           JMP PCHAR
02113  2D24              ;********************************
02114  2D24              ; PRINT DOLLAR SIGN FOR HEX
02115  2D24              ;********************************
02116  2D24  A9 24       DOLLAR LDA #'$'
02117  2D26  4C 64 28           JMP PCHAR
02118  2D29              ;********************************
02119  2D29              ; PRINT LEFT PARENTTHESES
02120  2D29              ;********************************
02121  2D29  A9 28       LPAREN LDA #'('
02122  2D2B  4C 64 28           JMP PCHAR
02123  2D2E              ;********************************
02124  2D2E              ; PRINT RIGHT PARENTTHESES
02125  2D2E              ;********************************
02126  2D2E  A9 29       RPAREN LDA #')'
02127  2D30  4C 64 28           JMP PCHAR
02128  2D33              ;********************************
02129  2D33              ; PRINT A COMMA AND AN "X"
02130  2D33              ;********************************
02131  2D33  A9 2C       XINDEX LDA #','
02132  2D35  20 64 28           JSR PCHAR
02133  2D38  A9 58              LDA #'X'
02134  2D3A  4C 64 28           JMP PCHAR
02135  2D3D              ;********************************
02136  2D3D              ; PRINT A COMMA AND A "Y"
02137  2D3D              ;********************************
02138  2D3D  A9 2C       YINDEX LDA #','
02139  2D3F  20 64 28           JSR PCHAR
02140  2D42  A9 59              LDA #'Y'
02141  2D44  4C 64 28           JMP PCHAR
02142  2D47              ;********************************
02143  2D47              ; PRINT CARRAIGE RETURN
02144  2D47              ;*********************************
02145  2D47  A9 0D       CRLF   LDA #$0D        ;ASCII CR
02146  2D49  4C 64 28           JMP PCHAR       ;PRINT
02147  2D4C              ;*********************************
02148  2D4C              ; PRINT SIX SPACES
02149  2D4C              ;*********************************
02150  2D4C  A9 05       SPAC6  LDA #$05
02151  2D4E  8D 70 1C    SPACM  STA TEMP
02152  2D51  20 59 2D    SPAC   JSR SPACE
02153  2D54  CE 70 1C           DEC TEMP
02154  2D57  D0 F8              BNE SPAC
02155  2D59              ;*********************************
02156  2D59              ; PRINT SPACE
02157  2D59              ;*********************************
02158  2D59  A9 20       SPACE  LDA #$20        ;ASCII SPACE
02159  2D5B  4C 64 28           JMP PCHAR       ;PRINT
02160  2D5E              ;*********************************
02161  2D5E              ; SELECT NEXT BYTE
02162  2D5E              ;*********************************
02163  2D5E  AD 42 1C    NEXTSL LDA SELECT+1






DISASSEMBLER128......PAGE 0044

LINE# LOC   CODE        LINE


02164  2D61  CD 40 1C           CMP EA+1
02165  2D64  90 0A              BCC SLOK
02166  2D66  D0 0D              BNE NOINC
02167  2D68  AD 41 1C           LDA SELECT
02168  2D6B  CD 3F 1C           CMP EA
02169  2D6E  B0 05              BCS NOINC
02170  2D70  20 77 2D    SLOK   JSR INCSL
02171  2D73  18                 CLC
02172  2D74  60                 RTS
02173  2D75  38          NOINC  SEC
02174  2D76  60                 RTS
02175  2D77              ;*********************************
02176  2D77              ; INC SELECTED BYTE
02177  2D77              ;*********************************
02178  2D77  EE 41 1C    INCSL  INC SELECT
02179  2D7A  D0 03              BNE *+5
02180  2D7C  EE 42 1C           INC SELECT+1
02181  2D7F  60                 RTS
02182  2D80              ;*********************************
02183  2D80              ; GET SELECTED BYTE
02184  2D80              ; C128 BYTE IN RAM BANK 1
02185  2D80              ;*********************************
02186  2D80  18          GETSL  CLC
02187  2D81  AD 41 1C           LDA SELECT
02188  2D84  6D 43 1C           ADC OFFSET
02189  2D87  85 FB              STA ZEROUR
02190  2D89  AD 42 1C           LDA SELECT+1
02191  2D8C  6D 44 1C           ADC OFFSET+1
02192  2D8F  85 FC              STA ZEROUR+1
02193  2D91  A0 00              LDY #$00
02194  2D93  A2 01              LDX #$01        ;RAM BANK 1
02195  2D95  B1 FB              LDA (ZEROUR),Y
02196  2D97              ; JSR INDFET
02197  2D97  60                 RTS
02198  2D98              ;*********************************
02199  2D98              ; DEC SLECTED BYTE
02200  2D98              ;*********************************
02201  2D98  AD 41 1C    DECSL  LDA SELECT
02202  2D9B  D0 03              BNE *+5
02203  2D9D  CE 42 1C           DEC SELECT+1
02204  2DA0  CE 41 1C           DEC SELECT
02205  2DA3  60                 RTS
02206  2DA4              ;*********************************
02207  2DA4              ; INITIALIZE SELECT
02208  2DA4              ;*********************************
02209  2DA4  AD 3D 1C    INTSA  LDA SA
02210  2DA7  8D 41 1C           STA SELECT
02211  2DAA  AD 3E 1C           LDA SA+1
02212  2DAD  8D 42 1C           STA SELECT+1
02213  2DB0  60                 RTS
02214  2DB1              ;*********************************
02215  2DB1              ; ASCII STRING DATA
02216  2DB1              ;*********************************
02217  2DB1  2E 42       MSGBIT .BYTE '.BYTE $',0
02217  2DB8  00 






DISASSEMBLER128......PAGE 0045

LINE# LOC   CODE        LINE


02218  2DB9  20 3B       MSGBZP .BYTE '         ;BIT ZP SKIP',0
02218  2DC6  00 
02219  2DC7  2A 2B 24    POSREL .BYTE '*+$',0
02219  2DCA  00 
02220  2DCB  2A 2D 24    NEGREL .BYTE '*-$',0
02220  2DCE  00 
02221  2DCF  2E 45       MSGEND .BYTE '.END',0
02221  2DD3  00 
02222  2DD4  3B 3F       ILLMSG .BYTE ';??? ILLEGAL OPCODE',0
02222  2DE7  00 
02223  2DE8              ;*********************************
02224  2DE8              ; PRINT ONE BYTE OPCODE DATA
02225  2DE8              ;*********************************
02226  2DE8  20 80 2D    PRTONE JSR GETSL       ;GET BYTE
02227  2DEB  20 F8 27           JSR PRBYT       ;PRINT BYTE
02228  2DEE  AD 3B 1C           LDA FOROPT
02229  2DF1  F0 03              BEQ PRTON1
02230  2DF3  A9 07              LDA #$07
02231  2DF5  2C                 .BYTE $2C
02232  2DF6  A9 09       PRTON1 LDA #$09        ;10 SPACES
02233  2DF8  20 4E 2D           JSR SPACM       ;
02234  2DFB  4C 54 2E           JMP PRTEST      ;RESET I/O DEVICE
02235  2DFE              ;*********************************
02236  2DFE              ; PRINT TWO BYTE OPCODE DATA
02237  2DFE              ;*********************************
02238  2DFE  20 80 2D    PRTTWO JSR GETSL       ;GET BYTE
02239  2E01  20 F8 27           JSR PRBYT       ;PRINT BYTE
02240  2E04  20 59 2D           JSR SPACE       ;
02241  2E07  20 77 2D           JSR INCSL       ;INC TO OPERAND
02242  2E0A  20 80 2D           JSR GETSL       ;GET BYTE
02243  2E0D  20 F8 27           JSR PRBYT       ;PRINT IT
02244  2E10  AD 3B 1C           LDA FOROPT
02245  2E13  F0 03              BEQ PRTTW1
02246  2E15  A9 04              LDA #$04
02247  2E17  2C                 .BYTE $2C
02248  2E18  A9 06       PRTTW1 LDA #$06        ;7 SPACES
02249  2E1A  20 4E 2D           JSR SPACM       ;
02250  2E1D  20 98 2D           JSR DECSL       ;RESET POINTER
02251  2E20  4C 54 2E           JMP PRTEST      ;RESET I/O DEVICE
02252  2E23              ;*********************************
02253  2E23              ; PRINT THREE BYTE OPCODE DATA
02254  2E23              ;*********************************
02255  2E23  20 80 2D    PRTTHE JSR GETSL       ;GET BYTE
02256  2E26  20 F8 27           JSR PRBYT       ;PRINT BYTE
02257  2E29  20 59 2D           JSR SPACE       ;
02258  2E2C  20 77 2D           JSR INCSL       ;INC TO OPERAND
02259  2E2F  20 80 2D           JSR GETSL       ;GET BYTE
02260  2E32  20 F8 27           JSR PRBYT       ;PRINT IT
02261  2E35  20 59 2D           JSR SPACE       ;
02262  2E38  20 77 2D           JSR INCSL       ;INC TO LAST BYTE
02263  2E3B  20 80 2D           JSR GETSL       ;GET BYTE
02264  2E3E  20 F8 27           JSR PRBYT       ;PRINT IT
02265  2E41  AD 3B 1C           LDA FOROPT
02266  2E44  F0 03              BEQ PRTTH1
02267  2E46  A9 01              LDA #$01






DISASSEMBLER128......PAGE 0046

LINE# LOC   CODE        LINE


02268  2E48  2C                 .BYTE $2C
02269  2E49  A9 03       PRTTH1 LDA #$03        ;4 SPACES
02270  2E4B  20 4E 2D           JSR SPACM       ;
02271  2E4E  20 98 2D           JSR DECSL       ;DEC POINTER
02272  2E51  20 98 2D           JSR DECSL       ;DEC POINTER
02273  2E54              ;*********************************
02274  2E54              ; RESET I/O DEVICE (DISK IF USED)
02275  2E54              ;*********************************
02276  2E54  AD 39 1C    PRTEST LDA OUTPUT      ;GET I/O DEVICE
02277  2E57  8D 38 1C           STA DEVICE      ;RESET I/O
02278  2E5A  60                 RTS             ;RETURN
02279  2E5B              ;*********************************
02280  2E5B              ; PRINT LINE DATA FOR OPCODE
02281  2E5B              ;*********************************
02282  2E5B  AD 38 1C    PRTDAT LDA DEVICE      ;OUTPUT DEVICE
02283  2E5E  29 07              AND #$07        ;MASK DISK
02284  2E60  8D 38 1C           STA DEVICE      ;RESET
02285  2E63  AD 3B 1C           LDA FOROPT      ;CHECK FORMAT
02286  2E66  D0 0F              BNE PRTDAF      ;SKIP LINE #
02287  2E68  AD 78 1C           LDA LINECT+1    ;HIH BYTE LINE
02288  2E6B  AE 77 1C           LDX LINECT      ;LOW BYTE LINE
02289  2E6E  20 2A 28           JSR PRTNUM      ;PRINT NUMBER
02290  2E71  20 59 2D           JSR SPACE       ;
02291  2E74  20 59 2D           JSR SPACE       ;
02292  2E77  20 0A 2D    PRTDAF JSR PSELEC      ;PRINT ADDRESS
02293  2E7A  A9 01              LDA #$01        ;2 SPACES
02294  2E7C  4C 4E 2D           JMP SPACM       ;
02295  2E7F              ;*********************************
02296  2E7F              ; PRINT LINE DATA FOR OTHER LINES
02297  2E7F              ;*********************************
02298  2E7F  20 5B 2E    PRTOTH JSR PRTDAT      ;PRINT LINE
02299  2E82  AD 3B 1C           LDA FOROPT
02300  2E85  F0 03              BEQ PRTOT1
02301  2E87  A9 09              LDA #$09
02302  2E89  2C                 .BYTE $2C
02303  2E8A  A9 0B       PRTOT1 LDA #$0B        ;12 SPACES
02304  2E8C  20 4E 2D           JSR SPACM       ;
02305  2E8F  4C 54 2E           JMP PRTEST      ;RESET I/O
02306  2E92              ;********************************
02307  2E92              ;.FIL 0:INTERNAL.ASM
02308  2E92              ;********************************
02309  2E92              .END
02310  2E92              ;*********************************
02311  2E92              .LIB   INTERNAL.ASM
02312  2E92              ;*********************************
02313  2E92              ; FILE INTERNAL.ASM
02314  2E92              ;*********************************
02315  2E92              ;
02316  2E92              ;        DISASSEMBLER128
02317  2E92              ;    SYMBOLIC DISASSEMBLER
02318  2E92              ;       BY DENTON MARLOWE
02319  2E92              ;
02320  2E92              ;  (C)1986 BY DENTON MARLOWE
02321  2E92              ;
02322  2E92              ;*********************************






DISASSEMBLER128......PAGE 0047

LINE# LOC   CODE        LINE


02323  2E92              ; INTERNAL ADDRESS TABLE ROUTINES
02324  2E92              ;*********************************
02325  2E92              ; CHECK FOR OUT OF RANGE ADDRESS
02326  2E92              ;*********************************
02327  2E92  AD 65 1C    RANGE  LDA WORKED+1    ;GET HIGH
02328  2E95  CD 48 1C           CMP EAGOL+1     ;COMPARE
02329  2E98  90 0A              BCC RANG        ;< CHECK START
02330  2E9A  D0 1A              BNE ROUT        ;> OUT OF RANGE
02331  2E9C  AD 64 1C           LDA WORKED      ;GET LOW
02332  2E9F  CD 47 1C           CMP EAGOL       ;COMPARE
02333  2EA2  B0 12              BCS ROUT        ;> OUT OF RANGE
02334  2EA4              ;*********************************
02335  2EA4  AD 65 1C    RANG   LDA WORKED+1    ;GET HIGH
02336  2EA7  CD 46 1C           CMP SAGOL+1     ;COMPARE
02337  2EAA  90 0A              BCC ROUT        ;< OUT OF RANGE
02338  2EAC  AD 64 1C           LDA WORKED      ;GET LOW
02339  2EAF  CD 45 1C           CMP SAGOL       ;COMPARE
02340  2EB2  90 02              BCC ROUT        ;< OUT OF RANGE
02341  2EB4              ;*********************************
02342  2EB4  18                 CLC             ;C=0 IN RANGE
02343  2EB5  60                 RTS
02344  2EB6  38          ROUT   SEC             ;C=1 OUT RANGE
02345  2EB7  60                 RTS
02346  2EB8              ;*********************************
02347  2EB8              ; INITIALIZE INTERNAL TABLE
02348  2EB8              ;*********************************
02349  2EB8  AD 0E 1D    INITIN LDA DATABE
02350  2EBB  8D 4F 1C           STA TABINS
02351  2EBE  8D 51 1C           STA TABINE
02352  2EC1  AD 0F 1D           LDA DATABE+1
02353  2EC4  8D 50 1C           STA TABINS+1
02354  2EC7  8D 52 1C           STA TABINE+1
02355  2ECA              ;*********************************
02356  2ECA              ; INITIALIZE INTERNAL TABLE POINT
02357  2ECA              ;*********************************
02358  2ECA  AD 4F 1C    INTSET LDA TABINS
02359  2ECD  8D 4D 1C           STA TABINP
02360  2ED0  AD 50 1C           LDA TABINS+1
02361  2ED3  8D 4E 1C           STA TABINP+1
02362  2ED6  60                 RTS
02363  2ED7              ;*********************************
02364  2ED7              ; SAVE INTERNAL TABLE POINTERS
02365  2ED7              ;*********************************
02366  2ED7  AD 4F 1C    SAVINT LDA TABINS
02367  2EDA  8D 6A 1C           STA SAVES
02368  2EDD  AD 50 1C           LDA TABINS+1
02369  2EE0  8D 6B 1C           STA SAVES+1
02370  2EE3  AD 51 1C           LDA TABINE
02371  2EE6  8D 6C 1C           STA SAVEE
02372  2EE9  AD 52 1C           LDA TABINE+1
02373  2EEC  8D 6D 1C           STA SAVEE+1
02374  2EEF  60                 RTS
02375  2EF0              ;*********************************
02376  2EF0              ; RESTORE INTERNAL TABLE POINTERS
02377  2EF0              ;*********************************






DISASSEMBLER128......PAGE 0048

LINE# LOC   CODE        LINE


02378  2EF0  AD 6A 1C    RESINT LDA SAVES
02379  2EF3  8D 4F 1C           STA TABINS
02380  2EF6  AD 6B 1C           LDA SAVES+1
02381  2EF9  8D 50 1C           STA TABINS+1
02382  2EFC  AD 6C 1C           LDA SAVEE
02383  2EFF  8D 51 1C           STA TABINE
02384  2F02  AD 6D 1C           LDA SAVEE+1
02385  2F05  8D 52 1C           STA TABINE+1
02386  2F08  60                 RTS
02387  2F09              ;*********************************
02388  2F09              ; PUT ADDRESS IN INTERNAL TABLE
02389  2F09              ;*********************************
02390  2F09  38          PUTI   SEC
02391  2F0A  AD 4F 1C           LDA TABINS
02392  2F0D  ED 51 1C           SBC TABINE
02393  2F10  8D 70 1C           STA TEMP
02394  2F13  AD 50 1C           LDA TABINS+1
02395  2F16  ED 52 1C           SBC TABINE+1
02396  2F19  0D 70 1C           ORA TEMP
02397  2F1C  F0 05              BEQ PUIT
02398  2F1E              ;
02399  2F1E  20 74 2F           JSR INTCHK      ;IS ADDRESS IN TAB
02400  2F21  B0 23              BCS INTEXT      ;IF SO EXIT
02401  2F23              ;
02402  2F23  AD 51 1C    PUIT   LDA TABINE      ;GET LOW END
02403  2F26  85 FB              STA ZEROUR      ;STORE
02404  2F28  AD 52 1C           LDA TABINE+1    ;GET HIGH END
02405  2F2B  85 FC              STA ZEROUR+1    ;STORE
02406  2F2D  A0 00              LDY #$00        ;OFFSET
02407  2F2F  AD 64 1C           LDA WORKED      ;GET LOW ADDRESS
02408  2F32  91 FB              STA (ZEROUR),Y  ;PUT IN TABLE
02409  2F34  C8                 INY             ;OFFSET TO HIGH
02410  2F35  AD 65 1C           LDA WORKED+1    ;GET HIGH ADDRESS
02411  2F38  91 FB              STA (ZEROUR),Y  ;PUT IN TABLE
02412  2F3A              ;
02413  2F3A  20 1F 2D           JSR SEMIC       ;PRINT ;
02414  2F3D  20 16 2D           JSR PWORKD      ;PRINT ADDRESS
02415  2F40              ;*********************************
02416  2F40  20 48 2F           JSR INCIE       ;INC TO HIGH & LOW
02417  2F43  4C 48 2F           JMP INCIE       ;INC TO HIGH & LOW
02418  2F46              ;
02419  2F46              INTEXT = *
02420  2F46  18                 CLC             ;C=0 FOR NO MATCH
02421  2F47  60                 RTS             ;RETURN
02422  2F48              ;*********************************
02423  2F48              ; INC INTERNAL END TABLE POINTER
02424  2F48              ;*********************************
02425  2F48  EE 51 1C    INCIE  INC TABINE
02426  2F4B  D0 03              BNE *+5
02427  2F4D  EE 52 1C           INC TABINE+1
02428  2F50              ;*********************************
02429  2F50              ; INC INTERNAL ADDRESS POINTER
02430  2F50              ;*********************************
02431  2F50  EE 4D 1C    INCI   INC TABINP
02432  2F53  D0 03              BNE *+5






DISASSEMBLER128......PAGE 0049

LINE# LOC   CODE        LINE


02433  2F55  EE 4E 1C           INC TABINP+1
02434  2F58  60                 RTS
02435  2F59              ;*********************************
02436  2F59              ; GET BYTE FROM INTERNAL TABLE
02437  2F59              ;*********************************
02438  2F59  AD 4D 1C    GETI   LDA TABINP
02439  2F5C  85 FB              STA ZEROUR
02440  2F5E  AD 4E 1C           LDA TABINP+1
02441  2F61  85 FC              STA ZEROUR+1
02442  2F63  A0 00              LDY #$00
02443  2F65  B1 FB              LDA (ZEROUR),Y
02444  2F67  60                 RTS
02445  2F68              ;*********************************
02446  2F68              ; CHECK IF ADDRESS IN TABLE
02447  2F68              ;*********************************
02448  2F68  AD 41 1C    INTCHA LDA SELECT
02449  2F6B  8D 64 1C           STA WORKED
02450  2F6E  AD 42 1C           LDA SELECT+1
02451  2F71  8D 65 1C           STA WORKED+1
02452  2F74              ;*********************************
02453  2F74  20 CA 2E    INTCHK JSR INTSET
02454  2F77  20 59 2F    INTCH  JSR GETI
02455  2F7A  8D 66 1C           STA WORKER
02456  2F7D  20 50 2F           JSR INCI
02457  2F80  20 59 2F           JSR GETI
02458  2F83  8D 67 1C           STA WORKER+1
02459  2F86  38                 SEC
02460  2F87  AD 65 1C           LDA WORKED+1
02461  2F8A  ED 67 1C           SBC WORKER+1
02462  2F8D  8D 70 1C           STA TEMP
02463  2F90  AD 64 1C           LDA WORKED
02464  2F93  ED 66 1C           SBC WORKER
02465  2F96  0D 70 1C           ORA TEMP
02466  2F99  F0 17              BEQ INTMAT
02467  2F9B              ;*********************************
02468  2F9B  20 50 2F           JSR INCI
02469  2F9E  AD 4E 1C           LDA TABINP+1
02470  2FA1  CD 52 1C           CMP TABINE+1
02471  2FA4  90 D1              BCC INTCH
02472  2FA6  D0 08              BNE INTEND
02473  2FA8  AD 4D 1C           LDA TABINP
02474  2FAB  CD 51 1C           CMP TABINE
02475  2FAE  90 C7              BCC INTCH
02476  2FB0              ;*********************************
02477  2FB0  18          INTEND CLC
02478  2FB1  60                 RTS
02479  2FB2  38          INTMAT SEC
02480  2FB3  60                 RTS
02481  2FB4              ;*********************************
02482  2FB4              ; 2 BYTE TABLE SORT ROUTINE
02483  2FB4              ;*********************************
02484  2FB4  20 CA 2E    SORT   JSR INTSET      ;SET POINTERS
02485  2FB7  AD 4F 1C           LDA TABINS
02486  2FBA  8D 53 1C           STA SMALLS
02487  2FBD  8D 55 1C           STA SMALLP






DISASSEMBLER128......PAGE 0050

LINE# LOC   CODE        LINE


02488  2FC0  AD 50 1C           LDA TABINS+1
02489  2FC3  8D 54 1C           STA SMALLS+1
02490  2FC6  8D 56 1C           STA SMALLP+1
02491  2FC9              ;*********************************
02492  2FC9              ; PUT FIRST WORD INTO TEMP
02493  2FC9              ;*********************************
02494  2FC9  20 59 2F    SORT1  JSR GETI
02495  2FCC  8D 70 1C           STA TEMP
02496  2FCF  20 50 2F           JSR INCI
02497  2FD2  20 59 2F           JSR GETI
02498  2FD5  8D 71 1C           STA TEMP+1
02499  2FD8              ;*********************************
02500  2FD8              ; INC TO NEXT WORD AND COMPARE
02501  2FD8              ; SMALLP POINTS TO LOW BYTE
02502  2FD8              ;*********************************
02503  2FD8  20 50 2F    SORT2  JSR INCI
02504  2FDB  AD 4D 1C           LDA TABINP
02505  2FDE  8D 55 1C           STA SMALLP
02506  2FE1  AD 4E 1C           LDA TABINP+1
02507  2FE4  8D 56 1C           STA SMALLP+1
02508  2FE7  20 59 2F           JSR GETI
02509  2FEA  8D 64 1C           STA WORKED
02510  2FED  20 50 2F           JSR INCI
02511  2FF0  AD 4E 1C           LDA TABINP+1
02512  2FF3  CD 52 1C           CMP TABINE+1
02513  2FF6  90 0D              BCC T2
02514  2FF8  D0 08              BNE S3
02515  2FFA  AD 4D 1C           LDA TABINP
02516  2FFD  CD 51 1C           CMP TABINE
02517  3000  90 03              BCC T2
02518  3002  4C 5A 30    S3     JMP SORT3
02519  3005  20 59 2F    T2     JSR GETI
02520  3008  8D 65 1C           STA WORKED+1
02521  300B  CD 71 1C           CMP TEMP+1
02522  300E  90 0D              BCC SMALL
02523  3010  D0 08              BNE LARGE
02524  3012  AD 64 1C           LDA WORKED
02525  3015  CD 70 1C           CMP TEMP
02526  3018  90 03              BCC SMALL
02527  301A  4C D8 2F    LARGE  JMP SORT2
02528  301D              ;*********************************
02529  301D              ; WORD IS SMALL THAN TEMP PUT IT
02530  301D              ; WHERE TEMP CAME FROM (SMALLS)
02531  301D              ;*********************************
02532  301D  AD 53 1C    SMALL  LDA SMALLS
02533  3020  85 FB              STA ZEROUR
02534  3022  AD 54 1C           LDA SMALLS+1
02535  3025  85 FC              STA ZEROUR+1
02536  3027  A0 00              LDY #$00
02537  3029  AD 64 1C           LDA WORKED
02538  302C  91 FB              STA (ZEROUR),Y
02539  302E  C8                 INY
02540  302F  AD 65 1C           LDA WORKED+1
02541  3032  91 FB              STA (ZEROUR),Y
02542  3034              ;*********************************






DISASSEMBLER128......PAGE 0051

LINE# LOC   CODE        LINE


02543  3034              ; PUT TEMP IN PLACE OF WORD
02544  3034              ; SMALLP POINTS TO LO ADDRESS
02545  3034              ;*********************************
02546  3034  AD 55 1C           LDA SMALLP
02547  3037  85 FB              STA ZEROUR
02548  3039  AD 56 1C           LDA SMALLP+1
02549  303C  85 FC              STA ZEROUR+1
02550  303E  A0 00              LDY #$00
02551  3040  AD 70 1C           LDA TEMP
02552  3043  91 FB              STA (ZEROUR),Y
02553  3045  C8                 INY
02554  3046  AD 71 1C           LDA TEMP+1
02555  3049  91 FB              STA (ZEROUR),Y
02556  304B              ;*********************************
02557  304B  AD 53 1C           LDA SMALLS
02558  304E  8D 4D 1C           STA TABINP
02559  3051  AD 54 1C           LDA SMALLS+1
02560  3054  8D 4E 1C           STA TABINP+1
02561  3057  4C C9 2F           JMP SORT1
02562  305A              ;*********************************
02563  305A              ; IF AFTER SCAN TO TABLE GOTO NEXT
02564  305A              ; WORD IN TABLE FOR CHECK
02565  305A              ;*********************************
02566  305A  18          SORT3  CLC
02567  305B  AD 53 1C           LDA SMALLS
02568  305E  69 02              ADC #$02
02569  3060  8D 53 1C           STA SMALLS
02570  3063  8D 4D 1C           STA TABINP
02571  3066  AD 54 1C           LDA SMALLS+1
02572  3069  69 00              ADC #$00
02573  306B  8D 54 1C           STA SMALLS+1
02574  306E  8D 4E 1C           STA TABINP+1
02575  3071  AD 54 1C           LDA SMALLS+1
02576  3074  CD 52 1C           CMP TABINE+1
02577  3077  90 0A              BCC SORTOK
02578  3079  D0 0B              BNE SORT4
02579  307B  AD 53 1C           LDA SMALLS
02580  307E  CD 51 1C           CMP TABINE
02581  3081  B0 03              BCS SORT4
02582  3083  4C C9 2F    SORTOK JMP SORT1
02583  3086              ;*********************************
02584  3086  4C CA 2E    SORT4  JMP INTSET
02585  3089              ;*********************************
02586  3089              ; PRINT INTERNAL ADDRESS TABLE
02587  3089              ;*********************************
02588  3089  38          INTPRT SEC
02589  308A  AD 4F 1C           LDA TABINS
02590  308D  ED 51 1C           SBC TABINE
02591  3090  8D 70 1C           STA TEMP
02592  3093  AD 50 1C           LDA TABINS+1
02593  3096  ED 52 1C           SBC TABINE+1
02594  3099  0D 70 1C           ORA TEMP
02595  309C  D0 01              BNE INTOUT
02596  309E  60                 RTS
02597  309F              ;*********************************






DISASSEMBLER128......PAGE 0052

LINE# LOC   CODE        LINE


02598  309F  20 3B 29    INTOUT JSR HEADSY
02599  30A2  20 B4 2F           JSR SORT
02600  30A5              ;*********************************
02601  30A5  A9 03       LOOP1  LDA #$03
02602  30A7  8D 71 1C           STA SAVA
02603  30AA  20 59 2F    INTPR  JSR GETI
02604  30AD  8D 64 1C           STA WORKED
02605  30B0  20 50 2F           JSR INCI
02606  30B3  20 59 2F           JSR GETI
02607  30B6  8D 65 1C           STA WORKED+1
02608  30B9  20 59 2D           JSR SPACE
02609  30BC  20 B2 37           JSR SYMOP
02610  30BF  90 0B              BCC INTPRS
02611  30C1  20 4F 38           JSR FIXSYM
02612  30C4  A9 02              LDA #$02
02613  30C6  20 4E 2D           JSR SPACM
02614  30C9  4C D1 30           JMP INTPRM
02615  30CC  A9 08       INTPRS LDA #$08
02616  30CE  20 4E 2D           JSR SPACM
02617  30D1  20 16 2D    INTPRM JSR PWORKD
02618  30D4  20 50 2F           JSR INCI
02619  30D7  AD 4E 1C           LDA TABINP+1
02620  30DA  CD 52 1C           CMP TABINE+1
02621  30DD  90 0A              BCC PRTOK
02622  30DF  D0 15              BNE PREND
02623  30E1  AD 4D 1C           LDA TABINP
02624  30E4  CD 51 1C           CMP TABINE
02625  30E7  B0 0D              BCS PREND
02626  30E9  CE 71 1C    PRTOK  DEC SAVA
02627  30EC  30 0B              BMI LOOP2
02628  30EE  A9 02              LDA #$02
02629  30F0  20 4E 2D           JSR SPACM
02630  30F3  4C AA 30           JMP INTPR
02631  30F6  4C 10 29    PREND  JMP NEXPTS
02632  30F9  20 10 29    LOOP2  JSR NEXPTS
02633  30FC  4C A5 30           JMP LOOP1
02634  30FF              ;*********************************
02635  30FF              ;.FIL 0:ASC.ASM
02636  30FF              ;*********************************
02637  30FF              .END
02638  30FF              ;*********************************
02639  30FF              .LIB   ASC.ASM
02640  30FF              ;*********************************
02641  30FF              ; FILE ASC.ASM
02642  30FF              ;*********************************
02643  30FF              ;
02644  30FF              ;        DISASSEMBLER128
02645  30FF              ;    SYMBOLIC DISASSEMBLER
02646  30FF              ;       BY DENTON MARLOWE
02647  30FF              ;
02648  30FF              ;  (C)1986 BY DENTON MARLOWE
02649  30FF              ;
02650  30FF              ;*********************************
02651  30FF              ; DATA TABLE HANDLER
02652  30FF              ;*********************************






DISASSEMBLER128......PAGE 0053

LINE# LOC   CODE        LINE


02653  30FF  AD 08 1D    DATAOP LDA NDATA       ;GET NUM TABLES
02654  3102  F0 07              BEQ ENDAX       ;IF ZERO EXIT
02655  3104  A9 00              LDA #$00        ;ZERO BYTE
02656  3106  8D 06 1D           STA CDATA       ;SET FIRST TABLE
02657  3109  F0 03              BEQ DATAO1      ;
02658  310B  4C EF 31    ENDAX  JMP ENDDAT      ;
02659  310E              ;*********************************
02660  310E  AD 06 1D    DATAO1 LDA CDATA       ;CURRENT TABLE
02661  3111  CD 08 1D           CMP NDATA       ;LAST TABLE DONE
02662  3114  F0 F5              BEQ ENDAX       ;IF SO EXIT
02663  3116  0A                 ASL A           ;CDATA*2
02664  3117  0A                 ASL A           ;CDATA*4
02665  3118  18                 CLC
02666  3119  6D 06 1D           ADC CDATA       ;CDATA*5
02667  311C  A8                 TAY             ;PUT INTO INDEX
02668  311D  B9 10 1D           LDA TDATA,Y     ;START LOW
02669  3120  8D 66 1C           STA WORKER      ;STORE
02670  3123  C8                 INY             ;INC OFFSET
02671  3124  B9 10 1D           LDA TDATA,Y     ;START HIGH
02672  3127  8D 67 1C           STA WORKER+1    ;STORE
02673  312A  38                 SEC             ;C=1
02674  312B  AD 66 1C           LDA WORKER      ;
02675  312E  ED 41 1C           SBC SELECT      ;
02676  3131  8D 70 1C           STA TEMP        ;
02677  3134  AD 67 1C           LDA WORKER+1    ;
02678  3137  ED 42 1C           SBC SELECT+1    ;
02679  313A  0D 70 1C           ORA TEMP        ;
02680  313D  F0 05              BEQ DATAO2      ;MATCH
02681  313F  EE 06 1D           INC CDATA       ;NEXT TABLE
02682  3142  D0 CA              BNE DATAO1      ;CHECK FOR MATCH
02683  3144              ;*********************************
02684  3144              ; GET TABLE DATA
02685  3144              ;*********************************
02686  3144  C8          DATAO2 INY             ;INC OFFSET
02687  3145  B9 10 1D           LDA TDATA,Y     ;END LOW
02688  3148  8D 03 1D           STA EAS         ;STORE
02689  314B  C8                 INY             ;INC OFFSET
02690  314C  B9 10 1D           LDA TDATA,Y     ;END HIGH
02691  314F  8D 04 1D           STA EAS+1       ;STORE
02692  3152  C8                 INY             ;INC OFFSET
02693  3153  B9 10 1D           LDA TDATA,Y     ;DATA TYPE
02694  3156  8D 05 1D           STA TEXTER      ;STORE
02695  3159  C9 53              CMP #'S'        ;IS IT SKIPPER
02696  315B  D0 23              BNE ASCCCC      ;
02697  315D              ;*********************************
02698  315D              ; SKIP RANGE OF ADDRESSES
02699  315D              ;*********************************
02700  315D  AD 31 1C           LDA PASS
02701  3160  CD 34 1C           CMP CPASS
02702  3163  D0 1B              BNE ASCCCC
02703  3165  AD 03 1D           LDA EAS
02704  3168  8D 41 1C           STA SELECT
02705  316B  AD 04 1D           LDA EAS+1
02706  316E  8D 42 1C           STA SELECT+1
02707  3171  20 77 2D           JSR INCSL






DISASSEMBLER128......PAGE 0054

LINE# LOC   CODE        LINE


02708  3174  20 8F 2C           JSR ORGIN
02709  3177  20 98 2D           JSR DECSL
02710  317A  20 B5 2C           JSR COMENT
02711  317D  4C EC 31           JMP DATUT
02712  3180              ;*********************************
02713  3180              ; CHECK PASS
02714  3180              ;*********************************
02715  3180  AD 31 1C    ASCCCC LDA PASS
02716  3183  CD 33 1C           CMP EPASS       ;EXTERNAL
02717  3186  D0 0F              BNE ASCKK
02718  3188  AD 03 1D    SKIPER LDA EAS
02719  318B  8D 41 1C           STA SELECT
02720  318E  AD 04 1D           LDA EAS+1
02721  3191  8D 42 1C           STA SELECT+1
02722  3194  4C EC 31           JMP DATUT
02723  3197              ;*********************************
02724  3197              ; DISASSEMBLER LOOP FOR DATA
02725  3197              ;*********************************
02726  3197  AD 31 1C    ASCKK  LDA PASS        ;GET PASS
02727  319A  CD 34 1C           CMP CPASS       ;IS IT LAST
02728  319D  D0 0E              BNE ASCI1       ;NO PRINT
02729  319F  20 B5 2C           JSR COMENT      ;COMMENT LINE
02730  31A2  AD 31 1C    ASCII  LDA PASS        ;GET PASS
02731  31A5  CD 34 1C           CMP CPASS       ;IS IT LAST
02732  31A8  D0 03              BNE ASCI1       ;NO PRINT
02733  31AA  20 5B 2E           JSR PRTDAT      ;PRINT LINE
02734  31AD  20 F2 31    ASCI1  JSR ACHECK      ;DIS ONE LINE
02735  31B0  B0 29              BCS ASCIIQ      ;IF EA STOP
02736  31B2              ;*********************************
02737  31B2  20 E1 FF           JSR STOP
02738  31B5  F0 24              BEQ ASCIIQ
02739  31B7  20 E4 FF           JSR GETIN
02740  31BA  F0 E6              BEQ ASCII
02741  31BC  C9 20              CMP #' '
02742  31BE  D0 E2              BNE ASCII
02743  31C0  AD 38 1C           LDA DEVICE
02744  31C3  48                 PHA
02745  31C4  A9 03              LDA #$03
02746  31C6  8D 38 1C           STA DEVICE
02747  31C9  A9 17              LDA #<PMSG
02748  31CB  A0 1E              LDY #>PMSG
02749  31CD  20 0E 28           JSR STRPNT
02750  31D0  68                 PLA
02751  31D1  8D 38 1C           STA DEVICE
02752  31D4  20 E4 FF    PAUS1  JSR GETIN
02753  31D7  F0 FB              BEQ PAUS1
02754  31D9  D0 C7              BNE ASCII
02755  31DB              ;*********************************
02756  31DB  AD 31 1C    ASCIIQ LDA PASS        ;GET PASS
02757  31DE  CD 34 1C           CMP CPASS       ;IS IT LAST
02758  31E1  D0 09              BNE DATUT       ;EXIT
02759  31E3  20 77 2D           JSR INCSL
02760  31E6  20 B5 2C           JSR COMENT      ;COMMENT LINE
02761  31E9  20 98 2D           JSR DECSL
02762  31EC              ;*********************************






DISASSEMBLER128......PAGE 0055

LINE# LOC   CODE        LINE


02763  31EC              ; EXIT TO NEXTSL
02764  31EC              ;*********************************
02765  31EC  A9 FF       DATUT  LDA #$FF        ;SET N=1
02766  31EE  60                 RTS             ;RETURN
02767  31EF  A9 00       ENDDAT LDA #$00        ;SET N=0
02768  31F1  60                 RTS             ;RETURN
02769  31F2              ;*********************************
02770  31F2              ; CHECK OPTIONS
02771  31F2              ;*********************************
02772  31F2  AD 05 1D    ACHECK LDA TEXTER      ;GET DATA TYPE
02773  31F5  C9 34              CMP #'4'         ;WORD-1
02774  31F7  F0 0B              BEQ AC0
02775  31F9  C9 33              CMP #'3'         ;DBYTE
02776  31FB  F0 0A              BEQ AC1
02777  31FD  C9 32              CMP #'2'         ;WORD
02778  31FF  F0 03              BEQ AC0
02779  3201  4C 0A 32           JMP BYTES       ;BYTE OR ASCII
02780  3204  4C C6 32    AC0    JMP WORDS       ;WORD OR WORD-1
02781  3207  4C 96 32    AC1    JMP DBYTES      ;DBYTES
02782  320A              ;*********************************
02783  320A              ; .BYTE DIRECTIVE
02784  320A              ;*********************************
02785  320A  AD 31 1C    BYTES  LDA PASS        ;GET PASS
02786  320D  CD 34 1C           CMP CPASS       ;IS IT LAST
02787  3210  D0 20              BNE BYTESX      ;IF NOT EXIT
02788  3212  20 E8 2D           JSR PRTONE      ;PRINT BYTE
02789  3215  20 DE 2C           JSR PRAD        ;PRINT ADDRESS
02790  3218  A0 33              LDY #>MBYTE     ;.BYTE
02791  321A  A9 82              LDA #<MBYTE     ;
02792  321C  20 0E 28           JSR STRPNT      ;PRINT IT
02793  321F  AD 05 1D           LDA TEXTER      ;GET TYPE
02794  3222  C9 30              CMP #'0'          ;ASCII
02795  3224  F0 0F              BEQ ALINE       ;ASCII BYTES
02796  3226  20 24 2D           JSR DOLLAR      ;PRINT $
02797  3229  20 80 2D           JSR GETSL       ;GET BYTE
02798  322C  20 F8 27           JSR PRBYT       ;PRINT BYTE
02799  322F  20 51 27           JSR NEWLIN      ;NEXT LINE
02800  3232  4C 69 33    BYTESX JMP NEXTBY      ;NEXT BYTE
02801  3235              ;*********************************
02802  3235              ; ASCII TEXT
02803  3235              ;*********************************
02804  3235  A9 00       ALINE  LDA #$00        ;ZERO BYTE
02805  3237  8D 70 1C           STA TEMP        ;STORE IN COUNT
02806  323A              ;*********************************
02807  323A              ; CHECK FIRST BYTE OF LINE
02808  323A              ;*********************************
02809  323A  20 80 2D           JSR GETSL       ;GET BYTE
02810  323D  20 8A 32           JSR CASCII      ;CHECK FOR ASCII
02811  3240  B0 39              BCS NASCII      ;IF NOT BRANCH
02812  3242  A9 27              LDA #'''        ;PRINT ONE QUOTE
02813  3244  20 64 28           JSR PCHAR       ;PRINT IT
02814  3247              ;*********************************
02815  3247  20 80 2D    ALOP   JSR GETSL       ;GET BYTE
02816  324A  20 8A 32           JSR CASCII      ;IS IT ASCII
02817  324D  B0 24              BCS EASCII      ;IF NOT END LINE






DISASSEMBLER128......PAGE 0056

LINE# LOC   CODE        LINE


02818  324F  20 64 28           JSR PCHAR       ;PRINT ASCII
02819  3252              ; REV 2-12-2018 START
02820  3252              ; IF CHAR = ' THEN PRINT SECOND '
02821  3252  20 80 2D           JSR GETSL       ; GET BYTE AGAIN
02822  3255  C9 27              CMP #$27        ;'''
02823  3257  D0 03              BNE Q00000
02824  3259  20 64 28           JSR PCHAR       ;PRINT ASCII
02825  325C              Q00000 = *
02826  325C              ; REV 2-12-2018 END
02827  325C  20 69 33           JSR NEXTBY      ;INC SELECT
02828  325F  B0 0D              BCS EASCI1      ;C=1 IF END
02829  3261  EE 70 1C           INC TEMP        ;INC COUNT
02830  3264  AD 70 1C           LDA TEMP        ;LOAD COUNT
02831  3267  C9 28              CMP #$28        ;40 CHAR
02832  3269  F0 08              BEQ EASCII      ;IF SO END
02833  326B  4C 47 32           JMP ALOP        ;NEXT
02834  326E              ;*********************************
02835  326E  20 73 32    EASCI1 JSR EASCII
02836  3271  38                 SEC
02837  3272  60                 RTS
02838  3273              ;*********************************
02839  3273  A9 27       EASCII LDA #'''        ;PRINT ONE QUOTE
02840  3275  20 64 28           JSR PCHAR       ;
02841  3278  4C 51 27           JMP NEWLIN      ;PRINT CR
02842  327B              ;*********************************
02843  327B  20 24 2D    NASCII JSR DOLLAR      ;PRINT $
02844  327E  20 80 2D           JSR GETSL       ;GET BYTE
02845  3281  20 F8 27           JSR PRBYT       ;PRINT IT
02846  3284  20 51 27           JSR NEWLIN      ;PRINT CR
02847  3287  4C 69 33           JMP NEXTBY      ;NEXT SL
02848  328A              ;*********************************
02849  328A              ; CHECK ACCUM FOR PRINTABLE ASCII
02850  328A              ;*********************************
02851  328A  C9 20       CASCII CMP #$20        ;< SPACE
02852  328C  30 06              BMI NOASC       ;IF LESS NOASCII
02853  328E  C9 60              CMP #$60        ;> _
02854  3290  B0 02              BCS NOASC       ;IF GREATER NO
02855  3292  18                 CLC             ;CLEAR CARRY OK
02856  3293  60                 RTS             ;RETURN
02857  3294  38          NOASC  SEC             ;SET CARRY BAD
02858  3295  60                 RTS             ;RETURN
02859  3296              ;*********************************
02860  3296              ; .DBYTE DIRECTIVE
02861  3296              ;*********************************
02862  3296  AD 31 1C    DBYTES LDA PASS        ;CHECK PASS
02863  3299  CD 34 1C           CMP CPASS       ;LAST PASS
02864  329C  D0 25              BNE DBYTEX      ;EXIT
02865  329E  20 FE 2D           JSR PRTTWO      ;PRINT 2 BYTES
02866  32A1  20 DE 2C           JSR PRAD        ;PRINT ADDRESS
02867  32A4  A0 33              LDY #>MDBYTE    ;.DBYTE
02868  32A6  A9 92              LDA #<MDBYTE    ;
02869  32A8  20 0E 28           JSR STRPNT      ;PRINT IT
02870  32AB  20 80 2D           JSR GETSL       ;GET BYTE
02871  32AE  8D 65 1C           STA WORKED+1    ;STORE
02872  32B1  20 77 2D           JSR INCSL       ;GET BYTE






DISASSEMBLER128......PAGE 0057

LINE# LOC   CODE        LINE


02873  32B4  20 80 2D           JSR GETSL       ;GET BYTE
02874  32B7  8D 64 1C           STA WORKED      ;STORE
02875  32BA  20 24 2D           JSR DOLLAR      ;PRINT $
02876  32BD  20 16 2D           JSR PWORKD      ;PRINT WORD
02877  32C0  20 51 27           JSR NEWLIN      ;PRINT CR
02878  32C3  4C 69 33    DBYTEX JMP NEXTBY      ;NEXT SL
02879  32C6              ;*********************************
02880  32C6              ; .WORD DIRECTIVE
02881  32C6              ;*********************************
02882  32C6  AD 31 1C    WORDS  LDA PASS        ;GET PASS
02883  32C9  CD 34 1C           CMP CPASS         ;LAST
02884  32CC  D0 0D              BNE WORD1       ;IF NOT BRANCH
02885  32CE  20 FE 2D           JSR PRTTWO      ;PRINT 2 BYTES
02886  32D1  20 DE 2C           JSR PRAD        ;PRINT ADDRESS
02887  32D4  A0 33              LDY #>MWORD     ;.WORD
02888  32D6  A9 8A              LDA #<MWORD     ;
02889  32D8  20 0E 28           JSR STRPNT      ;PRINT IT
02890  32DB              ;*********************************
02891  32DB              ; GET WORD INTO WORKED
02892  32DB              ;*********************************
02893  32DB  20 80 2D    WORD1  JSR GETSL       ;GET BYTE
02894  32DE  8D 64 1C           STA WORKED      ;STORE BYTE
02895  32E1  8D 55 1C           STA SMALLP      ;STORE BYTE
02896  32E4  20 77 2D           JSR INCSL       ;GET BYTE
02897  32E7  20 80 2D           JSR GETSL       ;GET BYTE
02898  32EA  8D 65 1C           STA WORKED+1    ;STORE BYTE
02899  32ED  8D 56 1C           STA SMALLP+1    ;STORE BYTE
02900  32F0  AD 05 1D           LDA TEXTER      ;GET OPTION
02901  32F3  C9 34              CMP #'4'          ;.WORD ADRS-1
02902  32F5  F0 2A              BEQ WORDM       ;BRANCH
02903  32F7              ;*********************************
02904  32F7              ; CHECK PASS
02905  32F7              ;*********************************
02906  32F7  AD 31 1C           LDA PASS        ;CHECK PASS
02907  32FA  CD 32 1C           CMP IPASS       ;INTERNAL
02908  32FD  F0 16              BEQ WORDPT      ;TABLE WORD
02909  32FF  CD 33 1C           CMP EPASS
02910  3302  F0 17              BEQ WORDSY
02911  3304              ;*********************************
02912  3304              ; PRINT WORD
02913  3304              ;*********************************
02914  3304  20 B2 37           JSR SYMOP       ;CHECK SYMBOL
02915  3307  B0 5A              BCS WORDS3      ;C=1 SYMBOL
02916  3309  20 24 2D           JSR DOLLAR      ;PRINT $
02917  330C  20 16 2D           JSR PWORKD      ;PRINT WORD
02918  330F  20 51 27           JSR NEWLIN      ;PRINT CR
02919  3312  4C 69 33    WORDSX JMP NEXTBY      ;NEXT SL
02920  3315  20 09 2F    WORDPT JSR PUTI        ;PUT IN TABLE
02921  3318  4C 69 33           JMP NEXTBY      ;NEXT SL
02922  331B  20 B2 37    WORDSY JSR SYMOP
02923  331E  4C 69 33           JMP NEXTBY
02924  3321              ;*********************************
02925  3321              ; .WORD ADDRESS-1
02926  3321              ;*********************************
02927  3321  18          WORDM  CLC






DISASSEMBLER128......PAGE 0058

LINE# LOC   CODE        LINE


02928  3322  AD 64 1C           LDA WORKED
02929  3325  69 01              ADC #$01
02930  3327  8D 64 1C           STA WORKED
02931  332A  AD 65 1C           LDA WORKED+1
02932  332D  69 00              ADC #$00
02933  332F  8D 65 1C           STA WORKED+1
02934  3332              ;*********************************
02935  3332              ; CHECK PASS
02936  3332              ;*********************************
02937  3332  AD 31 1C           LDA PASS        ;CHECK PASS
02938  3335  CD 32 1C           CMP IPASS       ;INTERNAL
02939  3338  F0 DB              BEQ WORDPT      ;TABLE WORD
02940  333A  CD 33 1C           CMP EPASS       ;EXTERNAL
02941  333D  F0 DC              BEQ WORDSY      ;TABLE WORD
02942  333F              ;*********************************
02943  333F              ; PRINT WORD
02944  333F              ;*********************************
02945  333F  20 B2 37           JSR SYMOP       ;CHECK SYMBOL
02946  3342  90 0D              BCC WORDS2      ;C=0 NO SYMBOL
02947  3344  A9 2D              LDA #'-'
02948  3346  20 64 28           JSR PCHAR
02949  3349  A9 31              LDA #'1'
02950  334B  20 64 28           JSR PCHAR
02951  334E  4C 63 33           JMP WORDS3
02952  3351              ;*********************************
02953  3351  20 24 2D    WORDS2 JSR DOLLAR      ;PRINT $
02954  3354  AD 55 1C           LDA SMALLP
02955  3357  8D 64 1C           STA WORKED
02956  335A  AD 56 1C           LDA SMALLP+1
02957  335D  8D 65 1C           STA WORKED+1
02958  3360  20 16 2D           JSR PWORKD      ;PRINT WORD
02959  3363  20 51 27    WORDS3 JSR NEWLIN      ;PRINT CR
02960  3366  4C 69 33    WORDXX JMP NEXTBY      ;NEXT SL
02961  3369              ;*********************************
02962  3369              ; SELECT NEXT BYTE OF DATA
02963  3369              ;*********************************
02964  3369  AD 42 1C    NEXTBY LDA SELECT+1
02965  336C  CD 04 1D           CMP EAS+1
02966  336F  90 0A              BCC SBLOK
02967  3371  D0 0D              BNE NOBINC
02968  3373  AD 41 1C           LDA SELECT
02969  3376  CD 03 1D           CMP EAS
02970  3379  B0 05              BCS NOBINC
02971  337B  20 77 2D    SBLOK  JSR INCSL
02972  337E  18                 CLC
02973  337F  60                 RTS
02974  3380  38          NOBINC SEC
02975  3381  60                 RTS
02976  3382              ;*********************************
02977  3382  20 2E       MBYTE  .BYTE ' .BYTE ',0
02977  3389  00 
02978  338A  20 2E       MWORD  .BYTE ' .WORD ',0
02978  3391  00 
02979  3392  20 2E       MDBYTE .BYTE ' .DBYTE ',0
02979  339A  00 






DISASSEMBLER128......PAGE 0059

LINE# LOC   CODE        LINE


02980  339B              ;*********************************
02981  339B              ;.FIL 0:TABLE.ASM
02982  339B              ;*********************************
02983  339B              .END
02984  339B              ;*********************************
02985  339B              .LIB   TABLE.ASM
02986  339B              ;*********************************
02987  339B              ; FILE TABLE.ASM
02988  339B              ;*********************************
02989  339B              ;
02990  339B              ;        DISASSEMBLER128
02991  339B              ;    SYMBOLIC DISASSEMBLER
02992  339B              ;       BY DENTON MARLOWE
02993  339B              ;
02994  339B              ;  (C)1986 BY DENTON MARLOWE
02995  339B              ;
02996  339B              ;*********************************
02997  339B              ;       PRINT MNEMONIC
02998  339B              ;
02999  339B              ; OPCODE IN A
03000  339B              ;
03001  339B              ; BUG ILLEGAL OPCODE WOULD PRINT OUT AS
03002  339B              ;
03003  339B              ; ZZZZ XX ...  .BYTE $XX ;??? ILLEGAL OPCODE
03004  339B              ; WHERE THE "..." WERE THREE NULLS
03005  339B              ; BECAUSE ILLEGAL OPCODE MNEMONIC IS CODES AS 0,0
,0
03006  339B              ;
03007  339B              ;*********************************
03008  339B  A2 03       MNEMON LDX #3          ;3 CHARACTERS
03009  339D  8E 70 1C           STX TEMP        ;COUNTER
03010  33A0  AA                 TAX             ;CODE IS INDEX
03011  33A1  BD 16 35           LDA MCODES,X    ;GET OFFSET
03012  33A4  AA                 TAX             ;INDEX OFFSET
03013  33A5  BD 3E 34    MNLOOP LDA MNAMES,X    ;GET CHARACTER
03014  33A8              ;BEGIN REV 2017-0
03015  33A8  F0 09              BEQ ILLOP       ;ILLEGAL OPCODE MNEMONIC C
HAR IS A NULL
03016  33AA              ;END REV 2017-0
03017  33AA  8E 72 1C           STX SAVX        ;SAVE INDEX
03018  33AD  20 64 28           JSR PCHAR       ;PRINT CHAR
03019  33B0  AE 72 1C           LDX SAVX        ;GET INDEX
03020  33B3              ;BEGIN REV 2017-1
03021  33B3              ILLOP  = *
03022  33B3              ;END REV 2017-0
03023  33B3  E8                 INX             ;NEXT CHAR
03024  33B4  CE 70 1C           DEC TEMP        ;DEC COUNT
03025  33B7  D0 EC              BNE MNLOOP      ;LOOP TILL 0
03026  33B9  60                 RTS             ;RETURN
03027  33BA              ;*********************************
03028  33BA              ;        PRINT OPERAND
03029  33BA              ;*********************************
03030  33BA  48          PRTASS PHA             ;STACK INDEX
03031  33BB  20 5B 2E           JSR PRTDAT      ;PRINT LINE DATA
03032  33BE  68                 PLA             ;PULL INDEX
03033  33BF  A8                 TAY             ;SAVE INDEX
03034  33C0  A9 EA              LDA #<SUBP






DISASSEMBLER128......PAGE 0060

LINE# LOC   CODE        LINE


03035  33C2  A2 33              LDX #>SUBP
03036  33C4  4C D4 33           JMP GETOPE      ;LOOK UP ROUTINE
03037  33C7              ;*********************************
03038  33C7  A8          OPERN1 TAY             ;SAVE INDEX
03039  33C8  A9 06              LDA #<SUBS1
03040  33CA  A2 34              LDX #>SUBS1
03041  33CC  4C D4 33           JMP GETOPE      ;LOOK UP ROUTINE
03042  33CF              ;*********************************
03043  33CF  A8          OPERND TAY             ;SAVE INDEX
03044  33D0  A9 22              LDA #<SUBS
03045  33D2  A2 34              LDX #>SUBS
03046  33D4              ;*********************************
03047  33D4              ; LOOK UP AND JMP TO ROUTINE
03048  33D4              ;*********************************
03049  33D4  85 FB       GETOPE STA ZEROUR      ;LOW TABLE
03050  33D6  86 FC              STX ZEROUR+1    ;HIGH TABLE
03051  33D8  B9 16 36           LDA MODES,Y     ;GET OFFSET
03052  33DB  A8                 TAY             ;INDEX OFFSET
03053  33DC  B1 FB              LDA (ZEROUR),Y  ;GET LOW BYTE
03054  33DE  8D 6E 1C           STA ADRS        ;STORE
03055  33E1  C8                 INY             ;INC INDEX
03056  33E2  B1 FB              LDA (ZEROUR),Y  ;GET HIGH BYTE
03057  33E4  8D 6F 1C           STA ADRS+1      ;STORE
03058  33E7  6C 6E 1C           JMP (ADRS)      ;INDIRECT JMP
03059  33EA              ;*********************************
03060  33EA              ; TABLE OF ADDRESSING MODE SUBS
03061  33EA              ;*********************************
03062  33EA              ; MACHINE LANGUAGE ROUTINES
03063  33EA              ;*********************************
03064  33EA              SUBP   = *             ; MODES
03065  33EA  E8 2D       .WORD  PRTONE          ; 0  $00
03066  33EC  E8 2D       .WORD  PRTONE          ; 2  $02
03067  33EE  FE 2D       .WORD  PRTTWO          ; 4  $04
03068  33F0  FE 2D       .WORD  PRTTWO          ; 6  $06
03069  33F2  FE 2D       .WORD  PRTTWO          ; 8  $08
03070  33F4  FE 2D       .WORD  PRTTWO          ; 10 $0A
03071  33F6  23 2E       .WORD  PRTTHE          ; 12 $0C
03072  33F8  23 2E       .WORD  PRTTHE          ; 14 $0E
03073  33FA  23 2E       .WORD  PRTTHE          ; 16 $10
03074  33FC  E8 2D       .WORD  PRTONE          ; 18 $12
03075  33FE  FE 2D       .WORD  PRTTWO          ; 20 $14
03076  3400  FE 2D       .WORD  PRTTWO          ; 22 $16
03077  3402  FE 2D       .WORD  PRTTWO          ; 24 $18
03078  3404  23 2E       .WORD  PRTTHE          ; 26 $1A
03079  3406              ;*********************************
03080  3406              ; CODE ANALYSIS ROUTINES
03081  3406              ;*********************************
03082  3406              SUBS1  = *             ; MODES
03083  3406  DD 2B       .WORD  IMPONE          ; 0  $00
03084  3408  DD 2B       .WORD  IMPONE          ; 2  $02
03085  340A  58 2B       .WORD  IMMEDT          ; 4  $04
03086  340C  A1 2A       .WORD  ONEBYT          ; 6  $06
03087  340E  A1 2A       .WORD  ONEBYT          ; 8  $08
03088  3410  A1 2A       .WORD  ONEBYT          ; 10 $0A
03089  3412  D6 2A       .WORD  TWOBYT          ; 12 $0C






DISASSEMBLER128......PAGE 0061

LINE# LOC   CODE        LINE


03090  3414  D6 2A       .WORD  TWOBYT          ; 14 $0E
03091  3416  D6 2A       .WORD  TWOBYT          ; 16 $10
03092  3418  DD 2B       .WORD  IMPONE          ; 18 $12
03093  341A  14 2C       .WORD  RELATV          ; 20 $14
03094  341C  A1 2A       .WORD  ONEBYT          ; 22 $16
03095  341E  A1 2A       .WORD  ONEBYT          ; 24 $18
03096  3420  D6 2A       .WORD  TWOBYT          ; 26 $1A
03097  3422              ;*********************************
03098  3422              ; FINAL PASS ADDRESSING MODES
03099  3422              ;*********************************
03100  3422              SUBS   = *             ; MODES
03101  3422  12 2B       .WORD  ILLEGL          ; 0  $00
03102  3424  53 2B       .WORD  ACC             ; 2  $02
03103  3426  58 2B       .WORD  IMMEDT          ; 4  $04
03104  3428  8F 2B       .WORD  ZEROPG          ; 6  $06
03105  342A  92 2B       .WORD  ZEROX           ; 8  $08
03106  342C  98 2B       .WORD  ZEROY           ; 10 $0A
03107  342E  9F 2B       .WORD  ABSLUT          ; 12 $0C
03108  3430  C4 2B       .WORD  ABSX            ; 14 $0E
03109  3432  CA 2B       .WORD  ABSY            ; 16 $10
03110  3434  D0 2B       .WORD  IMPLID          ; 18 $12
03111  3436  14 2C       .WORD  RELATV          ; 20 $14
03112  3438  FF 2B       .WORD  INDX            ; 22 $16
03113  343A  08 2C       .WORD  INDY            ; 24 $18
03114  343C  EA 2B       .WORD  INDRCT          ; 26 $1A
03115  343E              ;*********************************
03116  343E              ; LIST OF MNEMONICS
03117  343E              ;*********************************
03118  343E              MNAMES = *             ; MCODES
03119  343E  00          .BYTE  0,0,0           ; 0   $00
03119  343F  00 
03119  3440  00 
03120  3441  41 44 43    .BYTE  'ADC'           ; 3   $03
03121  3444  41 4E 44    .BYTE  'AND'           ; 6   $06
03122  3447  41 53 4C    .BYTE  'ASL'           ; 9   $09
03123  344A  42 43 43    .BYTE  'BCC'           ; 12  $0C
03124  344D  42 43 53    .BYTE  'BCS'           ; 15  $0F
03125  3450  42 45 51    .BYTE  'BEQ'           ; 18  $12
03126  3453  42 49 54    .BYTE  'BIT'           ; 21  $15
03127  3456  42 4D 49    .BYTE  'BMI'           ; 24  $18
03128  3459  42 4E 45    .BYTE  'BNE'           ; 27  $1B
03129  345C  42 50 4C    .BYTE  'BPL'           ; 30  $1E
03130  345F  42 52 4B    .BYTE  'BRK'           ; 33  $21
03131  3462  42 56 43    .BYTE  'BVC'           ; 36  $24
03132  3465  42 56 53    .BYTE  'BVS'           ; 39  $27
03133  3468  43 4C 43    .BYTE  'CLC'           ; 42  $2A
03134  346B  43 4C 44    .BYTE  'CLD'           ; 45  $2D
03135  346E  43 4C 49    .BYTE  'CLI'           ; 48  $30
03136  3471  43 4C 56    .BYTE  'CLV'           ; 51  $33
03137  3474  43 4D 50    .BYTE  'CMP'           ; 54  $36
03138  3477  43 50 58    .BYTE  'CPX'           ; 57  $39
03139  347A  43 50 59    .BYTE  'CPY'           ; 60  $3C
03140  347D  44 45 43    .BYTE  'DEC'           ; 63  $3F
03141  3480  44 45 58    .BYTE  'DEX'           ; 66  $42
03142  3483  44 45 59    .BYTE  'DEY'           ; 69  $45






DISASSEMBLER128......PAGE 0062

LINE# LOC   CODE        LINE


03143  3486  45 4F 52    .BYTE  'EOR'           ; 72  $48
03144  3489  49 4E 43    .BYTE  'INC'           ; 75  $4B
03145  348C  49 4E 58    .BYTE  'INX'           ; 78  $4E
03146  348F  49 4E 59    .BYTE  'INY'           ; 81  $51
03147  3492  4A 4D 50    .BYTE  'JMP'           ; 84  $54
03148  3495  4A 53 52    .BYTE  'JSR'           ; 87  $57
03149  3498  4C 44 41    .BYTE  'LDA'           ; 90  $5A
03150  349B  4C 44 58    .BYTE  'LDX'           ; 93  $5D
03151  349E  4C 44 59    .BYTE  'LDY'           ; 96  $60
03152  34A1  4C 53 52    .BYTE  'LSR'           ; 99  $63
03153  34A4  4E 4F 50    .BYTE  'NOP'           ; 102 $66
03154  34A7  4F 52 41    .BYTE  'ORA'           ; 105 $69
03155  34AA  50 48 41    .BYTE  'PHA'           ; 108 $6C
03156  34AD  50 48 50    .BYTE  'PHP'           ; 111 $6F
03157  34B0  50 4C 41    .BYTE  'PLA'           ; 114 $72
03158  34B3  50 4C 50    .BYTE  'PLP'           ; 117 $75
03159  34B6  52 4F 4C    .BYTE  'ROL'           ; 120 $78
03160  34B9  52 4F 52    .BYTE  'ROR'           ; 123 $7B
03161  34BC  52 54 49    .BYTE  'RTI'           ; 126 $7E
03162  34BF  52 54 53    .BYTE  'RTS'           ; 129 $81
03163  34C2  53 42 43    .BYTE  'SBC'           ; 132 $84
03164  34C5  53 45 43    .BYTE  'SEC'           ; 135 $87
03165  34C8  53 45 44    .BYTE  'SED'           ; 138 $8A
03166  34CB  53 45 49    .BYTE  'SEI'           ; 141 $8D
03167  34CE  53 54 41    .BYTE  'STA'           ; 144 $90
03168  34D1  53 54 58    .BYTE  'STX'           ; 147 $93
03169  34D4  53 54 59    .BYTE  'STY'           ; 150 $96
03170  34D7  54 41 58    .BYTE  'TAX'           ; 153 $99
03171  34DA  54 41 59    .BYTE  'TAY'           ; 156 $9C
03172  34DD  54 53 58    .BYTE  'TSX'           ; 159 $9F
03173  34E0  54 58 41    .BYTE  'TXA'           ; 162 $A2
03174  34E3  54 58 53    .BYTE  'TXS'           ; 165 $A5
03175  34E6  54 59 41    .BYTE  'TYA'           ; 168 $A8
03176  34E9              ;*********************************
03177  34E9              ; QUASI-OPCODES
03178  34E9              ;*********************************
03179  34E9  41 53 4F    .BYTE  'ASO'           ; 171 $AB
03180  34EC  52 4C 41    .BYTE  'RLA'           ; 174 $AE
03181  34EF  4C 53 45    .BYTE  'LSE'           ; 177 $B1
03182  34F2  52 52 41    .BYTE  'RRA'           ; 180 $B4
03183  34F5  41 58 53    .BYTE  'AXS'           ; 183 $B7
03184  34F8  4C 41 58    .BYTE  'LAX'           ; 186 $BA
03185  34FB  44 43 4D    .BYTE  'DCM'           ; 189 $BD
03186  34FE  49 4E 53    .BYTE  'INS'           ; 192 $C0
03187  3501  41 4C 52    .BYTE  'ALR'           ; 195 $C3
03188  3504  41 52 52    .BYTE  'ARR'           ; 198 $C6
03189  3507  4F 41 4C    .BYTE  'OAL'           ; 201 $C9
03190  350A  53 41 58    .BYTE  'SAX'           ; 204 $CC
03191  350D  4E 4F 50    .BYTE  'NOP'           ; 207 $CF
03192  3510  53 4B 42    .BYTE  'SKB'           ; 210 $D2
03193  3513  53 4B 57    .BYTE  'SKW'           ; 213 $D5
03194  3516              ;*********************************
03195  3516              ; TABLE OF MNEMONIC CODES
03196  3516              ;*********************************
03197  3516              ;






DISASSEMBLER128......PAGE 0063

LINE# LOC   CODE        LINE


03198  3516              ;A MNEMONIC'S CODE IS ITS OFFSET
03199  3516              ;    INTO MNAMES, THE LIST OF
03200  3516              ;         MNEONIC NAMES.
03201  3516              ;
03202  3516              ;*********************************
03203  3516              MCODES = *
03204  3516              ;     0X  1X  2X  3X  4X  5X  6X  7X
03205  3516              ; 0X  BRK ORA KIL SLO NOP ORA ASL SLO
03206  3516  21          .BYTE  $21,$69,$00,$00,$00,$69,$09,$00
03206  3517  69 
03206  3518  00 
03206  3519  00 
03206  351A  00 
03206  351B  69 
03206  351C  09 
03206  351D  00 
03207  351E              ;     8X  9X  AX  BX  CX  DX  EX  FX
03208  351E                                     ;PHP ORA ASL ANC NOP ORA A
SL SLO
03209  351E  6F          .BYTE  $6F,$69,$09,$00,$00,$69,$09,$00
03209  351F  69 
03209  3520  09 
03209  3521  00 
03209  3522  00 
03209  3523  69 
03209  3524  09 
03209  3525  00 
03210  3526              ; 1X  BPL ORA KIL SLO NOP ORA ASL SLO
03211  3526  1E          .BYTE  $1E,$69,$00,$00,$00,$69,$09,$00
03211  3527  69 
03211  3528  00 
03211  3529  00 
03211  352A  00 
03211  352B  69 
03211  352C  09 
03211  352D  00 
03212  352E                                     ;CLC ORA NOP SLO NOP ORA A
SL SLO
03213  352E  2A          .BYTE  $2A,$69,$00,$00,$00,$69,$09,$00
03213  352F  69 
03213  3530  00 
03213  3531  00 
03213  3532  00 
03213  3533  69 
03213  3534  09 
03213  3535  00 
03214  3536              ; 2X  JSR AND KIL RLA BIT AND ROL RLA
03215  3536  57          .BYTE  $57,$06,$00,$00,$15,$06,$78,$00
03215  3537  06 
03215  3538  00 
03215  3539  00 
03215  353A  15 
03215  353B  06 
03215  353C  78 
03215  353D  00 
03216  353E                                     ;PLP ABD ROL ANC BIT AND R
OL RLA
03217  353E  75          .BYTE  $75,$06,$78,$00,$15,$06,$78,$00






DISASSEMBLER128......PAGE 0064

LINE# LOC   CODE        LINE


03217  353F  06 
03217  3540  78 
03217  3541  00 
03217  3542  15 
03217  3543  06 
03217  3544  78 
03217  3545  00 
03218  3546              ; 3X  BMI AND KIL RLA NOP AND ROL RLA
03219  3546  18          .BYTE  $18,$06,$00,$00,$00,$06,$78,$00
03219  3547  06 
03219  3548  00 
03219  3549  00 
03219  354A  00 
03219  354B  06 
03219  354C  78 
03219  354D  00 
03220  354E              ;     SEC AND NOP RLA NOP AND ROL RLA
03221  354E  87          .BYTE  $87,$06,$00,$00,$00,$06,$78,$00
03221  354F  06 
03221  3550  00 
03221  3551  00 
03221  3552  00 
03221  3553  06 
03221  3554  78 
03221  3555  00 
03222  3556              ; 4X  RTI EOR KIL SRE NOP EOR LSR SRE
03223  3556  7E          .BYTE  $7E,$48,$00,$00,$00,$48,$63,$00
03223  3557  48 
03223  3558  00 
03223  3559  00 
03223  355A  00 
03223  355B  48 
03223  355C  63 
03223  355D  00 
03224  355E              ;     PHA EOR LSR ALR JMP EOR LSR SRE
03225  355E  6C          .BYTE  $6C,$48,$63,$00,$54,$48,$63,$00
03225  355F  48 
03225  3560  63 
03225  3561  00 
03225  3562  54 
03225  3563  48 
03225  3564  63 
03225  3565  00 
03226  3566              ; 5X  BVC EOR KIL SRE NOP EOR LSR SRE
03227  3566  24          .BYTE  $24,$48,$00,$00,$00,$48,$63,$00
03227  3567  48 
03227  3568  00 
03227  3569  00 
03227  356A  00 
03227  356B  48 
03227  356C  63 
03227  356D  00 
03228  356E              ;     CLI EOR NOP SRE NOP EOR LSR SRE
03229  356E  30          .BYTE  $30,$48,$00,$00,$00,$48,$63,$00
03229  356F  48 






DISASSEMBLER128......PAGE 0065

LINE# LOC   CODE        LINE


03229  3570  00 
03229  3571  00 
03229  3572  00 
03229  3573  48 
03229  3574  63 
03229  3575  00 
03230  3576              ; 6X  RTS ADC KIL RRA NOP ADC ROR RRA
03231  3576  81          .BYTE  $81,$03,$00,$00,$00,$03,$7B,$00
03231  3577  03 
03231  3578  00 
03231  3579  00 
03231  357A  00 
03231  357B  03 
03231  357C  7B 
03231  357D  00 
03232  357E              ;     PLA ADC ROR ARR JMP ADC ROR RRA
03233  357E  72          .BYTE  $72,$03,$7B,$00,$54,$03,$7B,$00
03233  357F  03 
03233  3580  7B 
03233  3581  00 
03233  3582  54 
03233  3583  03 
03233  3584  7B 
03233  3585  00 
03234  3586              ; 7X  BVS ADC KIL RRA NOP ADC ROR RRA
03235  3586  27          .BYTE  $27,$03,$00,$00,$00,$03,$7B,$00
03235  3587  03 
03235  3588  00 
03235  3589  00 
03235  358A  00 
03235  358B  03 
03235  358C  7B 
03235  358D  00 
03236  358E              ;     SEI ADC NOP RRA NOP ADC ROR RRA
03237  358E  8D          .BYTE  $8D,$03,$00,$00,$00,$03,$7B,$00
03237  358F  03 
03237  3590  00 
03237  3591  00 
03237  3592  00 
03237  3593  03 
03237  3594  7B 
03237  3595  00 
03238  3596              ; 8X  NOP STA NOP SAX STY STA STX SAX
03239  3596  00          .BYTE  $00,$90,$00,$00,$96,$90,$93,$00
03239  3597  90 
03239  3598  00 
03239  3599  00 
03239  359A  96 
03239  359B  90 
03239  359C  93 
03239  359D  00 
03240  359E              ;     DEY NOP TXA XXA STY STA STX SAX
03241  359E  45          .BYTE  $45,$00,$A2,$00,$96,$90,$93,$00
03241  359F  00 
03241  35A0  A2 






DISASSEMBLER128......PAGE 0066

LINE# LOC   CODE        LINE


03241  35A1  00 
03241  35A2  96 
03241  35A3  90 
03241  35A4  93 
03241  35A5  00 
03242  35A6              ; 9X  BCC STA KIL AHX STY STA STX SAX 
03243  35A6  0C          .BYTE  $0C,$90,$00,$00,$96,$90,$93,$00
03243  35A7  90 
03243  35A8  00 
03243  35A9  00 
03243  35AA  96 
03243  35AB  90 
03243  35AC  93 
03243  35AD  00 
03244  35AE              ;     TYA STA TXS TAS SHY STA SHX AHX
03245  35AE  A8          .BYTE  $A8,$90,$A5,$00,$00,$90,$00,$00
03245  35AF  90 
03245  35B0  A5 
03245  35B1  00 
03245  35B2  00 
03245  35B3  90 
03245  35B4  00 
03245  35B5  00 
03246  35B6              ; AX  LDY LDA LDX LAX LDY LDA LDX LAX
03247  35B6  60          .BYTE  $60,$5A,$5D,$00,$60,$5A,$5D,$00
03247  35B7  5A 
03247  35B8  5D 
03247  35B9  00 
03247  35BA  60 
03247  35BB  5A 
03247  35BC  5D 
03247  35BD  00 
03248  35BE              ;     TAY LDA TAX LAX LDY LDA LDX LAX
03249  35BE  9C          .BYTE  $9C,$5A,$99,$00,$60,$5A,$5D,$00
03249  35BF  5A 
03249  35C0  99 
03249  35C1  00 
03249  35C2  60 
03249  35C3  5A 
03249  35C4  5D 
03249  35C5  00 
03250  35C6              ; BX  BCS LDA KIL LAX LDY LDA LDX LAX
03251  35C6  0F          .BYTE  $0F,$5A,$00,$00,$60,$5A,$5D,$00
03251  35C7  5A 
03251  35C8  00 
03251  35C9  00 
03251  35CA  60 
03251  35CB  5A 
03251  35CC  5D 
03251  35CD  00 
03252  35CE              ;     CLV LDA TSX LAS LDY LDA LDX LAX
03253  35CE  33          .BYTE  $33,$5A,$9F,$00,$60,$5A,$5D,$00
03253  35CF  5A 
03253  35D0  9F 
03253  35D1  00 






DISASSEMBLER128......PAGE 0067

LINE# LOC   CODE        LINE


03253  35D2  60 
03253  35D3  5A 
03253  35D4  5D 
03253  35D5  00 
03254  35D6              ; CX  CPY CMP NOP DCP CPY CMP DEC DCP
03255  35D6  3C          .BYTE  $3C,$36,$00,$00,$3C,$36,$3F,$00
03255  35D7  36 
03255  35D8  00 
03255  35D9  00 
03255  35DA  3C 
03255  35DB  36 
03255  35DC  3F 
03255  35DD  00 
03256  35DE              ;     INY CMP DEX AXS CPY CMP DEC DCP
03257  35DE  51          .BYTE  $51,$36,$42,$00,$3C,$36,$3F,$00
03257  35DF  36 
03257  35E0  42 
03257  35E1  00 
03257  35E2  3C 
03257  35E3  36 
03257  35E4  3F 
03257  35E5  00 
03258  35E6              ; DX  BNE CMP KIL DCP NOP CMP DEC DCP
03259  35E6  1B          .BYTE  $1B,$36,$00,$00,$00,$36,$3F,$00
03259  35E7  36 
03259  35E8  00 
03259  35E9  00 
03259  35EA  00 
03259  35EB  36 
03259  35EC  3F 
03259  35ED  00 
03260  35EE              ;     CLD CMP NOP DCP NOP CMP DEC DCP
03261  35EE  2D          .BYTE  $2D,$36,$00,$00,$00,$36,$3F,$00
03261  35EF  36 
03261  35F0  00 
03261  35F1  00 
03261  35F2  00 
03261  35F3  36 
03261  35F4  3F 
03261  35F5  00 
03262  35F6              ; EX  CPX SBC NOP ISC CPX SBC INC ISC
03263  35F6  39          .BYTE  $39,$84,$00,$00,$39,$84,$4B,$00
03263  35F7  84 
03263  35F8  00 
03263  35F9  00 
03263  35FA  39 
03263  35FB  84 
03263  35FC  4B 
03263  35FD  00 
03264  35FE              ;     INX SBC NOP SBC CPX SBC INC ISC
03265  35FE  4E          .BYTE  $4E,$84,$66,$00,$39,$84,$4B,$00
03265  35FF  84 
03265  3600  66 
03265  3601  00 
03265  3602  39 






DISASSEMBLER128......PAGE 0068

LINE# LOC   CODE        LINE


03265  3603  84 
03265  3604  4B 
03265  3605  00 
03266  3606              ; FX  BEQ SBC KIL ISC NOP SBC INC ISC
03267  3606  12          .BYTE  $12,$84,$00,$00,$00,$84,$4B,$00
03267  3607  84 
03267  3608  00 
03267  3609  00 
03267  360A  00 
03267  360B  84 
03267  360C  4B 
03267  360D  00 
03268  360E              ;     SED SBC NOP ISC NOP SBC INC ISC
03269  360E  8A          .BYTE  $8A,$84,$00,$00,$00,$84,$4B,$00
03269  360F  84 
03269  3610  00 
03269  3611  00 
03269  3612  00 
03269  3613  84 
03269  3614  4B 
03269  3615  00 
03270  3616              ;*********************************
03271  3616              ; TABLE OF ADDRESSING MODE CODES
03272  3616              ;*********************************
03273  3616              ;
03274  3616              ; AN ADDRESSING MODE'S CODE IS
03275  3616              ; ITS OFFSET INTO SUBS, THE TABLE
03276  3616              ; OF ADDRESSING MODE SUBROUTINES
03277  3616              ;
03278  3616              ; ILLEGL ; 0  $00
03279  3616              ; ACC    ; 2  $02
03280  3616              ; IMMEDT ; 4  $04
03281  3616              ; ZEROPG ; 6  $06
03282  3616              ; ZEROX  ; 8  $08
03283  3616              ; ZEROY  ; 10 $0A
03284  3616              ; ABSLUT ; 12 $0C
03285  3616              ; ABSX   ; 14 $0E
03286  3616              ; ABSY   ; 16 $10
03287  3616              ; IMPLID ; 18 $12
03288  3616              ; RELATV ; 20 $14
03289  3616              ; INDX   ; 22 $16
03290  3616              ; INDY   ; 24 $18
03291  3616              ; INDRCT ; 26 $1A
03292  3616              ;*********************************
03293  3616              MODES  = * 
03294  3616              ; 0X   0  1 2 3 4 5 6 7
03295  3616  12          .BYTE  18,22,0,0,0,6,6,0
03295  3617  16 
03295  3618  00 
03295  3619  00 
03295  361A  00 
03295  361B  06 
03295  361C  06 
03295  361D  00 
03296  361E              ;      8  9 A B C D E F






DISASSEMBLER128......PAGE 0069

LINE# LOC   CODE        LINE


03297  361E  12          .BYTE  18,4,2,0,0,12,12,0
03297  361F  04 
03297  3620  02 
03297  3621  00 
03297  3622  00 
03297  3623  0C 
03297  3624  0C 
03297  3625  00 
03298  3626              ; 1X   0  1 2 3 4 5 6 7
03299  3626  14          .BYTE  20,24,0,0,0,8,8,0
03299  3627  18 
03299  3628  00 
03299  3629  00 
03299  362A  00 
03299  362B  08 
03299  362C  08 
03299  362D  00 
03300  362E              ;      8  9 A B C D E F
03301  362E  12          .BYTE  18,16,0,0,0,14,14,0
03301  362F  10 
03301  3630  00 
03301  3631  00 
03301  3632  00 
03301  3633  0E 
03301  3634  0E 
03301  3635  00 
03302  3636              ; 2X   0  1 2 3 4 5 6 7
03303  3636  0C          .BYTE  12,22,0,0,6,6,6,0
03303  3637  16 
03303  3638  00 
03303  3639  00 
03303  363A  06 
03303  363B  06 
03303  363C  06 
03303  363D  00 
03304  363E              ;.BYTE 12,22,0,0,28,6,6,0
03305  363E              ;      8  9 A B C D E F
03306  363E  12          .BYTE  18,4,2,0,12,12,12,0
03306  363F  04 
03306  3640  02 
03306  3641  00 
03306  3642  0C 
03306  3643  0C 
03306  3644  0C 
03306  3645  00 
03307  3646              ;.BYTE 18,4,2,0,30,12,12,0
03308  3646              ; 3X   0  1 2 3 4 5 6 7
03309  3646  14          .BYTE  20,24,0,0,0,8,8,0
03309  3647  18 
03309  3648  00 
03309  3649  00 
03309  364A  00 
03309  364B  08 
03309  364C  08 
03309  364D  00 






DISASSEMBLER128......PAGE 0070

LINE# LOC   CODE        LINE


03310  364E              ;      8  9 A B C D E F
03311  364E  12          .BYTE  18,16,0,0,0,14,14,0
03311  364F  10 
03311  3650  00 
03311  3651  00 
03311  3652  00 
03311  3653  0E 
03311  3654  0E 
03311  3655  00 
03312  3656              ; 4X   0  1 2 3 4 5 6 7
03313  3656  12          .BYTE  18,22,0,0,0,6,6,0
03313  3657  16 
03313  3658  00 
03313  3659  00 
03313  365A  00 
03313  365B  06 
03313  365C  06 
03313  365D  00 
03314  365E              ;      8  9 A B C D E F
03315  365E  12          .BYTE  18,4,2,0,12,12,12,0
03315  365F  04 
03315  3660  02 
03315  3661  00 
03315  3662  0C 
03315  3663  0C 
03315  3664  0C 
03315  3665  00 
03316  3666              ; 5X   0  1 2 3 4 5 6 7
03317  3666  14          .BYTE  20,24,0,0,0,8,8,0
03317  3667  18 
03317  3668  00 
03317  3669  00 
03317  366A  00 
03317  366B  08 
03317  366C  08 
03317  366D  00 
03318  366E              ;      8  9 A B C D E F
03319  366E  12          .BYTE  18,16,0,0,0,14,14,0
03319  366F  10 
03319  3670  00 
03319  3671  00 
03319  3672  00 
03319  3673  0E 
03319  3674  0E 
03319  3675  00 
03320  3676              ; 6X   0  1 2 3 4 5 6 7
03321  3676  12          .BYTE  18,22,0,0,0,6,6,0
03321  3677  16 
03321  3678  00 
03321  3679  00 
03321  367A  00 
03321  367B  06 
03321  367C  06 
03321  367D  00 
03322  367E              ;      8  9 A B C D E F






DISASSEMBLER128......PAGE 0071

LINE# LOC   CODE        LINE


03323  367E  12          .BYTE  18,4,2,0,26,12,12,0
03323  367F  04 
03323  3680  02 
03323  3681  00 
03323  3682  1A 
03323  3683  0C 
03323  3684  0C 
03323  3685  00 
03324  3686              ; 7X   0  1 2 3 4 5 6 7
03325  3686  14          .BYTE  20,24,0,0,0,8,8,0
03325  3687  18 
03325  3688  00 
03325  3689  00 
03325  368A  00 
03325  368B  08 
03325  368C  08 
03325  368D  00 
03326  368E              ;      8  9 A B C D E F
03327  368E  12          .BYTE  18,16,0,0,0,14,14,0
03327  368F  10 
03327  3690  00 
03327  3691  00 
03327  3692  00 
03327  3693  0E 
03327  3694  0E 
03327  3695  00 
03328  3696              ; 8X   0  1 2 3 4 5 6 7
03329  3696  00          .BYTE  0,22,0,0,6,6,6,0
03329  3697  16 
03329  3698  00 
03329  3699  00 
03329  369A  06 
03329  369B  06 
03329  369C  06 
03329  369D  00 
03330  369E              ;      8  9 A B C D E F
03331  369E  12          .BYTE  18,0,18,0,12,12,12,0
03331  369F  00 
03331  36A0  12 
03331  36A1  00 
03331  36A2  0C 
03331  36A3  0C 
03331  36A4  0C 
03331  36A5  00 
03332  36A6              ; 9X   0  1 2 3 4 5 6 7
03333  36A6  14          .BYTE  20,24,0,0,8,8,10,0
03333  36A7  18 
03333  36A8  00 
03333  36A9  00 
03333  36AA  08 
03333  36AB  08 
03333  36AC  0A 
03333  36AD  00 
03334  36AE              ;      8  9 A B C D E F
03335  36AE  12          .BYTE  18,16,18,0,0,14,0,0






DISASSEMBLER128......PAGE 0072

LINE# LOC   CODE        LINE


03335  36AF  10 
03335  36B0  12 
03335  36B1  00 
03335  36B2  00 
03335  36B3  0E 
03335  36B4  00 
03335  36B5  00 
03336  36B6              ; AX   0  1 2 3 4 5 6 7
03337  36B6  04          .BYTE  4,22,4,0,6,6,6,0
03337  36B7  16 
03337  36B8  04 
03337  36B9  00 
03337  36BA  06 
03337  36BB  06 
03337  36BC  06 
03337  36BD  00 
03338  36BE              ;      8  9 A B C D E F
03339  36BE  12          .BYTE  18,4,18,0,12,12,12,0
03339  36BF  04 
03339  36C0  12 
03339  36C1  00 
03339  36C2  0C 
03339  36C3  0C 
03339  36C4  0C 
03339  36C5  00 
03340  36C6              ; BX   0  1 2 3 4 5 6 7
03341  36C6  14          .BYTE  20,24,0,0,8,8,10,0
03341  36C7  18 
03341  36C8  00 
03341  36C9  00 
03341  36CA  08 
03341  36CB  08 
03341  36CC  0A 
03341  36CD  00 
03342  36CE              ;      8  9 A B C D E F
03343  36CE  12          .BYTE  18,16,18,0,14,14,16,0
03343  36CF  10 
03343  36D0  12 
03343  36D1  00 
03343  36D2  0E 
03343  36D3  0E 
03343  36D4  10 
03343  36D5  00 
03344  36D6              ; CX   0  1 2 3 4 5 6 7
03345  36D6  04          .BYTE  4,22,0,0,6,6,6,0
03345  36D7  16 
03345  36D8  00 
03345  36D9  00 
03345  36DA  06 
03345  36DB  06 
03345  36DC  06 
03345  36DD  00 
03346  36DE              ;      8  9 A B C D E F
03347  36DE  12          .BYTE  18,4,18,0,12,12,12,0
03347  36DF  04 






DISASSEMBLER128......PAGE 0073

LINE# LOC   CODE        LINE


03347  36E0  12 
03347  36E1  00 
03347  36E2  0C 
03347  36E3  0C 
03347  36E4  0C 
03347  36E5  00 
03348  36E6              ; DX   0  1 2 3 4 5 6 7
03349  36E6  14          .BYTE  20,24,0,0,0,8,8,0
03349  36E7  18 
03349  36E8  00 
03349  36E9  00 
03349  36EA  00 
03349  36EB  08 
03349  36EC  08 
03349  36ED  00 
03350  36EE              ;      8  9 A B C D E F
03351  36EE  12          .BYTE  18,16,0,0,0,14,14,0
03351  36EF  10 
03351  36F0  00 
03351  36F1  00 
03351  36F2  00 
03351  36F3  0E 
03351  36F4  0E 
03351  36F5  00 
03352  36F6              ; EX   0  1 2 3 4 5 6 7
03353  36F6  04          .BYTE  4,22,0,0,6,6,6,0
03353  36F7  16 
03353  36F8  00 
03353  36F9  00 
03353  36FA  06 
03353  36FB  06 
03353  36FC  06 
03353  36FD  00 
03354  36FE              ;      8  9 A B C D E F
03355  36FE  12          .BYTE  18,4,18,0,12,12,12,0
03355  36FF  04 
03355  3700  12 
03355  3701  00 
03355  3702  0C 
03355  3703  0C 
03355  3704  0C 
03355  3705  00 
03356  3706              ; FX   0  1 2 3 4 5 6 7
03357  3706  14          .BYTE  20,24,0,0,0,8,8,0
03357  3707  18 
03357  3708  00 
03357  3709  00 
03357  370A  00 
03357  370B  08 
03357  370C  08 
03357  370D  00 
03358  370E              ;      8  9 A B C D E F
03359  370E  12          .BYTE  18,16,0,0,0,14,14,0
03359  370F  10 
03359  3710  00 






DISASSEMBLER128......PAGE 0074

LINE# LOC   CODE        LINE


03359  3711  00 
03359  3712  00 
03359  3713  0E 
03359  3714  0E 
03359  3715  00 
03360  3716              ;*********************************
03361  3716              ;.FIL 0:SYM.ASM
03362  3716              ;*********************************
03363  3716              .END
03364  3716              ;*********************************
03365  3716              .LIB   SYM.ASM
03366  3716              ;*********************************
03367  3716              ; FILE SYMBOL.ASM
03368  3716              ;*********************************
03369  3716              ;
03370  3716              ;        DISASSEMBLER128
03371  3716              ;    SYMBOLIC DISASSEMBLER
03372  3716              ;       BY DENTON MARLOWE
03373  3716              ;
03374  3716              ;  (C)1986 BY DENTON MARLOWE
03375  3716              ;
03376  3716              ;*********************************
03377  3716              ; SYMBOLIC ROUTINES
03378  3716              ;*********************************
03379  3716              ; SYMBOLIC DISASSEMBLY OPTION
03380  3716              ;*********************************
03381  3716  A9 8A       SOP    LDA #<MSS1      ;LOW BYTE MESSAGE
03382  3718  A0 3A              LDY #>MSS1      ;HIGH BYTE MESSAGE
03383  371A  20 0E 28           JSR STRPNT      ;OUTPUT MESSAGE
03384  371D              ;      JSR CRNO    ;GET KEY PRESS
03385  371D  20 D6 27           JSR CRYS
03386  3720  90 08              BCC SOP1        ;C=0 YES
03387  3722              ;*********************************
03388  3722              ; ABSOLUTE DISASSEMBLY SELECTED
03389  3722              ;*********************************
03390  3722  A9 00              LDA #$00        ;SET SYMBLOIC FLAG
03391  3724  8D 57 1C           STA SYMBOL      ;STORE FLAG
03392  3727  4C 73 37           JMP SY          ;FOR INTERNAL
03393  372A              ;*********************************
03394  372A              ; SYMBOLIC DISASSEMBLY SELECTED
03395  372A              ;*********************************
03396  372A  A9 01       SOP1   LDA #$01        ;SET SYMBOLIC FLAG
03397  372C  8D 57 1C           STA SYMBOL      ;STORE FLAG
03398  372F              ;*********************************
03399  372F              ; SETUP START OF TABLE POINTER
03400  372F              ;*********************************
03401  372F  A9 CD              LDA #<STABLE
03402  3731  8D 5A 1C           STA SYMBOS
03403  3734  8D 58 1C           STA SYMBOP
03404  3737  A9 43              LDA #>STABLE
03405  3739  8D 5B 1C           STA SYMBOS+1
03406  373C  8D 59 1C           STA SYMBOP+1
03407  373F              ;*********************************
03408  373F              ; CHECK FOR SYMBOL TABLE OPTION
03409  373F              ;*********************************






DISASSEMBLER128......PAGE 0075

LINE# LOC   CODE        LINE


03410  373F  A9 AE       SYTAB  LDA #<MSS2      ;LOW BYTE MESSAGE
03411  3741  A0 3A              LDY #>MSS2      ;HIGH BYTE MESSAGE
03412  3743  20 0E 28           JSR STRPNT      ;OUTPUT MESSAGE
03413  3746  20 E3 27           JSR CRNO        ;GET KEY PRESS
03414  3749  B0 28              BCS SY          ;C=1 NO
03415  374B              ;*********************************
03416  374B              ; APPEND SYMBOL TABLE
03417  374B              ;*********************************
03418  374B  A9 F2              LDA #<MSS4
03419  374D  A0 3A              LDY #>MSS4
03420  374F  20 0E 28           JSR STRPNT
03421  3752  20 E3 27           JSR CRNO
03422  3755  B0 0A              BCS SOP4
03423  3757  A9 50              LDA #<UTABLE
03424  3759  8D 58 1C           STA SYMBOP
03425  375C  A9 45              LDA #>UTABLE
03426  375E  8D 59 1C           STA SYMBOP+1
03427  3761              ;*********************************
03428  3761              ; GO AND LOAD TABLE
03429  3761              ;*********************************
03430  3761  20 06 39    SOP4   JSR READXX      ;READ FILE
03431  3764  B0 0D              BCS SY          ;C=1 ERROR
03432  3766              ;*********************************
03433  3766              ; SETUP END OF TABLE POINTER
03434  3766              ;*********************************
03435  3766  AD 58 1C           LDA SYMBOP      ;XREF POINTER
03436  3769  8D 5C 1C           STA SYMBOE
03437  376C  AD 59 1C           LDA SYMBOP+1
03438  376F  8D 5D 1C           STA SYMBOE+1
03439  3772  60                 RTS
03440  3773              ;*********************************
03441  3773              ; DEFAULT SYMBOL TABLE END
03442  3773              ;*********************************
03443  3773  A9 50       SY     LDA #<UTABLE
03444  3775  8D 5C 1C           STA SYMBOE
03445  3778  A9 45              LDA #>UTABLE
03446  377A  8D 5D 1C           STA SYMBOE+1
03447  377D  60                 RTS
03448  377E              ;*********************************
03449  377E              ; SET OR RESET SYMBOL TABLE
03450  377E              ;*********************************
03451  377E  AD 5A 1C    SSET   LDA SYMBOS
03452  3781  8D 58 1C           STA SYMBOP
03453  3784  AD 5B 1C           LDA SYMBOS+1
03454  3787  8D 59 1C           STA SYMBOP+1
03455  378A  60                 RTS
03456  378B              ;*********************************
03457  378B              ; EQUATE TABLE SETUP
03458  378B              ;*********************************
03459  378B  AD 51 1C    EQUINT LDA TABINE
03460  378E  8D 4D 1C           STA TABINP
03461  3791  8D 4F 1C           STA TABINS
03462  3794  AD 52 1C           LDA TABINE+1
03463  3797  8D 4E 1C           STA TABINP+1
03464  379A  8D 50 1C           STA TABINS+1






DISASSEMBLER128......PAGE 0076

LINE# LOC   CODE        LINE


03465  379D  60                 RTS
03466  379E              ;*********************************
03467  379E              ; ENTRY POINT FOR ADDRESS
03468  379E              ;*********************************
03469  379E  AD 57 1C    SYM    LDA SYMBOL
03470  37A1  F0 43              BEQ SYMEND
03471  37A3  AD 41 1C           LDA SELECT      ;COPY SELECT
03472  37A6  8D 64 1C           STA WORKED      ;ADDRESS INTO
03473  37A9  AD 42 1C           LDA SELECT+1    ;WORKED
03474  37AC  8D 65 1C           STA WORKED+1
03475  37AF  4C B7 37           JMP SYM1        ;CHECK FOR MATCH
03476  37B2              ;*********************************
03477  37B2              ; ENTRY POINT FOR OPCODES
03478  37B2              ;*********************************
03479  37B2  AD 57 1C    SYMOP  LDA SYMBOL
03480  37B5  F0 2F              BEQ SYMEND
03481  37B7              ;*********************************
03482  37B7              ; COMPARE ADDRESS TO SYMBOL TABLE
03483  37B7              ;*********************************
03484  37B7  20 7E 37    SYM1   JSR SSET
03485  37BA  20 87 38    SYM2   JSR GETC
03486  37BD  8D 67 1C           STA WORKER+1
03487  37C0  20 7E 38           JSR INCC
03488  37C3  20 87 38           JSR GETC
03489  37C6  8D 66 1C           STA WORKER
03490  37C9              ;*********************************
03491  37C9  38                 SEC             ;SET CARRY
03492  37CA  AD 66 1C           LDA WORKER
03493  37CD  ED 64 1C           SBC WORKED      ;SUB FROM LOW
03494  37D0  8D 70 1C           STA TEMP        ;STORE RESULT
03495  37D3  AD 67 1C           LDA WORKER+1
03496  37D6  ED 65 1C           SBC WORKED+1    ;SUB FROM HIGH
03497  37D9  0D 70 1C           ORA TEMP        ;OR RESULTS
03498  37DC  F0 0A              BEQ MATCH       ;CHECK FOR MATCH
03499  37DE  20 5A 38           JSR NEXTC       ;IF NOT NEXT
03500  37E1  B0 03              BCS SYMEND      ;END OF TABLE?
03501  37E3  4C BA 37           JMP SYM2        ;NO CHECK NEXT
03502  37E6  18          SYMEND CLC             ;NO MATCHES CLEAR
03503  37E7  60                 RTS             ;RETURN
03504  37E8              ;*********************************
03505  37E8              ; FOUND MATCH
03506  37E8              ;*********************************
03507  37E8  AD 31 1C    MATCH  LDA PASS        ;CHECK PASS
03508  37EB  CD 34 1C           CMP CPASS       ;IS IT LAST
03509  37EE  F0 18              BEQ MATCHS      ;IF SO PRINT
03510  37F0  CD 35 1C           CMP SPASS
03511  37F3  F0 3A              BEQ MATCHT
03512  37F5  20 92 2E           JSR RANGE       ;SYMBOL IN RANGE
03513  37F8  90 3F              BCC MATEXT      ;NO INTERNAL EQ
03514  37FA  20 7E 38           JSR INCC        ;INC TO SYMBOL
03515  37FD  20 87 38           JSR GETC        ;GET FIRST CHAR
03516  3800  C9 20              CMP #$20        ;SPACE
03517  3802  F0 03              BEQ MATONE      ;NOT EQUATE
03518  3804  4C 09 2F           JMP PUTI        ;PUT IN EQUATE
03519  3807  60          MATONE RTS             ;RETURN






DISASSEMBLER128......PAGE 0077

LINE# LOC   CODE        LINE


03520  3808              ;*********************************
03521  3808              ; CHECK FOR SYMBOL+1
03522  3808              ;*********************************
03523  3808  20 7E 38    MATCHS JSR INCC        ;INC TO LABEL
03524  380B  20 87 38           JSR GETC        ;GET CHARARCTER
03525  380E  C9 20              CMP #$20        ;IS IT SPACE
03526  3810  D0 1D              BNE MATCHT      ;IF NOT GO ON
03527  3812  38                 SEC             ;SET CARRY
03528  3813  AD 58 1C           LDA SYMBOP      ;GET LOW POINT
03529  3816  E9 09              SBC #$09        ;LAST SYMBOL
03530  3818  48                 PHA             ;PUSH ON STACK
03531  3819  AD 59 1C           LDA SYMBOP+1    ;GET HIGH POINT
03532  381C  E9 00              SBC #$00        ;LAST SYMBOL
03533  381E  A8                 TAY             ;PUT IN Y
03534  381F  68                 PLA             ;GET LO POINT
03535  3820  20 3A 38           JSR STRSYM      ;PRINT SYMBOL
03536  3823  A9 2B              LDA #'+'         ;ASCII +
03537  3825  20 64 28           JSR PCHAR       ;PRINT IT
03538  3828  A9 31              LDA #'1'         ;ASCII 1
03539  382A  20 64 28           JSR PCHAR       ;PRINT IT
03540  382D  38                 SEC             ;C=1 SYMBOL
03541  382E  60                 RTS             ;RETURN
03542  382F              ;*********************************
03543  382F  AD 58 1C    MATCHT LDA SYMBOP      ;LOW BYTE LABEL
03544  3832  AC 59 1C           LDY SYMBOP+1    ;HIGH BYTE LABEL
03545  3835  20 3A 38           JSR STRSYM      ;PRINT LABEL
03546  3838              ;*********************************
03547  3838  38                 SEC             ;MATCH SET CARRY
03548  3839  60          MATEXT RTS             ;RETURN
03549  383A              ;*********************************
03550  383A              ; PRINT SYMBOL
03551  383A              ;*********************************
03552  383A  85 FB       STRSYM STA ZEROUR
03553  383C  84 FC              STY ZEROUR+1
03554  383E  A0 00              LDY #$00
03555  3840  B1 FB       STRSY1 LDA (ZEROUR),Y
03556  3842  F0 0A              BEQ SYEXIT
03557  3844  C9 20              CMP #$20
03558  3846  F0 06              BEQ SYEXIT
03559  3848  20 64 28           JSR PCHAR
03560  384B  C8                 INY
03561  384C  D0 F2              BNE STRSY1
03562  384E  60          SYEXIT RTS
03563  384F  B1 FB       FIXSYM LDA (ZEROUR),Y
03564  3851  F0 FB              BEQ SYEXIT
03565  3853  20 64 28           JSR PCHAR
03566  3856  C8                 INY
03567  3857  4C 4F 38           JMP FIXSYM
03568  385A              ;*********************************
03569  385A              ; INC SYMBOL ADDRESS TABLE POINTER
03570  385A              ;*********************************
03571  385A  18          NEXTC  CLC
03572  385B  AD 58 1C           LDA SYMBOP
03573  385E  69 08              ADC #$08
03574  3860  8D 58 1C           STA SYMBOP






DISASSEMBLER128......PAGE 0078

LINE# LOC   CODE        LINE


03575  3863  AD 59 1C           LDA SYMBOP+1
03576  3866  69 00              ADC #$00
03577  3868  8D 59 1C           STA SYMBOP+1
03578  386B  CD 5D 1C           CMP SYMBOE+1
03579  386E  90 0A              BCC COK
03580  3870  D0 0A              BNE NCOK
03581  3872  AD 58 1C           LDA SYMBOP
03582  3875  CD 5C 1C           CMP SYMBOE
03583  3878  B0 02              BCS NCOK
03584  387A  18          COK    CLC
03585  387B  60                 RTS
03586  387C  38          NCOK   SEC
03587  387D  60                 RTS
03588  387E              ;*********************************
03589  387E  EE 58 1C    INCC   INC SYMBOP
03590  3881  D0 03              BNE *+5
03591  3883  EE 59 1C           INC SYMBOP+1
03592  3886  60                 RTS
03593  3887              ;*********************************
03594  3887              ; GET BYTE FROM ADDRESS TABLE
03595  3887              ;*********************************
03596  3887  AD 58 1C    GETC   LDA SYMBOP
03597  388A  85 FB              STA ZEROUR
03598  388C  AD 59 1C           LDA SYMBOP+1
03599  388F  85 FC              STA ZEROUR+1
03600  3891  A0 00              LDY #$00
03601  3893  B1 FB              LDA (ZEROUR),Y
03602  3895  60                 RTS
03603  3896              ;*********************************
03604  3896              ; PRINT EQUATE TABLE
03605  3896              ;*********************************
03606  3896  38          EQUPRT SEC
03607  3897  AD 4F 1C           LDA TABINS
03608  389A  ED 51 1C           SBC TABINE
03609  389D  8D 70 1C           STA TEMP
03610  38A0  AD 50 1C           LDA TABINS+1
03611  38A3  ED 52 1C           SBC TABINE+1
03612  38A6  0D 70 1C           ORA TEMP
03613  38A9  F0 55              BEQ EQUEND
03614  38AB  20 B4 2F           JSR SORT
03615  38AE  20 B5 2C           JSR COMENT
03616  38B1  20 7F 2E           JSR PRTOTH
03617  38B4  A9 84              LDA #<EQUATE
03618  38B6  A0 3B              LDY #>EQUATE
03619  38B8  20 0E 28           JSR STRPNT
03620  38BB  20 51 27           JSR NEWLIN
03621  38BE  20 B5 2C           JSR COMENT
03622  38C1  20 59 2F    EQUOP  JSR GETI
03623  38C4  8D 64 1C           STA WORKED
03624  38C7  20 50 2F           JSR INCI
03625  38CA  20 59 2F           JSR GETI
03626  38CD  8D 65 1C           STA WORKED+1
03627  38D0  20 7F 2E           JSR PRTOTH
03628  38D3  20 B2 37           JSR SYMOP
03629  38D6  B0 03              BCS EQUOP1






DISASSEMBLER128......PAGE 0079

LINE# LOC   CODE        LINE


03630  38D8  20 13 2D           JSR PWORK
03631  38DB  A9 3D       EQUOP1 LDA #'='
03632  38DD  20 64 28           JSR PCHAR
03633  38E0  A9 24              LDA #'$'
03634  38E2  20 64 28           JSR PCHAR
03635  38E5  20 16 2D           JSR PWORKD
03636  38E8  20 51 27           JSR NEWLIN
03637  38EB              ;*********************************
03638  38EB  20 50 2F           JSR INCI
03639  38EE  AD 4E 1C           LDA TABINP+1
03640  38F1  CD 52 1C           CMP TABINE+1
03641  38F4  90 CB              BCC EQUOP
03642  38F6  D0 08              BNE EQUEND
03643  38F8  AD 4D 1C           LDA TABINP
03644  38FB  CD 51 1C           CMP TABINE
03645  38FE  90 C1              BCC EQUOP
03646  3900              ;*********************************
03647  3900  20 B5 2C    EQUEND JSR COMENT
03648  3903  4C F0 2E           JMP RESINT
03649  3906              ;*********************************
03650  3906              ; READ CROSS REFERENCE SEQ FILE
03651  3906              ;      INTO SYMBOL TABLE
03652  3906              ;*********************************
03653  3906              ; READ FILE NAME DEFAULT ON CR
03654  3906              ;*********************************
03655  3906  A9 D4       READXX LDA #<MSS3
03656  3908  A0 3A              LDY #>MSS3
03657  390A  20 0E 28           JSR STRPNT
03658  390D  20 E4 FF    SOP2   JSR GETIN
03659  3910  F0 FB              BEQ SOP2
03660  3912  C9 30              CMP #'0'
03661  3914  F0 04              BEQ SOP3
03662  3916  C9 31              CMP #'1'
03663  3918  D0 F3              BNE SOP2
03664  391A  20 D2 FF    SOP3   JSR CHROUT
03665  391D  8D 05 1D           STA TEXTER
03666  3920              ;*********************************
03667  3920  A9 16              LDA #<LOADF
03668  3922  A0 3B              LDY #>LOADF
03669  3924  20 0E 28           JSR STRPNT
03670  3927              ;*********************************
03671  3927  20 6F 27           JSR INSTNG
03672  392A  F0 20              BEQ READXF
03673  392C  98                 TYA
03674  392D  48                 PHA
03675  392E  20 DD 20           JSR INITD
03676  3931  68                 PLA
03677  3932  A8                 TAY
03678  3933  A2 00              LDX #$00
03679  3935  BD 86 3A    XFILE1 LDA NAMS,X
03680  3938  99 7B 1C           STA BUF,Y
03681  393B  C8                 INY
03682  393C  E8                 INX
03683  393D  E0 04              CPX #$04
03684  393F  D0 F4              BNE XFILE1






DISASSEMBLER128......PAGE 0080

LINE# LOC   CODE        LINE


03685  3941  98                 TYA
03686  3942  A0 1C              LDY #>BUF
03687  3944  A2 7B              LDX #<BUF
03688  3946  20 BD FF           JSR SETNAM
03689  3949  4C 55 39           JMP REOPEN
03690  394C              ;*********************************
03691  394C              ; DEFAULT FILENAME XRFF0000
03692  394C              ;********************************
03693  394C  A9 0E       READXF LDA #$0E
03694  394E  A0 3A              LDY #>NAME
03695  3950  A2 7C              LDX #<NAME
03696  3952  20 BD FF           JSR SETNAM
03697  3955              ;*********************************
03698  3955              ; OPEN FILE
03699  3955              ;********************************
03700  3955  A9 03       REOPEN LDA #$03
03701  3957  A2 08              LDX #$08
03702  3959  A0 03              LDY #$03
03703  395B  20 BA FF           JSR SETLFS
03704  395E              ;
03705  395E  A9 00              LDA #$00        ;LOAD INTO BANK 1
03706  3960  A2 00              LDX #$00        ;PROGRAM IN BANK 0
03707  3962  20 68 FF           JSR SETBNK
03708  3965              ;
03709  3965  20 C0 FF           JSR OPEN
03710  3968              ;********************************
03711  3968              ; CHECK FOR DISK ERROR
03712  3968              ;*********************************
03713  3968  20 17 27           JSR DISERR
03714  396B  B0 3F              BCS QUITXX
03715  396D              ;*********************************
03716  396D              ; OUTPUT LOADING MESSAGE
03717  396D              ;*********************************
03718  396D  A9 34              LDA #<LOADM     ;MSG LOW
03719  396F  A0 3B              LDY #>LOADM     ;MSG HIGH
03720  3971  20 0E 28           JSR STRPNT      ;OUTPUT MSG
03721  3974              ;*********************************
03722  3974  A9 00              LDA #$00        ;COL COUNTER
03723  3976  8D 70 1C           STA TEMP
03724  3979              ;*********************************
03725  3979              ; INPUT AND LOAD SYMBOL TABLE
03726  3979              ;*********************************
03727  3979  20 BD 39    READX  JSR READS       ;INPUT SYMBOL
03728  397C  20 3B 3A           JSR PUTC
03729  397F  20 63 3A           JSR LINES       ;SCREEN OUT
03730  3982  20 E1 FF           JSR STOP
03731  3985  F0 05              BEQ QUITX
03732  3987  20 B7 FF           JSR READST
03733  398A  F0 ED              BEQ READX
03734  398C              ;*********************************
03735  398C              ;    CLOSE OPEN FILE
03736  398C              ;*********************************
03737  398C  A9 03       QUITX  LDA #$03
03738  398E  20 C3 FF           JSR CLOSE
03739  3991  20 CC FF           JSR CLRCHN






DISASSEMBLER128......PAGE 0081

LINE# LOC   CODE        LINE


03740  3994  20 47 2D           JSR CRLF
03741  3997              ;*********************************
03742  3997              ; SET END OF TABLE
03743  3997              ;*********************************
03744  3997  AD 58 1C           LDA SYMBOP
03745  399A  8D 5C 1C           STA SYMBOE
03746  399D  AD 59 1C           LDA SYMBOP+1
03747  39A0  8D 5D 1C           STA SYMBOE+1
03748  39A3              ;*********************************
03749  39A3              ; OUTPUT LOADED MESSAGE
03750  39A3              ;*********************************
03751  39A3  A9 52              LDA #<LOADC
03752  39A5  A0 3B              LDY #>LOADC
03753  39A7  20 0E 28           JSR STRPNT
03754  39AA  18                 CLC
03755  39AB  60                 RTS
03756  39AC              ;*********************************
03757  39AC              ; OUTPUT ERROR MESSAGE
03758  39AC              ;*********************************
03759  39AC  A9 03       QUITXX LDA #$03
03760  39AE  20 C3 FF           JSR CLOSE
03761  39B1  20 CC FF           JSR CLRCHN
03762  39B4  A9 69              LDA #<LOADE
03763  39B6  A0 3B              LDY #>LOADE
03764  39B8  20 0E 28           JSR STRPNT
03765  39BB  38                 SEC
03766  39BC  60                 RTS
03767  39BD              ;*********************************
03768  39BD              ; READ SYMBOL FROM FILE
03769  39BD              ;*********************************
03770  39BD  A2 03       READS  LDX #$03        ;FILE NUMBER
03771  39BF  20 C6 FF           JSR CHKIN       ;FILE IS INPUT
03772  39C2  A0 02              LDY #$02        ;COUNTER
03773  39C4  20 CF FF           JSR CHRIN       ;INPUT CHAR
03774  39C7  99 F9 1C           STA SYMBUF,Y    ;1ST CHAR
03775  39CA  20 D2 FF           JSR CHROUT      ;PRITN IT
03776  39CD  C8                 INY             ;INC POINTER
03777  39CE  20 CF FF    READY  JSR CHRIN       ;NEXT CHAR
03778  39D1  99 F9 1C           STA SYMBUF,Y    ;STORE
03779  39D4  20 D2 FF           JSR CHROUT      ;PRINT IT
03780  39D7  C8                 INY             ;INC OFFSET
03781  39D8  C0 08              CPY #$08        ;8 IS FOR NULL
03782  39DA  D0 F2              BNE READY       ;BRANCH IF NOT
03783  39DC  A9 00              LDA #$00        ;NULL MARKER
03784  39DE  99 F9 1C           STA SYMBUF,Y    ;STORE AT END
03785  39E1              ;*********************************
03786  39E1  20 59 2D           JSR SPACE       ;PRINT SPACE
03787  39E4  20 24 2D           JSR DOLLAR      ;PRINT $ SIGN
03788  39E7              ;*********************************
03789  39E7  AD 05 1D           LDA TEXTER
03790  39EA  C9 30              CMP #'0'
03791  39EC  F0 2F              BEQ STDREF
03792  39EE              ;*********************************
03793  39EE  A0 00              LDY #$00
03794  39F0  20 FD 39           JSR XGET






DISASSEMBLER128......PAGE 0082

LINE# LOC   CODE        LINE


03795  39F3  C8                 INY
03796  39F4  20 FD 39           JSR XGET
03797  39F7  20 CF FF           JSR CHRIN       ;GET $0D
03798  39FA  4C CC FF           JMP CLRCHN
03799  39FD              ;*********************************
03800  39FD  20 CF FF    XGET   JSR CHRIN
03801  3A00  20 D2 FF           JSR CHROUT
03802  3A03  20 BF 27           JSR BINARY
03803  3A06  0A                 ASL A
03804  3A07  0A                 ASL A
03805  3A08  0A                 ASL A
03806  3A09  0A                 ASL A
03807  3A0A  99 F9 1C           STA SYMBUF,Y
03808  3A0D  20 CF FF           JSR CHRIN
03809  3A10  20 D2 FF           JSR CHROUT
03810  3A13  20 BF 27           JSR BINARY
03811  3A16  19 F9 1C           ORA SYMBUF,Y
03812  3A19  99 F9 1C           STA SYMBUF,Y
03813  3A1C  60                 RTS
03814  3A1D              ;*********************************
03815  3A1D  A0 00       STDREF LDY #$00        ;ZERO OFFSET
03816  3A1F  20 CF FF           JSR CHRIN       ;HIGH BYTES
03817  3A22  99 F9 1C           STA SYMBUF,Y    ;
03818  3A25  8C 73 1C           STY SAVY        ;
03819  3A28  20 F8 27           JSR PRBYT       ;
03820  3A2B  AC 73 1C           LDY SAVY        ;
03821  3A2E  C8                 INY             ;
03822  3A2F  20 CF FF           JSR CHRIN       ;LOW BYTE
03823  3A32  99 F9 1C           STA SYMBUF,Y    ;
03824  3A35  20 F8 27           JSR PRBYT       ;
03825  3A38  4C CC FF           JMP CLRCHN      ;KEYBOARD INPUT
03826  3A3B              ;*********************************
03827  3A3B              ; MOVE SYMBOL FROM BUFFER TO TABLE
03828  3A3B              ;*********************************
03829  3A3B  A0 00       PUTC   LDY #$00
03830  3A3D  AD 58 1C           LDA SYMBOP
03831  3A40  85 FB              STA ZEROUR
03832  3A42  AD 59 1C           LDA SYMBOP+1
03833  3A45  85 FC              STA ZEROUR+1
03834  3A47  B9 F9 1C    PUT    LDA SYMBUF,Y
03835  3A4A  91 FB              STA (ZEROUR),Y
03836  3A4C  C8                 INY
03837  3A4D  C0 09              CPY #$09
03838  3A4F  D0 F6              BNE PUT
03839  3A51  18                 CLC
03840  3A52  AD 58 1C           LDA SYMBOP
03841  3A55  69 09              ADC #$09
03842  3A57  8D 58 1C           STA SYMBOP
03843  3A5A  AD 59 1C           LDA SYMBOP+1
03844  3A5D  69 00              ADC #$00
03845  3A5F  8D 59 1C           STA SYMBOP+1
03846  3A62  60                 RTS
03847  3A63              ;*********************************
03848  3A63              ; OUTPUT SYMBOL IN 4 COLUMNS
03849  3A63              ;*********************************






DISASSEMBLER128......PAGE 0083

LINE# LOC   CODE        LINE


03850  3A63  EE 70 1C    LINES  INC TEMP
03851  3A66  A9 03              LDA #$03
03852  3A68  CD 70 1C           CMP TEMP
03853  3A6B  F0 05              BEQ RESET
03854  3A6D  A9 2E              LDA #'.'
03855  3A6F  4C D2 FF           JMP CHROUT
03856  3A72  A9 00       RESET  LDA #$00
03857  3A74  8D 70 1C           STA TEMP
03858  3A77  A9 0D              LDA #$0D
03859  3A79  4C D2 FF           JMP CHROUT
03860  3A7C              ;*********************************
03861  3A7C              ;   COMMAND MESSAGES
03862  3A7C              ;*********************************
03863  3A7C  30 3A       NAME   .BYTE '0:XRLL0000'
03864  3A86  2C 53       NAMS   .BYTE ',S,R'
03865  3A8A              ;*********************************
03866  3A8A  0D          MSS1   .BYTE $0D
03867  3A8B              ; .BYTE 'SYMBOLIC DISASSEMBLY (Y OR N/CR)? '
03868  3A8B  53 59              .BYTE 'SYMBOLIC DISASSEMBLY (Y/CR OR N)? '

03869  3AAD  00                 .BYTE 0
03870  3AAE  0D          MSS2   .BYTE $0D
03871  3AAF  4C 4F              .BYTE 'LOAD USER SYMBOL TABLE (Y OR N/CR)?
 '
03872  3AD3  00                 .BYTE 0
03873  3AD4  0D          MSS3   .BYTE $0D
03874  3AD5  46 4F              .BYTE 'FORMAT 0=STANDARD 1=ASCII : '
03875  3AF1  00                 .BYTE 0
03876  3AF2  0D          MSS4   .BYTE $0D
03877  3AF3  41 50              .BYTE 'APPEND DEFAULT TABLE (Y OR N/CR)? '

03878  3B15  00                 .BYTE 0
03879  3B16  0D          LOADF  .BYTE $0D
03880  3B17  53 59       .BYTE  'SYMBOL TABLE(CR OR D:NAME): '
03881  3B33  00          .BYTE  0
03882  3B34  0D          LOADM  .BYTE $0D,$0D
03882  3B35  0D 
03883  3B36  52 45       .BYTE  'READING SYMBOL TABLE FILE'
03884  3B4F  0D          .BYTE  $0D,$0D
03884  3B50  0D 
03885  3B51  00          .BYTE  0
03886  3B52  0D          LOADC  .BYTE $0D
03887  3B53  53 59       .BYTE  'SYMBOL TABLE LOADED'
03888  3B66  0D          .BYTE  $0D,$0D
03888  3B67  0D 
03889  3B68  00          .BYTE  0
03890  3B69  0D          LOADE  .BYTE $0D
03891  3B6A  53 59       .BYTE  'SYMBOL TABLE NOT LOADED'
03892  3B81  0D          .BYTE  $0D,$0D
03892  3B82  0D 
03893  3B83  00          .BYTE  0
03894  3B84              ;*********************************
03895  3B84  3B 20       EQUATE .BYTE '; EXTERNAL ADDRESS EQUATES'
03896  3B9E  00                 .BYTE 0
03897  3B9F              ;*********************************
03898  3B9F              ; PATCH CODE AREA
03899  3B9F              ;*********************************
03900  3B9F                     *=*+$0800






DISASSEMBLER128......PAGE 0084

LINE# LOC   CODE        LINE


03901  439F              ;*********************************
03902  439F              ; BIT INSTRUCTION CODING
03903  439F              ;*********************************
03904  439F              BITOPT = *
03905  439F  A9 57              LDA #<MSB1      ;TABLE TYPE
03906  43A1  A0 25              LDY #>MSB1
03907  43A3  20 0E 28           JSR STRPNT
03908  43A6  20 E4 FF    BOP0   JSR GETIN
03909  43A9  F0 FB              BEQ BOP0
03910  43AB  C9 30              CMP #'0'        ;STANDARD
03911  43AD  F0 12              BEQ BSC
03912  43AF  C9 31              CMP #'1'        ;$2C ABS
03913  43B1  F0 0E              BEQ BSC 
03914  43B3  C9 32              CMP #'2'        ;$24 ZP
03915  43B5  F0 0A              BEQ BSC
03916  43B7  C9 33              CMP #'3'        ;$2C AND $24
03917  43B9  F0 06              BEQ BSC
03918  43BB  C9 0D              CMP #$0D        ;STANDARD
03919  43BD  D0 E7              BNE BOP0
03920  43BF  A9 30              LDA #'0'
03921  43C1              BSC    = *
03922  43C1  48                 PHA             ;STASH INPUT
03923  43C2  20 D2 FF           JSR CHROUT      ;OUTPUT FEEDBACK
03924  43C5  68                 PLA             ;POP INPUT
03925  43C6  49 30              EOR #$30        ;MAKE A NUMBER
03926  43C8  8D CC 43           STA BITFLG      ;SET FLAG
03927  43CB  60                 RTS
03928  43CC              ;*********************************
03929  43CC              ; BIT INSTRUCTION CODING FLAG
03930  43CC              ;*********************************
03931  43CC              BITFLG = *
03932  43CC  AA                 .BYTE $AA
03933  43CD              ;*********************************
03934  43CD              
03935  43CD              ;*********************************
03936  43CD              ; SYMBOL TABLE
03937  43CD              ;*********************************
03938  43CD              ;  KERNAL JUMP TABLE
03939  43CD              ;*********************************
03940  43CD              STABLE = *
03941  43CD  FF                 .BYTE $FF,$80,'IDBYTE',0
03941  43CE  80 
03941  43CF  49 44 
03941  43D5  00 
03942  43D6  FF                 .BYTE $FF,$81,'CINT  ',0
03942  43D7  81 
03942  43D8  43 49 
03942  43DE  00 
03943  43DF  FF                 .BYTE $FF,$84,'IOINIT',0
03943  43E0  84 
03943  43E1  49 4F 
03943  43E7  00 
03944  43E8  FF                 .BYTE $FF,$87,'RAMTAS',0
03944  43E9  87 
03944  43EA  52 41 






DISASSEMBLER128......PAGE 0085

LINE# LOC   CODE        LINE


03944  43F0  00 
03945  43F1  FF                 .BYTE $FF,$8A,'RESTOR',0
03945  43F2  8A 
03945  43F3  52 45 
03945  43F9  00 
03946  43FA  FF                 .BYTE $FF,$8D,'VECTOR',0
03946  43FB  8D 
03946  43FC  56 45 
03946  4402  00 
03947  4403  FF                 .BYTE $FF,$90,'SETMSG',0
03947  4404  90 
03947  4405  53 45 
03947  440B  00 
03948  440C  FF                 .BYTE $FF,$93,'SECOND',0
03948  440D  93 
03948  440E  53 45 
03948  4414  00 
03949  4415  FF                 .BYTE $FF,$96,'TKSA  ',0
03949  4416  96 
03949  4417  54 4B 
03949  441D  00 
03950  441E  FF                 .BYTE $FF,$99,'MEMTOP',0
03950  441F  99 
03950  4420  4D 45 
03950  4426  00 
03951  4427  FF                 .BYTE $FF,$9C,'MEMBOT',0
03951  4428  9C 
03951  4429  4D 45 
03951  442F  00 
03952  4430  FF                 .BYTE $FF,$9F,'SCNKEY',0
03952  4431  9F 
03952  4432  53 43 
03952  4438  00 
03953  4439  FF                 .BYTE $FF,$A2,'SETTMO',0
03953  443A  A2 
03953  443B  53 45 
03953  4441  00 
03954  4442  FF                 .BYTE $FF,$A5,'ACPTR ',0
03954  4443  A5 
03954  4444  41 43 
03954  444A  00 
03955  444B  FF                 .BYTE $FF,$A8,'CIOUT ',0
03955  444C  A8 
03955  444D  43 49 
03955  4453  00 
03956  4454  FF                 .BYTE $FF,$AB,'UNTLK ',0
03956  4455  AB 
03956  4456  55 4E 
03956  445C  00 
03957  445D  FF                 .BYTE $FF,$AE,'UNLSN ',0
03957  445E  AE 
03957  445F  55 4E 
03957  4465  00 
03958  4466  FF                 .BYTE $FF,$B1,'LISTEN',0
03958  4467  B1 






DISASSEMBLER128......PAGE 0086

LINE# LOC   CODE        LINE


03958  4468  4C 49 
03958  446E  00 
03959  446F  FF                 .BYTE $FF,$B4,'TALK  ',0
03959  4470  B4 
03959  4471  54 41 
03959  4477  00 
03960  4478  FF                 .BYTE $FF,$B7,'READST',0
03960  4479  B7 
03960  447A  52 45 
03960  4480  00 
03961  4481  FF                 .BYTE $FF,$BA,'SETLFS',0
03961  4482  BA 
03961  4483  53 45 
03961  4489  00 
03962  448A  FF                 .BYTE $FF,$BD,'SETNAM',0
03962  448B  BD 
03962  448C  53 45 
03962  4492  00 
03963  4493  FF                 .BYTE $FF,$C0,'OPEN  ',0
03963  4494  C0 
03963  4495  4F 50 
03963  449B  00 
03964  449C  FF                 .BYTE $FF,$C3,'CLOSE ',0
03964  449D  C3 
03964  449E  43 4C 
03964  44A4  00 
03965  44A5  FF                 .BYTE $FF,$C6,'CHKIN ',0
03965  44A6  C6 
03965  44A7  43 48 
03965  44AD  00 
03966  44AE  FF                 .BYTE $FF,$C9,'CHKOUT',0
03966  44AF  C9 
03966  44B0  43 48 
03966  44B6  00 
03967  44B7  FF                 .BYTE $FF,$CC,'CLRCHN',0
03967  44B8  CC 
03967  44B9  43 4C 
03967  44BF  00 
03968  44C0  FF                 .BYTE $FF,$CF,'CHRIN ',0
03968  44C1  CF 
03968  44C2  43 48 
03968  44C8  00 
03969  44C9  FF                 .BYTE $FF,$D2,'CHROUT',0
03969  44CA  D2 
03969  44CB  43 48 
03969  44D1  00 
03970  44D2  FF                 .BYTE $FF,$D5,'LOAD  ',0
03970  44D3  D5 
03970  44D4  4C 4F 
03970  44DA  00 
03971  44DB  FF                 .BYTE $FF,$D8,'SAVE  ',0
03971  44DC  D8 
03971  44DD  53 41 
03971  44E3  00 
03972  44E4  FF                 .BYTE $FF,$DB,'SETTIM',0






DISASSEMBLER128......PAGE 0087

LINE# LOC   CODE        LINE


03972  44E5  DB 
03972  44E6  53 45 
03972  44EC  00 
03973  44ED  FF                 .BYTE $FF,$DE,'RDTIM ',0
03973  44EE  DE 
03973  44EF  52 44 
03973  44F5  00 
03974  44F6  FF                 .BYTE $FF,$E1,'STOP  ',0
03974  44F7  E1 
03974  44F8  53 54 
03974  44FE  00 
03975  44FF  FF                 .BYTE $FF,$E4,'GETIN ',0
03975  4500  E4 
03975  4501  47 45 
03975  4507  00 
03976  4508  FF                 .BYTE $FF,$E7,'CLALL ',0
03976  4509  E7 
03976  450A  43 4C 
03976  4510  00 
03977  4511  FF                 .BYTE $FF,$EA,'UDTIM ',0
03977  4512  EA 
03977  4513  55 44 
03977  4519  00 
03978  451A  FF                 .BYTE $FF,$ED,'SCREEN',0
03978  451B  ED 
03978  451C  53 43 
03978  4522  00 
03979  4523  FF                 .BYTE $FF,$F0,'PLOT  ',0
03979  4524  F0 
03979  4525  50 4C 
03979  452B  00 
03980  452C  FF                 .BYTE $FF,$F3,'IOBASE',0
03980  452D  F3 
03980  452E  49 4F 
03980  4534  00 
03981  4535              ;*********************************
03982  4535  FF                 .BYTE $FF,$FA,'NMIVEC',0
03982  4536  FA 
03982  4537  4E 4D 
03982  453D  00 
03983  453E  FF                 .BYTE $FF,$FC,'RESVEC',0
03983  453F  FC 
03983  4540  52 45 
03983  4546  00 
03984  4547  FF                 .BYTE $FF,$FE,'IRQVEC',0
03984  4548  FE 
03984  4549  49 52 
03984  454F  00 
03985  4550              ;*********************************
03986  4550  00          UTABLE .BYTE 0
03987  4551              ;*********************************
03988  4551              .END
03989  4551              ;*********************************
03990  4551              .END







DISASSEMBLER128......PAGE 0088

LINE# LOC   CODE        LINE


ERRORS = 00000


SYMBOL TABLE

SYMBOL VALUE
 ABSBIT   2B9E    ABSEXT   2BC3    ABSLUT   2B9F    ABSX     2BC4
 ABSY     2BCA    AC0      3204    AC1      3207    ACC      2B53
 ACHECK   31F2    ADRS     1C6E    AFILE    22C1    AGET     22FC
 AGET1    2308    ALINE    3235    ALOP     3247    AOP      228D
 AOP1     2359    AOP2     2383    AOP3     23A8    AOPX     2354
 ASC      23C5    ASCCCC   3180    ASCI1    31AD    ASCII    31A2
 ASCIIQ   31DB    ASCKK    3197    B0000    2A6C    BASIC    1C0D
 BINARY   27BF    BITFLG   43CC    BITOPT   439F    BOP      22B8
 BOP0     43A6    BSC      43C1    BSTUB    0001    BUF      1C7B
 BYABIT   2A3B    BYTES    320A    BYTESX   3232    BYTT     2A13
 BYZBIT   2A16    CASCII   328A    CDATA    1D06    CHKIN    FFC6
 CHKOUT   FFC9    CHRIN    FFCF    CHROUT   FFD2    CLALL    FFE7
 CLOSE    FFC3    CLOSEA   FF4A    CLRCHN   FFCC    COK      387A
 COMENT   2CB5    COMET    2CBB    COMOPT   1C3C    COMPT    2CCB
 CONST0   2974    CONST1   2979    CPASS    1C34    CRLF     2D47
 CRLFPR   28AE    CRNO     27E3    CRNO1    27F0    CRYS     27D6
 CRYS1    27EE    CSHORT   2CC9    CUROFF   CD9F    CURON    CD6F
 DATABE   1D0E    DATABP   1D0A    DATABS   1D0C    DATAO1   310E
 DATAO2   3144    DATAOP   30FF    DATUT    31EC    DBYTES   3296
 DBYTEX   32C3    DECSL    2D98    DEVICE   1C38    DISA     1E4F
 DISASS   1E40    DISB     1E7D    DISC     1F0C    DISERR   2717
 DISFUL   1F09    DISL     29E8    DISL1    29F9    DLOOA    2742
 DLOOC    2738    DLOOE    272C    DLOOP    1EAE    DOLLAR   2D24
 DONE     1F83    DONED    1F64    DOP      1F91    DOP2     2285
 DOP3     2287    DSLINE   29D1    EA       1C3F    EAGOL    1C47
 EAOUT    1C4B    EAS      1D03    EASCI1   326E    EASCII   3273
 EFILE    2CA5    ENDAX    310B    ENDDAT   31EF    EPASS    1C33
 EQUATE   3B84    EQUEND   3900    EQUINT   378B    EQUOP    38C1
 EQUOP1   38DB    EQUPRT   3896    ERRCT    1C79    FILE     21C6
 FILEOK   21C0    FINAL    2A10    FINISH   289B    FIXSYM   384F
 FOP1     2401    FOP2     2403    FOROPT   1C3B    FORWRD   2C3D
 GETBYT   27A2    GETC     3887    GETI     2F59    GETIN    FFE4
 GETOPE   33D4    GETSL    2D80    GETWRD   277E    GFILE0   21B4
 HEADER   28CD    HEADES   2920    HEADFX   2948    HEADOK   293A
 HEADSY   293B    HEXA     2964    ILLEGL   2B12    ILLMSG   2DD4
 ILLOP    33B3    IMEXIT   2B8D    IMMEDT   2B58    IMPLI1   2BDE
 IMPLID   2BD0    IMPONE   2BDD    INCC     387E    INCI     2F50
 INCIE    2F48    INCSL    2D77    INDCMP   FF7A    INDFET   FF74
 INDRCT   2BEA    INDSTA   FF77    INDX     2BFF    INDY     2C08
 INEND    27A1    INENX    27BE    INIT     24A9    INITD    20DD
 INITIN   2EB8    INSTN1   2771    INSTNG   276F    INTCH    2F77
 INTCHA   2F68    INTCHK   2F74    INTEND   2FB0    INTEXT   2F46
 INTMAT   2FB2    INTOUT   309F    INTPR    30AA    INTPRM   30D1
 INTPRS   30CC    INTPRT   3089    INTSA    2DA4    INTSET   2ECA
 IPASS    1C32    ISKIP    2B4C    LARGE    301A    LINECK   26D8
 LINECO   2716    LINECT   1C77    LINEFL   1CDF    LINEOK   290F
 LINES    3A63    LISTCT   1C76    LOADC    3B52    LOADE    3B69
 LOADF    3B16    LOADM    3B34    LOOP1    30A5    LOOP2    30F9








SYMBOL TABLE

SYMBOL VALUE
 LPAREN   2D29    LTITLE   299A    LTITLS   29C4    MATCH    37E8
 MATCHS   3808    MATCHT   382F    MATEXT   3839    MATONE   3807
 MBYTE    3382    MCODES   3516    MDBYTE   3392    MEMEND   8000
 MEMSIZ   0039    MNAMES   343E    MNEMON   339B    MNLOOP   33A5
 MODES    3616    MPASS    1E11    MSA1     25DC    MSA2     25FE
 MSA3     2616    MSAOP    25BD    MSB1     2557    MSB4     2698
 MSB5     26B8    MSD1     24C4    MSD2     24D6    MSD4     24E6
 MSD4A    2500    MSD5     2513    MSF1     2454    MSF2     2470
 MSG      2407    MSG1     2484    MSG2     24AB    MSG5     262C
 MSGBIT   2DB1    MSGBZP   2DB9    MSGDIS   1E2D    MSGEND   2DCF
 MSGERR   1E23    MSR1     252F    MSS1     3A8A    MSS2     3AAE
 MSS3     3AD4    MSS4     3AF2    MWORD    338A    NAME     3A7C
 NAMS     3A86    NASCII   327B    NBUF     1CE3    NCHARS   1CE2
 NCOK     387C    NDATA    1D08    NEGREL   2DCB    NEWEXT   276E
 NEWLIN   2751    NEXLIN   28C0    NEXPTR   28BD    NEXPTS   2910
 NEXTBY   3369    NEXTC    385A    NEXTP    1EDF    NEXTSL   2D5E
 NOASC    3294    NOBINC   3380    NOFILE   21C4    NOHEX    27D2
 NOID     21D7    NOINC    2D75    NOPRT    226A    NOTABS   233F
 NPRAD    2D01    NPRAD1   2D02    OFFSET   1C43    OFILE    21DA
 OFILE1   21ED    OFILE2   21F2    OFILE3   221C    OFILE4   2230
 OFILED   21CF    ONEBIT   2AA0    ONEBX    2ACF    ONEBY    2ACC
 ONEBYT   2AA1    OPCPUT   2B0B    OPCSYM   2B0E    OPEN     FFC0
 OPERN1   33C7    OPERND   33CF    ORGIN    2C8F    OUFILE   2199
 OUTPUT   1C39    P1       2CF8    PAGECT   1C74    PAGER1   2909
 PASS     1C31    PAUS1    31D4    PAUSE    1ED8    PCHAR    2864
 PEXIT    2899    PFILE0   1FB1    PFILE1   1FB3    PMSG     1E17
 POSREL   2DC7    POVER    2CF5    PRAD     2CDE    PRBYT    27F8
 PRBYTS   27F2    PREND    30F6    PRFILE   20AB    PRIMM    FF7D
 PRIN     2879    PRINT    226C    PRLA     2CD4    PRO2RD   2085
 PROGED   1FF9    PROGM    24A5    PROGOK   20DC    PROGRD   1FE4
 PRTASS   33BA    PRTDAF   2E77    PRTDAL   2323    PRTDAS   2310
 PRTDAT   2E5B    PRTEST   2E54    PRTGET   2231    PRTNEX   231B
 PRTNU1   2833    PRTNU2   283A    PRTNU3   283B    PRTNUM   282A
 PRTOK    30E9    PRTON1   2DF6    PRTONE   2DE8    PRTOT1   2E8A
 PRTOTH   2E7F    PRTPAG   281F    PRTTH1   2E49    PRTTHE   2E23
 PRTTW1   2E18    PRTTWO   2DFE    PSELEC   2D0A    PUIT     2F23
 PUT      3A47    PUTC     3A3B    PUTI     2F09    PWORK    2D13
 PWORKD   2D16    Q00000   325C    QUITS    1F12    QUITX    398C
 QUITXX   39AC    QUTERR   1F29    RANG     2EA4    RANGE    2E92
 READS    39BD    READST   FFB7    READX    3979    READXF   394C
 READXX   3906    READY    39CE    RELATV   2C14    RELND    2C46
 RELNEG   2C71    RELP     2C83    RELPC    2C64    RELPM    2C75
 RELPUT   2C60    RELSYM   2C63    REOPEN   3955    RESET    3A72
 RESINT   2EF0    ROPT     1C37    ROUT     2EB6    RPAREN   2D2E
 S3       3002    SA       1C3D    SAGOL    1C45    SAOUT    1C49
 SAVA     1C71    SAVEE    1C6C    SAVEP    1C68    SAVES    1C6A
 SAVINT   2ED7    SAVX     1C72    SAVY     1C73    SBLOK    337B
 SCREN    288D    SCRNO1   295A    SCROFF   294B    SCRON    295B
 SELECT   1C41    SEMIC    2D1F    SETBNK   FF68    SETLFS   FFBA
 SETMSG   FF90    SETNAM   FFBD    SEXIT    281E    SKIPER   3188
 SLOK     2D70    SMALL    301D    SMALLP   1C55    SMALLS   1C53
 SOP      3716    SOP1     372A    SOP2     390D    SOP3     391A
 SOP4     3761    SORT     2FB4    SORT1    2FC9    SORT2    2FD8
 SORT3    305A    SORT4    3086    SORTOK   3083    SOUT     2814
 SPAC     2D51    SPAC6    2D4C    SPACE    2D59    SPACM    2D4E








SYMBOL TABLE

SYMBOL VALUE
 SPASS    1C35    SSET     377E    STABLE   43CD    STARTD   1C0F
 STARTS   20FE    STDREF   3A1D    STOP     FFE1    STRPNT   280E
 STRSY1   3840    STRSYM   383A    SUBP     33EA    SUBS     3422
 SUBS1    3406    SY       3773    SYEXIT   384E    SYM      379E
 SYM1     37B7    SYM2     37BA    SYMBOE   1C5C    SYMBOL   1C57
 SYMBOP   1C58    SYMBOS   1C5A    SYMBUF   1CF9    SYMEND   37E6
 SYMOP    37B2    SYTAB    373F    T2       3005    TABINE   1C51
 TABINP   1C4D    TABINS   1C4F    TDATA    1D10    TEMP     1C70
 TEXTER   1D05    TWOB     2B11    TWOBIT   2AD5    TWOBX    2B08
 TWOBY    2B05    TWOBYT   2AD6    UTABLE   4550    UYMBOE   1C62
 UYMBOP   1C5E    UYMBOS   1C60    VERSON   1CE1    VICREG   D011
 WIND1    217C    WIND2    217E    WINDOP   2140    WINDOW   1C3A
 WORD1    32DB    WORDM    3321    WORDPT   3315    WORDS    32C6
 WORDS2   3351    WORDS3   3363    WORDSX   3312    WORDSY   331B
 WORDXX   3366    WORKED   1C64    WORKER   1C66    WREADY   4D37
 WRITE    24A1    XFILE1   3935    XGET     39FD    XINDEX   2D33
 XOP0     23DC    XOP1     23EC    XOP2     23EE    XOPT     1C36
 XTITLE   297E    XTITLS   29B7    YINDEX   2D3D    YSHEX    27D4
 ZERBIT   2B8E    ZEROLG   00FB    ZEROPG   2B8F    ZEROUR   00FB
 ZEROX    2B92    ZEROY    2B98   

END OF ASSEMBLY
DISANL.ASM......PAGE 0001

LINE# LOC   CODE        LINE































































DISASSEMBLER128......PAGE 0002

LINE# LOC   CODE        LINE


00040  1C0F              .LIB   DIS.ASM
00420  1F91              .END
00422  1F91              .LIB   OPTION.ASM
01122  26D8              .END
01124  26D8              .LIB   UTIL.ASM
01554  29D1              .END
01556  29D1              .LIB   MODE.ASM
02309  2E92              .END
02311  2E92              .LIB   INTERNAL.ASM
02637  30FF              .END
02639  30FF              .LIB   ASC.ASM
02983  339B              .END
02985  339B              .LIB   TABLE.ASM
03363  3716              .END
03365  3716              .LIB   SYM.ASM
03988  4551              .END
ERRORS = 00000


SYMBOL TABLE

SYMBOL VALUE
 ABSBIT   2B9E    ABSEXT   2BC3    ABSLUT   2B9F    ABSX     2BC4
 ABSY     2BCA    AC0      3204    AC1      3207    ACC      2B53
 ACHECK   31F2    ADRS     1C6E    AFILE    22C1    AGET     22FC
 AGET1    2308    ALINE    3235    ALOP     3247    AOP      228D
 AOP1     2359    AOP2     2383    AOP3     23A8    AOPX     2354
 ASC      23C5    ASCCCC   3180    ASCI1    31AD    ASCII    31A2
 ASCIIQ   31DB    ASCKK    3197    B0000    2A6C    BASIC    1C0D
 BINARY   27BF    BITFLG   43CC    BITOPT   439F    BOP      22B8
 BOP0     43A6    BSC      43C1    BSTUB    0001    BUF      1C7B
 BYABIT   2A3B    BYTES    320A    BYTESX   3232    BYTT     2A13
 BYZBIT   2A16    CASCII   328A    CDATA    1D06    CHKIN    FFC6
 CHKOUT   FFC9    CHRIN    FFCF    CHROUT   FFD2    CLALL    FFE7
 CLOSE    FFC3    CLOSEA   FF4A    CLRCHN   FFCC    COK      387A
 COMENT   2CB5    COMET    2CBB    COMOPT   1C3C    COMPT    2CCB
 CONST0   2974    CONST1   2979    CPASS    1C34    CRLF     2D47
 CRLFPR   28AE    CRNO     27E3    CRNO1    27F0    CRYS     27D6
 CRYS1    27EE    CSHORT   2CC9    CUROFF   CD9F    CURON    CD6F
 DATABE   1D0E    DATABP   1D0A    DATABS   1D0C    DATAO1   310E
 DATAO2   3144    DATAOP   30FF    DATUT    31EC    DBYTES   3296
 DBYTEX   32C3    DECSL    2D98    DEVICE   1C38    DISA     1E4F
 DISASS   1E40    DISB     1E7D    DISC     1F0C    DISERR   2717
 DISFUL   1F09    DISL     29E8    DISL1    29F9    DLOOA    2742
 DLOOC    2738    DLOOE    272C    DLOOP    1EAE    DOLLAR   2D24
 DONE     1F83    DONED    1F64    DOP      1F91    DOP2     2285
 DOP3     2287    DSLINE   29D1    EA       1C3F    EAGOL    1C47
 EAOUT    1C4B    EAS      1D03    EASCI1   326E    EASCII   3273
 EFILE    2CA5    ENDAX    310B    ENDDAT   31EF    EPASS    1C33
 EQUATE   3B84    EQUEND   3900    EQUINT   378B    EQUOP    38C1
 EQUOP1   38DB    EQUPRT   3896    ERRCT    1C79    FILE     21C6
 FILEOK   21C0    FINAL    2A10    FINISH   289B    FIXSYM   384F
 FOP1     2401    FOP2     2403    FOROPT   1C3B    FORWRD   2C3D
 GETBYT   27A2    GETC     3887    GETI     2F59    GETIN    FFE4








SYMBOL TABLE

SYMBOL VALUE
 GETOPE   33D4    GETSL    2D80    GETWRD   277E    GFILE0   21B4
 HEADER   28CD    HEADES   2920    HEADFX   2948    HEADOK   293A
 HEADSY   293B    HEXA     2964    ILLEGL   2B12    ILLMSG   2DD4
 ILLOP    33B3    IMEXIT   2B8D    IMMEDT   2B58    IMPLI1   2BDE
 IMPLID   2BD0    IMPONE   2BDD    INCC     387E    INCI     2F50
 INCIE    2F48    INCSL    2D77    INDCMP   FF7A    INDFET   FF74
 INDRCT   2BEA    INDSTA   FF77    INDX     2BFF    INDY     2C08
 INEND    27A1    INENX    27BE    INIT     24A9    INITD    20DD
 INITIN   2EB8    INSTN1   2771    INSTNG   276F    INTCH    2F77
 INTCHA   2F68    INTCHK   2F74    INTEND   2FB0    INTEXT   2F46
 INTMAT   2FB2    INTOUT   309F    INTPR    30AA    INTPRM   30D1
 INTPRS   30CC    INTPRT   3089    INTSA    2DA4    INTSET   2ECA
 IPASS    1C32    ISKIP    2B4C    LARGE    301A    LINECK   26D8
 LINECO   2716    LINECT   1C77    LINEFL   1CDF    LINEOK   290F
 LINES    3A63    LISTCT   1C76    LOADC    3B52    LOADE    3B69
 LOADF    3B16    LOADM    3B34    LOOP1    30A5    LOOP2    30F9
 LPAREN   2D29    LTITLE   299A    LTITLS   29C4    MATCH    37E8
 MATCHS   3808    MATCHT   382F    MATEXT   3839    MATONE   3807
 MBYTE    3382    MCODES   3516    MDBYTE   3392    MEMEND   8000
 MEMSIZ   0039    MNAMES   343E    MNEMON   339B    MNLOOP   33A5
 MODES    3616    MPASS    1E11    MSA1     25DC    MSA2     25FE
 MSA3     2616    MSAOP    25BD    MSB1     2557    MSB4     2698
 MSB5     26B8    MSD1     24C4    MSD2     24D6    MSD4     24E6
 MSD4A    2500    MSD5     2513    MSF1     2454    MSF2     2470
 MSG      2407    MSG1     2484    MSG2     24AB    MSG5     262C
 MSGBIT   2DB1    MSGBZP   2DB9    MSGDIS   1E2D    MSGEND   2DCF
 MSGERR   1E23    MSR1     252F    MSS1     3A8A    MSS2     3AAE
 MSS3     3AD4    MSS4     3AF2    MWORD    338A    NAME     3A7C
 NAMS     3A86    NASCII   327B    NBUF     1CE3    NCHARS   1CE2
 NCOK     387C    NDATA    1D08    NEGREL   2DCB    NEWEXT   276E
 NEWLIN   2751    NEXLIN   28C0    NEXPTR   28BD    NEXPTS   2910
 NEXTBY   3369    NEXTC    385A    NEXTP    1EDF    NEXTSL   2D5E
 NOASC    3294    NOBINC   3380    NOFILE   21C4    NOHEX    27D2
 NOID     21D7    NOINC    2D75    NOPRT    226A    NOTABS   233F
 NPRAD    2D01    NPRAD1   2D02    OFFSET   1C43    OFILE    21DA
 OFILE1   21ED    OFILE2   21F2    OFILE3   221C    OFILE4   2230
 OFILED   21CF    ONEBIT   2AA0    ONEBX    2ACF    ONEBY    2ACC
 ONEBYT   2AA1    OPCPUT   2B0B    OPCSYM   2B0E    OPEN     FFC0
 OPERN1   33C7    OPERND   33CF    ORGIN    2C8F    OUFILE   2199
 OUTPUT   1C39    P1       2CF8    PAGECT   1C74    PAGER1   2909
 PASS     1C31    PAUS1    31D4    PAUSE    1ED8    PCHAR    2864
 PEXIT    2899    PFILE0   1FB1    PFILE1   1FB3    PMSG     1E17
 POSREL   2DC7    POVER    2CF5    PRAD     2CDE    PRBYT    27F8
 PRBYTS   27F2    PREND    30F6    PRFILE   20AB    PRIMM    FF7D
 PRIN     2879    PRINT    226C    PRLA     2CD4    PRO2RD   2085
 PROGED   1FF9    PROGM    24A5    PROGOK   20DC    PROGRD   1FE4
 PRTASS   33BA    PRTDAF   2E77    PRTDAL   2323    PRTDAS   2310
 PRTDAT   2E5B    PRTEST   2E54    PRTGET   2231    PRTNEX   231B
 PRTNU1   2833    PRTNU2   283A    PRTNU3   283B    PRTNUM   282A
 PRTOK    30E9    PRTON1   2DF6    PRTONE   2DE8    PRTOT1   2E8A
 PRTOTH   2E7F    PRTPAG   281F    PRTTH1   2E49    PRTTHE   2E23
 PRTTW1   2E18    PRTTWO   2DFE    PSELEC   2D0A    PUIT     2F23
 PUT      3A47    PUTC     3A3B    PUTI     2F09    PWORK    2D13
 PWORKD   2D16    Q00000   325C    QUITS    1F12    QUITX    398C
 QUITXX   39AC    QUTERR   1F29    RANG     2EA4    RANGE    2E92








SYMBOL TABLE

SYMBOL VALUE
 READS    39BD    READST   FFB7    READX    3979    READXF   394C
 READXX   3906    READY    39CE    RELATV   2C14    RELND    2C46
 RELNEG   2C71    RELP     2C83    RELPC    2C64    RELPM    2C75
 RELPUT   2C60    RELSYM   2C63    REOPEN   3955    RESET    3A72
 RESINT   2EF0    ROPT     1C37    ROUT     2EB6    RPAREN   2D2E
 S3       3002    SA       1C3D    SAGOL    1C45    SAOUT    1C49
 SAVA     1C71    SAVEE    1C6C    SAVEP    1C68    SAVES    1C6A
 SAVINT   2ED7    SAVX     1C72    SAVY     1C73    SBLOK    337B
 SCREN    288D    SCRNO1   295A    SCROFF   294B    SCRON    295B
 SELECT   1C41    SEMIC    2D1F    SETBNK   FF68    SETLFS   FFBA
 SETMSG   FF90    SETNAM   FFBD    SEXIT    281E    SKIPER   3188
 SLOK     2D70    SMALL    301D    SMALLP   1C55    SMALLS   1C53
 SOP      3716    SOP1     372A    SOP2     390D    SOP3     391A
 SOP4     3761    SORT     2FB4    SORT1    2FC9    SORT2    2FD8
 SORT3    305A    SORT4    3086    SORTOK   3083    SOUT     2814
 SPAC     2D51    SPAC6    2D4C    SPACE    2D59    SPACM    2D4E
 SPASS    1C35    SSET     377E    STABLE   43CD    STARTD   1C0F
 STARTS   20FE    STDREF   3A1D    STOP     FFE1    STRPNT   280E
 STRSY1   3840    STRSYM   383A    SUBP     33EA    SUBS     3422
 SUBS1    3406    SY       3773    SYEXIT   384E    SYM      379E
 SYM1     37B7    SYM2     37BA    SYMBOE   1C5C    SYMBOL   1C57
 SYMBOP   1C58    SYMBOS   1C5A    SYMBUF   1CF9    SYMEND   37E6
 SYMOP    37B2    SYTAB    373F    T2       3005    TABINE   1C51
 TABINP   1C4D    TABINS   1C4F    TDATA    1D10    TEMP     1C70
 TEXTER   1D05    TWOB     2B11    TWOBIT   2AD5    TWOBX    2B08
 TWOBY    2B05    TWOBYT   2AD6    UTABLE   4550    UYMBOE   1C62
 UYMBOP   1C5E    UYMBOS   1C60    VERSON   1CE1    VICREG   D011
 WIND1    217C    WIND2    217E    WINDOP   2140    WINDOW   1C3A
 WORD1    32DB    WORDM    3321    WORDPT   3315    WORDS    32C6
 WORDS2   3351    WORDS3   3363    WORDSX   3312    WORDSY   331B
 WORDXX   3366    WORKED   1C64    WORKER   1C66    WREADY   4D37
 WRITE    24A1    XFILE1   3935    XGET     39FD    XINDEX   2D33
 XOP0     23DC    XOP1     23EC    XOP2     23EE    XOPT     1C36
 XTITLE   297E    XTITLS   29B7    YINDEX   2D3D    YSHEX    27D4
 ZERBIT   2B8E    ZEROLG   00FB    ZEROPG   2B8F    ZEROUR   00FB
 ZEROX    2B92    ZEROY    2B98   

END OF ASSEMBLY

CROSS REFERENCE......PAGE    1


* ABSBIT $2B9E  1889
  ABSEXT $2BC3  1902  1907
  ABSLUT $2B9F  1893  3107
  ABSX   $2BC4  1911  3108
  ABSY   $2BCA  1916  3109
  AC0    $3204  2774  2778  2780
  AC1    $3207  2776  2781
  ACC    $2B53  1840  3102
  ACHECK $31F2  2734  2772
  ADRS   $1C6E   200   474   475   480   482   521   524   628   630   639

                 641   650   652   666   668   674   676   923   944   947

                 959   962  1235  1236  1245  1250  3054  3057  3058
  AFILE  $22C1   856   861
  AGET   $22FC   887   891
  AGET1  $2308   877   886   892
  ALINE  $3235  2795  2804
  ALOP   $3247  2815  2833
* AOP    $228D   832
  AOP1   $2359   932   994
* AOP2   $2383   954
  AOP3   $23A8   972   973   985
  AOPX   $2354   925   927
  ASC    $23C5   975   977   979   981   983   986
  ASCCCC $3180  2696  2702  2715
  ASCI1  $31AD  2728  2732  2734
  ASCII  $31A2  2730  2740  2742  2754
  ASCIIQ $31DB  2735  2738  2756
  ASCKK  $3197  2717  2726
  B0000  $2A6C  1640  1642  1644  1646  1666  1668  1670  1673  1676  1679

                1682  1688
  BASIC  $1C0D    31    36
  BINARY $27BF  1256  1261  1272  3802  3810
  BITFLG $43CC  1577  1627  1653  3926  3931
  BITOPT $439F   828  3904
  BOP    $22B8   847   850
  BOP0   $43A6  3908  3909  3919
  BSC    $43C1  3911  3913  3915  3917  3921
  BSTUB  $0001     9    30
  BUF    $1C7B   215   454   573   574   708   857   863   864  1225  1255

                1260  3680  3686  3687
  BYABIT $2A3B  1584  1652
  BYTES  $320A  2779  2785
  BYTESX $3232  2787  2800
  BYTT   $2A13  1573  1599  1616  1691
  BYZBIT $2A16  1582  1626
  CASCII $328A  1819  1856  2810  2816  2851
  CDATA  $1D06   247   278   899   912   928   932   936   990   991  2656

                2660  2666  2681
  CHKIN  $FFC6    56   466   548   879  3771
  CHKOUT $FFC9    65   797  1393  1402
  CHRIN  $FFCF    57   467   469   476   549   550   551   884   887  1224

                1289  1298  3773  3777  3797  3800  3808  3816  3822
  CHROUT $FFD2    55   986  1193  1195  1197  1396  1405  1412  3664  3775

                3779  3801  3809  3855  3859  3923
  CLALL  $FFE7    91   125
  CLOSE  $FFC3    66   366   408   490   566   589   620   764   893  1162








CROSS REFERENCE......PAGE    2


                3738  3760
* CLOSEA $FF4A    86
  CLRCHN $FFCC    59   410   491   567   765   801   894  1397  1406  3739

                3761  3798  3825
  COK    $387A  3579  3584
  COMENT $2CB5  1168  1695  2035  2044  2710  2729  2760  3615  3621  3647

  COMET  $2CBB  1714  1905  1930  1940  2044  2047
* COMOPT $1C3C   153
  COMPT  $2CCB  2054  2057
  CONST0 $2974  1368  1375  1537
  CONST1 $2979  1371  1378  1538
  CPASS  $1C34   144   287   341  1141  1596  1690  1847  2701  2727  2731

                2757  2786  2863  2883  3508
  CRLF   $2D47   284   510   542   902  1212  1433  2145  3740
  CRLFPR $28AE  1420  1431  1440  1486
  CRNO   $27E3   660  1298  3413  3421
  CRNO1  $27F0  1294  1300  1302  1305
  CRYS   $27D6   782   819  1001  1013  1289  3385
  CRYS1  $27EE  1291  1293  1303
  CSHORT $2CC9  2050  2053
* CUROFF $CD9F    83
* CURON  $CD6F    82
  DATABE $1D0E   251   835   840  2349  2352
  DATABP $1D0A   249   833   838
  DATABS $1D0C   250   834   839
  DATAO1 $310E  2657  2660  2682
  DATAO2 $3144  2680  2686
  DATAOP $30FF  1572  2653
  DATUT  $31EC  2711  2722  2758  2765
  DBYTES $3296  2781  2862
  DBYTEX $32C3  2864  2878
  DECSL  $2D98   518  1636  1662  1894  1895  1906  1931  1941  2201  2250

                2271  2272  2709  2761
  DEVICE $1C38   149   307   326   329   334   362   370   377   387   392

                 395   403   437  1143  1213  1389  1398  1407  1432  1435

                1449  1454  1467  1518  2277  2282  2284  2743  2746  2751

  DISA   $1E4F   276   358
  DISASS $1E40   137   266
  DISB   $1E7D   288   295
  DISC   $1F0C   343   359
  DISERR $2717   586   758   876  1173  3713
  DISFUL $1F09   342   345   358
  DISL   $29E8  1578  1585  1593  1629  1648  1655  1684
  DISL1  $29F9  1597  1603
  DLOOA  $2742  1196  1199
  DLOOC  $2738  1181  1191
  DLOOE  $272C  1182  1184
  DLOOP  $1EAE   290   293   314   320   322   337
  DOLLAR $2D24   508  1752  1782  1809  1851  2029  2116  2796  2843  2875

                2916  2953  3787
  DONE   $1F83   405   410
  DONED  $1F64   389   397
  DOP    $1F91   269   436
  DOP2   $2285   820   823
  DOP3   $2287   822   824
  DSLINE $29D1   314  1572







CROSS REFERENCE......PAGE    3


  EA     $1C3F   158   354   356   485   487   640   642   689   691  2164

                2168
  EAGOL  $1C47   162   690   692  2328  2332
  EAOUT  $1C4B   164   353   355   675   677
  EAS    $1D03   245  2688  2691  2703  2705  2718  2720  2965  2969
  EASCI1 $326E  2828  2835
  EASCII $3273  2817  2832  2835  2839
  EFILE  $2CA5   360  1160  2035
  ENDAX  $310B  2654  2658  2662
  ENDDAT $31EF  2658  2767
  EPASS  $1C33   143   289  1743  1773  1960  2716  2909  2940
  EQUATE $3B84  3617  3618  3895
  EQUEND $3900  3613  3642  3647
  EQUINT $378B   292  3459
  EQUOP  $38C1  3622  3641  3645
  EQUOP1 $38DB  3629  3631
  EQUPRT $3896   312  3606
  ERRCT  $1C79   211   302   303   383   384  1803  1805
  FILE   $21C6   715   717
* FILEOK $21C0   714
  FINAL  $2A10  1615  1716
  FINISH $289B   406  1420  1424  1445  1491  1514
  FIXSYM $384F  2091  2611  3563  3567
  FOP1   $2401  1014  1017
  FOP2   $2403  1016  1018
  FOROPT $1C3B   152  1018  2049  2075  2089  2228  2244  2265  2285  2299

  FORWRD $2C3D  1973  1975
  GETBYT $27A2  1243  1248  1255
  GETC   $3887  3485  3488  3515  3524  3596
  GETI   $2F59  2438  2454  2457  2494  2497  2508  2519  2603  2606  3622

                3625
  GETIN  $FFE4    58   319   335   972  2739  2752  3658  3908
  GETOPE $33D4  3036  3041  3049
  GETSL  $2D80  1580  1594  1609  1634  1660  1705  1736  1765  1768  1810

                1852  1896  1921  1971  2001  2186  2226  2238  2242  2255

                2259  2263  2797  2809  2815  2821  2844  2870  2873  2893

                2897
  GETWRD $277E   627   638   649   665   673   922   942   957  1234
  GFILE0 $21B4   708   712
  HEADER $28CD   309  1449
* HEADES $2920  1495
  HEADFX $2948  1511  1514
  HEADOK $293A  1490  1505
  HEADSY $293B  1509  2598
  HEXA   $2964  1325  1330  1533
  ILLEGL $2B12  1803  3101
  ILLMSG $2DD4  1834  1835  2222
  ILLOP  $33B3  3015  3021
  IMEXIT $2B8D  1848  1857  1867
  IMMEDT $2B58  1845  3085  3103
  IMPLI1 $2BDE  1922  1924  1926  1928
  IMPLID $2BD0  1921  3110
  IMPONE $2BDD  1927  3083  3084  3092
  INCC   $387E  3487  3514  3523  3589
  INCI   $2F50  2431  2456  2468  2496  2503  2510  2605  2618  3624  3638

  INCIE  $2F48  2416  2417  2425







CROSS REFERENCE......PAGE    4


  INCSL  $2D77   359   479   562  1633  1659  1735  1764  1767  1845  1898

                1899  1904  1929  1939  1958  2170  2178  2241  2258  2262

                2707  2759  2872  2896  2971
* INDCMP $FF7A    89
* INDFET $FF74    87
  INDRCT $2BEA  1935  3114
* INDSTA $FF77    88
  INDX   $2BFF  1945  3112
  INDY   $2C08  1951  3113
  INEND  $27A1  1239  1247  1251
  INENX  $27BE  1259  1268
  INIT   $24A9   606   607  1046
  INITD  $20DD   460   605   725   852  3675
  INITIN $2EB8   270  2349
  INSTN1 $2771  1224  1228
  INSTNG $276F   449   702   846  1223  1237  3671
  INTCH  $2F77  2454  2471  2475
  INTCHA $2F68  2073  2448
  INTCHK $2F74  2399  2453
  INTEND $2FB0  2472  2477
  INTEXT $2F46  2400  2419
  INTMAT $2FB2  2466  2479
  INTOUT $309F  2595  2598
  INTPR  $30AA  2603  2630
  INTPRM $30D1  2614  2617
  INTPRS $30CC  2610  2615
  INTPRT $3089   393  2588
  INTSA  $2DA4   276   471  2209
  INTSET $2ECA  2358  2453  2484  2584
  IPASS  $1C32   142  1741  1771  1982  2907  2938
  ISKIP  $2B4C  1820  1832
  LARGE  $301A  2523  2527
  LINECK $26D8   316  1140
  LINECO $2716  1142  1145  1156  1169
  LINECT $1C77   210   296   299  1206  1208  2287  2288
  LINEFL $1CDF   229   304   305  1150  1153  1165  1166  1209  1211
  LINEOK $290F  1444  1451  1480
  LINES  $3A63  3729  3850
  LISTCT $1C76   209   301  1421  1422  1426  1441  1442  1487  1488  1509

  LOADC  $3B52  3751  3752  3886
  LOADE  $3B69  3762  3763  3890
  LOADF  $3B16  3667  3668  3879
  LOADM  $3B34  3718  3719  3882
  LOOP1  $30A5  2601  2633
  LOOP2  $30F9  2627  2632
  LPAREN $2D29  1935  1945  1951  2121
  LTITLE $299A  1468  1469  1544
  LTITLS $29C4  1501  1502  1550
  MATCH  $37E8  3498  3507
  MATCHS $3808  3509  3523
  MATCHT $382F  3511  3526  3543
  MATEXT $3839  3513  3548
  MATONE $3807  3517  3519
  MBYTE  $3382  1806  1807  2790  2791  2977
  MCODES $3516  3011  3203
  MDBYTE $3392  2867  2868  2979







CROSS REFERENCE......PAGE    5


  MEMEND $8000   129   130   132
  MEMSIZ $0039    78   131   133   514   516
  MNAMES $343E  3013  3118
  MNEMON $339B  1611  3008
  MNLOOP $33A5  3013  3025
  MODES  $3616  3051  3293
  MPASS  $1E11   259   279   280
  MSA1   $25DC   919   920  1091
  MSA2   $25FE   939   940  1094
  MSA3   $2616   954   955  1097
  MSAOP  $25BD   843   844  1088
  MSB1   $2557  1077  3905  3906
  MSB4   $2698   998   999  1112
  MSB5   $26B8  1010  1011  1116
  MSD1   $24C4   624   625   662   663  1052
  MSD2   $24D6   635   636   670   671  1056
  MSD4   $24E6   646   647  1060
  MSD4A  $2500   538   539  1064
  MSD5   $2513   657   658  1068
  MSF1   $2454   446   447  1033
  MSF2   $2470   496   497  1036
  MSG    $2407   440   441  1024
  MSG1   $2484   696   697  1040
  MSG2   $24AB   779   780  1048
  MSG5   $262C   969   970  1100
  MSGBIT $2DB1  1701  1702  2217
  MSGBZP $2DB9  1708  1709  2218
  MSGDIS $1E2D   262   399   400
  MSGEND $2DCF  2037  2038  2221
  MSGERR $1E23   261   380   381
  MSR1   $252F   816   817  1072
  MSS1   $3A8A  3381  3382  3866
  MSS2   $3AAE  3410  3411  3870
  MSS3   $3AD4  3655  3656  3873
  MSS4   $3AF2  3418  3419  3876
  MWORD  $338A  2887  2888  2978
  NAME   $3A7C  3694  3695  3863
  NAMS   $3A86   856  3679  3864
  NASCII $327B  2811  2843
  NBUF   $1CE3   232   709   734   739   745   746
  NCHARS $1CE2   231   701   706   711   723   728
  NCOK   $387C  3580  3583  3586
  NDATA  $1D08   248   885   898   924   992  2653  2661
  NEGREL $2DCB  2007  2008  2220
  NEWEXT $276E  1215  1217
  NEWLIN $2751   378   379   397   398   402  1206  1615  1712  1903  1928

                1938  2031  2040  2045  2799  2841  2846  2877  2918  2959

                3620  3636
  NEXLIN $28C0  1216  1441
  NEXPTR $28BD  1440  1452  1464  1465  1471  1478  1479
  NEXPTS $2910  1486  1495  1499  1500  1504  1512  1513  2631  2632
  NEXTBY $3369  2800  2827  2847  2878  2919  2921  2923  2960  2964
  NEXTC  $385A  3499  3571
  NEXTP  $1EDF   315   339
  NEXTSL $2D5E  1616  2163
  NOASC  $3294  2852  2854  2857







CROSS REFERENCE......PAGE    6


  NOBINC $3380  2967  2970  2974
  NOFILE $21C4   703   716
  NOHEX  $27D2  1274  1279  1282
  NOID   $21D7   724   726
  NOINC  $2D75  2166  2169  2173
  NOPRT  $226A   783   803   806
  NOTABS $233F   848   919
  NPRAD  $2D01  2087  2090
  NPRAD1 $2D02  2070  2089
  OFFSET $1C43   160   532   536   651   653  2188  2191
  OFILE  $21DA   728  1163
  OFILE1 $21ED   732   736
  OFILE2 $21F2   738   743
* OFILE3 $221C   763
  OFILE4 $2230   729   759   775
  OFILED $21CF   310   723
* ONEBIT $2AA0  1731
  ONEBX  $2ACF  1753  1755
  ONEBY  $2ACC  1751  1754
  ONEBYT $2AA1  1735  1875  1879  1884  1952  3086  3087  3088  3094  3095

  OPCPUT $2B0B  1742  1772  1791
  OPCSYM $2B0E  1744  1774  1793
  OPEN   $FFC0    64   585   618   757   795   875  3709
  OPERN1 $33C7  1598  3038
  OPERND $33CF  1614  3043
  ORGIN  $2C8F   311  1167  2024  2708
* OUFILE $2199   696
  OUTPUT $1C39   150   306   367   369   374   376   391   396   439   717

                 718   807   808  1434  2276
  P1     $2CF8  2072  2074  2082
  PAGECT $1C74   208   297   300  1461  1462  1475  1477
  PAGER1 $2909  1476  1478
  PASS   $1C31   141   272   282   286   339   340  1140  1595  1689  1740

                1770  1846  1959  1981  2700  2715  2726  2730  2756  2785

                2862  2882  2906  2937  3507
  PAUS1  $31D4  2752  2753
  PAUSE  $1ED8   335   336
  PCHAR  $2864   283   507  1326  1331  1340  1381  1388  1825  1827  1829

                1841  1850  1862  1864  1866  2026  2028  2055  2063  2065

                2112  2117  2122  2127  2132  2134  2139  2141  2146  2159

                2813  2818  2824  2840  2948  2950  3018  3537  3539  3559

                3565  3632  3634
  PEXIT  $2899  1409  1413
  PFILE0 $1FB1   450   452
  PFILE1 $1FB3   453   458
  PMSG   $1E17   260   330   331  2747  2748
  POSREL $2DC7  2004  2005  2219
  POVER  $2CF5  2076  2078
  PRAD   $2CDE  1604  1699  2069  2789  2866  2886
  PRBYT  $27F8   907  1314  1319  1706  1756  1815  1854  2017  2227  2239

                2243  2256  2260  2264  2798  2845  3819  3824
  PRBYTS $27F2  1312  2097  2107
  PREND  $30F6  2622  2625  2631
  PRFILE $20AB   461   546   572
* PRIMM  $FF7D    93
  PRIN   $2879  1391  1398







CROSS REFERENCE......PAGE    7


  PRINT  $226C   805   807
  PRLA   $2CD4  1754  1788  2062  2082  2101
  PRO2RD $2085   551   564
  PROGED $1FF9   478   484
  PROGM  $24A5   453  1045
  PROGOK $20DC   587   601
  PROGRD $1FE4   476   483
  PRTASS $33BA  1603  3030
  PRTDAF $2E77  2286  2292
  PRTDAL $2323   905   911
* PRTDAS $2310   898
  PRTDAT $2E5B  1697  2282  2298  2733  3031
  PRTEST $2E54  2234  2251  2276  2305
  PRTGET $2231   719   779
  PRTNEX $231B   902   913
  PRTNU1 $2833  1351  1362  1383
  PRTNU2 $283A  1365  1373
  PRTNU3 $283B  1364  1366
  PRTNUM $282A   385  1355  2289
  PRTOK  $30E9  2621  2626
  PRTON1 $2DF6  2229  2232
  PRTONE $2DE8  1698  2226  2788  3065  3066  3074
  PRTOT1 $2E8A  2300  2303
  PRTOTH $2E7F  2024  2036  2047  2298  3616  3627
  PRTPAG $281F  1347  1463
  PRTTH1 $2E49  2266  2269
  PRTTHE $2E23  2255  3071  3072  3073  3078
  PRTTW1 $2E18  2245  2248
  PRTTWO $2DFE  2238  2865  2885  3067  3068  3069  3070  3075  3076  3077

  PSELEC $2D0A   509  2030  2083  2095  2292
  PUIT   $2F23  2397  2402
  PUT    $3A47  3834  3838
  PUTC   $3A3B  3728  3829
  PUTI   $2F09  1792  1995  2390  2920  3518
  PWORK  $2D13  1992  2020  2101  3630
  PWORKD $2D16   503   541  1790  2105  2414  2617  2876  2917  2958  3635

  Q00000 $325C  2823  2825
  QUITS  $1F12   318   362
  QUITX  $398C  3731  3737
  QUITXX $39AC  3714  3759
  QUTERR $1F29   364   374
  RANG   $2EA4  2329  2335
  RANGE  $2E92  1750  1780  2327  3512
  READS  $39BD  3727  3770
  READST $FFB7    61   477   563   798   890  3732
  READX  $3979  3727  3733
  READXF $394C  3672  3693
  READXX $3906  3430  3655
  READY  $39CE  3777  3782
  RELATV $2C14  1958  3093  3111
  RELND  $2C46  1977  1979
  RELNEG $2C71  2003  2007
  RELP   $2C83  2013  2017
  RELPC  $2C64  1990  2001
  RELPM  $2C75  2006  2009
  RELPUT $2C60  1983  1994







CROSS REFERENCE......PAGE    8


  RELSYM $2C63  1961  1986  1997
  REOPEN $3955  3689  3700
  RESET  $3A72  3853  3856
  RESINT $2EF0  2378  3648
  ROPT   $1C37   148   824  1988
  ROUT   $2EB6  2330  2333  2337  2340  2344
  RPAREN $2D2E  1937  1947  1953  2126
  S3     $3002  2514  2518
  SA     $1C3D   157   350   352   468   470   499   501   531   535   629

                 631   685   687  2209  2211
  SAGOL  $1C45   161   686   688  2336  2339
  SAOUT  $1C49   163   349   351   667   669
  SAVA   $1C71   202   459   572  2602  2626
  SAVEE  $1C6C   196  2371  2373  2382  2384
* SAVEP  $1C68   194
  SAVES  $1C6A   195  2367  2369  2378  2380
  SAVINT $2ED7   291  2366
  SAVX   $1C72   203   904   910  1350  1358  1362  1382  3017  3019
  SAVY   $1C73   204   901   905   909   937   943   950   958   965   987

                3818  3820
  SBLOK  $337B  2966  2971
  SCREN  $288D  1400  1407
  SCRNO1 $295A  1520  1524
  SCROFF $294B   726  1518
  SCRON  $295B   411  1526
  SELECT $1C41   159   484   486   515   517   520   522   523   525   530

                 534   553   555  1963  1965  2095  2096  2163  2167  2178

                2180  2187  2190  2201  2203  2204  2210  2212  2448  2450

                2675  2678  2704  2706  2719  2721  2964  2968  3471  3473

  SEMIC  $2D1F  1823  1860  2019  2048  2111  2413
  SETBNK $FF68    85   583   616   755   793   873  3707
  SETLFS $FFBA    63   579   612   751   789   869  3703
  SETMSG $FF90   108   110
  SETNAM $FFBD    62   575   608   747   785   865  3688  3696
  SEXIT  $281E  1339  1343
* SKIPER $3188  2718
  SLOK   $2D70  2165  2170
  SMALL  $301D  2522  2526  2532
  SMALLP $1C55   175  2487  2490  2505  2507  2546  2548  2895  2899  2954

                2956
  SMALLS $1C53   174  2486  2489  2532  2534  2557  2559  2567  2569  2571

                2573  2575  2579
  SOP    $3716   812  3381
  SOP1   $372A  3386  3396
  SOP2   $390D  3658  3659  3663
  SOP3   $391A  3661  3664
  SOP4   $3761  3422  3430
  SORT   $2FB4  2484  2599  3614
  SORT1  $2FC9  2494  2561  2582
  SORT2  $2FD8  2503  2527
  SORT3  $305A  2518  2566
  SORT4  $3086  2578  2581  2584
  SORTOK $3083  2577  2582
  SOUT   $2814  1338  1342
  SPAC   $2D51  2152  2154
  SPAC6  $2D4C  1859  2018  2078  2150







CROSS REFERENCE......PAGE    9


  SPACE  $2D59   908  1605  1612  1700  1816  1822  1830  2077  2152  2158

                2240  2257  2261  2290  2291  2608  3786
  SPACM  $2D4E  2151  2233  2249  2270  2294  2304  2613  2616  2629
  SPASS  $1C35   145  3510
  SSET   $377E  3451  3484
  STABLE $43CD  3401  3404  3940
* STARTD $1C0F   101
  STARTS $20FE   451   624
  STDREF $3A1D  3791  3815
  STOP   $FFE1    60   317  2737  3730
  STRPNT $280E   281   332   382   401   442   448   498   540   626   637

                 648   659   664   672   698   781   818   845   921   941

                 956   971  1000  1012  1335  1457  1470  1498  1503  1703

                1710  1808  1836  2009  2039  2749  2792  2869  2889  3383

                3412  3420  3619  3657  3669  3720  3753  3764  3907
  STRSY1 $3840  3555  3561
  STRSYM $383A  3535  3545  3552
  SUBP   $33EA  3034  3035  3064
  SUBS   $3422  3044  3045  3100
  SUBS1  $3406  3039  3040  3082
  SY     $3773  3392  3414  3431  3443
  SYEXIT $384E  3556  3558  3562  3564
  SYM    $379E  2069  3469
  SYM1   $37B7  3475  3484
  SYM2   $37BA  3485  3501
  SYMBOE $1C5C   182   832   837  3436  3438  3444  3446  3578  3582  3745

                3747
  SYMBOL $1C57   179  3391  3397  3469  3479
  SYMBOP $1C58   180  3403  3406  3424  3426  3435  3437  3452  3454  3528

                3531  3543  3544  3572  3574  3575  3577  3581  3589  3591

                3596  3598  3744  3746  3830  3832  3840  3842  3843  3845

  SYMBOS $1C5A   181  3402  3405  3451  3453
  SYMBUF $1CF9   240  3774  3778  3784  3807  3811  3812  3817  3823  3834

  SYMEND $37E6  3470  3480  3500  3502
  SYMOP  $37B2  1748  1778  1794  1985  2609  2914  2922  2945  3479  3628

* SYTAB  $373F  3410
  T2     $3005  2513  2517  2519
  TABINE $1C51   170  2351  2354  2370  2372  2383  2385  2392  2395  2402

                2404  2425  2427  2470  2474  2512  2516  2576  2580  2590

                2593  2620  2624  3459  3462  3608  3611  3640  3644
  TABINP $1C4D   168  2359  2361  2431  2433  2438  2440  2469  2473  2504

                2506  2511  2515  2558  2560  2570  2574  2619  2623  3460

                3463  3639  3643
  TABINS $1C4F   169  2350  2353  2358  2360  2366  2368  2379  2381  2391

                2394  2485  2488  2589  2592  3461  3464  3607  3610
  TDATA  $1D10   255   888   906   945   948   960   963   988  2668  2671

                2687  2690  2693
  TEMP   $1C70   201  1152  1155  1244  1249  1257  1266  1267  2151  2153

                2393  2396  2462  2465  2495  2498  2521  2525  2551  2554

                2591  2594  2676  2679  2805  2829  2830  3009  3024  3494

                3497  3609  3612  3723  3850  3852  3857
  TEXTER $1D05   246  2694  2772  2793  2900  3665  3789
  TWOB   $2B11  1749  1779  1795
* TWOBIT $2AD5  1760
  TWOBX  $2B08  1783  1789
  TWOBY  $2B05  1781  1787







CROSS REFERENCE......PAGE   10


  TWOBYT $2AD6  1764  1893  1911  1916  1936  3089  3090  3091  3096
  UTABLE $4550  3423  3425  3443  3445  3986
* UYMBOE $1C62   188
* UYMBOP $1C5E   186
* UYMBOS $1C60   187
  VERSON $1CE1   230   705   730   733   736
  VICREG $D011    54  1521  1523  1526  1528
  WIND1  $217C   661   680
  WIND2  $217E   679   681
  WINDOP $2140   568   657
  WINDOW $1C3A   151   344   681
  WORD1  $32DB  2884  2893
  WORDM  $3321  2902  2927
  WORDPT $3315  2908  2920  2939
  WORDS  $32C6  2780  2882
  WORDS2 $3351  2946  2953
  WORDS3 $3363  2915  2951  2959
* WORDSX $3312  2919
  WORDSY $331B  2910  2922  2941
* WORDXX $3366  2960
  WORKED $1C64   192   500   502   533   537  1737  1739  1755  1766  1769

                1964  1966  1967  1969  1974  1976  1978  1979  2105  2106

                2327  2331  2335  2338  2407  2410  2449  2451  2460  2463

                2509  2520  2524  2537  2540  2604  2607  2871  2874  2894

                2898  2928  2930  2931  2933  2955  2957  3472  3474  3493

                3496  3623  3626
  WORKER $1C66   193  2455  2458  2461  2464  2669  2672  2674  2677  3486

                3489  3492  3495
  WREADY $4D37    68   416   599   774
  WRITE  $24A1   738  1044
  XFILE1 $3935  3679  3684
  XGET   $39FD  3794  3796  3800
  XINDEX $2D33  1880  1912  2131
  XOP0   $23DC   915   926   993   998
  XOP1   $23EC  1002  1005
  XOP2   $23EE  1004  1006
  XOPT   $1C36   147  1006  2071
  XTITLE $297E  1455  1456  1542
  XTITLS $29B7  1496  1497  1549
  YINDEX $2D3D  1885  1917  1954  2138
  YSHEX  $27D4  1276  1281  1284
* ZERBIT $2B8E  1871
* ZEROLG $00FB    75
  ZEROPG $2B8F  1875  3104
  ZEROUR $00FB    76   554   556   559   836   841  1335  1336  1338  1347

                1348  1355  1356  1367  1369  1370  1372  1374  1376  1377

                1379  2189  2192  2195  2403  2405  2408  2411  2439  2441

                2443  2533  2535  2538  2541  2547  2549  2552  2555  3049

                3050  3053  3056  3552  3553  3555  3563  3597  3599  3601

                3831  3833  3835
  ZEROX  $2B92  1879  1946  3105
  ZEROY  $2B98  1884  3106












































































