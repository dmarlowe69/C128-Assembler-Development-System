DISASS128.ASM......PAGE 0001

LINE# LOC   CODE        LINE


00001  0000              ;.PAGE 'DISASSEMBLER128'
00002  0000              ;.OPT LIST
00003  0000              ;*********************************
00004  0000              *=$1C01                ;START OF BASIC
00005  1C01              ;*********************************
00006  1C01              ; SET BSTUB TO ONE TO ALLOW FOR
00007  1C01              ; INSERTION OF BASIC STUB CODE
00008  1C01              ;*********************************
00009  1C01              BSTUB  = 1
00010  1C01              ;*********************************
00011  1C01              ;
00012  1C01              ;        DISASSEMBLER128
00013  1C01              ;    DISASSEMBLER.C128 V080282
00014  1C01              ;    SYMBOLIC DISASSEMBLER
00015  1C01              ;       BY DENTON MARLOWE
00016  1C01              ;
00017  1C01              ;  (C)1986 BY DENTON MARLOWE
00018  1C01              ;
00019  1C01              ; MACRO ASSEMBLER DEVELOPMENT SYSTEM
00020  1C01              ;  (C) 1982 BY COMMODORE MACHINES
00021  1C01              ;
00022  1C01              ;*********************************
00023  1C01              ;
00024  1C01              ; BASIC FORMAT PROGRAM
00025  1C01              ;
00026  1C01              ; 10 SYS (7183)
00027  1C01              ;
00028  1C01              ;*********************************
00029  1C01              ;.IF  BSTUB == 1
00031  1C01  0D 1C              .WORD BASIC     ;NEXT LINE POINTER
00032  1C03  0A                 .BYTE $0A,$00   ;LINE NUMBER
00032  1C04  00 
00033  1C05  9E                 .BYTE $9E       ;SYS COMMAND
00034  1C06  28 37              .BYTE '(7183)'  ;ASCII (7183)
00035  1C0C  00                 .BYTE 0         ;END OF LINE
00036  1C0D  00          BASIC  .BYTE 0,0       ;END OF BASIC
00036  1C0E  00 
00038  1C0F              ;.FI
00039  1C0F              ;*********************************
00040  1C0F              ;.LIB DIS.ASM
00041  1C0F              ;*********************************
00042  1C0F              ;.LIB OPTION.ASM
00043  1C0F              ;*********************************
00044  1C0F              ;.LIB UTIL.ASM
00045  1C0F              ;*********************************
00046  1C0F              ;.LIB MODE.ASM
00047  1C0F              ;*********************************
00048  1C0F              ;.LIB INTERNAL.ASM
00049  1C0F              ;*********************************
00050  1C0F              ;.LIB ASC.ASM
00051  1C0F              ;*********************************
00052  1C0F              ;.LIB TABLE.ASM
00053  1C0F              ;*********************************
00054  1C0F              ;.LIB SYM.ASM
00055  1C0F              ;*********************************






DISASS128.ASM......PAGE 0002

LINE# LOC   CODE        LINE


00056  1C0F              ;.END
00057  1C0F              ;*********************************
00058  1C0F              ; FILE DIS.ASM
00059  1C0F              ;*********************************
00060  1C0F              ;
00061  1C0F              ;        DISASSEMBLER128
00062  1C0F              ;    SYMBOLIC DISASSEMBLER
00063  1C0F              ;       BY DENTON MARLOWE
00064  1C0F              ;
00065  1C0F              ;  (C)1986 BY DENTON MARLOWE
00066  1C0F              ;
00067  1C0F              ;*********************************
00068  1C0F              ; KERNAL ADDRESS
00069  1C0F              ;*********************************
00070  1C0F              VICREG=$D011           ;SCREEN REGISTER
00071  1C0F              CHROUT=$FFD2           ;OUTPUT CHARACTER
00072  1C0F              CHKIN  =$FFC6          ;OPEN INPUT FILE
00073  1C0F              CHRIN  =$FFCF          ;GET KEYBOARD INPUT
00074  1C0F              GETIN  =$FFE4          ;GET KEYBOARD CHAR
00075  1C0F              CLRCHN=$FFCC           ;RESET I/O CHANNELS
00076  1C0F              STOP   =$FFE1          ;CHECK FOR STOP
00077  1C0F              READST=$FFB7           ;READ ST
00078  1C0F              SETNAM=$FFBD           ;SET FILENAME
00079  1C0F              SETLFS=$FFBA           ;SET LOGICAL FILE
00080  1C0F              OPEN   =$FFC0          ;OPEN FILE
00081  1C0F              CHKOUT=$FFC9           ;OPEN OUTPUT CHANNEL
00082  1C0F              CLOSE  =$FFC3          ;CLOSE LOGICAL FILE
00083  1C0F              ;WREADY=$E391 ;BASIC RETURN
00084  1C0F              WREADY=$4D37           ;BASIC RETURN
00085  1C0F              ;*********************************
00086  1C0F              ; ZERO PAGE ADDRESS
00087  1C0F              ;
00088  1C0F              ; USED: $FA,$FB,$FC,$FD,$FE,$FF
00089  1C0F              ;*********************************
00090  1C0F              ;ZEROUR=$02 ;ZEROPAGE POINTER
00091  1C0F              ZEROLG=$FB             ;POINTER FOR LONG LDA/STA
00092  1C0F              ZEROUR=$FB             ;ZEROPAGE POINTER
00093  1C0F              ;MEMSIZ=$37 ;TOP OF FREE RAM+1
00094  1C0F              MEMSIZ=$39             ;TOP OF FREE RAM+1
00095  1C0F              ;********************************
00096  1C0F              ; EXTERNAL ADDRESS EQUATES
00097  1C0F              ;********************************
00098  1C0F              CURON  = $CD6F
00099  1C0F              CUROFF = $CD9F
00100  1C0F              ;
00101  1C0F              SETBNK = $FF68         ;JSETBNK
00102  1C0F              CLOSEA = $FF4A         ;CLOSE-ALL 
00103  1C0F              INDFET = $FF74         ;LONG LDA
00104  1C0F              INDSTA = $FF77         ;LONG STA
00105  1C0F              INDCMP = $FF7A         ;LONG CMP
00106  1C0F              ;
00107  1C0F              CLALL  = $FFE7
00108  1C0F              ;
00109  1C0F              PRIMM  = $FF7D
00110  1C0F              ;*********************************






DISASS128.ASM......PAGE 0003

LINE# LOC   CODE        LINE


00111  1C0F              ;        ENTRY POINT
00112  1C0F              ;*********************************
00113  1C0F              *=$1C0F
00114  1C0F              ;*********************************
00115  1C0F              ;        ENTRY POINT
00116  1C0F              ;*********************************
00117  1C0F              STARTD = *
00118  1C0F              ;*********************************
00119  1C0F              ; SET FLAG TO ALLOW BASIC
00120  1C0F              ; AND KERNAL (ERROR) MESSAGES
00121  1C0F              ; $80 FOR BASIC
00122  1C0F              ; $40 FOR KERNAL
00123  1C0F              ;*********************************
00124  1C0F              SETMSG=$FF90
00125  1C0F  A9 40              LDA #$40        ;ALLOW KERNAL MESSAGES
00126  1C11  20 90 FF           JSR SETMSG
00127  1C14              ;********************************
00128  1C14              ; SET MMU
00129  1C14              ;********************************
00130  1C14  A9 00              LDA #$00        ;BANK 15
00131  1C16  8D 00 FF           STA $FF00       ;
00132  1C19                     
00133  1C19  A9 0E              LDA #$0E        ;NO BASIC ROM
00134  1C1B  8D 00 FF           STA $FF00       ;
00135  1C1E                     
00136  1C1E  A9 FC              LDA #$FC        ;SLOW SPEED
00137  1C20  8D 30 D0           STA $D030       ;
00138  1C23              ;********************************
00139  1C23              ; CLOSE ALL FILES
00140  1C23              ;********************************
00141  1C23  20 E7 FF           JSR CLALL
00142  1C26              ;********************************
00143  1C26              ; SET TOP OF MEMORY C128 AND PLUS4
00144  1C26              ;********************************
00145  1C26              MEMEND = $8000
00146  1C26  A9 00              LDA #<MEMEND
00147  1C28  85 39              STA MEMSIZ
00148  1C2A  A9 80              LDA #>MEMEND
00149  1C2C  85 3A              STA MEMSIZ+1
00150  1C2E              ;********************************
00151  1C2E              ; SETUP DISASSEMBLER
00152  1C2E              ;********************************
00153  1C2E  4C 40 1E           JMP DISASS
00154  1C31              ;*********************************
00155  1C31              ;       VARIABLES
00156  1C31              ;*********************************
00157  1C31  31          PASS   .BYTE '1'       ;PASS INDICATOR
00158  1C32  31          IPASS  .BYTE '1'       ;INTERNAL PASS
00159  1C33  32          EPASS  .BYTE '2'       ;EXTERNAL PASS
00160  1C34  33          CPASS  .BYTE '3'       ;PRINTING PASS
00161  1C35  34          SPASS  .BYTE '4'       ;SYMBOL PASS
00162  1C36              ;*********************************
00163  1C36  AA          XOPT   .BYTE $AA       ;LABEL GENERATION
00164  1C37  AA          ROPT   .BYTE $AA       ;REL ADDRESS OPT
00165  1C38  AA          DEVICE .BYTE $AA       ;OUTPUT DEVICE






DISASS128.ASM......PAGE 0004

LINE# LOC   CODE        LINE


00166  1C39  AA          OUTPUT .BYTE $AA       ;OUTPUT FLAG
00167  1C3A  AA          WINDOW .BYTE $AA       ;WINDOW FLAG
00168  1C3B  AA          FOROPT .BYTE $AA       ;FORMAT FLAG
00169  1C3C  AA          COMOPT .BYTE $AA       ;COMMENT FLAG
00170  1C3D              ;*********************************
00171  1C3D              ; DISASSEMBLY ADDRESS POINTERS
00172  1C3D              ;*********************************
00173  1C3D  AA AA       SA     .WORD $AAAA     ;START ADDRESS
00174  1C3F  AA AA       EA     .WORD $AAAA     ;END ADDRESS
00175  1C41  AA AA       SELECT .WORD $AAAA     ;BYTE POINTER
00176  1C43  AA AA       OFFSET .WORD $AAAA     ;ADDRESS OFFSET
00177  1C45  AA AA       SAGOL  .WORD $AAAA     ;GOLBAL START
00178  1C47  AA AA       EAGOL  .WORD $AAAA     ;GOLBAL END
00179  1C49  AA AA       SAOUT  .WORD $AAAA     ;START ADDRESS
00180  1C4B  AA AA       EAOUT  .WORD $AAAA     ;END ADDRESS
00181  1C4D              ;*********************************
00182  1C4D              ; INTERNAL ADDRESS TABLE
00183  1C4D              ;*********************************
00184  1C4D  AA AA       TABINP .WORD $AAAA     ;TABLE POINTER
00185  1C4F  AA AA       TABINS .WORD $AAAA     ;TABLE START
00186  1C51  AA AA       TABINE .WORD $AAAA     ;TABLE END
00187  1C53              ;*********************************
00188  1C53              ; SORT TABLE POINTERS
00189  1C53              ;*********************************
00190  1C53  AA AA       SMALLS .WORD $AAAA     ;TABLE START
00191  1C55  AA AA       SMALLP .WORD $AAAA     ;TABLE POINTER
00192  1C57              ;*********************************
00193  1C57              ; SYMBOL TABLE
00194  1C57              ;*********************************
00195  1C57  AA          SYMBOL .BYTE $AA       ;SYMBOL OPTION
00196  1C58  AA AA       SYMBOP .WORD $AAAA     ;TABLE POINTER
00197  1C5A  AA AA       SYMBOS .WORD $AAAA     ;TABLE START
00198  1C5C  AA AA       SYMBOE .WORD $AAAA     ;TABLE END
00199  1C5E              ;*********************************
00200  1C5E              ; UNDEFINED SYMBOL TABLE
00201  1C5E              ;*********************************
00202  1C5E  AA AA       UYMBOP .WORD $AAAA     ;TABLE POINTER
00203  1C60  AA AA       UYMBOS .WORD $AAAA     ;TABLE START
00204  1C62  AA AA       UYMBOE .WORD $AAAA     ;TABLE END
00205  1C64              ;*********************************
00206  1C64              ; TEMP WORKING STORAGE
00207  1C64              ;*********************************
00208  1C64  AA AA       WORKED .WORD $AAAA     ;TWO BYTE OP
00209  1C66  AA AA       WORKER .WORD $AAAA     ;TWO BYTE OP
00210  1C68  AA AA       SAVEP  .WORD $AAAA     ;TWO BYTE OP
00211  1C6A  AA AA       SAVES  .WORD $AAAA     ;TWO BYTE OP
00212  1C6C  AA AA       SAVEE  .WORD $AAAA     ;TWO BYTE OP
00213  1C6E              ;*********************************
00214  1C6E              ; OTHER VARIABLES
00215  1C6E              ;*********************************
00216  1C6E  AA AA       ADRS   .WORD $AAAA
00217  1C70  AA          TEMP   .BYTE $AA
00218  1C71  AA          SAVA   .BYTE $AA
00219  1C72  AA          SAVX   .BYTE $AA
00220  1C73  AA          SAVY   .BYTE $AA






DISASS128.ASM......PAGE 0005

LINE# LOC   CODE        LINE


00221  1C74              ;*********************************
00222  1C74              ; PRINTER OUTPUT STORAGE
00223  1C74              ;*********************************
00224  1C74  AA AA       PAGECT .WORD $AAAA     ;PAGE COUNT
00225  1C76  AA          LISTCT .BYTE $AA       ;LINE COUNT
00226  1C77  AA AA       LINECT .WORD $AAAA     ;LINE COUNT
00227  1C79  AA AA       ERRCT  .WORD $AAAA     ;ERROR COUNT
00228  1C7B              ;*********************************
00229  1C7B              ; INPUT BUFFER
00230  1C7B              ;*********************************
00231  1C7B              BUF    = *
00232  1C7B  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00232  1C7C  00 
00232  1C7D  00 
00232  1C7E  00 
00232  1C7F  00 
00232  1C80  00 
00232  1C81  00 
00232  1C82  00 
00232  1C83  00 
00232  1C84  00 
00233  1C85  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00233  1C86  00 
00233  1C87  00 
00233  1C88  00 
00233  1C89  00 
00233  1C8A  00 
00233  1C8B  00 
00233  1C8C  00 
00233  1C8D  00 
00233  1C8E  00 
00234  1C8F  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00234  1C90  00 
00234  1C91  00 
00234  1C92  00 
00234  1C93  00 
00234  1C94  00 
00234  1C95  00 
00234  1C96  00 
00234  1C97  00 
00234  1C98  00 
00235  1C99  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00235  1C9A  00 
00235  1C9B  00 
00235  1C9C  00 
00235  1C9D  00 
00235  1C9E  00 
00235  1C9F  00 
00235  1CA0  00 
00235  1CA1  00 
00235  1CA2  00 
00236  1CA3  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00236  1CA4  00 
00236  1CA5  00 
00236  1CA6  00 






DISASS128.ASM......PAGE 0006

LINE# LOC   CODE        LINE


00236  1CA7  00 
00236  1CA8  00 
00236  1CA9  00 
00236  1CAA  00 
00236  1CAB  00 
00236  1CAC  00 
00237  1CAD  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00237  1CAE  00 
00237  1CAF  00 
00237  1CB0  00 
00237  1CB1  00 
00237  1CB2  00 
00237  1CB3  00 
00237  1CB4  00 
00237  1CB5  00 
00237  1CB6  00 
00238  1CB7  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00238  1CB8  00 
00238  1CB9  00 
00238  1CBA  00 
00238  1CBB  00 
00238  1CBC  00 
00238  1CBD  00 
00238  1CBE  00 
00238  1CBF  00 
00238  1CC0  00 
00239  1CC1  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00239  1CC2  00 
00239  1CC3  00 
00239  1CC4  00 
00239  1CC5  00 
00239  1CC6  00 
00239  1CC7  00 
00239  1CC8  00 
00239  1CC9  00 
00239  1CCA  00 
00240  1CCB  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00240  1CCC  00 
00240  1CCD  00 
00240  1CCE  00 
00240  1CCF  00 
00240  1CD0  00 
00240  1CD1  00 
00240  1CD2  00 
00240  1CD3  00 
00240  1CD4  00 
00241  1CD5  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00241  1CD6  00 
00241  1CD7  00 
00241  1CD8  00 
00241  1CD9  00 
00241  1CDA  00 
00241  1CDB  00 
00241  1CDC  00 
00241  1CDD  00 






DISASS128.ASM......PAGE 0007

LINE# LOC   CODE        LINE


00241  1CDE  00 
00242  1CDF              ;*********************************
00243  1CDF              ; FILE NAME BUFFER
00244  1CDF              ;*********************************
00245  1CDF  AA AA       LINEFL .WORD $AAAA
00246  1CE1  AA          VERSON .BYTE $AA
00247  1CE2  AA          NCHARS .BYTE $AA
00248  1CE3              NBUF   = *
00249  1CE3  30 3A              .BYTE '0:'
00250  1CE5  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
00250  1CE6  AA 
00250  1CE7  AA 
00250  1CE8  AA 
00250  1CE9  AA 
00250  1CEA  AA 
00250  1CEB  AA 
00250  1CEC  AA 
00251  1CED  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
00251  1CEE  AA 
00251  1CEF  AA 
00251  1CF0  AA 
00251  1CF1  AA 
00251  1CF2  AA 
00251  1CF3  AA 
00251  1CF4  AA 
00252  1CF5  AA                 .BYTE $AA,$AA,$AA,$AA
00252  1CF6  AA 
00252  1CF7  AA 
00252  1CF8  AA 
00253  1CF9              ;*********************************
00254  1CF9              ; SYMBOL TABLE BUFFER
00255  1CF9              ;*********************************
00256  1CF9              SYMBUF = *
00257  1CF9  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,
$AA
00257  1CFA  AA 
00257  1CFB  AA 
00257  1CFC  AA 
00257  1CFD  AA 
00257  1CFE  AA 
00257  1CFF  AA 
00257  1D00  AA 
00257  1D01  AA 
00257  1D02  AA 
00258  1D03              ;*********************************
00259  1D03              ; DATA TABLE
00260  1D03              ;*********************************
00261  1D03  AA AA       EAS    .WORD $AAAA
00262  1D05  AA          TEXTER .BYTE $AA
00263  1D06  AA AA       CDATA  .WORD $AAAA
00264  1D08  AA AA       NDATA  .WORD $AAAA
00265  1D0A  AA AA       DATABP .WORD $AAAA     ;DATA POINT
00266  1D0C  AA AA       DATABS .WORD $AAAA     ;DATA START
00267  1D0E  AA AA       DATABE .WORD $AAAA     ;DATA END
00268  1D10              ;*********************************
00269  1D10              ; DATA TABLE






DISASS128.ASM......PAGE 0008

LINE# LOC   CODE        LINE


00270  1D10              ;*********************************
00271  1D10  AA          TDATA  .BYTE $AA
00272  1D11              ;*********************************
00273  1D11                     *=*+$0100
00274  1E11              ;*********************************
00275  1E11  0D          MPASS  .BYTE $0D,'PASS',0
00275  1E12  50 41 
00275  1E16  00 
00276  1E17  0D          PMSG   .BYTE $0D,$12,' PAUSE ',$92,$0D,0
00276  1E18  12 
00276  1E19  20 50 
00276  1E20  92 
00276  1E21  0D 
00276  1E22  00 
00277  1E23  45 52       MSGERR .BYTE 'ERRORS = ',0
00277  1E2C  00 
00278  1E2D  45 4E       MSGDIS .BYTE 'END OF DISASSEMBLY',0
00278  1E3F  00 
00279  1E40              ;*********************************
00280  1E40              ; INITIALIZE DISASSEMBLER
00281  1E40              ;*********************************
00282  1E40  A2 FF       DISASS LDX #$FF
00283  1E42  9A                 TXS
00284  1E43  D8                 CLD
00285  1E44  20 91 1F           JSR DOP         ;GET OPTIONS
00286  1E47  20 B8 2E           JSR INITIN      ;INIT POINTERS
00287  1E4A  A9 31              LDA #'1'        ;PASS ONE
00288  1E4C  8D 31 1C           STA PASS        ;SET PASS INDICATOR
00289  1E4F              ;*********************************
00290  1E4F              ; DISASSEMBLER LOOP
00291  1E4F              ;*********************************
00292  1E4F  20 A4 2D    DISA   JSR INTSA       ;SET SA
00293  1E52  A9 00              LDA #00         ;ZERO BYTE
00294  1E54  8D 06 1D           STA CDATA       ;SET TABLE NUMBER
00295  1E57  A9 11              LDA #<MPASS     ;PASS MSG
00296  1E59  A0 1E              LDY #>MPASS     ;
00297  1E5B  20 0E 28           JSR STRPNT      ;PRINT IT
00298  1E5E  AD 31 1C           LDA PASS        ;GET PASS
00299  1E61  20 64 28           JSR PCHAR       ;PRINT NUMBER
00300  1E64  20 47 2D           JSR CRLF        ;CR
00301  1E67              ;*********************************
00302  1E67  AD 31 1C           LDA PASS        ;GET PASS
00303  1E6A  CD 34 1C           CMP CPASS       ;IS IT LAST
00304  1E6D  F0 0E              BEQ DISB        ;IF SO PRINT
00305  1E6F  CD 33 1C           CMP EPASS       ;IS IT EXTERNAL
00306  1E72  D0 3A              BNE DLOOP       ;IF NOT GO ON
00307  1E74  20 D7 2E           JSR SAVINT      ;SAVE INTERNAL
00308  1E77  20 8B 37           JSR EQUINT      ;SET EQUATES
00309  1E7A  4C AE 1E           JMP DLOOP       ;GO ON
00310  1E7D              ;*********************************
00311  1E7D  A9 01       DISB   LDA #$01        ;ONE BYTE
00312  1E7F  8D 77 1C           STA LINECT      ;SET LINE # TO 1
00313  1E82  8D 74 1C           STA PAGECT      ;SET PAGE TO 1
00314  1E85  A9 00              LDA #$00        ;ZERO BYTE
00315  1E87  8D 78 1C           STA LINECT+1    ;SET LINE # TO 1






DISASS128.ASM......PAGE 0009

LINE# LOC   CODE        LINE


00316  1E8A  8D 75 1C           STA PAGECT+1    ;SET PAGE TO 1
00317  1E8D  8D 76 1C           STA LISTCT      ;SET LIST TO 0
00318  1E90  8D 79 1C           STA ERRCT       ;SET ERROR TO 0
00319  1E93  8D 7A 1C           STA ERRCT+1     ;SET ERROR TO 0
00320  1E96  8D DF 1C           STA LINEFL      ;SET LINE TO 0
00321  1E99  8D E0 1C           STA LINEFL+1    ;SET LINE TO 0
00322  1E9C  AD 39 1C           LDA OUTPUT      ;GET OUTPUT
00323  1E9F  8D 38 1C           STA DEVICE      ;SET OUTPUT
00324  1EA2              ;*********************************
00325  1EA2  20 CD 28           JSR HEADER      ;PRINT HEADER
00326  1EA5  20 CF 21           JSR OFILED      ;OPEN DISK FILE
00327  1EA8  20 8F 2C           JSR ORGIN       ;PRINT ORGIN LABEL
00328  1EAB  20 96 38           JSR EQUPRT      ;PRINT EQUATE
00329  1EAE              ;********************************
00330  1EAE  20 D1 29    DLOOP  JSR DSLINE      ;DIS ONE LINE
00331  1EB1  B0 2C              BCS NEXTP       ;IF EA STOP
00332  1EB3  20 D8 26           JSR LINECK      ;LINE COUNT
00333  1EB6  20 E1 FF           JSR STOP        ;CHECK STOP
00334  1EB9  F0 57              BEQ QUITS       ;IF SO QUIT
00335  1EBB  20 E4 FF           JSR GETIN       ;GET KEY
00336  1EBE  F0 EE              BEQ DLOOP       ;IF NONE NEXT
00337  1EC0  C9 20              CMP #' '          ;IS IT A SPACE
00338  1EC2  D0 EA              BNE DLOOP       ;IF NOT NEXT
00339  1EC4              ;*********************************
00340  1EC4              ; PAUSE LISTING
00341  1EC4              ;********************************
00342  1EC4  AD 38 1C           LDA DEVICE
00343  1EC7  48                 PHA
00344  1EC8  A9 03              LDA #$03
00345  1ECA  8D 38 1C           STA DEVICE
00346  1ECD  A9 17              LDA #<PMSG
00347  1ECF  A0 1E              LDY #>PMSG
00348  1ED1  20 0E 28           JSR STRPNT
00349  1ED4  68                 PLA
00350  1ED5  8D 38 1C           STA DEVICE
00351  1ED8  20 E4 FF    PAUSE  JSR GETIN       ;PAUSE FOR KEY
00352  1EDB  F0 FB              BEQ PAUSE       ;
00353  1EDD  D0 CF              BNE DLOOP       ;NEXT LINE
00354  1EDF              ;********************************
00355  1EDF  EE 31 1C    NEXTP  INC PASS        ;INC PASS
00356  1EE2  AD 31 1C           LDA PASS        ;GET PASS
00357  1EE5  CD 34 1C           CMP CPASS       ;LAST PASS?
00358  1EE8  90 1F              BCC DISFUL      ;IF LESS AGAIN
00359  1EEA  D0 20              BNE DISC        ;FINISH
00360  1EEC  AD 3A 1C           LDA WINDOW      ;WINDOW FLAG
00361  1EEF  F0 18              BEQ DISFUL      ;FULL OUTPUT
00362  1EF1              ;*********************************
00363  1EF1              ; WINDOWED OUTPUT
00364  1EF1              ;*********************************
00365  1EF1  AD 49 1C           LDA SAOUT       ;
00366  1EF4  8D 3D 1C           STA SA          ;
00367  1EF7  AD 4A 1C           LDA SAOUT+1     ;
00368  1EFA  8D 3E 1C           STA SA+1        ;
00369  1EFD  AD 4B 1C           LDA EAOUT       ;
00370  1F00  8D 3F 1C           STA EA          ;






DISASS128.ASM......PAGE 0010

LINE# LOC   CODE        LINE


00371  1F03  AD 4C 1C           LDA EAOUT+1     ;
00372  1F06  8D 40 1C           STA EA+1        ;
00373  1F09              ;*********************************
00374  1F09  4C 4F 1E    DISFUL JMP DISA        ;LAST PASS
00375  1F0C  20 77 2D    DISC   JSR INCSL
00376  1F0F  20 A5 2C           JSR EFILE       ;END FILE MSG
00377  1F12              ;*********************************
00378  1F12  AD 38 1C    QUITS  LDA DEVICE      ;CHECK DEV
00379  1F15  29 08              AND #$08        ;DISK FILE?
00380  1F17  F0 10              BEQ QUTERR      ;IF NOT BRANCH
00381  1F19  A9 08              LDA #$08        ;DISK
00382  1F1B  20 C3 FF           JSR CLOSE       ;CLOSE IT
00383  1F1E  AD 39 1C           LDA OUTPUT      ;GET OUTPUT
00384  1F21  29 07              AND #07         ;MASK DISK
00385  1F23  8D 39 1C           STA OUTPUT      ;RESET OUTPUT
00386  1F26  8D 38 1C           STA DEVICE      ;RESET OUTPUT
00387  1F29              ;*********************************
00388  1F29              ; PRINT ERRORS
00389  1F29              ;*********************************
00390  1F29  AD 39 1C    QUTERR LDA OUTPUT
00391  1F2C  09 03              ORA #$03
00392  1F2E  8D 39 1C           STA OUTPUT
00393  1F31  8D 38 1C           STA DEVICE
00394  1F34  20 51 27           JSR NEWLIN
00395  1F37  20 51 27           JSR NEWLIN
00396  1F3A  A9 23              LDA #<MSGERR
00397  1F3C  A0 1E              LDY #>MSGERR
00398  1F3E  20 0E 28           JSR STRPNT
00399  1F41  AE 79 1C           LDX ERRCT
00400  1F44  AD 7A 1C           LDA ERRCT+1
00401  1F47  20 2A 28           JSR PRTNUM
00402  1F4A              ;*********************************
00403  1F4A  AD 38 1C           LDA DEVICE      ;CHECK DEV
00404  1F4D  29 04              AND #$04        ;PRINTER?
00405  1F4F  F0 13              BEQ DONED       ;IF NOT DONE
00406  1F51  A9 04              LDA #$04        ;DEVICE 4
00407  1F53  8D 39 1C           STA OUTPUT      ;SET DEVICE
00408  1F56  8D 38 1C           STA DEVICE      ;SET DEVICE
00409  1F59  20 89 30           JSR INTPRT      ;PRINT INTABLE
00410  1F5C  A9 07              LDA #$07        ;DEVICE 3 AND 4
00411  1F5E  8D 38 1C           STA DEVICE      ;SET DEVICE
00412  1F61  8D 39 1C           STA OUTPUT      ;SET DEVICE
00413  1F64  20 51 27    DONED  JSR NEWLIN      ;NEWLINE
00414  1F67  20 51 27           JSR NEWLIN      ;NEWLINE
00415  1F6A  A9 2D              LDA #<MSGDIS    ;END MSG
00416  1F6C  A0 1E              LDY #>MSGDIS
00417  1F6E  20 0E 28           JSR STRPNT      ;PRINT IT
00418  1F71  20 51 27           JSR NEWLIN      ;NEW LINE
00419  1F74  AD 38 1C           LDA DEVICE      ;CHECK DEVICE
00420  1F77  29 04              AND #$04        ;PRINTER
00421  1F79  F0 08              BEQ DONE        ;
00422  1F7B  20 9B 28           JSR FINISH      ;FINISH PAGE
00423  1F7E  A9 04              LDA #$04        ;PRINTER
00424  1F80  20 C3 FF           JSR CLOSE       ;CLOSE FILE
00425  1F83              ;*********************************






DISASS128.ASM......PAGE 0011

LINE# LOC   CODE        LINE


00426  1F83  20 CC FF    DONE   JSR CLRCHN      ;RESET I/O
00427  1F86  20 5B 29           JSR SCRON       ;TURN SCREEN ON
00428  1F89                     
00429  1F89  A9 00              LDA #$00        ;BANK 15
00430  1F8B  8D 00 FF           STA $FF00       ; 
00431  1F8E                     
00432  1F8E  4C 37 4D           JMP WREADY      ;RETURN
00433  1F91              ;*********************************
00434  1F91              ;.FIL 0:OPTION.ASM
00435  1F91              ;*********************************
00436  1F91              ;.END
00437  1F91              ;*********************************
00438  1F91              ; FILE OPTION.ASM
00439  1F91              ;*********************************
00440  1F91              ;
00441  1F91              ;        DISASSEMBLER128
00442  1F91              ;    SYMBOLIC DISASSEMBLER
00443  1F91              ;       BY DENTON MARLOWE
00444  1F91              ;
00445  1F91              ;  (C)1986 BY DENTON MARLOWE
00446  1F91              ;
00447  1F91              ;*********************************
00448  1F91              ; DISASSEMBLER OPTIONS
00449  1F91              ;*********************************
00450  1F91  A9 03       DOP    LDA #$03        ;DEVICE #3 SCREEN
00451  1F93  8D 38 1C           STA DEVICE      ;CURRENT OUTPUT
00452  1F96  A9 00              LDA #$00        ;NO DEVICES
00453  1F98  8D 39 1C           STA OUTPUT      ;FINAL OUTPUT
00454  1F9B  A9 07              LDA #<MSG       ;START UP MSG
00455  1F9D  A0 24              LDY #>MSG
00456  1F9F  20 0E 28           JSR STRPNT      ;PRINT IT
00457  1FA2              ;*********************************
00458  1FA2              ; READ IN DISK FILE ?
00459  1FA2              ;*********************************
00460  1FA2  A9 54              LDA #<MSF1
00461  1FA4  A0 24              LDY #>MSF1
00462  1FA6  20 0E 28           JSR STRPNT
00463  1FA9  20 6F 27           JSR INSTNG
00464  1FAC  D0 03              BNE PFILE0
00465  1FAE  4C FE 20           JMP STARTS
00466  1FB1  A2 00       PFILE0 LDX #$00
00467  1FB3  BD A5 24    PFILE1 LDA PROGM,X
00468  1FB6  99 7B 1C           STA BUF,Y
00469  1FB9  C8                 INY
00470  1FBA  E8                 INX
00471  1FBB  E0 04              CPX #$04
00472  1FBD  D0 F4              BNE PFILE1
00473  1FBF  8C 71 1C           STY SAVA
00474  1FC2  20 DD 20           JSR INITD
00475  1FC5  20 AB 20           JSR PRFILE
00476  1FC8              ;*********************************
00477  1FC8              ; READ IN FILE FOR SA AND EA
00478  1FC8              ;*********************************
00479  1FC8  A2 08              LDX #$08        ;FILE #8
00480  1FCA  20 C6 FF           JSR CHKIN       ;INPUT FILE






DISASS128.ASM......PAGE 0012

LINE# LOC   CODE        LINE


00481  1FCD  20 CF FF           JSR CHRIN       ;GET LOW BYTE SA
00482  1FD0  8D 3D 1C           STA SA          ;SET START
00483  1FD3  20 CF FF           JSR CHRIN       ;GET HIGH BYTE SA
00484  1FD6  8D 3E 1C           STA SA+1        ;SET START
00485  1FD9  20 A4 2D           JSR INTSA       ;SET END
00486  1FDC              ;*********************************
00487  1FDC  A9 00              LDA #$00        ;ZERO BYTE
00488  1FDE  8D 6E 1C           STA ADRS        ;BYTE COUNTER
00489  1FE1  8D 6F 1C           STA ADRS+1      ;BYTE COUNTER
00490  1FE4  20 CF FF    PROGRD JSR CHRIN       ;INPUT BYTE
00491  1FE7  20 B7 FF           JSR READST      ;READ STATUS
00492  1FEA  D0 0D              BNE PROGED      ;IF NOT ZERO END
00493  1FEC  20 77 2D           JSR INCSL       ;INC END ADDRESS
00494  1FEF  EE 6E 1C           INC ADRS        ;INC BYTE COUNT
00495  1FF2  D0 03              BNE *+5         ;
00496  1FF4  EE 6F 1C           INC ADRS+1      ;
00497  1FF7  D0 EB              BNE PROGRD      ;NEXT BYTE
00498  1FF9  AD 41 1C    PROGED LDA SELECT      ;
00499  1FFC  8D 3F 1C           STA EA          ;
00500  1FFF  AD 42 1C           LDA SELECT+1    ;
00501  2002  8D 40 1C           STA EA+1        ;
00502  2005              ;*********************************
00503  2005  A9 08              LDA #$08        ;FILE #8
00504  2007  20 C3 FF           JSR CLOSE       ;CLOSE IT
00505  200A  20 CC FF           JSR CLRCHN      ;RESET I/O
00506  200D              ;*********************************
00507  200D              ; PRINT PROGRAM LOAD ADDRESS
00508  200D              ; AND END ADDRESS
00509  200D              ;*********************************
00510  200D  A9 70              LDA #<MSF2
00511  200F  A0 24              LDY #>MSF2
00512  2011  20 0E 28           JSR STRPNT
00513  2014  AD 3D 1C           LDA SA
00514  2017  8D 64 1C           STA WORKED
00515  201A  AD 3E 1C           LDA SA+1
00516  201D  8D 65 1C           STA WORKED+1
00517  2020  20 16 2D           JSR PWORKD
00518  2023              ;
00519  2023  A9 2D              LDA #'-'
00520  2025              ;
00521  2025  20 64 28           JSR PCHAR
00522  2028  20 24 2D           JSR DOLLAR
00523  202B  20 0A 2D           JSR PSELEC
00524  202E  20 47 2D           JSR CRLF
00525  2031              ;*********************************
00526  2031              ; CALCULATE BUFFER ADDRESS
00527  2031              ;*********************************
00528  2031  A5 39              LDA MEMSIZ
00529  2033  8D 41 1C           STA SELECT
00530  2036  A5 3A              LDA MEMSIZ+1
00531  2038  8D 42 1C           STA SELECT+1
00532  203B  20 98 2D           JSR DECSL
00533  203E  38                 SEC
00534  203F  AD 41 1C           LDA SELECT
00535  2042  ED 6E 1C           SBC ADRS






DISASS128.ASM......PAGE 0013

LINE# LOC   CODE        LINE


00536  2045  8D 41 1C           STA SELECT
00537  2048  AD 42 1C           LDA SELECT+1
00538  204B  ED 6F 1C           SBC ADRS+1
00539  204E  8D 42 1C           STA SELECT+1
00540  2051              ;*********************************
00541  2051              ; CALCULATE ADDRESS OFFSET
00542  2051              ;*********************************
00543  2051  38                 SEC
00544  2052  AD 41 1C           LDA SELECT
00545  2055  ED 3D 1C           SBC SA
00546  2058  8D 43 1C           STA OFFSET
00547  205B  8D 64 1C           STA WORKED
00548  205E  AD 42 1C           LDA SELECT+1
00549  2061  ED 3E 1C           SBC SA+1
00550  2064  8D 44 1C           STA OFFSET+1
00551  2067  8D 65 1C           STA WORKED+1
00552  206A  A9 00              LDA #<MSD4A
00553  206C  A0 25              LDY #>MSD4A
00554  206E  20 0E 28           JSR STRPNT
00555  2071  20 16 2D           JSR PWORKD
00556  2074  20 47 2D           JSR CRLF
00557  2077              ;*********************************
00558  2077              ; OPEN FILE AND READ PRG INTO BUF
00559  2077              ;*********************************
00560  2077  20 AB 20           JSR PRFILE      ;OPEN FILE
00561  207A  A2 08              LDX #$08        ;FILE #8
00562  207C  20 C6 FF           JSR CHKIN       ;INPUT FILE
00563  207F  20 CF FF           JSR CHRIN       ;GET LOW BYTE SA
00564  2082  20 CF FF           JSR CHRIN       ;GET HIGH BYTE SA
00565  2085  20 CF FF    PRO2RD JSR CHRIN       ;INPUT BYTE
00566  2088              ;
00567  2088  AE 41 1C           LDX SELECT      ;LOW BYTE POINTER
00568  208B  86 FB              STX ZEROUR      ;ZERO PAGE
00569  208D  AE 42 1C           LDX SELECT+1    ;HIGH BYTE POINTER
00570  2090  86 FC              STX ZEROUR+1    ;ZERO PAGE
00571  2092  A2 01              LDX #$01        ;RAM BANK 1
00572  2094  A0 00              LDY #$00        ;OFFSET
00573  2096  91 FB              STA (ZEROUR),Y  ;STORE BYTE
00574  2098              ; JSR INDSTA
00575  2098              ; 
00576  2098  20 77 2D           JSR INCSL       ;INC POINTER
00577  209B  20 B7 FF           JSR READST      ;READ STATUS
00578  209E  F0 E5              BEQ PRO2RD      ;NEXT BYTE
00579  20A0  A9 08              LDA #$08        ;FILE #8
00580  20A2  20 C3 FF           JSR CLOSE       ;CLOSE IT
00581  20A5  20 CC FF           JSR CLRCHN      ;RESET I/O
00582  20A8  4C 40 21           JMP WINDOP      ;WINDOW OPTION
00583  20AB              ;*********************************
00584  20AB              ; OPEN PROGRAM FILE
00585  20AB              ;*********************************
00586  20AB  AD 71 1C    PRFILE LDA SAVA
00587  20AE  A2 7B              LDX #<BUF
00588  20B0  A0 1C              LDY #>BUF
00589  20B2  20 BD FF           JSR SETNAM
00590  20B5  A9 08              LDA #$08






DISASS128.ASM......PAGE 0014

LINE# LOC   CODE        LINE


00591  20B7  A8                 TAY
00592  20B8  AA                 TAX
00593  20B9  20 BA FF           JSR SETLFS
00594  20BC              ;
00595  20BC  A9 00              LDA #$00        ;LOAD INTO BANK 1
00596  20BE  A2 00              LDX #$00        ;PROGRAM IN BANK 0
00597  20C0  20 68 FF           JSR SETBNK
00598  20C3              ;
00599  20C3  20 C0 FF           JSR OPEN
00600  20C6  20 17 27           JSR DISERR
00601  20C9  90 11              BCC PROGOK
00602  20CB  A9 08              LDA #$08
00603  20CD  20 C3 FF           JSR CLOSE
00604  20D0  68                 PLA
00605  20D1  68                 PLA
00606  20D2  68                 PLA
00607  20D3  68                 PLA
00608  20D4                     
00609  20D4  A9 00              LDA #$00        ;BANK 15
00610  20D6  8D 00 FF           STA $FF00       ; 
00611  20D9                     
00612  20D9                     
00613  20D9  4C 37 4D           JMP WREADY
00614  20DC              ;*********************************
00615  20DC  60          PROGOK RTS
00616  20DD              ;*********************************
00617  20DD              ; INIT DISK
00618  20DD              ;*********************************
00619  20DD  A9 02       INITD  LDA #$02
00620  20DF  A0 24              LDY #>INIT
00621  20E1  A2 A9              LDX #<INIT
00622  20E3  20 BD FF           JSR SETNAM
00623  20E6  A9 0F              LDA #$0F
00624  20E8  A2 08              LDX #$08
00625  20EA  A0 0F              LDY #$0F
00626  20EC  20 BA FF           JSR SETLFS
00627  20EF              ;
00628  20EF  A9 00              LDA #$00        ;LOAD INTO BANK 1
00629  20F1  A2 00              LDX #$00        ;PROGRAM IN BANK 0
00630  20F3  20 68 FF           JSR SETBNK
00631  20F6              ;
00632  20F6  20 C0 FF           JSR OPEN
00633  20F9  A9 0F              LDA #$0F
00634  20FB  4C C3 FF           JMP CLOSE
00635  20FE              ;*********************************
00636  20FE              ; GET START ADDRESS
00637  20FE              ;*********************************
00638  20FE  A9 C4       STARTS LDA #<MSD1
00639  2100  A0 24              LDY #>MSD1
00640  2102  20 0E 28           JSR STRPNT
00641  2105  20 7E 27           JSR GETWRD
00642  2108  AD 6E 1C           LDA ADRS
00643  210B  8D 3D 1C           STA SA
00644  210E  AD 6F 1C           LDA ADRS+1
00645  2111  8D 3E 1C           STA SA+1






DISASS128.ASM......PAGE 0015

LINE# LOC   CODE        LINE


00646  2114              ;*********************************
00647  2114              ; GET END ADDRESS
00648  2114              ;*********************************
00649  2114  A9 D6              LDA #<MSD2
00650  2116  A0 24              LDY #>MSD2
00651  2118  20 0E 28           JSR STRPNT
00652  211B  20 7E 27           JSR GETWRD
00653  211E  AD 6E 1C           LDA ADRS
00654  2121  8D 3F 1C           STA EA
00655  2124  AD 6F 1C           LDA ADRS+1
00656  2127  8D 40 1C           STA EA+1
00657  212A              ;*********************************
00658  212A              ; ADDRRESS OFFSET
00659  212A              ;*********************************
00660  212A  A9 E6              LDA #<MSD4
00661  212C  A0 24              LDY #>MSD4
00662  212E  20 0E 28           JSR STRPNT
00663  2131  20 7E 27           JSR GETWRD
00664  2134  AD 6E 1C           LDA ADRS
00665  2137  8D 43 1C           STA OFFSET
00666  213A  AD 6F 1C           LDA ADRS+1
00667  213D  8D 44 1C           STA OFFSET+1
00668  2140              ;*********************************
00669  2140              ; OUTPUT WINDOW
00670  2140              ;*********************************
00671  2140  A9 13       WINDOP LDA #<MSD5
00672  2142  A0 25              LDY #>MSD5
00673  2144  20 0E 28           JSR STRPNT
00674  2147  20 E3 27           JSR CRNO
00675  214A  B0 30              BCS WIND1
00676  214C  A9 C4              LDA #<MSD1
00677  214E  A0 24              LDY #>MSD1
00678  2150  20 0E 28           JSR STRPNT
00679  2153  20 7E 27           JSR GETWRD
00680  2156  AD 6E 1C           LDA ADRS
00681  2159  8D 49 1C           STA SAOUT
00682  215C  AD 6F 1C           LDA ADRS+1
00683  215F  8D 4A 1C           STA SAOUT+1
00684  2162  A9 D6              LDA #<MSD2
00685  2164  A0 24              LDY #>MSD2
00686  2166  20 0E 28           JSR STRPNT
00687  2169  20 7E 27           JSR GETWRD
00688  216C  AD 6E 1C           LDA ADRS
00689  216F  8D 4B 1C           STA EAOUT
00690  2172  AD 6F 1C           LDA ADRS+1
00691  2175  8D 4C 1C           STA EAOUT+1
00692  2178  A9 FF              LDA #$FF
00693  217A  30 02              BMI WIND2
00694  217C  A9 00       WIND1  LDA #$00
00695  217E  8D 3A 1C    WIND2  STA WINDOW
00696  2181              ;*********************************
00697  2181              ; SETUP GOBAL POINTER
00698  2181              ;*********************************
00699  2181  AD 3D 1C           LDA SA
00700  2184  8D 45 1C           STA SAGOL






DISASS128.ASM......PAGE 0016

LINE# LOC   CODE        LINE


00701  2187  AD 3E 1C           LDA SA+1
00702  218A  8D 46 1C           STA SAGOL+1
00703  218D  AD 3F 1C           LDA EA
00704  2190  8D 47 1C           STA EAGOL
00705  2193  AD 40 1C           LDA EA+1
00706  2196  8D 48 1C           STA EAGOL+1
00707  2199              ;*********************************
00708  2199              ; SOURCE FILE OUTPUT?
00709  2199              ;*********************************
00710  2199  A9 84       OUFILE LDA #<MSG1
00711  219B  A0 24              LDY #>MSG1
00712  219D  20 0E 28           JSR STRPNT
00713  21A0              ;*********************************
00714  21A0  A9 00              LDA #$00
00715  21A2  8D E2 1C           STA NCHARS
00716  21A5  20 6F 27           JSR INSTNG
00717  21A8  F0 1A              BEQ NOFILE
00718  21AA  A9 30              LDA #'0'
00719  21AC  8D E1 1C           STA VERSON
00720  21AF  8C E2 1C           STY NCHARS
00721  21B2  A2 00              LDX #$00
00722  21B4  BD 7B 1C    GFILE0 LDA BUF,X
00723  21B7  9D E3 1C           STA NBUF,X
00724  21BA  E8                 INX
00725  21BB  EC E2 1C           CPX NCHARS
00726  21BE  D0 F4              BNE GFILE0
00727  21C0              ;*********************************
00728  21C0  A9 08       FILEOK LDA #$08
00729  21C2  D0 02              BNE FILE
00730  21C4  A9 00       NOFILE LDA #$00
00731  21C6  0D 39 1C    FILE   ORA OUTPUT
00732  21C9  8D 39 1C           STA OUTPUT
00733  21CC  4C 31 22           JMP PRTGET
00734  21CF              ;*********************************
00735  21CF              ;     OPEN SOURCE DISK FILE
00736  21CF              ;*********************************
00737  21CF  AC E2 1C    OFILED LDY NCHARS
00738  21D2  F0 03              BEQ NOID
00739  21D4  20 DD 20           JSR INITD
00740  21D7  20 4B 29    NOID   JSR SCROFF
00741  21DA              ;*********************************
00742  21DA  AC E2 1C    OFILE  LDY NCHARS
00743  21DD  F0 51              BEQ OFILE4
00744  21DF  AD E1 1C           LDA VERSON
00745  21E2  C9 30              CMP #'0'
00746  21E4  F0 07              BEQ OFILE1
00747  21E6  AD E1 1C           LDA VERSON
00748  21E9  99 E3 1C           STA NBUF,Y
00749  21EC  C8                 INY
00750  21ED  EE E1 1C    OFILE1 INC VERSON
00751  21F0  A2 00              LDX #$00
00752  21F2  BD A1 24    OFILE2 LDA WRITE,X
00753  21F5  99 E3 1C           STA NBUF,Y
00754  21F8  C8                 INY
00755  21F9  E8                 INX






DISASS128.ASM......PAGE 0017

LINE# LOC   CODE        LINE


00756  21FA  E0 04              CPX #$04
00757  21FC  D0 F4              BNE OFILE2
00758  21FE  98                 TYA
00759  21FF  A0 1C              LDY #>NBUF
00760  2201  A2 E3              LDX #<NBUF
00761  2203  20 BD FF           JSR SETNAM
00762  2206  A9 08              LDA #$08
00763  2208  AA                 TAX
00764  2209  A8                 TAY
00765  220A  20 BA FF           JSR SETLFS
00766  220D              ;
00767  220D  A9 00              LDA #$00        ;LOAD INTO BANK 1
00768  220F  A2 00              LDX #$00        ;PROGRAM IN BANK 0
00769  2211  20 68 FF           JSR SETBNK
00770  2214              ;
00771  2214  20 C0 FF           JSR OPEN
00772  2217  20 17 27           JSR DISERR
00773  221A  90 14              BCC OFILE4
00774  221C              ;*********************************
00775  221C              ;  CLOSE OUT FILE ON ERROR
00776  221C              ;*********************************
00777  221C  A9 08       OFILE3 LDA #$08
00778  221E  20 C3 FF           JSR CLOSE
00779  2221  20 CC FF           JSR CLRCHN
00780  2224  68                 PLA
00781  2225  68                 PLA
00782  2226  68                 PLA
00783  2227  68                 PLA
00784  2228                     
00785  2228  A9 00              LDA #$00        ;BANK 15
00786  222A  8D 00 FF           STA $FF00       ; 
00787  222D                     
00788  222D  4C 37 4D           JMP WREADY
00789  2230  60          OFILE4 RTS
00790  2231              ;*********************************
00791  2231              ; GET PRINTER OPTION
00792  2231              ;*********************************
00793  2231  A9 AB       PRTGET LDA #<MSG2
00794  2233  A0 24              LDY #>MSG2
00795  2235  20 0E 28           JSR STRPNT
00796  2238  20 D6 27           JSR CRYS
00797  223B  B0 2D              BCS NOPRT
00798  223D  A9 00              LDA #$00
00799  223F  20 BD FF           JSR SETNAM
00800  2242  A9 04              LDA #$04
00801  2244  A2 04              LDX #$04
00802  2246  A0 00              LDY #$00
00803  2248  20 BA FF           JSR SETLFS
00804  224B              ;
00805  224B  A9 00              LDA #$00        ;LOAD INTO BANK 1
00806  224D  A2 00              LDX #$00        ;PROGRAM IN BANK 0
00807  224F  20 68 FF           JSR SETBNK
00808  2252              ;
00809  2252  20 C0 FF           JSR OPEN
00810  2255  A2 04              LDX #$04






DISASS128.ASM......PAGE 0018

LINE# LOC   CODE        LINE


00811  2257  20 C9 FF           JSR CHKOUT
00812  225A  20 B7 FF           JSR READST
00813  225D  29 80              AND #$80
00814  225F  08                 PHP
00815  2260  20 CC FF           JSR CLRCHN
00816  2263  28                 PLP
00817  2264  30 04              BMI NOPRT
00818  2266  A9 04              LDA #$04
00819  2268  D0 02              BNE PRINT
00820  226A  A9 03       NOPRT  LDA #$03
00821  226C  0D 39 1C    PRINT  ORA OUTPUT
00822  226F  8D 39 1C           STA OUTPUT
00823  2272              ;*********************************
00824  2272              ; GO GET SYMBOLIC OPTION
00825  2272              ;*********************************
00826  2272  20 16 37           JSR SOP
00827  2275              ;*********************************
00828  2275              ; GET RELATIVE ADDRESS OPTION
00829  2275              ;*********************************
00830  2275  A9 2F              LDA #<MSR1
00831  2277  A0 25              LDY #>MSR1
00832  2279  20 0E 28           JSR STRPNT
00833  227C  20 D6 27           JSR CRYS
00834  227F  90 04              BCC DOP2
00835  2281  A9 01              LDA #$01
00836  2283  D0 02              BNE DOP3
00837  2285  A9 00       DOP2   LDA #$00
00838  2287  8D 37 1C    DOP3   STA ROPT
00839  228A              ;*********************************
00840  228A              ; GET BIT INSTRUCTION CODING OPTION
00841  228A              ;*********************************
00842  228A  20 9F 43           JSR BITOPT
00843  228D              ;*********************************
00844  228D              ; DATA TABLE OPTION
00845  228D              ;*********************************
00846  228D  AD 5C 1C    AOP    LDA SYMBOE
00847  2290  8D 0A 1D           STA DATABP
00848  2293  8D 0C 1D           STA DATABS
00849  2296  8D 0E 1D           STA DATABE
00850  2299  85 FB              STA ZEROUR
00851  229B  AD 5D 1C           LDA SYMBOE+1
00852  229E  8D 0B 1D           STA DATABP+1
00853  22A1  8D 0D 1D           STA DATABS+1
00854  22A4  8D 0F 1D           STA DATABE+1
00855  22A7  85 FC              STA ZEROUR+1
00856  22A9              ;*********************************
00857  22A9  A9 BD              LDA #<MSAOP
00858  22AB  A0 25              LDY #>MSAOP
00859  22AD  20 0E 28           JSR STRPNT
00860  22B0  20 6F 27           JSR INSTNG
00861  22B3  D0 03              BNE BOP
00862  22B5  4C 3F 23           JMP NOTABS
00863  22B8              ;*********************************
00864  22B8  98          BOP    TYA
00865  22B9  48                 PHA






DISASS128.ASM......PAGE 0019

LINE# LOC   CODE        LINE


00866  22BA  20 DD 20           JSR INITD
00867  22BD  68                 PLA
00868  22BE  A8                 TAY
00869  22BF  A2 00              LDX #$00
00870  22C1  BD 86 3A    AFILE  LDA NAMS,X
00871  22C4  99 7B 1C           STA BUF,Y
00872  22C7  C8                 INY
00873  22C8  E8                 INX
00874  22C9  E0 04              CPX #$04
00875  22CB  D0 F4              BNE AFILE
00876  22CD  98                 TYA
00877  22CE  A0 1C              LDY #>BUF
00878  22D0  A2 7B              LDX #<BUF
00879  22D2  20 BD FF           JSR SETNAM
00880  22D5  A9 03              LDA #$03
00881  22D7  A2 08              LDX #$08
00882  22D9  A0 03              LDY #$03
00883  22DB  20 BA FF           JSR SETLFS
00884  22DE              ;
00885  22DE  A9 00              LDA #$00        ;LOAD INTO BANK 1
00886  22E0  A2 00              LDX #$00        ;PROGRAM IN BANK 0
00887  22E2  20 68 FF           JSR SETBNK
00888  22E5              ;
00889  22E5  20 C0 FF           JSR OPEN
00890  22E8  20 17 27           JSR DISERR
00891  22EB  B0 1B              BCS AGET1
00892  22ED  A2 03              LDX #$03
00893  22EF  20 C6 FF           JSR CHKIN
00894  22F2              ;*********************************
00895  22F2              ; READ IN DATA TABLE
00896  22F2              ;*********************************
00897  22F2  A0 00              LDY #$00
00898  22F4  20 CF FF           JSR CHRIN
00899  22F7  8D 08 1D           STA NDATA
00900  22FA  F0 0C              BEQ AGET1
00901  22FC  20 CF FF    AGET   JSR CHRIN
00902  22FF  99 10 1D           STA TDATA,Y
00903  2302  C8                 INY
00904  2303  20 B7 FF           JSR READST
00905  2306  F0 F4              BEQ AGET
00906  2308  A9 03       AGET1  LDA #$03
00907  230A  20 C3 FF           JSR CLOSE
00908  230D  20 CC FF           JSR CLRCHN
00909  2310              ;*********************************
00910  2310              ; PRINT DATA TABLE
00911  2310              ;*********************************
00912  2310  AD 08 1D    PRTDAS LDA NDATA
00913  2313  8D 06 1D           STA CDATA
00914  2316  A0 00              LDY #$00
00915  2318  8C 73 1C           STY SAVY
00916  231B  20 47 2D    PRTNEX JSR CRLF
00917  231E  A2 05              LDX #$05
00918  2320  8E 72 1C           STX SAVX
00919  2323  AC 73 1C    PRTDAL LDY SAVY
00920  2326  B9 10 1D           LDA TDATA,Y






DISASS128.ASM......PAGE 0020

LINE# LOC   CODE        LINE


00921  2329  20 F8 27           JSR PRBYT
00922  232C  20 59 2D           JSR SPACE
00923  232F  EE 73 1C           INC SAVY
00924  2332  CE 72 1C           DEC SAVX
00925  2335  D0 EC              BNE PRTDAL
00926  2337  CE 06 1D           DEC CDATA
00927  233A  D0 DF              BNE PRTNEX
00928  233C              ;*********************************
00929  233C  4C DC 23           JMP XOP0
00930  233F              ;*********************************
00931  233F              ; READ DATA FOR KEYBOARD
00932  233F              ;*********************************
00933  233F  A9 DC       NOTABS LDA #<MSA1      ;NUMBER OF DATA
00934  2341  A0 25              LDY #>MSA1
00935  2343  20 0E 28           JSR STRPNT
00936  2346  20 7E 27           JSR GETWRD      ;INPUT HEX BYTE
00937  2349  AD 6E 1C           LDA ADRS        ;GET BYTE
00938  234C  8D 08 1D           STA NDATA       ;SET NUM TABLES
00939  234F  D0 03              BNE AOPX        ;0 DATA THEN END
00940  2351  4C DC 23           JMP XOP0        ;RETURN
00941  2354  A9 00       AOPX   LDA #$00        ;ZERO OFFSET
00942  2356  8D 06 1D           STA CDATA       ;FIRST TABLE
00943  2359              ;*********************************
00944  2359              ; CALCULATE TABLE OFFSET
00945  2359              ;*********************************
00946  2359  AD 06 1D    AOP1   LDA CDATA       ;GET TABLE NUMBER
00947  235C  0A                 ASL A           ;*2
00948  235D  0A                 ASL A           ;*4
00949  235E  18                 CLC             ;C=0
00950  235F  6D 06 1D           ADC CDATA       ;*5
00951  2362  8D 73 1C           STA SAVY        ;STORE AS OFFSET
00952  2365              ;*********************************
00953  2365  A9 FE              LDA #<MSA2
00954  2367  A0 25              LDY #>MSA2
00955  2369  20 0E 28           JSR STRPNT      ;PRINT MSG
00956  236C  20 7E 27           JSR GETWRD      ;GET ADDRESS
00957  236F  AC 73 1C           LDY SAVY        ;GET OFFSET
00958  2372  AD 6E 1C           LDA ADRS
00959  2375  99 10 1D           STA TDATA,Y
00960  2378  C8                 INY
00961  2379  AD 6F 1C           LDA ADRS+1
00962  237C  99 10 1D           STA TDATA,Y
00963  237F  C8                 INY
00964  2380  8C 73 1C           STY SAVY
00965  2383              ;*********************************
00966  2383              ; END OF DATA TABLE
00967  2383              ;*********************************
00968  2383  A9 16       AOP2   LDA #<MSA3
00969  2385  A0 26              LDY #>MSA3
00970  2387  20 0E 28           JSR STRPNT
00971  238A  20 7E 27           JSR GETWRD      ;GET ADDRESS
00972  238D  AC 73 1C           LDY SAVY
00973  2390  AD 6E 1C           LDA ADRS
00974  2393  99 10 1D           STA TDATA,Y
00975  2396  C8                 INY






DISASS128.ASM......PAGE 0021

LINE# LOC   CODE        LINE


00976  2397  AD 6F 1C           LDA ADRS+1
00977  239A  99 10 1D           STA TDATA,Y
00978  239D  C8                 INY
00979  239E  8C 73 1C           STY SAVY
00980  23A1              ;*********************************
00981  23A1              ; GET TYPE OF TABLE
00982  23A1              ;*********************************
00983  23A1  A9 2C              LDA #<MSG5      ;TABLE TYPE
00984  23A3  A0 26              LDY #>MSG5
00985  23A5  20 0E 28           JSR STRPNT
00986  23A8  20 E4 FF    AOP3   JSR GETIN
00987  23AB  F0 FB              BEQ AOP3
00988  23AD  C9 30              CMP #'0'
00989  23AF  F0 14              BEQ ASC
00990  23B1  C9 31              CMP #'1'
00991  23B3  F0 10              BEQ ASC
00992  23B5  C9 32              CMP #'2'
00993  23B7  F0 0C              BEQ ASC
00994  23B9  C9 33              CMP #'3'
00995  23BB  F0 08              BEQ ASC
00996  23BD  C9 34              CMP #'4'
00997  23BF  F0 04              BEQ ASC
00998  23C1  C9 53              CMP #'S'
00999  23C3  D0 E3              BNE AOP3
01000  23C5  20 D2 FF    ASC    JSR CHROUT
01001  23C8  AC 73 1C           LDY SAVY
01002  23CB  99 10 1D           STA TDATA,Y
01003  23CE              ;*********************************
01004  23CE  EE 06 1D           INC CDATA       ;INC TABLE COUNT
01005  23D1  AD 06 1D           LDA CDATA       ;GET TABLE COUNT
01006  23D4  CD 08 1D           CMP NDATA       ;ALL TABLES?
01007  23D7  F0 03              BEQ XOP0        ;IF NOT GET MORE
01008  23D9  4C 59 23           JMP AOP1        ;IF NOT GET MORE
01009  23DC              ;*********************************
01010  23DC              ; GET LABEL GENERATION OPTION
01011  23DC              ;*********************************
01012  23DC  A9 98       XOP0   LDA #<MSB4
01013  23DE  A0 26              LDY #>MSB4
01014  23E0  20 0E 28           JSR STRPNT
01015  23E3  20 D6 27           JSR CRYS
01016  23E6  B0 04              BCS XOP1
01017  23E8  A9 01              LDA #$01
01018  23EA  D0 02              BNE XOP2
01019  23EC  A9 00       XOP1   LDA #$00
01020  23EE  8D 36 1C    XOP2   STA XOPT
01021  23F1              ;*********************************
01022  23F1              ; OUTPUT FORMAT OPTION
01023  23F1              ;*********************************
01024  23F1  A9 B8              LDA #<MSB5
01025  23F3  A0 26              LDY #>MSB5
01026  23F5  20 0E 28           JSR STRPNT
01027  23F8  20 D6 27           JSR CRYS
01028  23FB  B0 04              BCS FOP1
01029  23FD  A9 00              LDA #$00
01030  23FF  F0 02              BEQ FOP2






DISASS128.ASM......PAGE 0022

LINE# LOC   CODE        LINE


01031  2401  A9 FF       FOP1   LDA #$FF
01032  2403  8D 3B 1C    FOP2   STA FOROPT
01033  2406              ;*********************************
01034  2406  60                 RTS
01035  2407              ;*********************************
01036  2407              ;   COMMAND MESSAGES
01037  2407              ;*********************************
01038  2407  0D          MSG    .BYTE $0D,$0D
01038  2408  0D 
01039  2409  43 42       .BYTE  'CBM RESIDENT DISASSEMBLER'
01040  2422  20 56       .BYTE  ' V080282'
01041  242A  0D          .BYTE  $0D
01042  242B  28 43       .BYTE  '(C) 1982 BY COMMODORE '
01043  2441  42 55       .BYTE  'BUSINESS MACHINES'
01044  2452  0D          .BYTE  $0D
01045  2453  00          .BYTE  0
01046  2454              ;*********************************
01047  2454  0D          MSF1   .BYTE $0D
01048  2455  50 52       .BYTE  'PROGRAM FILE (CR OR NAME):'
01049  246F  00          .BYTE  0
01050  2470  0D          MSF2   .BYTE $0D
01051  2471  50 52       .BYTE  'PROGRAM ADDRESS: $'
01052  2483  00          .BYTE  0
01053  2484              ;*********************************
01054  2484  0D          MSG1   .BYTE $0D
01055  2485  45 44       .BYTE  'EDITOR64 FILE (CR OR NAME):'
01056  24A0  00          .BYTE  0
01057  24A1              ;*********************************
01058  24A1  2C 53       WRITE  .BYTE ',S,W'
01059  24A5  2C 50       PROGM  .BYTE ',P,R'
01060  24A9  49 30       INIT   .BYTE 'I0'
01061  24AB              ;*********************************
01062  24AB  0D          MSG2   .BYTE $0D
01063  24AC  48 41       .BYTE  'HARD COPY (Y/CR OR N)? '
01064  24C3  00          .BYTE  0
01065  24C4              ;*********************************
01066  24C4  0D          MSD1   .BYTE $0D
01067  24C5  53 54       .BYTE  'START ADDRESS :$'
01068  24D5  00          .BYTE  0
01069  24D6              ;*********************************
01070  24D6  0D          MSD2   .BYTE $0D
01071  24D7  45 4E       .BYTE  'END ADDRESS :$'
01072  24E5  00          .BYTE  0
01073  24E6              ;*********************************
01074  24E6  0D          MSD4   .BYTE $0D
01075  24E7  41 44       .BYTE  'ADDRESS OFFSET (OR CR):$'
01076  24FF  00          .BYTE  0
01077  2500              ;*********************************
01078  2500  0D          MSD4A  .BYTE $0D
01079  2501  41 44       .BYTE  'ADDRESS OFFSET :$'
01080  2512  00          .BYTE  0
01081  2513              ;*********************************
01082  2513  0D          MSD5   .BYTE $0D
01083  2514  57 49       .BYTE  'WINDOW OUTPUT(Y OR N/CR)? '
01084  252E  00          .BYTE  0






DISASS128.ASM......PAGE 0023

LINE# LOC   CODE        LINE


01085  252F              ;*********************************
01086  252F  0D          MSR1   .BYTE $0D
01087  2530  52 45       .BYTE  'RELATIVE BRANCH TO LABEL '
01088  2549  28 59       .BYTE  '(Y/CR OR N)? '
01089  2556  00          .BYTE  0
01090  2557              ;*********************************
01091  2557  0D          MSB1   .BYTE $0D
01092  2558  42 49              .BYTE 'BIT INSTRUCTION CODING'
01093  256E  0D                 .BYTE $0D,$0D
01093  256F  0D 
01094  2570  30 2F              .BYTE '0/CR STANDARD',$0D
01094  257D  0D 
01095  257E  31 20              .BYTE '1     $2C ABS',$0D
01095  258B  0D 
01096  258C  32 20              .BYTE '2     $24 ZP',$0D
01096  2598  0D 
01097  2599  33 20              .BYTE '3     $2C AND $24',$0D
01097  25AA  0D 
01098  25AB  0D                 .BYTE $0D
01099  25AC  45 4E              .BYTE 'ENTER BIT CODE: '
01100  25BC  00                 .BYTE 0
01101  25BD              ;*********************************
01102  25BD  0D          MSAOP  .BYTE $0D
01103  25BE  44 41       .BYTE  'DATA TABLE FILE (CR OR NAME):'
01104  25DB  00          .BYTE  0
01105  25DC  0D          MSA1   .BYTE $0D
01106  25DD  4E 55       .BYTE  'NUMBER OF DATA TABLES (OR CR) :$'
01107  25FD  00          .BYTE  0
01108  25FE  0D          MSA2   .BYTE $0D
01109  25FF  54 41       .BYTE  'TABLE START ADDRESS :$'
01110  2615  00          .BYTE  0
01111  2616  0D          MSA3   .BYTE $0D
01112  2617  54 41       .BYTE  'TABLE END ADDRESS :$'
01113  262B  00          .BYTE  0
01114  262C  0D          MSG5   .BYTE $0D,$0D
01114  262D  0D 
01115  262E  44 49              .BYTE 'DISASSEMBLY OPTIONS'
01116  2641  0D                 .BYTE $0D,$0D
01116  2642  0D 
01117  2643  30 20              .BYTE '0 ASCII',$0D
01117  264A  0D 
01118  264B  31 20              .BYTE '1 BYTE',$0D
01118  2651  0D 
01119  2652  32 20              .BYTE '2 WORD',$0D
01119  2658  0D 
01120  2659  33 20              .BYTE '3 DBYTE',$0D
01120  2660  0D 
01121  2661  34 20              .BYTE '4 WORD-1',$0D
01121  2669  0D 
01122  266A  53 20              .BYTE 'S SKIP ADDRESS RANGE',$0D
01122  267E  0D 
01123  267F  45 4E              .BYTE 'ENTER DISASSEMBLY CODE: '
01124  2697  00                 .BYTE 0
01125  2698              ;*********************************
01126  2698  0D          MSB4   .BYTE $0D






DISASS128.ASM......PAGE 0024

LINE# LOC   CODE        LINE


01127  2699  4C 41       .BYTE  'LABLE GENERATION (Y/CR OR N)? '
01128  26B7  00          .BYTE  0
01129  26B8              ;*********************************
01130  26B8  0D          MSB5   .BYTE $0D
01131  26B9  46 4F       .BYTE  'FORMATED LISTING (Y/CR OR N)? '
01132  26D7  00          .BYTE  0
01133  26D8              ;*********************************
01134  26D8              ;.FIL 0:UTIL.ASM
01135  26D8              ;*********************************
01136  26D8              ;.END
01137  26D8              ;*********************************
01138  26D8              ; FILE UTIL.ASM
01139  26D8              ;*********************************
01140  26D8              ;
01141  26D8              ;        DISASSEMBLER128
01142  26D8              ;    SYMBOLIC DISASSEMBLER
01143  26D8              ;       BY DENTON MARLOWE
01144  26D8              ;
01145  26D8              ;  (C)1986 BY DENTON MARLOWE
01146  26D8              ;
01147  26D8              ;*********************************
01148  26D8              ;      *** UTILITIES ***
01149  26D8              ;*********************************
01150  26D8              ; CHECK LINE COUNT FOR OUTPUT FILE
01151  26D8              ;*********************************
01152  26D8  AD 31 1C    LINECK LDA PASS
01153  26DB  CD 34 1C           CMP CPASS
01154  26DE  D0 36              BNE LINECO
01155  26E0  AD 38 1C           LDA DEVICE
01156  26E3  29 08              AND #$08
01157  26E5  F0 2F              BEQ LINECO
01158  26E7              ;*********************************
01159  26E7              ; CLOSE SOURCE FILE AND OPEN NEXT
01160  26E7              ;*********************************
01161  26E7  38                 SEC
01162  26E8  AD DF 1C           LDA LINEFL
01163  26EB  E9 20              SBC #$20
01164  26ED  8D 70 1C           STA TEMP
01165  26F0  AD E0 1C           LDA LINEFL+1
01166  26F3  E9 03              SBC #$03
01167  26F5  0D 70 1C           ORA TEMP
01168  26F8  90 1C              BCC LINECO
01169  26FA  EA                 NOP
01170  26FB  EA                 NOP
01171  26FC  EA                 NOP
01172  26FD  20 A5 2C           JSR EFILE
01173  2700  A9 08              LDA #$08
01174  2702  20 C3 FF           JSR CLOSE
01175  2705  20 DA 21           JSR OFILE
01176  2708  A9 00              LDA #$00
01177  270A  8D DF 1C           STA LINEFL
01178  270D  8D E0 1C           STA LINEFL+1
01179  2710  20 8F 2C           JSR ORGIN
01180  2713  20 B5 2C           JSR COMENT
01181  2716  60          LINECO RTS






DISASS128.ASM......PAGE 0025

LINE# LOC   CODE        LINE


01182  2717              ;*********************************
01183  2717              ;  DISK ERROR CHECK
01184  2717              ;*********************************
01185  2717  A9 08       DISERR LDA #$08        ;DEV #8
01186  2719  85 BA              STA $BA         ;PUT IN DEV TABLE
01187  271B  20 B4 FF           JSR $FFB4       ;SEND TALK
01188  271E  A9 6F              LDA #$6F        ;SECONDARY ADDRESS
01189  2720  85 B9              STA $B9         ;PUT IN TABLE
01190  2722  20 96 FF           JSR $FF96       ;SEND SEC
01191  2725  20 A5 FF           JSR $FFA5       ;GET FIRST BYTE
01192  2728  C9 30              CMP #$30        ;IS IT A ZERO
01193  272A  D0 0C              BNE DLOOC       ;IF NOT ZERO ERROR
01194  272C  20 A5 FF    DLOOE  JSR $FFA5       ;GET BYTE
01195  272F  C9 0D              CMP #$0D        ;IS IT CR?
01196  2731  D0 F9              BNE DLOOE       ;GET NEXT BYTE
01197  2733  20 AB FF           JSR $FFAB       ;UNTALK
01198  2736  18                 CLC             ;NO ERROR FLAG
01199  2737  60                 RTS             ;RETURN
01200  2738              ;*********************************
01201  2738              ; PRINT DISK ERROR
01202  2738              ;*********************************
01203  2738  48          DLOOC  PHA             ;STACK BYTE
01204  2739  A9 0D              LDA #$0D        ;ASCII CR
01205  273B  20 D2 FF           JSR CHROUT      ;PRINT IT
01206  273E  68                 PLA             ;GET BYTE
01207  273F  20 D2 FF           JSR CHROUT      ;PRINT IT
01208  2742  20 A5 FF    DLOOA  JSR $FFA5       ;GET NEXT BYTE
01209  2745  20 D2 FF           JSR CHROUT      ;PRINT IT
01210  2748  C9 0D              CMP #$0D        ;IS IT CR
01211  274A  D0 F6              BNE DLOOA       ;GET NEXT BYTE
01212  274C  20 AB FF           JSR $FFAB       ;UNTALK
01213  274F  38                 SEC             ;SET ERROR FLAG
01214  2750  60                 RTS             ;RETURN
01215  2751              ;*********************************
01216  2751              ; START NEW LINE AND INC COUNT
01217  2751              ;*********************************
01218  2751  EE 77 1C    NEWLIN INC LINECT
01219  2754  D0 03              BNE *+5
01220  2756  EE 78 1C           INC LINECT+1
01221  2759  EE DF 1C           INC LINEFL
01222  275C  D0 03              BNE *+5
01223  275E  EE E0 1C           INC LINEFL+1
01224  2761  20 47 2D           JSR CRLF
01225  2764  AD 38 1C           LDA DEVICE
01226  2767  29 04              AND #$04
01227  2769  F0 03              BEQ NEWEXT
01228  276B  20 C0 28           JSR NEXLIN
01229  276E  60          NEWEXT RTS
01230  276F              ;*********************************
01231  276F              ; INPUT UTILITIES
01232  276F              ;*********************************
01233  276F              ; INPUT STRING ROUTINE
01234  276F              ;*********************************
01235  276F  A0 00       INSTNG LDY #$00
01236  2771  20 CF FF    INSTN1 JSR CHRIN






DISASS128.ASM......PAGE 0026

LINE# LOC   CODE        LINE


01237  2774  99 7B 1C           STA BUF,Y
01238  2777  C8                 INY
01239  2778  C9 0D              CMP #$0D
01240  277A  D0 F5              BNE INSTN1
01241  277C  88                 DEY
01242  277D  60                 RTS
01243  277E              ;*********************************
01244  277E              ; INPUT HEX CHAR STRING
01245  277E              ;*********************************
01246  277E  A9 00       GETWRD LDA #$00
01247  2780  8D 6E 1C           STA ADRS
01248  2783  8D 6F 1C           STA ADRS+1
01249  2786  20 6F 27           JSR INSTNG
01250  2789  88                 DEY
01251  278A  30 15              BMI INEND
01252  278C              ;*********************************
01253  278C              ; PROCESS INPUT
01254  278C              ;*********************************
01255  278C  20 A2 27           JSR GETBYT
01256  278F  AD 70 1C           LDA TEMP
01257  2792  8D 6E 1C           STA ADRS
01258  2795  88                 DEY
01259  2796  30 09              BMI INEND
01260  2798  20 A2 27           JSR GETBYT
01261  279B  AD 70 1C           LDA TEMP
01262  279E  8D 6F 1C           STA ADRS+1
01263  27A1  60          INEND  RTS
01264  27A2              ;*********************************
01265  27A2              ; COVERT BUFFER INTO BYTES
01266  27A2              ;*********************************
01267  27A2  B9 7B 1C    GETBYT LDA BUF,Y
01268  27A5  20 BF 27           JSR BINARY
01269  27A8  8D 70 1C           STA TEMP
01270  27AB  88                 DEY
01271  27AC  30 10              BMI INENX
01272  27AE  B9 7B 1C           LDA BUF,Y
01273  27B1  20 BF 27           JSR BINARY
01274  27B4  0A                 ASL A
01275  27B5  0A                 ASL A
01276  27B6  0A                 ASL A
01277  27B7  0A                 ASL A
01278  27B8  0D 70 1C           ORA TEMP
01279  27BB  8D 70 1C           STA TEMP
01280  27BE  60          INENX  RTS
01281  27BF              ;*********************************
01282  27BF              ; CONVERT A INTO HEX NIBBLE
01283  27BF              ;*********************************
01284  27BF  38          BINARY SEC
01285  27C0  E9 30              SBC #'0'
01286  27C2  90 0E              BCC NOHEX
01287  27C4  C9 0A              CMP #$0A
01288  27C6  90 0C              BCC YSHEX
01289  27C8  E9 07              SBC #$07
01290  27CA  C9 10              CMP #$10
01291  27CC  B0 04              BCS NOHEX






DISASS128.ASM......PAGE 0027

LINE# LOC   CODE        LINE


01292  27CE  C9 0A              CMP #$0A
01293  27D0  B0 02              BCS YSHEX
01294  27D2  38          NOHEX  SEC
01295  27D3  60                 RTS
01296  27D4  18          YSHEX  CLC
01297  27D5  60                 RTS
01298  27D6              ;*********************************
01299  27D6              ; GET OPTION (CR/Y OR N): Y=C=0
01300  27D6              ;*********************************
01301  27D6  20 CF FF    CRYS   JSR CHRIN
01302  27D9  C9 59              CMP #'Y'
01303  27DB  F0 11              BEQ CRYS1
01304  27DD  C9 0D              CMP #$0D
01305  27DF  F0 0D              BEQ CRYS1
01306  27E1  D0 0D              BNE CRNO1
01307  27E3              ;*********************************
01308  27E3              ; GET OPTION (Y OR CR/N): Y=C=0
01309  27E3              ;*********************************
01310  27E3  20 CF FF    CRNO   JSR CHRIN
01311  27E6  C9 4E              CMP #'N'
01312  27E8  F0 06              BEQ CRNO1
01313  27EA  C9 0D              CMP #$0D
01314  27EC  F0 02              BEQ CRNO1
01315  27EE  18          CRYS1  CLC
01316  27EF  60                 RTS
01317  27F0  38          CRNO1  SEC
01318  27F1  60                 RTS
01319  27F2              ;*********************************
01320  27F2              ; PRINT UTILITES
01321  27F2              ;*********************************
01322  27F2              ; PRINT WORD MSB IN Y LSB IN A
01323  27F2              ;*********************************
01324  27F2  48          PRBYTS PHA             ;PUT A ON STACK
01325  27F3  98                 TYA             ;PUT HIH BYTE IN A
01326  27F4  20 F8 27           JSR PRBYT       ;PRINT MSB
01327  27F7  68                 PLA             ;GET LSB
01328  27F8              ;*********************************
01329  27F8              ; PRINT BYTE IN A
01330  27F8              ;*********************************
01331  27F8  48          PRBYT  PHA             ;PUT BYTE ON STACK
01332  27F9  4A                 LSR A           ;4 RIGHT SHIFTS
01333  27FA  4A                 LSR A           ;TO MOVE HIGH
01334  27FB  4A                 LSR A           ;NIBBLE TO LOW
01335  27FC  4A                 LSR A           ;NIB WITH HIGH 0'S
01336  27FD  A8                 TAY             ;USE AS POINTER
01337  27FE  B9 64 29           LDA HEXA,Y      ;GET ASCII
01338  2801  20 64 28           JSR PCHAR       ;PRINT
01339  2804  68                 PLA             ;PULL BYTE OUT
01340  2805  29 0F              AND #$0F        ;MASK HIGH NIBBLE
01341  2807  A8                 TAY             ;USE AS POINTER
01342  2808  B9 64 29           LDA HEXA,Y      ;GET ASCII
01343  280B  4C 64 28           JMP PCHAR       ;PRINT
01344  280E              ;*********************************
01345  280E              ; STRING OUTPUT ROUTINE
01346  280E              ;*********************************






DISASS128.ASM......PAGE 0028

LINE# LOC   CODE        LINE


01347  280E  85 FB       STRPNT STA ZEROUR      ;POINTER TO
01348  2810  84 FC              STY ZEROUR+1    ;MESSAGE
01349  2812  A0 00              LDY #$00        ;OFFSET
01350  2814  B1 FB       SOUT   LDA (ZEROUR),Y  ;GET CHAR
01351  2816  F0 06              BEQ SEXIT       ;IF ZERO EXIT
01352  2818  20 64 28           JSR PCHAR       ;PRINT
01353  281B  C8                 INY             ;INC OFFSET
01354  281C  D0 F6              BNE SOUT        ;LOOP
01355  281E  60          SEXIT  RTS             ;RETURN
01356  281F              ;*********************************
01357  281F              ; PRINT DEC NUMBER (0000)
01358  281F              ;*********************************
01359  281F  86 FB       PRTPAG STX ZEROUR      ;LOW  BYTE NUM
01360  2821  85 FC              STA ZEROUR+1    ;HIGH BYTE NUM
01361  2823  A2 03              LDX #$03        ;4 CHARS
01362  2825  8E 72 1C           STX SAVX        ;SAVE COUNT
01363  2828  D0 09              BNE PRTNU1      ;BRANCH
01364  282A              ;*********************************
01365  282A              ; PRINT DEC NUMBER (00000)
01366  282A              ;*********************************
01367  282A  86 FB       PRTNUM STX ZEROUR      ;LOW  BYTE NUM
01368  282C  85 FC              STA ZEROUR+1    ;HIGH BYTE NUM
01369  282E  A2 04              LDX #$04        ;5 CHARS
01370  2830  8E 72 1C           STX SAVX        ;SAVE COUNT
01371  2833              ;*********************************
01372  2833              ; PRINT DEC NUMBER AND LEADING 0
01373  2833              ;*********************************
01374  2833  AE 72 1C    PRTNU1 LDX SAVX
01375  2836  A0 30              LDY #$30
01376  2838  D0 01              BNE PRTNU3
01377  283A  C8          PRTNU2 INY 
01378  283B  38          PRTNU3 SEC 
01379  283C  A5 FB              LDA ZEROUR
01380  283E  FD 74 29           SBC CONST0,X
01381  2841  85 FB              STA ZEROUR
01382  2843  A5 FC              LDA ZEROUR+1
01383  2845  FD 79 29           SBC CONST1,X
01384  2848  85 FC              STA ZEROUR+1
01385  284A  B0 EE              BCS PRTNU2
01386  284C  A5 FB              LDA ZEROUR
01387  284E  7D 74 29           ADC CONST0,X
01388  2851  85 FB              STA ZEROUR
01389  2853  A5 FC              LDA ZEROUR+1
01390  2855  7D 79 29           ADC CONST1,X
01391  2858  85 FC              STA ZEROUR+1
01392  285A  98                 TYA
01393  285B  20 64 28           JSR PCHAR
01394  285E  CE 72 1C           DEC SAVX
01395  2861  10 D0              BPL PRTNU1
01396  2863  60                 RTS
01397  2864              ;*********************************
01398  2864              ;  OUTPUT CHAR TO OPEN CHANNEL
01399  2864              ;*********************************
01400  2864  48          PCHAR  PHA             ;SAVE CHAR
01401  2865  AD 38 1C           LDA DEVICE      ;GET FILE FLAG






DISASS128.ASM......PAGE 0029

LINE# LOC   CODE        LINE


01402  2868  29 08              AND #$08        ;CHECK FOR DISK
01403  286A  F0 0D              BEQ PRIN        ;IF NONE BRANCH
01404  286C  A2 08              LDX #$08        ;DISK FILE #1
01405  286E  20 C9 FF           JSR CHKOUT      ;FILE IS OUTPUT
01406  2871  68                 PLA             ;GET CHAR
01407  2872  48                 PHA             ;RESAVE CHAR
01408  2873  20 D2 FF           JSR CHROUT      ;OUTPUT TO DISK
01409  2876  20 CC FF           JSR CLRCHN      ;RESET OUTPUT
01410  2879  AD 38 1C    PRIN   LDA DEVICE      ;GET DEVICE FLAG
01411  287C  29 04              AND #$04        ;CHECK FOR PRINTER
01412  287E  F0 0D              BEQ SCREN       ;IF NOT BRANCH
01413  2880  A2 04              LDX #$04        ;PRINT FILE #4
01414  2882  20 C9 FF           JSR CHKOUT      ;FILE IS OUTPUT
01415  2885  68                 PLA             ;GET CHAR
01416  2886  48                 PHA             ;RESAVE CHAR
01417  2887  20 D2 FF           JSR CHROUT      ;OUTPUT TO PRINTER
01418  288A  20 CC FF           JSR CLRCHN      ;RESET OUTPUT
01419  288D  AD 38 1C    SCREN  LDA DEVICE      ;GET DEVICE FLAG
01420  2890  29 03              AND #$03        ;CHECK FOR SCREEN
01421  2892  F0 05              BEQ PEXIT       ;IF NOT BRANCH
01422  2894  68                 PLA             ;GET CHAR
01423  2895  48                 PHA             ;RESAVE CHAR
01424  2896  20 D2 FF           JSR CHROUT      ;OUTPUT TO SCREEN
01425  2899  68          PEXIT  PLA             ;GET CHAR
01426  289A  60                 RTS             ;RETURN
01427  289B              ;*********************************
01428  289B              ; PRINTER OUTPUT ROUTINES
01429  289B              ;*********************************
01430  289B              ; FINISH OUT PAGE WITH CR
01431  289B              ;*********************************
01432  289B  20 AE 28    FINISH JSR CRLFPR      ;PRINT CR
01433  289E  EE 76 1C           INC LISTCT      ;INC LINE COUNT
01434  28A1  AD 76 1C           LDA LISTCT      ;GET COUNT
01435  28A4  C9 42              CMP #$42        ;66 LINES
01436  28A6  D0 F3              BNE FINISH      ;IF NOT MORE
01437  28A8  A9 00              LDA #$00        ;ZERO BYTE
01438  28AA  8D 76 1C           STA LISTCT      ;RESET COUNT
01439  28AD  60                 RTS             ;RETURN
01440  28AE              ;*********************************
01441  28AE              ; PRINT CR TO PRINTER
01442  28AE              ;*********************************
01443  28AE  A9 04       CRLFPR LDA #$04        ;DEVICE #4
01444  28B0  8D 38 1C           STA DEVICE      ;SET PRINTER
01445  28B3  20 47 2D           JSR CRLF        ;CR
01446  28B6  AD 39 1C           LDA OUTPUT      ;GET DEVICE
01447  28B9  8D 38 1C           STA DEVICE      ;RESET DEVICE
01448  28BC  60                 RTS             ;RETURN
01449  28BD              ;*********************************
01450  28BD              ; START NEWLINE AND CHECK COUNT
01451  28BD              ;*********************************
01452  28BD  20 AE 28    NEXPTR JSR CRLFPR      ;PRINT CR
01453  28C0  EE 76 1C    NEXLIN INC LISTCT      ;INC LINE COUNT
01454  28C3  AD 76 1C           LDA LISTCT      ;GET COUNT
01455  28C6  C9 3C              CMP #$3C        ;48 LINES
01456  28C8  D0 45              BNE LINEOK      ;IF NOT BRANCH






DISASS128.ASM......PAGE 0030

LINE# LOC   CODE        LINE


01457  28CA  20 9B 28           JSR FINISH      ;FINISH PAGE
01458  28CD              ;*********************************
01459  28CD              ; START NEW PAGE WITH HEADING
01460  28CD              ;*********************************
01461  28CD  AD 38 1C    HEADER LDA DEVICE      ;CHECK DEVICE
01462  28D0  29 04              AND #$04        ;PRINTER?
01463  28D2  F0 3B              BEQ LINEOK      ;IF NOT EXIT
01464  28D4  20 BD 28           JSR NEXPTR      ;NEXT LINE
01465  28D7  A9 04              LDA #$04        ;DEVICE #4
01466  28D9  8D 38 1C           STA DEVICE      ;SET DEVICE
01467  28DC  A9 7E              LDA #<XTITLE    ;HEADER
01468  28DE  A0 29              LDY #>XTITLE    ;
01469  28E0  20 0E 28           JSR STRPNT      ;PRINT IT
01470  28E3              ;*********************************
01471  28E3              ; PRINT PAGE COUNT AND HEADER
01472  28E3              ;*********************************
01473  28E3  AE 74 1C           LDX PAGECT
01474  28E6  AD 75 1C           LDA PAGECT+1
01475  28E9  20 1F 28           JSR PRTPAG
01476  28EC  20 BD 28           JSR NEXPTR
01477  28EF  20 BD 28           JSR NEXPTR
01478  28F2  A9 04              LDA #$04
01479  28F4  8D 38 1C           STA DEVICE
01480  28F7  A9 9A              LDA #<LTITLE
01481  28F9  A0 29              LDY #>LTITLE
01482  28FB  20 0E 28           JSR STRPNT
01483  28FE  20 BD 28           JSR NEXPTR
01484  2901              ;*********************************
01485  2901              ; INC PAGE COUNT
01486  2901              ;*********************************
01487  2901  EE 74 1C           INC PAGECT
01488  2904  D0 03              BNE PAGER1
01489  2906  EE 75 1C           INC PAGECT+1
01490  2909  20 BD 28    PAGER1 JSR NEXPTR
01491  290C  20 BD 28           JSR NEXPTR
01492  290F  60          LINEOK RTS 
01493  2910              ;*********************************
01494  2910              ; SYMBOL TABLE ROUTINES
01495  2910              ;*********************************
01496  2910              ; START NEWLINE AND CHECK COUNT
01497  2910              ;*********************************
01498  2910  20 AE 28    NEXPTS JSR CRLFPR      ;PRINT CR
01499  2913  EE 76 1C           INC LISTCT      ;INC LINE COUNT
01500  2916  AD 76 1C           LDA LISTCT      ;GET COUNT
01501  2919  C9 3C              CMP #$3C        ;48 LINES
01502  291B  D0 1D              BNE HEADOK      ;IF NOT BRANCH
01503  291D  20 9B 28           JSR FINISH      ;FINISH PAGE
01504  2920              ;*********************************
01505  2920              ; START NEW PAGE WITH HEADING
01506  2920              ;*********************************
01507  2920  20 10 29    HEADES JSR NEXPTS      ;NEXT LINE
01508  2923  A9 B7              LDA #<XTITLS    ;HEADER
01509  2925  A0 29              LDY #>XTITLS    ;
01510  2927  20 0E 28           JSR STRPNT      ;PRINT IT
01511  292A  20 10 29           JSR NEXPTS






DISASS128.ASM......PAGE 0031

LINE# LOC   CODE        LINE


01512  292D  20 10 29           JSR NEXPTS
01513  2930  A9 C4              LDA #<LTITLS
01514  2932  A0 29              LDY #>LTITLS
01515  2934  20 0E 28           JSR STRPNT
01516  2937  20 10 29           JSR NEXPTS
01517  293A  60          HEADOK RTS
01518  293B              ;*********************************
01519  293B              ; CHECK FOR NEW PAGE FOR SYMBOL
01520  293B              ;*********************************
01521  293B  AD 76 1C    HEADSY LDA LISTCT
01522  293E  C9 35              CMP #$35
01523  2940  B0 06              BCS HEADFX
01524  2942  20 10 29           JSR NEXPTS
01525  2945  4C 10 29           JMP NEXPTS
01526  2948  4C 9B 28    HEADFX JMP FINISH
01527  294B              ;*********************************
01528  294B              ; SCREEN UTILITES
01529  294B              ;*********************************
01530  294B  AD 38 1C    SCROFF LDA DEVICE
01531  294E  29 04              AND #$04
01532  2950  F0 08              BEQ SCRNO1
01533  2952  AD 11 D0           LDA VICREG
01534  2955  29 EF              AND #$EF
01535  2957  8D 11 D0           STA VICREG
01536  295A  60          SCRNO1 RTS
01537  295B              ;*********************************
01538  295B  AD 11 D0    SCRON  LDA VICREG
01539  295E  09 10              ORA #$10
01540  2960  8D 11 D0           STA VICREG
01541  2963  60                 RTS
01542  2964              ;*********************************
01543  2964              ; HEX-TO-ASCII TABLE
01544  2964              ;*********************************
01545  2964  30 31       HEXA   .BYTE '0123456789ABCDEF'
01546  2974              ;*********************************
01547  2974              ; CONSTANTS FOR PRTNUM ROUTINE
01548  2974              ;*********************************
01549  2974  01          CONST0 .BYTE $01,$0A,$64,$E8,$10
01549  2975  0A 
01549  2976  64 
01549  2977  E8 
01549  2978  10 
01550  2979  00          CONST1 .BYTE $00,$00,$00,$03,$27
01550  297A  00 
01550  297B  00 
01550  297C  03 
01550  297D  27 
01551  297E              ;*********************************
01552  297E              ; PAGE TITLE
01553  297E              ;*********************************
01554  297E  44 49       XTITLE .BYTE 'DISASSEMBLER128.......PAGE '
01555  2999  00                 .BYTE $00
01556  299A  4C 49       LTITLE .BYTE 'LINE# LOC   CODE        LINE'
01557  29B6  00                 .BYTE $00
01558  29B7              ;********************************






DISASS128.ASM......PAGE 0032

LINE# LOC   CODE        LINE


01559  29B7              ; SYMBOL PAGE TITLE
01560  29B7              ;********************************
01561  29B7  53 59       XTITLS .BYTE 'SYMBOL TABLE',0
01561  29C3  00 
01562  29C4  53 59       LTITLS .BYTE 'SYMBOL VALUE',0
01562  29D0  00 
01563  29D1              ;*********************************
01564  29D1              ;.FIL 0:MODE.ASM
01565  29D1              ;*********************************
01566  29D1              ;.END
01567  29D1              ;*********************************
01568  29D1              ; FILE MODE.ASM
01569  29D1              ;*********************************
01570  29D1              ;
01571  29D1              ;        DISASSEMBLER128
01572  29D1              ;    SYMBOLIC DISASSEMBLER
01573  29D1              ;       BY DENTON MARLOWE
01574  29D1              ;
01575  29D1              ;  (C)1986 BY DENTON MARLOWE
01576  29D1              ;
01577  29D1              ;*********************************
01578  29D1              ; ADDRESSING MODE UTILITIES
01579  29D1              ;*********************************
01580  29D1              ;      DISASSEMBLE ONE LINE
01581  29D1              ;*********************************
01582  29D1  20 FF 30    DSLINE JSR DATAOP      ;CHECK FOR DATA
01583  29D4  30 3D              BMI BYTT        ;N=1 THEN FOUND
01584  29D6              ;*********************************
01585  29D6              ; CHECK BIT ZP DECODING OPTIONS
01586  29D6              ;*********************************
01587  29D6  AD CC 43           LDA BITFLG      ;CHECK BIT FLAG
01588  29D9  F0 0D              BEQ DISL        ;IF ZERO NO BIT
01589  29DB                     
01590  29DB  20 80 2D           JSR GETSL       ;GET BYTE
01591  29DE  C9 24              CMP #$24        ;ZEROPAGE BIT
01592  29E0  F0 34              BEQ BYZBIT      ;
01593  29E2  C9 2C              CMP #$2C        ;ZEROPAGE BIT
01594  29E4  F0 55              BEQ BYABIT      ;
01595  29E6  D0 00              BNE DISL        ;
01596  29E8              ;*********************************
01597  29E8              ; CHECK BIT ABS DECODING OPTIONS
01598  29E8              ;*********************************
01599  29E8              
01600  29E8              ;********************************
01601  29E8              ; PROCESS LINE OF CODE
01602  29E8              ;********************************
01603  29E8              DISL   = *
01604  29E8  20 80 2D           JSR GETSL       ;GET BYTE
01605  29EB  AE 31 1C           LDX PASS        ;GET PASS COUNT
01606  29EE  EC 34 1C           CPX CPASS       ;LAST
01607  29F1  F0 06              BEQ DISL1       ;IF LAST BRANCH
01608  29F3  20 C7 33           JSR OPERN1      ;IF LAST BRANCH
01609  29F6  4C 13 2A           JMP BYTT        ;NEXT INSTRUCTION
01610  29F9              ;********************************
01611  29F9              ; PRINT DISASSEMBLY ADDRESS






DISASS128.ASM......PAGE 0033

LINE# LOC   CODE        LINE


01612  29F9              ;********************************
01613  29F9  20 BA 33    DISL1  JSR PRTASS      ;PRINT LINE DATA
01614  29FC  20 DE 2C           JSR PRAD        ;PRINT ADDRESS
01615  29FF  20 59 2D           JSR SPACE       ;SPACE OVER
01616  2A02              ;********************************
01617  2A02              ; PRINT INSTRUCTION
01618  2A02              ;********************************
01619  2A02  20 80 2D           JSR GETSL       ;GET BYTE
01620  2A05  48                 PHA             ;STORE
01621  2A06  20 9B 33           JSR MNEMON      ;PRINT MNEMONIC
01622  2A09  20 59 2D           JSR SPACE       ;SPACE OVER
01623  2A0C  68                 PLA             ;GET BYTE
01624  2A0D  20 CF 33           JSR OPERND      ;PRINT OPERAND
01625  2A10  20 51 27    FINAL  JSR NEWLIN      ;START NEW LINE
01626  2A13  4C 5E 2D    BYTT   JMP NEXTSL      ;NEXT INSTRUCTION
01627  2A16              ;********************************
01628  2A16              ;      BIT ZP SKIP TRICK
01629  2A16              ;
01630  2A16              ; THE SKIP WILL ALWAYS INVOLVE
01631  2A16              ; A FOLLWING OPCODE THAT IS EITHER
01632  2A16              ; AN OPCODE WITH NO OPERAND OR
01633  2A16              ; OR ONE BYTE OPERAND LIKE A BRANCH
01634  2A16              ; OR ZERO PAGE INSTRUCTION
01635  2A16              ;*********************************
01636  2A16              BYZBIT = *
01637  2A16  AD CC 43           LDA BITFLG
01638  2A19  29 02              AND #$02
01639  2A1B  F0 CB              BEQ DISL
01640  2A1D              ;********************************
01641  2A1D              ;      TO SKIP OR NOT
01642  2A1D              ;*********************************
01643  2A1D  20 77 2D           JSR INCSL       ;INC TO OPERAND
01644  2A20  20 80 2D           JSR GETSL       ;GET OPERAND
01645  2A23  48                 PHA
01646  2A24  20 98 2D           JSR DECSL
01647  2A27  68                 PLA
01648  2A28                                     ;CHECK FOR SKIP
01649  2A28  C9 10              CMP #$10        ;BPL SKIP
01650  2A2A  F0 40              BEQ B0000
01651  2A2C  C9 18              CMP #$18        ;CLC SKIP
01652  2A2E  F0 3C              BEQ B0000
01653  2A30  C9 30              CMP #$30        ;BMI
01654  2A32  F0 38              BEQ B0000
01655  2A34  C9 38              CMP #$38        ;SEC
01656  2A36  F0 34              BEQ B0000
01657  2A38              ;
01658  2A38  4C E8 29           JMP DISL
01659  2A3B              ;********************************
01660  2A3B              ;      BIT ABS SKIP TRICK
01661  2A3B              ;*********************************
01662  2A3B              BYABIT = *
01663  2A3B  AD CC 43           LDA BITFLG
01664  2A3E  29 01              AND #$01
01665  2A40  F0 A6              BEQ DISL
01666  2A42              ;********************************






DISASS128.ASM......PAGE 0034

LINE# LOC   CODE        LINE


01667  2A42              ;      TO SKIP OR NOT
01668  2A42              ;*********************************
01669  2A42  20 77 2D           JSR INCSL       ;INC TO OPERAND
01670  2A45  20 80 2D           JSR GETSL       ;GET OPERAND
01671  2A48  48                 PHA
01672  2A49  20 98 2D           JSR DECSL
01673  2A4C  68                 PLA
01674  2A4D                                     ;CHECK FOR SKIP
01675  2A4D  C9 A1              CMP #$A1        ;LDY A IMMEDIATE SKIP
01676  2A4F  F0 1B              BEQ B0000
01677  2A51  C9 A2              CMP #$A2        ;LDA A IMMEDIATE SKIP
01678  2A53  F0 17              BEQ B0000
01679  2A55  C9 A9              CMP #$A9        ;LDX A IMMEDIATE SKIP
01680  2A57  F0 13              BEQ B0000
01681  2A59                     
01682  2A59  C9 65              CMP #$65        ;ADC ZP
01683  2A5B  F0 0F              BEQ B0000
01684  2A5D                     
01685  2A5D  C9 85              CMP #$85        ;STA ZP
01686  2A5F  F0 0B              BEQ B0000
01687  2A61                     
01688  2A61  C9 B1              CMP #$B1        ;LDA (ZP),Y
01689  2A63  F0 07              BEQ B0000
01690  2A65                     
01691  2A65  C9 E6              CMP #$E6        ;INC
01692  2A67  F0 03              BEQ B0000
01693  2A69              ;
01694  2A69  4C E8 29           JMP DISL
01695  2A6C              ;********************************
01696  2A6C              ;      PRINTING PASS?
01697  2A6C              ;*********************************
01698  2A6C              B0000  = *
01699  2A6C  AD 31 1C           LDA PASS        ;GET PASS COUNT
01700  2A6F  CD 34 1C           CMP CPASS       ;LAST
01701  2A72  D0 9F              BNE BYTT        ;IF NOT NEXT BYTE
01702  2A74              ;*********************************
01703  2A74              ;  PRINT LINE DATA FOR .BYTE
01704  2A74              ;*********************************
01705  2A74  20 B5 2C           JSR COMENT      ;COMENT LINE
01706  2A77              ;
01707  2A77  20 5B 2E           JSR PRTDAT      ;PRINT LINE DATA
01708  2A7A  20 E8 2D           JSR PRTONE      ;ONE BYTE
01709  2A7D  20 DE 2C           JSR PRAD        ;PRINT ADDRESS
01710  2A80  20 59 2D           JSR SPACE       ;SPACE OVER
01711  2A83  A9 B1              LDA #<MSGBIT    ;.BYTE $
01712  2A85  A0 2D              LDY #>MSGBIT    ;
01713  2A87  20 0E 28           JSR STRPNT      ;PRINT IT
01714  2A8A              ;
01715  2A8A  20 80 2D           JSR GETSL       ;GET BYTE
01716  2A8D  20 F8 27           JSR PRBYT       ;PRINT BYTE
01717  2A90              ;
01718  2A90  A9 B9              LDA #<MSGBZP    ;BIT COMMENT
01719  2A92  A0 2D              LDY #>MSGBZP    ;
01720  2A94  20 0E 28           JSR STRPNT      ;PRINT IT
01721  2A97              ;






DISASS128.ASM......PAGE 0035

LINE# LOC   CODE        LINE


01722  2A97  20 51 27           JSR NEWLIN      ;PRINT BYTE
01723  2A9A                                     ;JSR INCSL    ;INC SELECT
01724  2A9A  20 BB 2C           JSR COMET       ;COMENT LINE
01725  2A9D                                     ;JSR DECSL    ;REASET SELE
CT
01726  2A9D  4C 10 2A           JMP FINAL       ;CR AND NEXT BYTE
01727  2AA0              ;*********************************
01728  2AA0              ;BYTEXT JMP DISL1
01729  2AA0              ;*********************************
01730  2AA0              ; ADDRESSING MODE UTILITIES
01731  2AA0              ;*********************************
01732  2AA0              ;
01733  2AA0              ;*********************************
01734  2AA0              ; ANALYSIS OPERAND ROUTINES
01735  2AA0              ;*********************************
01736  2AA0              ;    BIT ZP ONE-BYTE OPERAND
01737  2AA0              ; ZERO PAGE BIT IS ALMOST ALWAYS
01738  2AA0              ;   A BIT TRICK TO SKIP THE NEXT
01739  2AA0              ;          OPCODE
01740  2AA0              ;********************************
01741  2AA0  EA          ONEBIT NOP
01742  2AA1              ;*********************************
01743  2AA1              ;      ONE-BYTE OPERAND
01744  2AA1              ;********************************
01745  2AA1  20 77 2D    ONEBYT JSR INCSL       ;INC TO BYTE
01746  2AA4  20 80 2D           JSR GETSL       ;GET BYTE
01747  2AA7  8D 64 1C           STA WORKED      ;STORE OPERAND
01748  2AAA  A9 00              LDA #$00        ;ZERO BYTE
01749  2AAC  8D 65 1C           STA WORKED+1    ;ZERO HIGH BYTE
01750  2AAF  AD 31 1C           LDA PASS        ;GET PASS COUNT
01751  2AB2  CD 32 1C           CMP IPASS       ;INTERNAL
01752  2AB5  F0 54              BEQ OPCPUT      ;TABLE OPERAND
01753  2AB7  CD 33 1C           CMP EPASS       ;EXTERNAL
01754  2ABA  F0 52              BEQ OPCSYM      ;EXTERNAL EQUATE
01755  2ABC              ;*********************************
01756  2ABC              ; OUTPUT OPERAND
01757  2ABC              ;*********************************
01758  2ABC  20 B2 37           JSR SYMOP       ;CHECK FOR SYMBOL
01759  2ABF  B0 50              BCS TWOB        ;SYMBOL FOUND
01760  2AC1  20 92 2E           JSR RANGE       ;IS IT INTERNAL
01761  2AC4  90 06              BCC ONEBY       ;GENERATE LABEL
01762  2AC6  20 24 2D           JSR DOLLAR      ;EXTERNAL
01763  2AC9  4C CF 2A           JMP ONEBX       ;PRINT ADDRESS
01764  2ACC  20 D4 2C    ONEBY  JSR PRLA        ;PRINT XX
01765  2ACF  AD 64 1C    ONEBX  LDA WORKED      ;GET OPERAND
01766  2AD2  4C F8 27           JMP PRBYT       ;PRINT BYTE
01767  2AD5              ;********************************
01768  2AD5              ;      BIT ABS TWO-BYTE OPERAND
01769  2AD5              ;********************************
01770  2AD5  EA          TWOBIT NOP
01771  2AD6              ;********************************
01772  2AD6              ;      TWO-BYTE OPERAND
01773  2AD6              ;********************************
01774  2AD6  20 77 2D    TWOBYT JSR INCSL       ;INC TO BYTE
01775  2AD9  20 80 2D           JSR GETSL       ;GET BYTE
01776  2ADC  8D 64 1C           STA WORKED      ;STORE LOW BYTE






DISASS128.ASM......PAGE 0036

LINE# LOC   CODE        LINE


01777  2ADF  20 77 2D           JSR INCSL       ;INC TO BYTE
01778  2AE2  20 80 2D           JSR GETSL       ;GET BYTE
01779  2AE5  8D 65 1C           STA WORKED+1    ;STORE HIGH BYTE
01780  2AE8  AD 31 1C           LDA PASS        ;GET PASS COUNT
01781  2AEB  CD 32 1C           CMP IPASS       ;INTERNAL
01782  2AEE  F0 1B              BEQ OPCPUT      ;TABLE OPERNAD
01783  2AF0  CD 33 1C           CMP EPASS       ;EXTERNAL
01784  2AF3  F0 19              BEQ OPCSYM      ;EXTERNAL EQUATE
01785  2AF5              ;********************************
01786  2AF5              ;  OUTPUT OPERAND
01787  2AF5              ;********************************
01788  2AF5  20 B2 37           JSR SYMOP       ;CHECK SYMBOL
01789  2AF8  B0 17              BCS TWOB        ;C=1 FOUND ONE
01790  2AFA  20 92 2E           JSR RANGE       ;IS IT INTERNAL
01791  2AFD  90 06              BCC TWOBY       ;GERNERATE LABEL
01792  2AFF  20 24 2D           JSR DOLLAR      ;EXTERNAL
01793  2B02  4C 08 2B           JMP TWOBX       ;
01794  2B05              ;********************************
01795  2B05              ;  OUTPUT OPERAND
01796  2B05              ;********************************
01797  2B05              TWOBY  =*
01798  2B05  20 D4 2C           JSR PRLA        ;PRINT XX
01799  2B08              TWOBX  = *
01800  2B08  4C 16 2D           JMP PWORKD      ;PRINT ADDRESS
01801  2B0B              OPCPUT = *
01802  2B0B  4C 09 2F           JMP PUTI        ;PUT IN TABLE
01803  2B0E              OPCSYM = *
01804  2B0E  4C B2 37           JMP SYMOP       ;CHECK EXT EQUATE
01805  2B11              TWOB   = *
01806  2B11  60                 RTS             ;RETURN
01807  2B12              ;*********************************
01808  2B12              ; ILLEGAL MODES, UNUSED OPCODES
01809  2B12              ;
01810  2B12              ; ZZZZ XX .BYTE $XX ;'Y' ;??? ILLEGAL OPCODE
01811  2B12              ;
01812  2B12              ;*********************************
01813  2B12  EE 79 1C    ILLEGL INC ERRCT       ;INC ERROR COUNT
01814  2B15  D0 03              BNE *+5         ;SKIP NEXT LINE
01815  2B17  EE 7A 1C           INC ERRCT+1     ;INC ERROR COUNT
01816  2B1A  A0 33              LDY #>MBYTE     ;.BYTE
01817  2B1C  A9 82              LDA #<MBYTE     ;
01818  2B1E  20 0E 28           JSR STRPNT      ;PRINT STRING
01819  2B21  20 24 2D           JSR DOLLAR      ;PRINT $
01820  2B24  20 80 2D           JSR GETSL       ;GET ILLEGAL BYTE
01821  2B27                     
01822  2B27              ;BEGIN REV 2017-3
01823  2B27  48                 PHA             ;PUT BYTE ON STACK
01824  2B28              ;
01825  2B28  20 F8 27           JSR PRBYT       ;PRINT IT
01826  2B2B  20 59 2D           JSR SPACE       ;SPACE OVER
01827  2B2E              ;
01828  2B2E  68                 PLA             ;POP BYTE OFF STACK
01829  2B2F  20 8A 32           JSR CASCII      ;IS IT PRINTABLE ASCII
01830  2B32  B0 18              BCS ISKIP       ;IF NOT EXIT
01831  2B34  48                 PHA             ;STACK IT






DISASS128.ASM......PAGE 0037

LINE# LOC   CODE        LINE


01832  2B35  20 59 2D           JSR SPACE       ;SPACE OVER
01833  2B38  20 1F 2D           JSR SEMIC       ;COMMENT
01834  2B3B  A9 27              LDA #'''        ;QUOTE
01835  2B3D  20 64 28           JSR PCHAR       ;PRINT IT
01836  2B40  68                 PLA             ;POP IT
01837  2B41  20 64 28           JSR PCHAR       ;PRINT IT
01838  2B44  A9 27              LDA #'''        ;QUOTE
01839  2B46  20 64 28           JSR PCHAR       ;PRINT IT
01840  2B49  20 59 2D           JSR SPACE       ;SPACE OVER
01841  2B4C              ;
01842  2B4C              ISKIP  = *
01843  2B4C              ;END REV 2017-3
01844  2B4C  A0 2D              LDY #>ILLMSG
01845  2B4E  A9 D4              LDA #<ILLMSG
01846  2B50  4C 0E 28           JMP STRPNT
01847  2B53              ;********************************
01848  2B53              ;      ACCUMULATOR MODE
01849  2B53              ;********************************
01850  2B53  A9 41       ACC    LDA #'A'        ;ASCII A
01851  2B55  4C 64 28           JMP PCHAR       ;PRINT IT
01852  2B58              ;********************************
01853  2B58              ;       IMMEDIATE MODE
01854  2B58              ;********************************
01855  2B58  20 77 2D    IMMEDT JSR INCSL       ;INC TO DATA BYTE
01856  2B5B  AE 31 1C           LDX PASS        ;GET PASS
01857  2B5E  EC 34 1C           CPX CPASS       ;LAST PASS
01858  2B61  D0 2A              BNE IMEXIT      ;EXIT
01859  2B63  A9 23              LDA #'#'        ;ASCII #
01860  2B65  20 64 28           JSR PCHAR       ;PRINT IT
01861  2B68  20 24 2D           JSR DOLLAR      ;PRINT $
01862  2B6B  20 80 2D           JSR GETSL       ;GET BYTE
01863  2B6E  48                 PHA             ;STACK IT
01864  2B6F  20 F8 27           JSR PRBYT       ;PRINT IT
01865  2B72  68                 PLA             ;POP IT
01866  2B73  20 8A 32           JSR CASCII      ;PRINTABLE ASCII
01867  2B76  B0 15              BCS IMEXIT      ;IF NOT EXIT
01868  2B78  48                 PHA             ;STACK IT
01869  2B79  20 4C 2D           JSR SPAC6       ;SPACE OVER
01870  2B7C  20 1F 2D           JSR SEMIC       ;COMMENT
01871  2B7F  A9 27              LDA #'''        ;QUOTE
01872  2B81  20 64 28           JSR PCHAR       ;PRINT IT
01873  2B84  68                 PLA             ;POP IT
01874  2B85  20 64 28           JSR PCHAR       ;PRINT IT
01875  2B88  A9 27              LDA #'''        ;QUOTE
01876  2B8A  20 64 28           JSR PCHAR       ;PRINT IT
01877  2B8D  60          IMEXIT RTS             ;EXIT
01878  2B8E              ;*********************************
01879  2B8E              ;      BIT ZERO PAGE MODE
01880  2B8E              ;*********************************
01881  2B8E  EA          ZERBIT NOP
01882  2B8F              ;*********************************
01883  2B8F              ;      ZERO PAGE MODE
01884  2B8F              ;*********************************
01885  2B8F  4C A1 2A    ZEROPG JMP ONEBYT      ;PRINT ONE BYTE
01886  2B92              ;*********************************






DISASS128.ASM......PAGE 0038

LINE# LOC   CODE        LINE


01887  2B92              ;      ZERO PAGE,X MODE
01888  2B92              ;********************************
01889  2B92  20 A1 2A    ZEROX  JSR ONEBYT      ;PRINT ONE BYTE
01890  2B95  4C 33 2D           JMP XINDEX      ;PRINT ,X
01891  2B98              ;********************************
01892  2B98              ;       ZERO PAGE,Y MODE
01893  2B98              ;********************************
01894  2B98  20 A1 2A    ZEROY  JSR ONEBYT      ;PRINT ONE BYTE
01895  2B9B  4C 3D 2D           JMP YINDEX      ;PRINT ,Y
01896  2B9E              ;*********************************
01897  2B9E              ;         BIT ABSOLUTE MODE
01898  2B9E              ;*********************************
01899  2B9E  EA          ABSBIT NOP
01900  2B9F              ;*********************************
01901  2B9F              ;         ABSOLUTE MODE
01902  2B9F              ;*********************************
01903  2B9F  20 D6 2A    ABSLUT JSR TWOBYT      ;PRINT TWO BYTE
01904  2BA2  20 98 2D           JSR DECSL       ;DEC TO SECOND
01905  2BA5  20 98 2D           JSR DECSL       ;DEC TO OPCODE
01906  2BA8  20 80 2D           JSR GETSL       ;GET BYTE
01907  2BAB  48                 PHA
01908  2BAC  20 77 2D           JSR INCSL
01909  2BAF  20 77 2D           JSR INCSL
01910  2BB2  68                 PLA
01911  2BB3  C9 4C              CMP #$4C        ;IS IT JMP
01912  2BB5  D0 0C              BNE ABSEXT      ;IF NOT EXIT
01913  2BB7  20 51 27           JSR NEWLIN      ;NEXT LINE
01914  2BBA  20 77 2D           JSR INCSL
01915  2BBD  20 BB 2C           JSR COMET       ;COMMENT LINE
01916  2BC0  20 98 2D           JSR DECSL
01917  2BC3  60          ABSEXT RTS             ;RETURN
01918  2BC4              ;*********************************
01919  2BC4              ;       ABSOLUTE,X MODE
01920  2BC4              ;********************************
01921  2BC4  20 D6 2A    ABSX   JSR TWOBYT      ;PRINT TWO BYTE
01922  2BC7  4C 33 2D           JMP XINDEX      ;PRINT ,X
01923  2BCA              ;********************************
01924  2BCA              ;       ABSOLUTE,Y MODE
01925  2BCA              ;********************************
01926  2BCA  20 D6 2A    ABSY   JSR TWOBYT      ;PRINT TWO BYTE
01927  2BCD  4C 3D 2D           JMP YINDEX      ;PRINT ,Y
01928  2BD0              ;********************************
01929  2BD0              ;       IMPLIED MODE
01930  2BD0              ;********************************
01931  2BD0  20 80 2D    IMPLID JSR GETSL       ;GET BYTE
01932  2BD3  F0 09              BEQ IMPLI1      ;BRK
01933  2BD5  C9 60              CMP #$60        ;CHECK CODE
01934  2BD7  F0 05              BEQ IMPLI1      ;RTS
01935  2BD9  C9 40              CMP #$40        ;CHECK CODE
01936  2BDB  F0 01              BEQ IMPLI1      ;RTI
01937  2BDD  60          IMPONE RTS             ;RETURN
01938  2BDE  20 51 27    IMPLI1 JSR NEWLIN      ;PRINT NEW LINE
01939  2BE1  20 77 2D           JSR INCSL
01940  2BE4  20 BB 2C           JSR COMET       ;COMMENT LINE
01941  2BE7  4C 98 2D           JMP DECSL






DISASS128.ASM......PAGE 0039

LINE# LOC   CODE        LINE


01942  2BEA              ;********************************
01943  2BEA              ;       INDIRECT MODE
01944  2BEA              ;********************************
01945  2BEA  20 29 2D    INDRCT JSR LPAREN      ;PRINT (
01946  2BED  20 D6 2A           JSR TWOBYT      ;PRINT TWO BYTE
01947  2BF0  20 2E 2D           JSR RPAREN      ;PRINT )
01948  2BF3  20 51 27           JSR NEWLIN      ;NEXT LINE
01949  2BF6  20 77 2D           JSR INCSL
01950  2BF9  20 BB 2C           JSR COMET       ;COMMENT LINE
01951  2BFC  4C 98 2D           JMP DECSL
01952  2BFF              ;********************************
01953  2BFF              ;     INDIRECT,X MODE
01954  2BFF              ;********************************
01955  2BFF  20 29 2D    INDX   JSR LPAREN      ;PRINT (
01956  2C02  20 92 2B           JSR ZEROX       ;PRINT $HH,X
01957  2C05  4C 2E 2D           JMP RPAREN      ;PRINT )
01958  2C08              ;********************************
01959  2C08              ;     INDIRECT,Y MODE
01960  2C08              ;********************************
01961  2C08  20 29 2D    INDY   JSR LPAREN      ;PRINT (
01962  2C0B  20 A1 2A           JSR ONEBYT      ;PRINT ONE BYTE
01963  2C0E  20 2E 2D           JSR RPAREN      ;PRINT )
01964  2C11  4C 3D 2D           JMP YINDEX      ;PRINT ,Y
01965  2C14              ;*********************************
01966  2C14              ;      RELATIVE MODE
01967  2C14              ;*********************************
01968  2C14  20 77 2D    RELATV JSR INCSL       ;INC BYTE POINTER
01969  2C17  AD 31 1C           LDA PASS        ;GET PASS COUNT
01970  2C1A  CD 33 1C           CMP EPASS       ;EXTERNAL
01971  2C1D  F0 44              BEQ RELSYM      ;EXIT ON EXTERNAL
01972  2C1F              ;
01973  2C1F  AD 41 1C           LDA SELECT      ;GET LOW POINTER
01974  2C22  8D 64 1C           STA WORKED      ;STORE TEMP
01975  2C25  AD 42 1C           LDA SELECT+1    ;GET HIGH POINTER
01976  2C28  8D 65 1C           STA WORKED+1    ;STORE TEMP
01977  2C2B  EE 64 1C           INC WORKED      ;ADD 1 TO ADDRESS
01978  2C2E  D0 03              BNE *+5         ;ZERO MEANS CARRY
01979  2C30  EE 65 1C           INC WORKED+1    ;INC HIGH ADDRESS
01980  2C33              ;
01981  2C33  20 80 2D           JSR GETSL       ;GET BYTE BRANCH OFFSET
01982  2C36  C9 00              CMP #$00        ;IS IT ZERO
01983  2C38  10 03              BPL FORWRD      ;IF SO BRANCH
01984  2C3A  CE 65 1C           DEC WORKED+1    ;DEC HIGH POINTER
01985  2C3D  18          FORWRD CLC             ;CLEAR CARRY FLAG
01986  2C3E  6D 64 1C           ADC WORKED      ;ADD IN OPERAND
01987  2C41  90 03              BCC RELND       ;TO SELECT ADDRES
01988  2C43  EE 65 1C           INC WORKED+1    ;AND NOW POINTS
01989  2C46  8D 64 1C    RELND  STA WORKED      ;TARGET ADDRESS
01990  2C49              ;
01991  2C49  AD 31 1C           LDA PASS        ;GET PASS COUNT
01992  2C4C  CD 32 1C           CMP IPASS       ;INTERNAL
01993  2C4F  F0 0F              BEQ RELPUT      ;ADDRESS TABLE
01994  2C51              ;
01995  2C51  20 B2 37           JSR SYMOP       ;CHECK FOR SYMBOL
01996  2C54  B0 0D              BCS RELSYM      ;C=1 SYMBOL






DISASS128.ASM......PAGE 0040

LINE# LOC   CODE        LINE


01997  2C56              ;
01998  2C56  AD 37 1C           LDA ROPT        ;CHECK OPTION
01999  2C59  C9 01              CMP #$01        ;REL TO * ?
02000  2C5B  F0 07              BEQ RELPC       ;IF SO DO IT
02001  2C5D              ;
02002  2C5D  4C 13 2D           JMP PWORK       ;PRINT ADDRESS
02003  2C60              ;
02004  2C60              RELPUT = *
02005  2C60  4C 09 2F           JMP PUTI        ;PUT IN TABLE
02006  2C63              ;
02007  2C63  60          RELSYM RTS             ;RETURN
02008  2C64              ;*********************************
02009  2C64              ; PRINT RELATIVE TO PC
02010  2C64              ;*********************************
02011  2C64  20 80 2D    RELPC  JSR GETSL       ;GET BRANCH DATA
02012  2C67  48                 PHA             ;SAVE ON STACK
02013  2C68  30 07              BMI RELNEG      ;BACKWARD ?
02014  2C6A  A9 C7              LDA #<POSREL
02015  2C6C  A0 2D              LDY #>POSREL
02016  2C6E  4C 75 2C           JMP RELPM
02017  2C71  A9 CB       RELNEG LDA #<NEGREL
02018  2C73  A0 2D              LDY #>NEGREL
02019  2C75  20 0E 28    RELPM  JSR STRPNT
02020  2C78  68                 PLA             ;GET BRANCH DATA
02021  2C79  18                 CLC             ;CLEAR CARRY
02022  2C7A  69 02              ADC #$02        ;ADD 2 FOR BRANCH
02023  2C7C  10 05              BPL RELP        ;FORWARD ?
02024  2C7E  18                 CLC             ;CLEAR CARRY
02025  2C7F  49 FF              EOR #$FF        ;COMPLMENT
02026  2C81  69 01              ADC #$01        ;ADD 1 FOR 2'S
02027  2C83  20 F8 27    RELP   JSR PRBYT       ;PRINT BRANCH
02028  2C86  20 4C 2D           JSR SPAC6       ;SPACE
02029  2C89  20 1F 2D           JSR SEMIC       ;COMMENT CHAR
02030  2C8C  4C 13 2D           JMP PWORK       ;PRINT ADDRESS
02031  2C8F              ;*********************************
02032  2C8F              ;  ORGIN LABEL
02033  2C8F              ;*********************************
02034  2C8F  20 7F 2E    ORGIN  JSR PRTOTH      ;PRINT LINE DATA
02035  2C92  A9 2A              LDA #'*'        ;PC
02036  2C94  20 64 28           JSR PCHAR       ;PRINT IT
02037  2C97  A9 3D              LDA #'='        ;EQUALS
02038  2C99  20 64 28           JSR PCHAR       ;PRINT IT
02039  2C9C  20 24 2D           JSR DOLLAR      ;ASCII $
02040  2C9F  20 0A 2D           JSR PSELEC      ;PRINT ADDRESS
02041  2CA2  4C 51 27           JMP NEWLIN      ;START NEWLINE
02042  2CA5              ;*********************************
02043  2CA5              ; END OF FILE LABLE
02044  2CA5              ;*********************************
02045  2CA5  20 B5 2C    EFILE  JSR COMENT      ;COMMENT LINE
02046  2CA8  20 7F 2E           JSR PRTOTH      ;PRINT LINE DATA
02047  2CAB  A9 CF              LDA #<MSGEND    ;END MESSAGE
02048  2CAD  A0 2D              LDY #>MSGEND
02049  2CAF  20 0E 28           JSR STRPNT      ;PRINT IT
02050  2CB2  4C 51 27           JMP NEWLIN      ;NEW LINE
02051  2CB5              ;*********************************






DISASS128.ASM......PAGE 0041

LINE# LOC   CODE        LINE


02052  2CB5              ; PRINT COMMENT LINE
02053  2CB5              ;*********************************
02054  2CB5  20 BB 2C    COMENT JSR COMET       ;PRINT COMMENT
02055  2CB8  4C 51 27           JMP NEWLIN      ;NEXT LINE
02056  2CBB              ;*********************************
02057  2CBB  20 7F 2E    COMET  JSR PRTOTH      ;PRINT LINE DATA
02058  2CBE  20 1F 2D           JSR SEMIC       ;PRINT COMMENT
02059  2CC1  AD 3B 1C           LDA FOROPT
02060  2CC4  D0 03              BNE CSHORT
02061  2CC6  A0 20              LDY #$20        ;COUNTER
02062  2CC8  2C                 .BYTE $2C
02063  2CC9  A0 10       CSHORT LDY #$10
02064  2CCB  A9 2A       COMPT  LDA #'*'        ;STAR
02065  2CCD  20 64 28           JSR PCHAR       ;PRINT CHAR
02066  2CD0  88                 DEY             ;DEC COUNTER
02067  2CD1  D0 F8              BNE COMPT       ;20 OR 10 STARS
02068  2CD3  60                 RTS             ;RETURN
02069  2CD4              ;*********************************
02070  2CD4              ;     PRINT SELECTED ADDRESS
02071  2CD4              ;*********************************
02072  2CD4  A9 58       PRLA   LDA #'X'        ;XX LABEL
02073  2CD6  20 64 28           JSR PCHAR       ;
02074  2CD9  A9 58              LDA #'X'        ;
02075  2CDB  4C 64 28           JMP PCHAR       ;
02076  2CDE              ;*********************************
02077  2CDE              ; PRINT CODE ADDRESS
02078  2CDE              ;*********************************
02079  2CDE  20 9E 37    PRAD   JSR SYM         ;CHECK FOR SYMBOLIC
02080  2CE1  B0 1F              BCS NPRAD1      ;C=1 SYMBOLIC LABEL
02081  2CE3  AD 36 1C           LDA XOPT        ;CHECK GENERATION
02082  2CE6  F0 10              BEQ P1          ;NO LABELS
02083  2CE8  20 68 2F           JSR INTCHA      ;IS ADDRESS IN TAB
02084  2CEB  B0 0B              BCS P1          ;C=1 YES
02085  2CED  AD 3B 1C           LDA FOROPT      ;CHECK FORMAT
02086  2CF0  F0 03              BEQ POVER       ;STD FORMAT
02087  2CF2  4C 59 2D           JMP SPACE       ;ONE SPACE
02088  2CF5  4C 4C 2D    POVER  JMP SPAC6       ;SPACE OVER
02089  2CF8              ;*********************************
02090  2CF8              ; PRINT ADDRESS AS LABEL
02091  2CF8              ;*********************************
02092  2CF8  20 D4 2C    P1     JSR PRLA        ;PRINT XX
02093  2CFB  20 0A 2D           JSR PSELEC      ;PRINT ADDRESS
02094  2CFE  EA                 NOP
02095  2CFF  EA                 NOP
02096  2D00  EA                 NOP
02097  2D01  60          NPRAD  RTS             ;RETURN
02098  2D02              ;*********************************
02099  2D02  AD 3B 1C    NPRAD1 LDA FOROPT
02100  2D05  D0 FA              BNE NPRAD
02101  2D07  4C 4F 38           JMP FIXSYM
02102  2D0A              ;*********************************
02103  2D0A              ; PRINT SELECT ADDRESS
02104  2D0A              ;*********************************
02105  2D0A  AD 41 1C    PSELEC LDA SELECT      ;LOW BYTE
02106  2D0D  AC 42 1C           LDY SELECT+1    ;HIGH BYTE






DISASS128.ASM......PAGE 0042

LINE# LOC   CODE        LINE


02107  2D10  4C F2 27           JMP PRBYTS      ;PRINT THEM
02108  2D13              ;*********************************
02109  2D13              ; PRINT WORKED ADDRESS WITH XX
02110  2D13              ;*********************************
02111  2D13  20 D4 2C    PWORK  JSR PRLA        ;PRINT XX
02112  2D16              ;*********************************
02113  2D16              ; PRINT WORKED ADDRESS
02114  2D16              ;*********************************
02115  2D16  AD 64 1C    PWORKD LDA WORKED      ;LOW BYTE
02116  2D19  AC 65 1C           LDY WORKED+1    ;HIGH BYTE
02117  2D1C  4C F2 27           JMP PRBYTS      ;PRINT THEM
02118  2D1F              ;********************************
02119  2D1F              ; PRINT SEMICOLON FOR COMMENT
02120  2D1F              ;********************************
02121  2D1F  A9 3B       SEMIC  LDA #';'
02122  2D21  4C 64 28           JMP PCHAR
02123  2D24              ;********************************
02124  2D24              ; PRINT DOLLAR SIGN FOR HEX
02125  2D24              ;********************************
02126  2D24  A9 24       DOLLAR LDA #'$'
02127  2D26  4C 64 28           JMP PCHAR
02128  2D29              ;********************************
02129  2D29              ; PRINT LEFT PARENTTHESES
02130  2D29              ;********************************
02131  2D29  A9 28       LPAREN LDA #'('
02132  2D2B  4C 64 28           JMP PCHAR
02133  2D2E              ;********************************
02134  2D2E              ; PRINT RIGHT PARENTTHESES
02135  2D2E              ;********************************
02136  2D2E  A9 29       RPAREN LDA #')'
02137  2D30  4C 64 28           JMP PCHAR
02138  2D33              ;********************************
02139  2D33              ; PRINT A COMMA AND AN "X"
02140  2D33              ;********************************
02141  2D33  A9 2C       XINDEX LDA #','
02142  2D35  20 64 28           JSR PCHAR
02143  2D38  A9 58              LDA #'X'
02144  2D3A  4C 64 28           JMP PCHAR
02145  2D3D              ;********************************
02146  2D3D              ; PRINT A COMMA AND A "Y"
02147  2D3D              ;********************************
02148  2D3D  A9 2C       YINDEX LDA #','
02149  2D3F  20 64 28           JSR PCHAR
02150  2D42  A9 59              LDA #'Y'
02151  2D44  4C 64 28           JMP PCHAR
02152  2D47              ;********************************
02153  2D47              ; PRINT CARRAIGE RETURN
02154  2D47              ;*********************************
02155  2D47  A9 0D       CRLF   LDA #$0D        ;ASCII CR
02156  2D49  4C 64 28           JMP PCHAR       ;PRINT
02157  2D4C              ;*********************************
02158  2D4C              ; PRINT SIX SPACES
02159  2D4C              ;*********************************
02160  2D4C  A9 05       SPAC6  LDA #$05
02161  2D4E  8D 70 1C    SPACM  STA TEMP






DISASS128.ASM......PAGE 0043

LINE# LOC   CODE        LINE


02162  2D51  20 59 2D    SPAC   JSR SPACE
02163  2D54  CE 70 1C           DEC TEMP
02164  2D57  D0 F8              BNE SPAC
02165  2D59              ;*********************************
02166  2D59              ; PRINT SPACE
02167  2D59              ;*********************************
02168  2D59  A9 20       SPACE  LDA #$20        ;ASCII SPACE
02169  2D5B  4C 64 28           JMP PCHAR       ;PRINT
02170  2D5E              ;*********************************
02171  2D5E              ; SELECT NEXT BYTE
02172  2D5E              ;*********************************
02173  2D5E  AD 42 1C    NEXTSL LDA SELECT+1
02174  2D61  CD 40 1C           CMP EA+1
02175  2D64  90 0A              BCC SLOK
02176  2D66  D0 0D              BNE NOINC
02177  2D68  AD 41 1C           LDA SELECT
02178  2D6B  CD 3F 1C           CMP EA
02179  2D6E  B0 05              BCS NOINC
02180  2D70  20 77 2D    SLOK   JSR INCSL
02181  2D73  18                 CLC
02182  2D74  60                 RTS
02183  2D75  38          NOINC  SEC
02184  2D76  60                 RTS
02185  2D77              ;*********************************
02186  2D77              ; INC SELECTED BYTE
02187  2D77              ;*********************************
02188  2D77  EE 41 1C    INCSL  INC SELECT
02189  2D7A  D0 03              BNE *+5
02190  2D7C  EE 42 1C           INC SELECT+1
02191  2D7F  60                 RTS
02192  2D80              ;*********************************
02193  2D80              ; GET SELECTED BYTE
02194  2D80              ; C128 BYTE IN RAM BANK 1
02195  2D80              ;*********************************
02196  2D80  18          GETSL  CLC
02197  2D81  AD 41 1C           LDA SELECT
02198  2D84  6D 43 1C           ADC OFFSET
02199  2D87  85 FB              STA ZEROUR
02200  2D89  AD 42 1C           LDA SELECT+1
02201  2D8C  6D 44 1C           ADC OFFSET+1
02202  2D8F  85 FC              STA ZEROUR+1
02203  2D91  A0 00              LDY #$00
02204  2D93  A2 01              LDX #$01        ;RAM BANK 1
02205  2D95  B1 FB              LDA (ZEROUR),Y
02206  2D97              ; JSR INDFET
02207  2D97  60                 RTS
02208  2D98              ;*********************************
02209  2D98              ; DEC SLECTED BYTE
02210  2D98              ;*********************************
02211  2D98  AD 41 1C    DECSL  LDA SELECT
02212  2D9B  D0 03              BNE *+5
02213  2D9D  CE 42 1C           DEC SELECT+1
02214  2DA0  CE 41 1C           DEC SELECT
02215  2DA3  60                 RTS
02216  2DA4              ;*********************************






DISASS128.ASM......PAGE 0044

LINE# LOC   CODE        LINE


02217  2DA4              ; INITIALIZE SELECT
02218  2DA4              ;*********************************
02219  2DA4  AD 3D 1C    INTSA  LDA SA
02220  2DA7  8D 41 1C           STA SELECT
02221  2DAA  AD 3E 1C           LDA SA+1
02222  2DAD  8D 42 1C           STA SELECT+1
02223  2DB0  60                 RTS
02224  2DB1              ;*********************************
02225  2DB1              ; ASCII STRING DATA
02226  2DB1              ;*********************************
02227  2DB1  2E 42       MSGBIT .BYTE '.BYTE $',0
02227  2DB8  00 
02228  2DB9  20 3B       MSGBZP .BYTE '         ;BIT ZP SKIP',0
02228  2DC6  00 
02229  2DC7  2A 2B 24    POSREL .BYTE '*+$',0
02229  2DCA  00 
02230  2DCB  2A 2D 24    NEGREL .BYTE '*-$',0
02230  2DCE  00 
02231  2DCF  2E 45       MSGEND .BYTE '.END',0
02231  2DD3  00 
02232  2DD4  3B 3F       ILLMSG .BYTE ';??? ILLEGAL OPCODE',0
02232  2DE7  00 
02233  2DE8              ;*********************************
02234  2DE8              ; PRINT ONE BYTE OPCODE DATA
02235  2DE8              ;*********************************
02236  2DE8  20 80 2D    PRTONE JSR GETSL       ;GET BYTE
02237  2DEB  20 F8 27           JSR PRBYT       ;PRINT BYTE
02238  2DEE  AD 3B 1C           LDA FOROPT
02239  2DF1  F0 03              BEQ PRTON1
02240  2DF3  A9 07              LDA #$07
02241  2DF5  2C                 .BYTE $2C
02242  2DF6  A9 09       PRTON1 LDA #$09        ;10 SPACES
02243  2DF8  20 4E 2D           JSR SPACM       ;
02244  2DFB  4C 54 2E           JMP PRTEST      ;RESET I/O DEVICE
02245  2DFE              ;*********************************
02246  2DFE              ; PRINT TWO BYTE OPCODE DATA
02247  2DFE              ;*********************************
02248  2DFE  20 80 2D    PRTTWO JSR GETSL       ;GET BYTE
02249  2E01  20 F8 27           JSR PRBYT       ;PRINT BYTE
02250  2E04  20 59 2D           JSR SPACE       ;
02251  2E07  20 77 2D           JSR INCSL       ;INC TO OPERAND
02252  2E0A  20 80 2D           JSR GETSL       ;GET BYTE
02253  2E0D  20 F8 27           JSR PRBYT       ;PRINT IT
02254  2E10  AD 3B 1C           LDA FOROPT
02255  2E13  F0 03              BEQ PRTTW1
02256  2E15  A9 04              LDA #$04
02257  2E17  2C                 .BYTE $2C
02258  2E18  A9 06       PRTTW1 LDA #$06        ;7 SPACES
02259  2E1A  20 4E 2D           JSR SPACM       ;
02260  2E1D  20 98 2D           JSR DECSL       ;RESET POINTER
02261  2E20  4C 54 2E           JMP PRTEST      ;RESET I/O DEVICE
02262  2E23              ;*********************************
02263  2E23              ; PRINT THREE BYTE OPCODE DATA
02264  2E23              ;*********************************
02265  2E23  20 80 2D    PRTTHE JSR GETSL       ;GET BYTE






DISASS128.ASM......PAGE 0045

LINE# LOC   CODE        LINE


02266  2E26  20 F8 27           JSR PRBYT       ;PRINT BYTE
02267  2E29  20 59 2D           JSR SPACE       ;
02268  2E2C  20 77 2D           JSR INCSL       ;INC TO OPERAND
02269  2E2F  20 80 2D           JSR GETSL       ;GET BYTE
02270  2E32  20 F8 27           JSR PRBYT       ;PRINT IT
02271  2E35  20 59 2D           JSR SPACE       ;
02272  2E38  20 77 2D           JSR INCSL       ;INC TO LAST BYTE
02273  2E3B  20 80 2D           JSR GETSL       ;GET BYTE
02274  2E3E  20 F8 27           JSR PRBYT       ;PRINT IT
02275  2E41  AD 3B 1C           LDA FOROPT
02276  2E44  F0 03              BEQ PRTTH1
02277  2E46  A9 01              LDA #$01
02278  2E48  2C                 .BYTE $2C
02279  2E49  A9 03       PRTTH1 LDA #$03        ;4 SPACES
02280  2E4B  20 4E 2D           JSR SPACM       ;
02281  2E4E  20 98 2D           JSR DECSL       ;DEC POINTER
02282  2E51  20 98 2D           JSR DECSL       ;DEC POINTER
02283  2E54              ;*********************************
02284  2E54              ; RESET I/O DEVICE (DISK IF USED)
02285  2E54              ;*********************************
02286  2E54  AD 39 1C    PRTEST LDA OUTPUT      ;GET I/O DEVICE
02287  2E57  8D 38 1C           STA DEVICE      ;RESET I/O
02288  2E5A  60                 RTS             ;RETURN
02289  2E5B              ;*********************************
02290  2E5B              ; PRINT LINE DATA FOR OPCODE
02291  2E5B              ;*********************************
02292  2E5B  AD 38 1C    PRTDAT LDA DEVICE      ;OUTPUT DEVICE
02293  2E5E  29 07              AND #$07        ;MASK DISK
02294  2E60  8D 38 1C           STA DEVICE      ;RESET
02295  2E63  AD 3B 1C           LDA FOROPT      ;CHECK FORMAT
02296  2E66  D0 0F              BNE PRTDAF      ;SKIP LINE #
02297  2E68  AD 78 1C           LDA LINECT+1    ;HIH BYTE LINE
02298  2E6B  AE 77 1C           LDX LINECT      ;LOW BYTE LINE
02299  2E6E  20 2A 28           JSR PRTNUM      ;PRINT NUMBER
02300  2E71  20 59 2D           JSR SPACE       ;
02301  2E74  20 59 2D           JSR SPACE       ;
02302  2E77  20 0A 2D    PRTDAF JSR PSELEC      ;PRINT ADDRESS
02303  2E7A  A9 01              LDA #$01        ;2 SPACES
02304  2E7C  4C 4E 2D           JMP SPACM       ;
02305  2E7F              ;*********************************
02306  2E7F              ; PRINT LINE DATA FOR OTHER LINES
02307  2E7F              ;*********************************
02308  2E7F  20 5B 2E    PRTOTH JSR PRTDAT      ;PRINT LINE
02309  2E82  AD 3B 1C           LDA FOROPT
02310  2E85  F0 03              BEQ PRTOT1
02311  2E87  A9 09              LDA #$09
02312  2E89  2C                 .BYTE $2C
02313  2E8A  A9 0B       PRTOT1 LDA #$0B        ;12 SPACES
02314  2E8C  20 4E 2D           JSR SPACM       ;
02315  2E8F  4C 54 2E           JMP PRTEST      ;RESET I/O
02316  2E92              ;********************************
02317  2E92              ;.FIL 0:INTERNAL.ASM
02318  2E92              ;********************************
02319  2E92              ;.END
02320  2E92              ;*********************************






DISASS128.ASM......PAGE 0046

LINE# LOC   CODE        LINE


02321  2E92              ; FILE INTERNAL.ASM
02322  2E92              ;*********************************
02323  2E92              ;
02324  2E92              ;        DISASSEMBLER128
02325  2E92              ;    SYMBOLIC DISASSEMBLER
02326  2E92              ;       BY DENTON MARLOWE
02327  2E92              ;
02328  2E92              ;  (C)1986 BY DENTON MARLOWE
02329  2E92              ;
02330  2E92              ;*********************************
02331  2E92              ; INTERNAL ADDRESS TABLE ROUTINES
02332  2E92              ;*********************************
02333  2E92              ; CHECK FOR OUT OF RANGE ADDRESS
02334  2E92              ;*********************************
02335  2E92  AD 65 1C    RANGE  LDA WORKED+1    ;GET HIGH
02336  2E95  CD 48 1C           CMP EAGOL+1     ;COMPARE
02337  2E98  90 0A              BCC RANG        ;< CHECK START
02338  2E9A  D0 1A              BNE ROUT        ;> OUT OF RANGE
02339  2E9C  AD 64 1C           LDA WORKED      ;GET LOW
02340  2E9F  CD 47 1C           CMP EAGOL       ;COMPARE
02341  2EA2  B0 12              BCS ROUT        ;> OUT OF RANGE
02342  2EA4              ;*********************************
02343  2EA4  AD 65 1C    RANG   LDA WORKED+1    ;GET HIGH
02344  2EA7  CD 46 1C           CMP SAGOL+1     ;COMPARE
02345  2EAA  90 0A              BCC ROUT        ;< OUT OF RANGE
02346  2EAC  AD 64 1C           LDA WORKED      ;GET LOW
02347  2EAF  CD 45 1C           CMP SAGOL       ;COMPARE
02348  2EB2  90 02              BCC ROUT        ;< OUT OF RANGE
02349  2EB4              ;*********************************
02350  2EB4  18                 CLC             ;C=0 IN RANGE
02351  2EB5  60                 RTS
02352  2EB6  38          ROUT   SEC             ;C=1 OUT RANGE
02353  2EB7  60                 RTS
02354  2EB8              ;*********************************
02355  2EB8              ; INITIALIZE INTERNAL TABLE
02356  2EB8              ;*********************************
02357  2EB8  AD 0E 1D    INITIN LDA DATABE
02358  2EBB  8D 4F 1C           STA TABINS
02359  2EBE  8D 51 1C           STA TABINE
02360  2EC1  AD 0F 1D           LDA DATABE+1
02361  2EC4  8D 50 1C           STA TABINS+1
02362  2EC7  8D 52 1C           STA TABINE+1
02363  2ECA              ;*********************************
02364  2ECA              ; INITIALIZE INTERNAL TABLE POINT
02365  2ECA              ;*********************************
02366  2ECA  AD 4F 1C    INTSET LDA TABINS
02367  2ECD  8D 4D 1C           STA TABINP
02368  2ED0  AD 50 1C           LDA TABINS+1
02369  2ED3  8D 4E 1C           STA TABINP+1
02370  2ED6  60                 RTS
02371  2ED7              ;*********************************
02372  2ED7              ; SAVE INTERNAL TABLE POINTERS
02373  2ED7              ;*********************************
02374  2ED7  AD 4F 1C    SAVINT LDA TABINS
02375  2EDA  8D 6A 1C           STA SAVES






DISASS128.ASM......PAGE 0047

LINE# LOC   CODE        LINE


02376  2EDD  AD 50 1C           LDA TABINS+1
02377  2EE0  8D 6B 1C           STA SAVES+1
02378  2EE3  AD 51 1C           LDA TABINE
02379  2EE6  8D 6C 1C           STA SAVEE
02380  2EE9  AD 52 1C           LDA TABINE+1
02381  2EEC  8D 6D 1C           STA SAVEE+1
02382  2EEF  60                 RTS
02383  2EF0              ;*********************************
02384  2EF0              ; RESTORE INTERNAL TABLE POINTERS
02385  2EF0              ;*********************************
02386  2EF0  AD 6A 1C    RESINT LDA SAVES
02387  2EF3  8D 4F 1C           STA TABINS
02388  2EF6  AD 6B 1C           LDA SAVES+1
02389  2EF9  8D 50 1C           STA TABINS+1
02390  2EFC  AD 6C 1C           LDA SAVEE
02391  2EFF  8D 51 1C           STA TABINE
02392  2F02  AD 6D 1C           LDA SAVEE+1
02393  2F05  8D 52 1C           STA TABINE+1
02394  2F08  60                 RTS
02395  2F09              ;*********************************
02396  2F09              ; PUT ADDRESS IN INTERNAL TABLE
02397  2F09              ;*********************************
02398  2F09  38          PUTI   SEC
02399  2F0A  AD 4F 1C           LDA TABINS
02400  2F0D  ED 51 1C           SBC TABINE
02401  2F10  8D 70 1C           STA TEMP
02402  2F13  AD 50 1C           LDA TABINS+1
02403  2F16  ED 52 1C           SBC TABINE+1
02404  2F19  0D 70 1C           ORA TEMP
02405  2F1C  F0 05              BEQ PUIT
02406  2F1E              ;
02407  2F1E  20 74 2F           JSR INTCHK      ;IS ADDRESS IN TAB
02408  2F21  B0 23              BCS INTEXT      ;IF SO EXIT
02409  2F23              ;
02410  2F23  AD 51 1C    PUIT   LDA TABINE      ;GET LOW END
02411  2F26  85 FB              STA ZEROUR      ;STORE
02412  2F28  AD 52 1C           LDA TABINE+1    ;GET HIGH END
02413  2F2B  85 FC              STA ZEROUR+1    ;STORE
02414  2F2D  A0 00              LDY #$00        ;OFFSET
02415  2F2F  AD 64 1C           LDA WORKED      ;GET LOW ADDRESS
02416  2F32  91 FB              STA (ZEROUR),Y  ;PUT IN TABLE
02417  2F34  C8                 INY             ;OFFSET TO HIGH
02418  2F35  AD 65 1C           LDA WORKED+1    ;GET HIGH ADDRESS
02419  2F38  91 FB              STA (ZEROUR),Y  ;PUT IN TABLE
02420  2F3A              ;
02421  2F3A  20 1F 2D           JSR SEMIC       ;PRINT ;
02422  2F3D  20 16 2D           JSR PWORKD      ;PRINT ADDRESS
02423  2F40              ;*********************************
02424  2F40  20 48 2F           JSR INCIE       ;INC TO HIGH & LOW
02425  2F43  4C 48 2F           JMP INCIE       ;INC TO HIGH & LOW
02426  2F46              ;
02427  2F46              INTEXT = *
02428  2F46  18                 CLC             ;C=0 FOR NO MATCH
02429  2F47  60                 RTS             ;RETURN
02430  2F48              ;*********************************






DISASS128.ASM......PAGE 0048

LINE# LOC   CODE        LINE


02431  2F48              ; INC INTERNAL END TABLE POINTER
02432  2F48              ;*********************************
02433  2F48  EE 51 1C    INCIE  INC TABINE
02434  2F4B  D0 03              BNE *+5
02435  2F4D  EE 52 1C           INC TABINE+1
02436  2F50              ;*********************************
02437  2F50              ; INC INTERNAL ADDRESS POINTER
02438  2F50              ;*********************************
02439  2F50  EE 4D 1C    INCI   INC TABINP
02440  2F53  D0 03              BNE *+5
02441  2F55  EE 4E 1C           INC TABINP+1
02442  2F58  60                 RTS
02443  2F59              ;*********************************
02444  2F59              ; GET BYTE FROM INTERNAL TABLE
02445  2F59              ;*********************************
02446  2F59  AD 4D 1C    GETI   LDA TABINP
02447  2F5C  85 FB              STA ZEROUR
02448  2F5E  AD 4E 1C           LDA TABINP+1
02449  2F61  85 FC              STA ZEROUR+1
02450  2F63  A0 00              LDY #$00
02451  2F65  B1 FB              LDA (ZEROUR),Y
02452  2F67  60                 RTS
02453  2F68              ;*********************************
02454  2F68              ; CHECK IF ADDRESS IN TABLE
02455  2F68              ;*********************************
02456  2F68  AD 41 1C    INTCHA LDA SELECT
02457  2F6B  8D 64 1C           STA WORKED
02458  2F6E  AD 42 1C           LDA SELECT+1
02459  2F71  8D 65 1C           STA WORKED+1
02460  2F74              ;*********************************
02461  2F74  20 CA 2E    INTCHK JSR INTSET
02462  2F77  20 59 2F    INTCH  JSR GETI
02463  2F7A  8D 66 1C           STA WORKER
02464  2F7D  20 50 2F           JSR INCI
02465  2F80  20 59 2F           JSR GETI
02466  2F83  8D 67 1C           STA WORKER+1
02467  2F86  38                 SEC
02468  2F87  AD 65 1C           LDA WORKED+1
02469  2F8A  ED 67 1C           SBC WORKER+1
02470  2F8D  8D 70 1C           STA TEMP
02471  2F90  AD 64 1C           LDA WORKED
02472  2F93  ED 66 1C           SBC WORKER
02473  2F96  0D 70 1C           ORA TEMP
02474  2F99  F0 17              BEQ INTMAT
02475  2F9B              ;*********************************
02476  2F9B  20 50 2F           JSR INCI
02477  2F9E  AD 4E 1C           LDA TABINP+1
02478  2FA1  CD 52 1C           CMP TABINE+1
02479  2FA4  90 D1              BCC INTCH
02480  2FA6  D0 08              BNE INTEND
02481  2FA8  AD 4D 1C           LDA TABINP
02482  2FAB  CD 51 1C           CMP TABINE
02483  2FAE  90 C7              BCC INTCH
02484  2FB0              ;*********************************
02485  2FB0  18          INTEND CLC






DISASS128.ASM......PAGE 0049

LINE# LOC   CODE        LINE


02486  2FB1  60                 RTS
02487  2FB2  38          INTMAT SEC
02488  2FB3  60                 RTS
02489  2FB4              ;*********************************
02490  2FB4              ; 2 BYTE TABLE SORT ROUTINE
02491  2FB4              ;*********************************
02492  2FB4  20 CA 2E    SORT   JSR INTSET      ;SET POINTERS
02493  2FB7  AD 4F 1C           LDA TABINS
02494  2FBA  8D 53 1C           STA SMALLS
02495  2FBD  8D 55 1C           STA SMALLP
02496  2FC0  AD 50 1C           LDA TABINS+1
02497  2FC3  8D 54 1C           STA SMALLS+1
02498  2FC6  8D 56 1C           STA SMALLP+1
02499  2FC9              ;*********************************
02500  2FC9              ; PUT FIRST WORD INTO TEMP
02501  2FC9              ;*********************************
02502  2FC9  20 59 2F    SORT1  JSR GETI
02503  2FCC  8D 70 1C           STA TEMP
02504  2FCF  20 50 2F           JSR INCI
02505  2FD2  20 59 2F           JSR GETI
02506  2FD5  8D 71 1C           STA TEMP+1
02507  2FD8              ;*********************************
02508  2FD8              ; INC TO NEXT WORD AND COMPARE
02509  2FD8              ; SMALLP POINTS TO LOW BYTE
02510  2FD8              ;*********************************
02511  2FD8  20 50 2F    SORT2  JSR INCI
02512  2FDB  AD 4D 1C           LDA TABINP
02513  2FDE  8D 55 1C           STA SMALLP
02514  2FE1  AD 4E 1C           LDA TABINP+1
02515  2FE4  8D 56 1C           STA SMALLP+1
02516  2FE7  20 59 2F           JSR GETI
02517  2FEA  8D 64 1C           STA WORKED
02518  2FED  20 50 2F           JSR INCI
02519  2FF0  AD 4E 1C           LDA TABINP+1
02520  2FF3  CD 52 1C           CMP TABINE+1
02521  2FF6  90 0D              BCC T2
02522  2FF8  D0 08              BNE S3
02523  2FFA  AD 4D 1C           LDA TABINP
02524  2FFD  CD 51 1C           CMP TABINE
02525  3000  90 03              BCC T2
02526  3002  4C 5A 30    S3     JMP SORT3
02527  3005  20 59 2F    T2     JSR GETI
02528  3008  8D 65 1C           STA WORKED+1
02529  300B  CD 71 1C           CMP TEMP+1
02530  300E  90 0D              BCC SMALL
02531  3010  D0 08              BNE LARGE
02532  3012  AD 64 1C           LDA WORKED
02533  3015  CD 70 1C           CMP TEMP
02534  3018  90 03              BCC SMALL
02535  301A  4C D8 2F    LARGE  JMP SORT2
02536  301D              ;*********************************
02537  301D              ; WORD IS SMALL THAN TEMP PUT IT
02538  301D              ; WHERE TEMP CAME FROM (SMALLS)
02539  301D              ;*********************************
02540  301D  AD 53 1C    SMALL  LDA SMALLS






DISASS128.ASM......PAGE 0050

LINE# LOC   CODE        LINE


02541  3020  85 FB              STA ZEROUR
02542  3022  AD 54 1C           LDA SMALLS+1
02543  3025  85 FC              STA ZEROUR+1
02544  3027  A0 00              LDY #$00
02545  3029  AD 64 1C           LDA WORKED
02546  302C  91 FB              STA (ZEROUR),Y
02547  302E  C8                 INY
02548  302F  AD 65 1C           LDA WORKED+1
02549  3032  91 FB              STA (ZEROUR),Y
02550  3034              ;*********************************
02551  3034              ; PUT TEMP IN PLACE OF WORD
02552  3034              ; SMALLP POINTS TO LO ADDRESS
02553  3034              ;*********************************
02554  3034  AD 55 1C           LDA SMALLP
02555  3037  85 FB              STA ZEROUR
02556  3039  AD 56 1C           LDA SMALLP+1
02557  303C  85 FC              STA ZEROUR+1
02558  303E  A0 00              LDY #$00
02559  3040  AD 70 1C           LDA TEMP
02560  3043  91 FB              STA (ZEROUR),Y
02561  3045  C8                 INY
02562  3046  AD 71 1C           LDA TEMP+1
02563  3049  91 FB              STA (ZEROUR),Y
02564  304B              ;*********************************
02565  304B  AD 53 1C           LDA SMALLS
02566  304E  8D 4D 1C           STA TABINP
02567  3051  AD 54 1C           LDA SMALLS+1
02568  3054  8D 4E 1C           STA TABINP+1
02569  3057  4C C9 2F           JMP SORT1
02570  305A              ;*********************************
02571  305A              ; IF AFTER SCAN TO TABLE GOTO NEXT
02572  305A              ; WORD IN TABLE FOR CHECK
02573  305A              ;*********************************
02574  305A  18          SORT3  CLC
02575  305B  AD 53 1C           LDA SMALLS
02576  305E  69 02              ADC #$02
02577  3060  8D 53 1C           STA SMALLS
02578  3063  8D 4D 1C           STA TABINP
02579  3066  AD 54 1C           LDA SMALLS+1
02580  3069  69 00              ADC #$00
02581  306B  8D 54 1C           STA SMALLS+1
02582  306E  8D 4E 1C           STA TABINP+1
02583  3071  AD 54 1C           LDA SMALLS+1
02584  3074  CD 52 1C           CMP TABINE+1
02585  3077  90 0A              BCC SORTOK
02586  3079  D0 0B              BNE SORT4
02587  307B  AD 53 1C           LDA SMALLS
02588  307E  CD 51 1C           CMP TABINE
02589  3081  B0 03              BCS SORT4
02590  3083  4C C9 2F    SORTOK JMP SORT1
02591  3086              ;*********************************
02592  3086  4C CA 2E    SORT4  JMP INTSET
02593  3089              ;*********************************
02594  3089              ; PRINT INTERNAL ADDRESS TABLE
02595  3089              ;*********************************






DISASS128.ASM......PAGE 0051

LINE# LOC   CODE        LINE


02596  3089  38          INTPRT SEC
02597  308A  AD 4F 1C           LDA TABINS
02598  308D  ED 51 1C           SBC TABINE
02599  3090  8D 70 1C           STA TEMP
02600  3093  AD 50 1C           LDA TABINS+1
02601  3096  ED 52 1C           SBC TABINE+1
02602  3099  0D 70 1C           ORA TEMP
02603  309C  D0 01              BNE INTOUT
02604  309E  60                 RTS
02605  309F              ;*********************************
02606  309F  20 3B 29    INTOUT JSR HEADSY
02607  30A2  20 B4 2F           JSR SORT
02608  30A5              ;*********************************
02609  30A5  A9 03       LOOP1  LDA #$03
02610  30A7  8D 71 1C           STA SAVA
02611  30AA  20 59 2F    INTPR  JSR GETI
02612  30AD  8D 64 1C           STA WORKED
02613  30B0  20 50 2F           JSR INCI
02614  30B3  20 59 2F           JSR GETI
02615  30B6  8D 65 1C           STA WORKED+1
02616  30B9  20 59 2D           JSR SPACE
02617  30BC  20 B2 37           JSR SYMOP
02618  30BF  90 0B              BCC INTPRS
02619  30C1  20 4F 38           JSR FIXSYM
02620  30C4  A9 02              LDA #$02
02621  30C6  20 4E 2D           JSR SPACM
02622  30C9  4C D1 30           JMP INTPRM
02623  30CC  A9 08       INTPRS LDA #$08
02624  30CE  20 4E 2D           JSR SPACM
02625  30D1  20 16 2D    INTPRM JSR PWORKD
02626  30D4  20 50 2F           JSR INCI
02627  30D7  AD 4E 1C           LDA TABINP+1
02628  30DA  CD 52 1C           CMP TABINE+1
02629  30DD  90 0A              BCC PRTOK
02630  30DF  D0 15              BNE PREND
02631  30E1  AD 4D 1C           LDA TABINP
02632  30E4  CD 51 1C           CMP TABINE
02633  30E7  B0 0D              BCS PREND
02634  30E9  CE 71 1C    PRTOK  DEC SAVA
02635  30EC  30 0B              BMI LOOP2
02636  30EE  A9 02              LDA #$02
02637  30F0  20 4E 2D           JSR SPACM
02638  30F3  4C AA 30           JMP INTPR
02639  30F6  4C 10 29    PREND  JMP NEXPTS
02640  30F9  20 10 29    LOOP2  JSR NEXPTS
02641  30FC  4C A5 30           JMP LOOP1
02642  30FF              ;*********************************
02643  30FF              ;.FIL 0:ASC.ASM
02644  30FF              ;*********************************
02645  30FF              ;.END
02646  30FF              ;*********************************
02647  30FF              ; FILE ASC.ASM
02648  30FF              ;*********************************
02649  30FF              ;
02650  30FF              ;        DISASSEMBLER128






DISASS128.ASM......PAGE 0052

LINE# LOC   CODE        LINE


02651  30FF              ;    SYMBOLIC DISASSEMBLER
02652  30FF              ;       BY DENTON MARLOWE
02653  30FF              ;
02654  30FF              ;  (C)1986 BY DENTON MARLOWE
02655  30FF              ;
02656  30FF              ;*********************************
02657  30FF              ; DATA TABLE HANDLER
02658  30FF              ;*********************************
02659  30FF  AD 08 1D    DATAOP LDA NDATA       ;GET NUM TABLES
02660  3102  F0 07              BEQ ENDAX       ;IF ZERO EXIT
02661  3104  A9 00              LDA #$00        ;ZERO BYTE
02662  3106  8D 06 1D           STA CDATA       ;SET FIRST TABLE
02663  3109  F0 03              BEQ DATAO1      ;
02664  310B  4C EF 31    ENDAX  JMP ENDDAT      ;
02665  310E              ;*********************************
02666  310E  AD 06 1D    DATAO1 LDA CDATA       ;CURRENT TABLE
02667  3111  CD 08 1D           CMP NDATA       ;LAST TABLE DONE
02668  3114  F0 F5              BEQ ENDAX       ;IF SO EXIT
02669  3116  0A                 ASL A           ;CDATA*2
02670  3117  0A                 ASL A           ;CDATA*4
02671  3118  18                 CLC
02672  3119  6D 06 1D           ADC CDATA       ;CDATA*5
02673  311C  A8                 TAY             ;PUT INTO INDEX
02674  311D  B9 10 1D           LDA TDATA,Y     ;START LOW
02675  3120  8D 66 1C           STA WORKER      ;STORE
02676  3123  C8                 INY             ;INC OFFSET
02677  3124  B9 10 1D           LDA TDATA,Y     ;START HIGH
02678  3127  8D 67 1C           STA WORKER+1    ;STORE
02679  312A  38                 SEC             ;C=1
02680  312B  AD 66 1C           LDA WORKER      ;
02681  312E  ED 41 1C           SBC SELECT      ;
02682  3131  8D 70 1C           STA TEMP        ;
02683  3134  AD 67 1C           LDA WORKER+1    ;
02684  3137  ED 42 1C           SBC SELECT+1    ;
02685  313A  0D 70 1C           ORA TEMP        ;
02686  313D  F0 05              BEQ DATAO2      ;MATCH
02687  313F  EE 06 1D           INC CDATA       ;NEXT TABLE
02688  3142  D0 CA              BNE DATAO1      ;CHECK FOR MATCH
02689  3144              ;*********************************
02690  3144              ; GET TABLE DATA
02691  3144              ;*********************************
02692  3144  C8          DATAO2 INY             ;INC OFFSET
02693  3145  B9 10 1D           LDA TDATA,Y     ;END LOW
02694  3148  8D 03 1D           STA EAS         ;STORE
02695  314B  C8                 INY             ;INC OFFSET
02696  314C  B9 10 1D           LDA TDATA,Y     ;END HIGH
02697  314F  8D 04 1D           STA EAS+1       ;STORE
02698  3152  C8                 INY             ;INC OFFSET
02699  3153  B9 10 1D           LDA TDATA,Y     ;DATA TYPE
02700  3156  8D 05 1D           STA TEXTER      ;STORE
02701  3159  C9 53              CMP #'S'        ;IS IT SKIPPER
02702  315B  D0 23              BNE ASCCCC      ;
02703  315D              ;*********************************
02704  315D              ; SKIP RANGE OF ADDRESSES
02705  315D              ;*********************************






DISASS128.ASM......PAGE 0053

LINE# LOC   CODE        LINE


02706  315D  AD 31 1C           LDA PASS
02707  3160  CD 34 1C           CMP CPASS
02708  3163  D0 1B              BNE ASCCCC
02709  3165  AD 03 1D           LDA EAS
02710  3168  8D 41 1C           STA SELECT
02711  316B  AD 04 1D           LDA EAS+1
02712  316E  8D 42 1C           STA SELECT+1
02713  3171  20 77 2D           JSR INCSL
02714  3174  20 8F 2C           JSR ORGIN
02715  3177  20 98 2D           JSR DECSL
02716  317A  20 B5 2C           JSR COMENT
02717  317D  4C EC 31           JMP DATUT
02718  3180              ;*********************************
02719  3180              ; CHECK PASS
02720  3180              ;*********************************
02721  3180  AD 31 1C    ASCCCC LDA PASS
02722  3183  CD 33 1C           CMP EPASS       ;EXTERNAL
02723  3186  D0 0F              BNE ASCKK
02724  3188  AD 03 1D    SKIPER LDA EAS
02725  318B  8D 41 1C           STA SELECT
02726  318E  AD 04 1D           LDA EAS+1
02727  3191  8D 42 1C           STA SELECT+1
02728  3194  4C EC 31           JMP DATUT
02729  3197              ;*********************************
02730  3197              ; DISASSEMBLER LOOP FOR DATA
02731  3197              ;*********************************
02732  3197  AD 31 1C    ASCKK  LDA PASS        ;GET PASS
02733  319A  CD 34 1C           CMP CPASS       ;IS IT LAST
02734  319D  D0 0E              BNE ASCI1       ;NO PRINT
02735  319F  20 B5 2C           JSR COMENT      ;COMMENT LINE
02736  31A2  AD 31 1C    ASCII  LDA PASS        ;GET PASS
02737  31A5  CD 34 1C           CMP CPASS       ;IS IT LAST
02738  31A8  D0 03              BNE ASCI1       ;NO PRINT
02739  31AA  20 5B 2E           JSR PRTDAT      ;PRINT LINE
02740  31AD  20 F2 31    ASCI1  JSR ACHECK      ;DIS ONE LINE
02741  31B0  B0 29              BCS ASCIIQ      ;IF EA STOP
02742  31B2              ;*********************************
02743  31B2  20 E1 FF           JSR STOP
02744  31B5  F0 24              BEQ ASCIIQ
02745  31B7  20 E4 FF           JSR GETIN
02746  31BA  F0 E6              BEQ ASCII
02747  31BC  C9 20              CMP #' '
02748  31BE  D0 E2              BNE ASCII
02749  31C0  AD 38 1C           LDA DEVICE
02750  31C3  48                 PHA
02751  31C4  A9 03              LDA #$03
02752  31C6  8D 38 1C           STA DEVICE
02753  31C9  A9 17              LDA #<PMSG
02754  31CB  A0 1E              LDY #>PMSG
02755  31CD  20 0E 28           JSR STRPNT
02756  31D0  68                 PLA
02757  31D1  8D 38 1C           STA DEVICE
02758  31D4  20 E4 FF    PAUS1  JSR GETIN
02759  31D7  F0 FB              BEQ PAUS1
02760  31D9  D0 C7              BNE ASCII






DISASS128.ASM......PAGE 0054

LINE# LOC   CODE        LINE


02761  31DB              ;*********************************
02762  31DB  AD 31 1C    ASCIIQ LDA PASS        ;GET PASS
02763  31DE  CD 34 1C           CMP CPASS       ;IS IT LAST
02764  31E1  D0 09              BNE DATUT       ;EXIT
02765  31E3  20 77 2D           JSR INCSL
02766  31E6  20 B5 2C           JSR COMENT      ;COMMENT LINE
02767  31E9  20 98 2D           JSR DECSL
02768  31EC              ;*********************************
02769  31EC              ; EXIT TO NEXTSL
02770  31EC              ;*********************************
02771  31EC  A9 FF       DATUT  LDA #$FF        ;SET N=1
02772  31EE  60                 RTS             ;RETURN
02773  31EF  A9 00       ENDDAT LDA #$00        ;SET N=0
02774  31F1  60                 RTS             ;RETURN
02775  31F2              ;*********************************
02776  31F2              ; CHECK OPTIONS
02777  31F2              ;*********************************
02778  31F2  AD 05 1D    ACHECK LDA TEXTER      ;GET DATA TYPE
02779  31F5  C9 34              CMP #'4'         ;WORD-1
02780  31F7  F0 0B              BEQ AC0
02781  31F9  C9 33              CMP #'3'         ;DBYTE
02782  31FB  F0 0A              BEQ AC1
02783  31FD  C9 32              CMP #'2'         ;WORD
02784  31FF  F0 03              BEQ AC0
02785  3201  4C 0A 32           JMP BYTES       ;BYTE OR ASCII
02786  3204  4C C6 32    AC0    JMP WORDS       ;WORD OR WORD-1
02787  3207  4C 96 32    AC1    JMP DBYTES      ;DBYTES
02788  320A              ;*********************************
02789  320A              ; .BYTE DIRECTIVE
02790  320A              ;*********************************
02791  320A  AD 31 1C    BYTES  LDA PASS        ;GET PASS
02792  320D  CD 34 1C           CMP CPASS       ;IS IT LAST
02793  3210  D0 20              BNE BYTESX      ;IF NOT EXIT
02794  3212  20 E8 2D           JSR PRTONE      ;PRINT BYTE
02795  3215  20 DE 2C           JSR PRAD        ;PRINT ADDRESS
02796  3218  A0 33              LDY #>MBYTE     ;.BYTE
02797  321A  A9 82              LDA #<MBYTE     ;
02798  321C  20 0E 28           JSR STRPNT      ;PRINT IT
02799  321F  AD 05 1D           LDA TEXTER      ;GET TYPE
02800  3222  C9 30              CMP #'0'          ;ASCII
02801  3224  F0 0F              BEQ ALINE       ;ASCII BYTES
02802  3226  20 24 2D           JSR DOLLAR      ;PRINT $
02803  3229  20 80 2D           JSR GETSL       ;GET BYTE
02804  322C  20 F8 27           JSR PRBYT       ;PRINT BYTE
02805  322F  20 51 27           JSR NEWLIN      ;NEXT LINE
02806  3232  4C 69 33    BYTESX JMP NEXTBY      ;NEXT BYTE
02807  3235              ;*********************************
02808  3235              ; ASCII TEXT
02809  3235              ;*********************************
02810  3235  A9 00       ALINE  LDA #$00        ;ZERO BYTE
02811  3237  8D 70 1C           STA TEMP        ;STORE IN COUNT
02812  323A              ;*********************************
02813  323A              ; CHECK FIRST BYTE OF LINE
02814  323A              ;*********************************
02815  323A  20 80 2D           JSR GETSL       ;GET BYTE






DISASS128.ASM......PAGE 0055

LINE# LOC   CODE        LINE


02816  323D  20 8A 32           JSR CASCII      ;CHECK FOR ASCII
02817  3240  B0 39              BCS NASCII      ;IF NOT BRANCH
02818  3242  A9 27              LDA #'''        ;PRINT ONE QUOTE
02819  3244  20 64 28           JSR PCHAR       ;PRINT IT
02820  3247              ;*********************************
02821  3247  20 80 2D    ALOP   JSR GETSL       ;GET BYTE
02822  324A  20 8A 32           JSR CASCII      ;IS IT ASCII
02823  324D  B0 24              BCS EASCII      ;IF NOT END LINE
02824  324F  20 64 28           JSR PCHAR       ;PRINT ASCII
02825  3252              ; REV 2-12-2018 START
02826  3252              ; IF CHAR = ' THEN PRINT SECOND '
02827  3252  20 80 2D           JSR GETSL       ; GET BYTE AGAIN
02828  3255  C9 27              CMP #$27        ;'''
02829  3257  D0 03              BNE Q00000
02830  3259  20 64 28           JSR PCHAR       ;PRINT ASCII
02831  325C              Q00000 = *
02832  325C              ; REV 2-12-2018 END
02833  325C  20 69 33           JSR NEXTBY      ;INC SELECT
02834  325F  B0 0D              BCS EASCI1      ;C=1 IF END
02835  3261  EE 70 1C           INC TEMP        ;INC COUNT
02836  3264  AD 70 1C           LDA TEMP        ;LOAD COUNT
02837  3267  C9 28              CMP #$28        ;40 CHAR
02838  3269  F0 08              BEQ EASCII      ;IF SO END
02839  326B  4C 47 32           JMP ALOP        ;NEXT
02840  326E              ;*********************************
02841  326E  20 73 32    EASCI1 JSR EASCII
02842  3271  38                 SEC
02843  3272  60                 RTS
02844  3273              ;*********************************
02845  3273  A9 27       EASCII LDA #'''        ;PRINT ONE QUOTE
02846  3275  20 64 28           JSR PCHAR       ;
02847  3278  4C 51 27           JMP NEWLIN      ;PRINT CR
02848  327B              ;*********************************
02849  327B  20 24 2D    NASCII JSR DOLLAR      ;PRINT $
02850  327E  20 80 2D           JSR GETSL       ;GET BYTE
02851  3281  20 F8 27           JSR PRBYT       ;PRINT IT
02852  3284  20 51 27           JSR NEWLIN      ;PRINT CR
02853  3287  4C 69 33           JMP NEXTBY      ;NEXT SL
02854  328A              ;*********************************
02855  328A              ; CHECK ACCUM FOR PRINTABLE ASCII
02856  328A              ;*********************************
02857  328A  C9 20       CASCII CMP #$20        ;< SPACE
02858  328C  30 06              BMI NOASC       ;IF LESS NOASCII
02859  328E  C9 60              CMP #$60        ;> _
02860  3290  B0 02              BCS NOASC       ;IF GREATER NO
02861  3292  18                 CLC             ;CLEAR CARRY OK
02862  3293  60                 RTS             ;RETURN
02863  3294  38          NOASC  SEC             ;SET CARRY BAD
02864  3295  60                 RTS             ;RETURN
02865  3296              ;*********************************
02866  3296              ; .DBYTE DIRECTIVE
02867  3296              ;*********************************
02868  3296  AD 31 1C    DBYTES LDA PASS        ;CHECK PASS
02869  3299  CD 34 1C           CMP CPASS       ;LAST PASS
02870  329C  D0 25              BNE DBYTEX      ;EXIT






DISASS128.ASM......PAGE 0056

LINE# LOC   CODE        LINE


02871  329E  20 FE 2D           JSR PRTTWO      ;PRINT 2 BYTES
02872  32A1  20 DE 2C           JSR PRAD        ;PRINT ADDRESS
02873  32A4  A0 33              LDY #>MDBYTE    ;.DBYTE
02874  32A6  A9 92              LDA #<MDBYTE    ;
02875  32A8  20 0E 28           JSR STRPNT      ;PRINT IT
02876  32AB  20 80 2D           JSR GETSL       ;GET BYTE
02877  32AE  8D 65 1C           STA WORKED+1    ;STORE
02878  32B1  20 77 2D           JSR INCSL       ;GET BYTE
02879  32B4  20 80 2D           JSR GETSL       ;GET BYTE
02880  32B7  8D 64 1C           STA WORKED      ;STORE
02881  32BA  20 24 2D           JSR DOLLAR      ;PRINT $
02882  32BD  20 16 2D           JSR PWORKD      ;PRINT WORD
02883  32C0  20 51 27           JSR NEWLIN      ;PRINT CR
02884  32C3  4C 69 33    DBYTEX JMP NEXTBY      ;NEXT SL
02885  32C6              ;*********************************
02886  32C6              ; .WORD DIRECTIVE
02887  32C6              ;*********************************
02888  32C6  AD 31 1C    WORDS  LDA PASS        ;GET PASS
02889  32C9  CD 34 1C           CMP CPASS         ;LAST
02890  32CC  D0 0D              BNE WORD1       ;IF NOT BRANCH
02891  32CE  20 FE 2D           JSR PRTTWO      ;PRINT 2 BYTES
02892  32D1  20 DE 2C           JSR PRAD        ;PRINT ADDRESS
02893  32D4  A0 33              LDY #>MWORD     ;.WORD
02894  32D6  A9 8A              LDA #<MWORD     ;
02895  32D8  20 0E 28           JSR STRPNT      ;PRINT IT
02896  32DB              ;*********************************
02897  32DB              ; GET WORD INTO WORKED
02898  32DB              ;*********************************
02899  32DB  20 80 2D    WORD1  JSR GETSL       ;GET BYTE
02900  32DE  8D 64 1C           STA WORKED      ;STORE BYTE
02901  32E1  8D 55 1C           STA SMALLP      ;STORE BYTE
02902  32E4  20 77 2D           JSR INCSL       ;GET BYTE
02903  32E7  20 80 2D           JSR GETSL       ;GET BYTE
02904  32EA  8D 65 1C           STA WORKED+1    ;STORE BYTE
02905  32ED  8D 56 1C           STA SMALLP+1    ;STORE BYTE
02906  32F0  AD 05 1D           LDA TEXTER      ;GET OPTION
02907  32F3  C9 34              CMP #'4'          ;.WORD ADRS-1
02908  32F5  F0 2A              BEQ WORDM       ;BRANCH
02909  32F7              ;*********************************
02910  32F7              ; CHECK PASS
02911  32F7              ;*********************************
02912  32F7  AD 31 1C           LDA PASS        ;CHECK PASS
02913  32FA  CD 32 1C           CMP IPASS       ;INTERNAL
02914  32FD  F0 16              BEQ WORDPT      ;TABLE WORD
02915  32FF  CD 33 1C           CMP EPASS
02916  3302  F0 17              BEQ WORDSY
02917  3304              ;*********************************
02918  3304              ; PRINT WORD
02919  3304              ;*********************************
02920  3304  20 B2 37           JSR SYMOP       ;CHECK SYMBOL
02921  3307  B0 5A              BCS WORDS3      ;C=1 SYMBOL
02922  3309  20 24 2D           JSR DOLLAR      ;PRINT $
02923  330C  20 16 2D           JSR PWORKD      ;PRINT WORD
02924  330F  20 51 27           JSR NEWLIN      ;PRINT CR
02925  3312  4C 69 33    WORDSX JMP NEXTBY      ;NEXT SL






DISASS128.ASM......PAGE 0057

LINE# LOC   CODE        LINE


02926  3315  20 09 2F    WORDPT JSR PUTI        ;PUT IN TABLE
02927  3318  4C 69 33           JMP NEXTBY      ;NEXT SL
02928  331B  20 B2 37    WORDSY JSR SYMOP
02929  331E  4C 69 33           JMP NEXTBY
02930  3321              ;*********************************
02931  3321              ; .WORD ADDRESS-1
02932  3321              ;*********************************
02933  3321  18          WORDM  CLC
02934  3322  AD 64 1C           LDA WORKED
02935  3325  69 01              ADC #$01
02936  3327  8D 64 1C           STA WORKED
02937  332A  AD 65 1C           LDA WORKED+1
02938  332D  69 00              ADC #$00
02939  332F  8D 65 1C           STA WORKED+1
02940  3332              ;*********************************
02941  3332              ; CHECK PASS
02942  3332              ;*********************************
02943  3332  AD 31 1C           LDA PASS        ;CHECK PASS
02944  3335  CD 32 1C           CMP IPASS       ;INTERNAL
02945  3338  F0 DB              BEQ WORDPT      ;TABLE WORD
02946  333A  CD 33 1C           CMP EPASS       ;EXTERNAL
02947  333D  F0 DC              BEQ WORDSY      ;TABLE WORD
02948  333F              ;*********************************
02949  333F              ; PRINT WORD
02950  333F              ;*********************************
02951  333F  20 B2 37           JSR SYMOP       ;CHECK SYMBOL
02952  3342  90 0D              BCC WORDS2      ;C=0 NO SYMBOL
02953  3344  A9 2D              LDA #'-'
02954  3346  20 64 28           JSR PCHAR
02955  3349  A9 31              LDA #'1'
02956  334B  20 64 28           JSR PCHAR
02957  334E  4C 63 33           JMP WORDS3
02958  3351              ;*********************************
02959  3351  20 24 2D    WORDS2 JSR DOLLAR      ;PRINT $
02960  3354  AD 55 1C           LDA SMALLP
02961  3357  8D 64 1C           STA WORKED
02962  335A  AD 56 1C           LDA SMALLP+1
02963  335D  8D 65 1C           STA WORKED+1
02964  3360  20 16 2D           JSR PWORKD      ;PRINT WORD
02965  3363  20 51 27    WORDS3 JSR NEWLIN      ;PRINT CR
02966  3366  4C 69 33    WORDXX JMP NEXTBY      ;NEXT SL
02967  3369              ;*********************************
02968  3369              ; SELECT NEXT BYTE OF DATA
02969  3369              ;*********************************
02970  3369  AD 42 1C    NEXTBY LDA SELECT+1
02971  336C  CD 04 1D           CMP EAS+1
02972  336F  90 0A              BCC SBLOK
02973  3371  D0 0D              BNE NOBINC
02974  3373  AD 41 1C           LDA SELECT
02975  3376  CD 03 1D           CMP EAS
02976  3379  B0 05              BCS NOBINC
02977  337B  20 77 2D    SBLOK  JSR INCSL
02978  337E  18                 CLC
02979  337F  60                 RTS
02980  3380  38          NOBINC SEC






DISASS128.ASM......PAGE 0058

LINE# LOC   CODE        LINE


02981  3381  60                 RTS
02982  3382              ;*********************************
02983  3382  20 2E       MBYTE  .BYTE ' .BYTE ',0
02983  3389  00 
02984  338A  20 2E       MWORD  .BYTE ' .WORD ',0
02984  3391  00 
02985  3392  20 2E       MDBYTE .BYTE ' .DBYTE ',0
02985  339A  00 
02986  339B              ;*********************************
02987  339B              ;.FIL 0:TABLE.ASM
02988  339B              ;*********************************
02989  339B              ;.END
02990  339B              ;*********************************
02991  339B              ; FILE TABLE.ASM
02992  339B              ;*********************************
02993  339B              ;
02994  339B              ;        DISASSEMBLER128
02995  339B              ;    SYMBOLIC DISASSEMBLER
02996  339B              ;       BY DENTON MARLOWE
02997  339B              ;
02998  339B              ;  (C)1986 BY DENTON MARLOWE
02999  339B              ;
03000  339B              ;*********************************
03001  339B              ;       PRINT MNEMONIC
03002  339B              ;
03003  339B              ; OPCODE IN A
03004  339B              ;
03005  339B              ; BUG ILLEGAL OPCODE WOULD PRINT OUT AS
03006  339B              ;
03007  339B              ; ZZZZ XX ...  .BYTE $XX ;??? ILLEGAL OPCODE
03008  339B              ; WHERE THE "..." WERE THREE NULLS
03009  339B              ; BECAUSE ILLEGAL OPCODE MNEMONIC IS CODES AS 0,0
,0
03010  339B              ;
03011  339B              ;*********************************
03012  339B  A2 03       MNEMON LDX #3          ;3 CHARACTERS
03013  339D  8E 70 1C           STX TEMP        ;COUNTER
03014  33A0  AA                 TAX             ;CODE IS INDEX
03015  33A1  BD 16 35           LDA MCODES,X    ;GET OFFSET
03016  33A4  AA                 TAX             ;INDEX OFFSET
03017  33A5  BD 3E 34    MNLOOP LDA MNAMES,X    ;GET CHARACTER
03018  33A8              ;BEGIN REV 2017-0
03019  33A8  F0 09              BEQ ILLOP       ;ILLEGAL OPCODE MNEMONIC C
HAR IS A NULL
03020  33AA              ;END REV 2017-0
03021  33AA  8E 72 1C           STX SAVX        ;SAVE INDEX
03022  33AD  20 64 28           JSR PCHAR       ;PRINT CHAR
03023  33B0  AE 72 1C           LDX SAVX        ;GET INDEX
03024  33B3              ;BEGIN REV 2017-1
03025  33B3              ILLOP  = *
03026  33B3              ;END REV 2017-0
03027  33B3  E8                 INX             ;NEXT CHAR
03028  33B4  CE 70 1C           DEC TEMP        ;DEC COUNT
03029  33B7  D0 EC              BNE MNLOOP      ;LOOP TILL 0
03030  33B9  60                 RTS             ;RETURN
03031  33BA              ;*********************************
03032  33BA              ;        PRINT OPERAND






DISASS128.ASM......PAGE 0059

LINE# LOC   CODE        LINE


03033  33BA              ;*********************************
03034  33BA  48          PRTASS PHA             ;STACK INDEX
03035  33BB  20 5B 2E           JSR PRTDAT      ;PRINT LINE DATA
03036  33BE  68                 PLA             ;PULL INDEX
03037  33BF  A8                 TAY             ;SAVE INDEX
03038  33C0  A9 EA              LDA #<SUBP
03039  33C2  A2 33              LDX #>SUBP
03040  33C4  4C D4 33           JMP GETOPE      ;LOOK UP ROUTINE
03041  33C7              ;*********************************
03042  33C7  A8          OPERN1 TAY             ;SAVE INDEX
03043  33C8  A9 06              LDA #<SUBS1
03044  33CA  A2 34              LDX #>SUBS1
03045  33CC  4C D4 33           JMP GETOPE      ;LOOK UP ROUTINE
03046  33CF              ;*********************************
03047  33CF  A8          OPERND TAY             ;SAVE INDEX
03048  33D0  A9 22              LDA #<SUBS
03049  33D2  A2 34              LDX #>SUBS
03050  33D4              ;*********************************
03051  33D4              ; LOOK UP AND JMP TO ROUTINE
03052  33D4              ;*********************************
03053  33D4  85 FB       GETOPE STA ZEROUR      ;LOW TABLE
03054  33D6  86 FC              STX ZEROUR+1    ;HIGH TABLE
03055  33D8  B9 16 36           LDA MODES,Y     ;GET OFFSET
03056  33DB  A8                 TAY             ;INDEX OFFSET
03057  33DC  B1 FB              LDA (ZEROUR),Y  ;GET LOW BYTE
03058  33DE  8D 6E 1C           STA ADRS        ;STORE
03059  33E1  C8                 INY             ;INC INDEX
03060  33E2  B1 FB              LDA (ZEROUR),Y  ;GET HIGH BYTE
03061  33E4  8D 6F 1C           STA ADRS+1      ;STORE
03062  33E7  6C 6E 1C           JMP (ADRS)      ;INDIRECT JMP
03063  33EA              ;*********************************
03064  33EA              ; TABLE OF ADDRESSING MODE SUBS
03065  33EA              ;*********************************
03066  33EA              ; MACHINE LANGUAGE ROUTINES
03067  33EA              ;*********************************
03068  33EA              SUBP   = *             ; MODES
03069  33EA  E8 2D       .WORD  PRTONE          ; 0  $00
03070  33EC  E8 2D       .WORD  PRTONE          ; 2  $02
03071  33EE  FE 2D       .WORD  PRTTWO          ; 4  $04
03072  33F0  FE 2D       .WORD  PRTTWO          ; 6  $06
03073  33F2  FE 2D       .WORD  PRTTWO          ; 8  $08
03074  33F4  FE 2D       .WORD  PRTTWO          ; 10 $0A
03075  33F6  23 2E       .WORD  PRTTHE          ; 12 $0C
03076  33F8  23 2E       .WORD  PRTTHE          ; 14 $0E
03077  33FA  23 2E       .WORD  PRTTHE          ; 16 $10
03078  33FC  E8 2D       .WORD  PRTONE          ; 18 $12
03079  33FE  FE 2D       .WORD  PRTTWO          ; 20 $14
03080  3400  FE 2D       .WORD  PRTTWO          ; 22 $16
03081  3402  FE 2D       .WORD  PRTTWO          ; 24 $18
03082  3404  23 2E       .WORD  PRTTHE          ; 26 $1A
03083  3406              ;*********************************
03084  3406              ; CODE ANALYSIS ROUTINES
03085  3406              ;*********************************
03086  3406              SUBS1  = *             ; MODES
03087  3406  DD 2B       .WORD  IMPONE          ; 0  $00






DISASS128.ASM......PAGE 0060

LINE# LOC   CODE        LINE


03088  3408  DD 2B       .WORD  IMPONE          ; 2  $02
03089  340A  58 2B       .WORD  IMMEDT          ; 4  $04
03090  340C  A1 2A       .WORD  ONEBYT          ; 6  $06
03091  340E  A1 2A       .WORD  ONEBYT          ; 8  $08
03092  3410  A1 2A       .WORD  ONEBYT          ; 10 $0A
03093  3412  D6 2A       .WORD  TWOBYT          ; 12 $0C
03094  3414  D6 2A       .WORD  TWOBYT          ; 14 $0E
03095  3416  D6 2A       .WORD  TWOBYT          ; 16 $10
03096  3418  DD 2B       .WORD  IMPONE          ; 18 $12
03097  341A  14 2C       .WORD  RELATV          ; 20 $14
03098  341C  A1 2A       .WORD  ONEBYT          ; 22 $16
03099  341E  A1 2A       .WORD  ONEBYT          ; 24 $18
03100  3420  D6 2A       .WORD  TWOBYT          ; 26 $1A
03101  3422              ;*********************************
03102  3422              ; FINAL PASS ADDRESSING MODES
03103  3422              ;*********************************
03104  3422              SUBS   = *             ; MODES
03105  3422  12 2B       .WORD  ILLEGL          ; 0  $00
03106  3424  53 2B       .WORD  ACC             ; 2  $02
03107  3426  58 2B       .WORD  IMMEDT          ; 4  $04
03108  3428  8F 2B       .WORD  ZEROPG          ; 6  $06
03109  342A  92 2B       .WORD  ZEROX           ; 8  $08
03110  342C  98 2B       .WORD  ZEROY           ; 10 $0A
03111  342E  9F 2B       .WORD  ABSLUT          ; 12 $0C
03112  3430  C4 2B       .WORD  ABSX            ; 14 $0E
03113  3432  CA 2B       .WORD  ABSY            ; 16 $10
03114  3434  D0 2B       .WORD  IMPLID          ; 18 $12
03115  3436  14 2C       .WORD  RELATV          ; 20 $14
03116  3438  FF 2B       .WORD  INDX            ; 22 $16
03117  343A  08 2C       .WORD  INDY            ; 24 $18
03118  343C  EA 2B       .WORD  INDRCT          ; 26 $1A
03119  343E              ;*********************************
03120  343E              ; LIST OF MNEMONICS
03121  343E              ;*********************************
03122  343E              MNAMES = *             ; MCODES
03123  343E  00          .BYTE  0,0,0           ; 0   $00
03123  343F  00 
03123  3440  00 
03124  3441  41 44 43    .BYTE  'ADC'           ; 3   $03
03125  3444  41 4E 44    .BYTE  'AND'           ; 6   $06
03126  3447  41 53 4C    .BYTE  'ASL'           ; 9   $09
03127  344A  42 43 43    .BYTE  'BCC'           ; 12  $0C
03128  344D  42 43 53    .BYTE  'BCS'           ; 15  $0F
03129  3450  42 45 51    .BYTE  'BEQ'           ; 18  $12
03130  3453  42 49 54    .BYTE  'BIT'           ; 21  $15
03131  3456  42 4D 49    .BYTE  'BMI'           ; 24  $18
03132  3459  42 4E 45    .BYTE  'BNE'           ; 27  $1B
03133  345C  42 50 4C    .BYTE  'BPL'           ; 30  $1E
03134  345F  42 52 4B    .BYTE  'BRK'           ; 33  $21
03135  3462  42 56 43    .BYTE  'BVC'           ; 36  $24
03136  3465  42 56 53    .BYTE  'BVS'           ; 39  $27
03137  3468  43 4C 43    .BYTE  'CLC'           ; 42  $2A
03138  346B  43 4C 44    .BYTE  'CLD'           ; 45  $2D
03139  346E  43 4C 49    .BYTE  'CLI'           ; 48  $30
03140  3471  43 4C 56    .BYTE  'CLV'           ; 51  $33






DISASS128.ASM......PAGE 0061

LINE# LOC   CODE        LINE


03141  3474  43 4D 50    .BYTE  'CMP'           ; 54  $36
03142  3477  43 50 58    .BYTE  'CPX'           ; 57  $39
03143  347A  43 50 59    .BYTE  'CPY'           ; 60  $3C
03144  347D  44 45 43    .BYTE  'DEC'           ; 63  $3F
03145  3480  44 45 58    .BYTE  'DEX'           ; 66  $42
03146  3483  44 45 59    .BYTE  'DEY'           ; 69  $45
03147  3486  45 4F 52    .BYTE  'EOR'           ; 72  $48
03148  3489  49 4E 43    .BYTE  'INC'           ; 75  $4B
03149  348C  49 4E 58    .BYTE  'INX'           ; 78  $4E
03150  348F  49 4E 59    .BYTE  'INY'           ; 81  $51
03151  3492  4A 4D 50    .BYTE  'JMP'           ; 84  $54
03152  3495  4A 53 52    .BYTE  'JSR'           ; 87  $57
03153  3498  4C 44 41    .BYTE  'LDA'           ; 90  $5A
03154  349B  4C 44 58    .BYTE  'LDX'           ; 93  $5D
03155  349E  4C 44 59    .BYTE  'LDY'           ; 96  $60
03156  34A1  4C 53 52    .BYTE  'LSR'           ; 99  $63
03157  34A4  4E 4F 50    .BYTE  'NOP'           ; 102 $66
03158  34A7  4F 52 41    .BYTE  'ORA'           ; 105 $69
03159  34AA  50 48 41    .BYTE  'PHA'           ; 108 $6C
03160  34AD  50 48 50    .BYTE  'PHP'           ; 111 $6F
03161  34B0  50 4C 41    .BYTE  'PLA'           ; 114 $72
03162  34B3  50 4C 50    .BYTE  'PLP'           ; 117 $75
03163  34B6  52 4F 4C    .BYTE  'ROL'           ; 120 $78
03164  34B9  52 4F 52    .BYTE  'ROR'           ; 123 $7B
03165  34BC  52 54 49    .BYTE  'RTI'           ; 126 $7E
03166  34BF  52 54 53    .BYTE  'RTS'           ; 129 $81
03167  34C2  53 42 43    .BYTE  'SBC'           ; 132 $84
03168  34C5  53 45 43    .BYTE  'SEC'           ; 135 $87
03169  34C8  53 45 44    .BYTE  'SED'           ; 138 $8A
03170  34CB  53 45 49    .BYTE  'SEI'           ; 141 $8D
03171  34CE  53 54 41    .BYTE  'STA'           ; 144 $90
03172  34D1  53 54 58    .BYTE  'STX'           ; 147 $93
03173  34D4  53 54 59    .BYTE  'STY'           ; 150 $96
03174  34D7  54 41 58    .BYTE  'TAX'           ; 153 $99
03175  34DA  54 41 59    .BYTE  'TAY'           ; 156 $9C
03176  34DD  54 53 58    .BYTE  'TSX'           ; 159 $9F
03177  34E0  54 58 41    .BYTE  'TXA'           ; 162 $A2
03178  34E3  54 58 53    .BYTE  'TXS'           ; 165 $A5
03179  34E6  54 59 41    .BYTE  'TYA'           ; 168 $A8
03180  34E9              ;*********************************
03181  34E9              ; QUASI-OPCODES
03182  34E9              ;*********************************
03183  34E9  41 53 4F    .BYTE  'ASO'           ; 171 $AB
03184  34EC  52 4C 41    .BYTE  'RLA'           ; 174 $AE
03185  34EF  4C 53 45    .BYTE  'LSE'           ; 177 $B1
03186  34F2  52 52 41    .BYTE  'RRA'           ; 180 $B4
03187  34F5  41 58 53    .BYTE  'AXS'           ; 183 $B7
03188  34F8  4C 41 58    .BYTE  'LAX'           ; 186 $BA
03189  34FB  44 43 4D    .BYTE  'DCM'           ; 189 $BD
03190  34FE  49 4E 53    .BYTE  'INS'           ; 192 $C0
03191  3501  41 4C 52    .BYTE  'ALR'           ; 195 $C3
03192  3504  41 52 52    .BYTE  'ARR'           ; 198 $C6
03193  3507  4F 41 4C    .BYTE  'OAL'           ; 201 $C9
03194  350A  53 41 58    .BYTE  'SAX'           ; 204 $CC
03195  350D  4E 4F 50    .BYTE  'NOP'           ; 207 $CF






DISASS128.ASM......PAGE 0062

LINE# LOC   CODE        LINE


03196  3510  53 4B 42    .BYTE  'SKB'           ; 210 $D2
03197  3513  53 4B 57    .BYTE  'SKW'           ; 213 $D5
03198  3516              ;*********************************
03199  3516              ; TABLE OF MNEMONIC CODES
03200  3516              ;*********************************
03201  3516              ;
03202  3516              ;A MNEMONIC'S CODE IS ITS OFFSET
03203  3516              ;    INTO MNAMES, THE LIST OF
03204  3516              ;         MNEONIC NAMES.
03205  3516              ;
03206  3516              ;*********************************
03207  3516              MCODES = *
03208  3516              ;     0X  1X  2X  3X  4X  5X  6X  7X
03209  3516              ; 0X  BRK ORA KIL SLO NOP ORA ASL SLO
03210  3516  21          .BYTE  $21,$69,$00,$00,$00,$69,$09,$00
03210  3517  69 
03210  3518  00 
03210  3519  00 
03210  351A  00 
03210  351B  69 
03210  351C  09 
03210  351D  00 
03211  351E              ;     8X  9X  AX  BX  CX  DX  EX  FX
03212  351E                                     ;PHP ORA ASL ANC NOP ORA A
SL SLO
03213  351E  6F          .BYTE  $6F,$69,$09,$00,$00,$69,$09,$00
03213  351F  69 
03213  3520  09 
03213  3521  00 
03213  3522  00 
03213  3523  69 
03213  3524  09 
03213  3525  00 
03214  3526              ; 1X  BPL ORA KIL SLO NOP ORA ASL SLO
03215  3526  1E          .BYTE  $1E,$69,$00,$00,$00,$69,$09,$00
03215  3527  69 
03215  3528  00 
03215  3529  00 
03215  352A  00 
03215  352B  69 
03215  352C  09 
03215  352D  00 
03216  352E                                     ;CLC ORA NOP SLO NOP ORA A
SL SLO
03217  352E  2A          .BYTE  $2A,$69,$00,$00,$00,$69,$09,$00
03217  352F  69 
03217  3530  00 
03217  3531  00 
03217  3532  00 
03217  3533  69 
03217  3534  09 
03217  3535  00 
03218  3536              ; 2X  JSR AND KIL RLA BIT AND ROL RLA
03219  3536  57          .BYTE  $57,$06,$00,$00,$15,$06,$78,$00
03219  3537  06 
03219  3538  00 
03219  3539  00 






DISASS128.ASM......PAGE 0063

LINE# LOC   CODE        LINE


03219  353A  15 
03219  353B  06 
03219  353C  78 
03219  353D  00 
03220  353E                                     ;PLP ABD ROL ANC BIT AND R
OL RLA
03221  353E  75          .BYTE  $75,$06,$78,$00,$15,$06,$78,$00
03221  353F  06 
03221  3540  78 
03221  3541  00 
03221  3542  15 
03221  3543  06 
03221  3544  78 
03221  3545  00 
03222  3546              ; 3X  BMI AND KIL RLA NOP AND ROL RLA
03223  3546  18          .BYTE  $18,$06,$00,$00,$00,$06,$78,$00
03223  3547  06 
03223  3548  00 
03223  3549  00 
03223  354A  00 
03223  354B  06 
03223  354C  78 
03223  354D  00 
03224  354E              ;     SEC AND NOP RLA NOP AND ROL RLA
03225  354E  87          .BYTE  $87,$06,$00,$00,$00,$06,$78,$00
03225  354F  06 
03225  3550  00 
03225  3551  00 
03225  3552  00 
03225  3553  06 
03225  3554  78 
03225  3555  00 
03226  3556              ; 4X  RTI EOR KIL SRE NOP EOR LSR SRE
03227  3556  7E          .BYTE  $7E,$48,$00,$00,$00,$48,$63,$00
03227  3557  48 
03227  3558  00 
03227  3559  00 
03227  355A  00 
03227  355B  48 
03227  355C  63 
03227  355D  00 
03228  355E              ;     PHA EOR LSR ALR JMP EOR LSR SRE
03229  355E  6C          .BYTE  $6C,$48,$63,$00,$54,$48,$63,$00
03229  355F  48 
03229  3560  63 
03229  3561  00 
03229  3562  54 
03229  3563  48 
03229  3564  63 
03229  3565  00 
03230  3566              ; 5X  BVC EOR KIL SRE NOP EOR LSR SRE
03231  3566  24          .BYTE  $24,$48,$00,$00,$00,$48,$63,$00
03231  3567  48 
03231  3568  00 
03231  3569  00 
03231  356A  00 






DISASS128.ASM......PAGE 0064

LINE# LOC   CODE        LINE


03231  356B  48 
03231  356C  63 
03231  356D  00 
03232  356E              ;     CLI EOR NOP SRE NOP EOR LSR SRE
03233  356E  30          .BYTE  $30,$48,$00,$00,$00,$48,$63,$00
03233  356F  48 
03233  3570  00 
03233  3571  00 
03233  3572  00 
03233  3573  48 
03233  3574  63 
03233  3575  00 
03234  3576              ; 6X  RTS ADC KIL RRA NOP ADC ROR RRA
03235  3576  81          .BYTE  $81,$03,$00,$00,$00,$03,$7B,$00
03235  3577  03 
03235  3578  00 
03235  3579  00 
03235  357A  00 
03235  357B  03 
03235  357C  7B 
03235  357D  00 
03236  357E              ;     PLA ADC ROR ARR JMP ADC ROR RRA
03237  357E  72          .BYTE  $72,$03,$7B,$00,$54,$03,$7B,$00
03237  357F  03 
03237  3580  7B 
03237  3581  00 
03237  3582  54 
03237  3583  03 
03237  3584  7B 
03237  3585  00 
03238  3586              ; 7X  BVS ADC KIL RRA NOP ADC ROR RRA
03239  3586  27          .BYTE  $27,$03,$00,$00,$00,$03,$7B,$00
03239  3587  03 
03239  3588  00 
03239  3589  00 
03239  358A  00 
03239  358B  03 
03239  358C  7B 
03239  358D  00 
03240  358E              ;     SEI ADC NOP RRA NOP ADC ROR RRA
03241  358E  8D          .BYTE  $8D,$03,$00,$00,$00,$03,$7B,$00
03241  358F  03 
03241  3590  00 
03241  3591  00 
03241  3592  00 
03241  3593  03 
03241  3594  7B 
03241  3595  00 
03242  3596              ; 8X  NOP STA NOP SAX STY STA STX SAX
03243  3596  00          .BYTE  $00,$90,$00,$00,$96,$90,$93,$00
03243  3597  90 
03243  3598  00 
03243  3599  00 
03243  359A  96 
03243  359B  90 






DISASS128.ASM......PAGE 0065

LINE# LOC   CODE        LINE


03243  359C  93 
03243  359D  00 
03244  359E              ;     DEY NOP TXA XXA STY STA STX SAX
03245  359E  45          .BYTE  $45,$00,$A2,$00,$96,$90,$93,$00
03245  359F  00 
03245  35A0  A2 
03245  35A1  00 
03245  35A2  96 
03245  35A3  90 
03245  35A4  93 
03245  35A5  00 
03246  35A6              ; 9X  BCC STA KIL AHX STY STA STX SAX 
03247  35A6  0C          .BYTE  $0C,$90,$00,$00,$96,$90,$93,$00
03247  35A7  90 
03247  35A8  00 
03247  35A9  00 
03247  35AA  96 
03247  35AB  90 
03247  35AC  93 
03247  35AD  00 
03248  35AE              ;     TYA STA TXS TAS SHY STA SHX AHX
03249  35AE  A8          .BYTE  $A8,$90,$A5,$00,$00,$90,$00,$00
03249  35AF  90 
03249  35B0  A5 
03249  35B1  00 
03249  35B2  00 
03249  35B3  90 
03249  35B4  00 
03249  35B5  00 
03250  35B6              ; AX  LDY LDA LDX LAX LDY LDA LDX LAX
03251  35B6  60          .BYTE  $60,$5A,$5D,$00,$60,$5A,$5D,$00
03251  35B7  5A 
03251  35B8  5D 
03251  35B9  00 
03251  35BA  60 
03251  35BB  5A 
03251  35BC  5D 
03251  35BD  00 
03252  35BE              ;     TAY LDA TAX LAX LDY LDA LDX LAX
03253  35BE  9C          .BYTE  $9C,$5A,$99,$00,$60,$5A,$5D,$00
03253  35BF  5A 
03253  35C0  99 
03253  35C1  00 
03253  35C2  60 
03253  35C3  5A 
03253  35C4  5D 
03253  35C5  00 
03254  35C6              ; BX  BCS LDA KIL LAX LDY LDA LDX LAX
03255  35C6  0F          .BYTE  $0F,$5A,$00,$00,$60,$5A,$5D,$00
03255  35C7  5A 
03255  35C8  00 
03255  35C9  00 
03255  35CA  60 
03255  35CB  5A 
03255  35CC  5D 






DISASS128.ASM......PAGE 0066

LINE# LOC   CODE        LINE


03255  35CD  00 
03256  35CE              ;     CLV LDA TSX LAS LDY LDA LDX LAX
03257  35CE  33          .BYTE  $33,$5A,$9F,$00,$60,$5A,$5D,$00
03257  35CF  5A 
03257  35D0  9F 
03257  35D1  00 
03257  35D2  60 
03257  35D3  5A 
03257  35D4  5D 
03257  35D5  00 
03258  35D6              ; CX  CPY CMP NOP DCP CPY CMP DEC DCP
03259  35D6  3C          .BYTE  $3C,$36,$00,$00,$3C,$36,$3F,$00
03259  35D7  36 
03259  35D8  00 
03259  35D9  00 
03259  35DA  3C 
03259  35DB  36 
03259  35DC  3F 
03259  35DD  00 
03260  35DE              ;     INY CMP DEX AXS CPY CMP DEC DCP
03261  35DE  51          .BYTE  $51,$36,$42,$00,$3C,$36,$3F,$00
03261  35DF  36 
03261  35E0  42 
03261  35E1  00 
03261  35E2  3C 
03261  35E3  36 
03261  35E4  3F 
03261  35E5  00 
03262  35E6              ; DX  BNE CMP KIL DCP NOP CMP DEC DCP
03263  35E6  1B          .BYTE  $1B,$36,$00,$00,$00,$36,$3F,$00
03263  35E7  36 
03263  35E8  00 
03263  35E9  00 
03263  35EA  00 
03263  35EB  36 
03263  35EC  3F 
03263  35ED  00 
03264  35EE              ;     CLD CMP NOP DCP NOP CMP DEC DCP
03265  35EE  2D          .BYTE  $2D,$36,$00,$00,$00,$36,$3F,$00
03265  35EF  36 
03265  35F0  00 
03265  35F1  00 
03265  35F2  00 
03265  35F3  36 
03265  35F4  3F 
03265  35F5  00 
03266  35F6              ; EX  CPX SBC NOP ISC CPX SBC INC ISC
03267  35F6  39          .BYTE  $39,$84,$00,$00,$39,$84,$4B,$00
03267  35F7  84 
03267  35F8  00 
03267  35F9  00 
03267  35FA  39 
03267  35FB  84 
03267  35FC  4B 
03267  35FD  00 






DISASS128.ASM......PAGE 0067

LINE# LOC   CODE        LINE


03268  35FE              ;     INX SBC NOP SBC CPX SBC INC ISC
03269  35FE  4E          .BYTE  $4E,$84,$66,$00,$39,$84,$4B,$00
03269  35FF  84 
03269  3600  66 
03269  3601  00 
03269  3602  39 
03269  3603  84 
03269  3604  4B 
03269  3605  00 
03270  3606              ; FX  BEQ SBC KIL ISC NOP SBC INC ISC
03271  3606  12          .BYTE  $12,$84,$00,$00,$00,$84,$4B,$00
03271  3607  84 
03271  3608  00 
03271  3609  00 
03271  360A  00 
03271  360B  84 
03271  360C  4B 
03271  360D  00 
03272  360E              ;     SED SBC NOP ISC NOP SBC INC ISC
03273  360E  8A          .BYTE  $8A,$84,$00,$00,$00,$84,$4B,$00
03273  360F  84 
03273  3610  00 
03273  3611  00 
03273  3612  00 
03273  3613  84 
03273  3614  4B 
03273  3615  00 
03274  3616              ;*********************************
03275  3616              ; TABLE OF ADDRESSING MODE CODES
03276  3616              ;*********************************
03277  3616              ;
03278  3616              ; AN ADDRESSING MODE'S CODE IS
03279  3616              ; ITS OFFSET INTO SUBS, THE TABLE
03280  3616              ; OF ADDRESSING MODE SUBROUTINES
03281  3616              ;
03282  3616              ; ILLEGL ; 0  $00
03283  3616              ; ACC    ; 2  $02
03284  3616              ; IMMEDT ; 4  $04
03285  3616              ; ZEROPG ; 6  $06
03286  3616              ; ZEROX  ; 8  $08
03287  3616              ; ZEROY  ; 10 $0A
03288  3616              ; ABSLUT ; 12 $0C
03289  3616              ; ABSX   ; 14 $0E
03290  3616              ; ABSY   ; 16 $10
03291  3616              ; IMPLID ; 18 $12
03292  3616              ; RELATV ; 20 $14
03293  3616              ; INDX   ; 22 $16
03294  3616              ; INDY   ; 24 $18
03295  3616              ; INDRCT ; 26 $1A
03296  3616              ;*********************************
03297  3616              MODES  = * 
03298  3616              ; 0X   0  1 2 3 4 5 6 7
03299  3616  12          .BYTE  18,22,0,0,0,6,6,0
03299  3617  16 
03299  3618  00 






DISASS128.ASM......PAGE 0068

LINE# LOC   CODE        LINE


03299  3619  00 
03299  361A  00 
03299  361B  06 
03299  361C  06 
03299  361D  00 
03300  361E              ;      8  9 A B C D E F
03301  361E  12          .BYTE  18,4,2,0,0,12,12,0
03301  361F  04 
03301  3620  02 
03301  3621  00 
03301  3622  00 
03301  3623  0C 
03301  3624  0C 
03301  3625  00 
03302  3626              ; 1X   0  1 2 3 4 5 6 7
03303  3626  14          .BYTE  20,24,0,0,0,8,8,0
03303  3627  18 
03303  3628  00 
03303  3629  00 
03303  362A  00 
03303  362B  08 
03303  362C  08 
03303  362D  00 
03304  362E              ;      8  9 A B C D E F
03305  362E  12          .BYTE  18,16,0,0,0,14,14,0
03305  362F  10 
03305  3630  00 
03305  3631  00 
03305  3632  00 
03305  3633  0E 
03305  3634  0E 
03305  3635  00 
03306  3636              ; 2X   0  1 2 3 4 5 6 7
03307  3636  0C          .BYTE  12,22,0,0,6,6,6,0
03307  3637  16 
03307  3638  00 
03307  3639  00 
03307  363A  06 
03307  363B  06 
03307  363C  06 
03307  363D  00 
03308  363E              ;.BYTE 12,22,0,0,28,6,6,0
03309  363E              ;      8  9 A B C D E F
03310  363E  12          .BYTE  18,4,2,0,12,12,12,0
03310  363F  04 
03310  3640  02 
03310  3641  00 
03310  3642  0C 
03310  3643  0C 
03310  3644  0C 
03310  3645  00 
03311  3646              ;.BYTE 18,4,2,0,30,12,12,0
03312  3646              ; 3X   0  1 2 3 4 5 6 7
03313  3646  14          .BYTE  20,24,0,0,0,8,8,0
03313  3647  18 






DISASS128.ASM......PAGE 0069

LINE# LOC   CODE        LINE


03313  3648  00 
03313  3649  00 
03313  364A  00 
03313  364B  08 
03313  364C  08 
03313  364D  00 
03314  364E              ;      8  9 A B C D E F
03315  364E  12          .BYTE  18,16,0,0,0,14,14,0
03315  364F  10 
03315  3650  00 
03315  3651  00 
03315  3652  00 
03315  3653  0E 
03315  3654  0E 
03315  3655  00 
03316  3656              ; 4X   0  1 2 3 4 5 6 7
03317  3656  12          .BYTE  18,22,0,0,0,6,6,0
03317  3657  16 
03317  3658  00 
03317  3659  00 
03317  365A  00 
03317  365B  06 
03317  365C  06 
03317  365D  00 
03318  365E              ;      8  9 A B C D E F
03319  365E  12          .BYTE  18,4,2,0,12,12,12,0
03319  365F  04 
03319  3660  02 
03319  3661  00 
03319  3662  0C 
03319  3663  0C 
03319  3664  0C 
03319  3665  00 
03320  3666              ; 5X   0  1 2 3 4 5 6 7
03321  3666  14          .BYTE  20,24,0,0,0,8,8,0
03321  3667  18 
03321  3668  00 
03321  3669  00 
03321  366A  00 
03321  366B  08 
03321  366C  08 
03321  366D  00 
03322  366E              ;      8  9 A B C D E F
03323  366E  12          .BYTE  18,16,0,0,0,14,14,0
03323  366F  10 
03323  3670  00 
03323  3671  00 
03323  3672  00 
03323  3673  0E 
03323  3674  0E 
03323  3675  00 
03324  3676              ; 6X   0  1 2 3 4 5 6 7
03325  3676  12          .BYTE  18,22,0,0,0,6,6,0
03325  3677  16 
03325  3678  00 






DISASS128.ASM......PAGE 0070

LINE# LOC   CODE        LINE


03325  3679  00 
03325  367A  00 
03325  367B  06 
03325  367C  06 
03325  367D  00 
03326  367E              ;      8  9 A B C D E F
03327  367E  12          .BYTE  18,4,2,0,26,12,12,0
03327  367F  04 
03327  3680  02 
03327  3681  00 
03327  3682  1A 
03327  3683  0C 
03327  3684  0C 
03327  3685  00 
03328  3686              ; 7X   0  1 2 3 4 5 6 7
03329  3686  14          .BYTE  20,24,0,0,0,8,8,0
03329  3687  18 
03329  3688  00 
03329  3689  00 
03329  368A  00 
03329  368B  08 
03329  368C  08 
03329  368D  00 
03330  368E              ;      8  9 A B C D E F
03331  368E  12          .BYTE  18,16,0,0,0,14,14,0
03331  368F  10 
03331  3690  00 
03331  3691  00 
03331  3692  00 
03331  3693  0E 
03331  3694  0E 
03331  3695  00 
03332  3696              ; 8X   0  1 2 3 4 5 6 7
03333  3696  00          .BYTE  0,22,0,0,6,6,6,0
03333  3697  16 
03333  3698  00 
03333  3699  00 
03333  369A  06 
03333  369B  06 
03333  369C  06 
03333  369D  00 
03334  369E              ;      8  9 A B C D E F
03335  369E  12          .BYTE  18,0,18,0,12,12,12,0
03335  369F  00 
03335  36A0  12 
03335  36A1  00 
03335  36A2  0C 
03335  36A3  0C 
03335  36A4  0C 
03335  36A5  00 
03336  36A6              ; 9X   0  1 2 3 4 5 6 7
03337  36A6  14          .BYTE  20,24,0,0,8,8,10,0
03337  36A7  18 
03337  36A8  00 
03337  36A9  00 






DISASS128.ASM......PAGE 0071

LINE# LOC   CODE        LINE


03337  36AA  08 
03337  36AB  08 
03337  36AC  0A 
03337  36AD  00 
03338  36AE              ;      8  9 A B C D E F
03339  36AE  12          .BYTE  18,16,18,0,0,14,0,0
03339  36AF  10 
03339  36B0  12 
03339  36B1  00 
03339  36B2  00 
03339  36B3  0E 
03339  36B4  00 
03339  36B5  00 
03340  36B6              ; AX   0  1 2 3 4 5 6 7
03341  36B6  04          .BYTE  4,22,4,0,6,6,6,0
03341  36B7  16 
03341  36B8  04 
03341  36B9  00 
03341  36BA  06 
03341  36BB  06 
03341  36BC  06 
03341  36BD  00 
03342  36BE              ;      8  9 A B C D E F
03343  36BE  12          .BYTE  18,4,18,0,12,12,12,0
03343  36BF  04 
03343  36C0  12 
03343  36C1  00 
03343  36C2  0C 
03343  36C3  0C 
03343  36C4  0C 
03343  36C5  00 
03344  36C6              ; BX   0  1 2 3 4 5 6 7
03345  36C6  14          .BYTE  20,24,0,0,8,8,10,0
03345  36C7  18 
03345  36C8  00 
03345  36C9  00 
03345  36CA  08 
03345  36CB  08 
03345  36CC  0A 
03345  36CD  00 
03346  36CE              ;      8  9 A B C D E F
03347  36CE  12          .BYTE  18,16,18,0,14,14,16,0
03347  36CF  10 
03347  36D0  12 
03347  36D1  00 
03347  36D2  0E 
03347  36D3  0E 
03347  36D4  10 
03347  36D5  00 
03348  36D6              ; CX   0  1 2 3 4 5 6 7
03349  36D6  04          .BYTE  4,22,0,0,6,6,6,0
03349  36D7  16 
03349  36D8  00 
03349  36D9  00 
03349  36DA  06 






DISASS128.ASM......PAGE 0072

LINE# LOC   CODE        LINE


03349  36DB  06 
03349  36DC  06 
03349  36DD  00 
03350  36DE              ;      8  9 A B C D E F
03351  36DE  12          .BYTE  18,4,18,0,12,12,12,0
03351  36DF  04 
03351  36E0  12 
03351  36E1  00 
03351  36E2  0C 
03351  36E3  0C 
03351  36E4  0C 
03351  36E5  00 
03352  36E6              ; DX   0  1 2 3 4 5 6 7
03353  36E6  14          .BYTE  20,24,0,0,0,8,8,0
03353  36E7  18 
03353  36E8  00 
03353  36E9  00 
03353  36EA  00 
03353  36EB  08 
03353  36EC  08 
03353  36ED  00 
03354  36EE              ;      8  9 A B C D E F
03355  36EE  12          .BYTE  18,16,0,0,0,14,14,0
03355  36EF  10 
03355  36F0  00 
03355  36F1  00 
03355  36F2  00 
03355  36F3  0E 
03355  36F4  0E 
03355  36F5  00 
03356  36F6              ; EX   0  1 2 3 4 5 6 7
03357  36F6  04          .BYTE  4,22,0,0,6,6,6,0
03357  36F7  16 
03357  36F8  00 
03357  36F9  00 
03357  36FA  06 
03357  36FB  06 
03357  36FC  06 
03357  36FD  00 
03358  36FE              ;      8  9 A B C D E F
03359  36FE  12          .BYTE  18,4,18,0,12,12,12,0
03359  36FF  04 
03359  3700  12 
03359  3701  00 
03359  3702  0C 
03359  3703  0C 
03359  3704  0C 
03359  3705  00 
03360  3706              ; FX   0  1 2 3 4 5 6 7
03361  3706  14          .BYTE  20,24,0,0,0,8,8,0
03361  3707  18 
03361  3708  00 
03361  3709  00 
03361  370A  00 
03361  370B  08 






DISASS128.ASM......PAGE 0073

LINE# LOC   CODE        LINE


03361  370C  08 
03361  370D  00 
03362  370E              ;      8  9 A B C D E F
03363  370E  12          .BYTE  18,16,0,0,0,14,14,0
03363  370F  10 
03363  3710  00 
03363  3711  00 
03363  3712  00 
03363  3713  0E 
03363  3714  0E 
03363  3715  00 
03364  3716              ;*********************************
03365  3716              ;.FIL 0:SYM.ASM
03366  3716              ;*********************************
03367  3716              ;.END
03368  3716              ;*********************************
03369  3716              ; FILE SYMBOL.ASM
03370  3716              ;*********************************
03371  3716              ;
03372  3716              ;        DISASSEMBLER128
03373  3716              ;    SYMBOLIC DISASSEMBLER
03374  3716              ;       BY DENTON MARLOWE
03375  3716              ;
03376  3716              ;  (C)1986 BY DENTON MARLOWE
03377  3716              ;
03378  3716              ;*********************************
03379  3716              ; SYMBOLIC ROUTINES
03380  3716              ;*********************************
03381  3716              ; SYMBOLIC DISASSEMBLY OPTION
03382  3716              ;*********************************
03383  3716  A9 8A       SOP    LDA #<MSS1      ;LOW BYTE MESSAGE
03384  3718  A0 3A              LDY #>MSS1      ;HIGH BYTE MESSAGE
03385  371A  20 0E 28           JSR STRPNT      ;OUTPUT MESSAGE
03386  371D              ;      JSR CRNO    ;GET KEY PRESS
03387  371D  20 D6 27           JSR CRYS
03388  3720  90 08              BCC SOP1        ;C=0 YES
03389  3722              ;*********************************
03390  3722              ; ABSOLUTE DISASSEMBLY SELECTED
03391  3722              ;*********************************
03392  3722  A9 00              LDA #$00        ;SET SYMBLOIC FLAG
03393  3724  8D 57 1C           STA SYMBOL      ;STORE FLAG
03394  3727  4C 73 37           JMP SY          ;FOR INTERNAL
03395  372A              ;*********************************
03396  372A              ; SYMBOLIC DISASSEMBLY SELECTED
03397  372A              ;*********************************
03398  372A  A9 01       SOP1   LDA #$01        ;SET SYMBOLIC FLAG
03399  372C  8D 57 1C           STA SYMBOL      ;STORE FLAG
03400  372F              ;*********************************
03401  372F              ; SETUP START OF TABLE POINTER
03402  372F              ;*********************************
03403  372F  A9 CD              LDA #<STABLE
03404  3731  8D 5A 1C           STA SYMBOS
03405  3734  8D 58 1C           STA SYMBOP
03406  3737  A9 43              LDA #>STABLE
03407  3739  8D 5B 1C           STA SYMBOS+1






DISASS128.ASM......PAGE 0074

LINE# LOC   CODE        LINE


03408  373C  8D 59 1C           STA SYMBOP+1
03409  373F              ;*********************************
03410  373F              ; CHECK FOR SYMBOL TABLE OPTION
03411  373F              ;*********************************
03412  373F  A9 AE       SYTAB  LDA #<MSS2      ;LOW BYTE MESSAGE
03413  3741  A0 3A              LDY #>MSS2      ;HIGH BYTE MESSAGE
03414  3743  20 0E 28           JSR STRPNT      ;OUTPUT MESSAGE
03415  3746  20 E3 27           JSR CRNO        ;GET KEY PRESS
03416  3749  B0 28              BCS SY          ;C=1 NO
03417  374B              ;*********************************
03418  374B              ; APPEND SYMBOL TABLE
03419  374B              ;*********************************
03420  374B  A9 F2              LDA #<MSS4
03421  374D  A0 3A              LDY #>MSS4
03422  374F  20 0E 28           JSR STRPNT
03423  3752  20 E3 27           JSR CRNO
03424  3755  B0 0A              BCS SOP4
03425  3757  A9 50              LDA #<UTABLE
03426  3759  8D 58 1C           STA SYMBOP
03427  375C  A9 45              LDA #>UTABLE
03428  375E  8D 59 1C           STA SYMBOP+1
03429  3761              ;*********************************
03430  3761              ; GO AND LOAD TABLE
03431  3761              ;*********************************
03432  3761  20 06 39    SOP4   JSR READXX      ;READ FILE
03433  3764  B0 0D              BCS SY          ;C=1 ERROR
03434  3766              ;*********************************
03435  3766              ; SETUP END OF TABLE POINTER
03436  3766              ;*********************************
03437  3766  AD 58 1C           LDA SYMBOP      ;XREF POINTER
03438  3769  8D 5C 1C           STA SYMBOE
03439  376C  AD 59 1C           LDA SYMBOP+1
03440  376F  8D 5D 1C           STA SYMBOE+1
03441  3772  60                 RTS
03442  3773              ;*********************************
03443  3773              ; DEFAULT SYMBOL TABLE END
03444  3773              ;*********************************
03445  3773  A9 50       SY     LDA #<UTABLE
03446  3775  8D 5C 1C           STA SYMBOE
03447  3778  A9 45              LDA #>UTABLE
03448  377A  8D 5D 1C           STA SYMBOE+1
03449  377D  60                 RTS
03450  377E              ;*********************************
03451  377E              ; SET OR RESET SYMBOL TABLE
03452  377E              ;*********************************
03453  377E  AD 5A 1C    SSET   LDA SYMBOS
03454  3781  8D 58 1C           STA SYMBOP
03455  3784  AD 5B 1C           LDA SYMBOS+1
03456  3787  8D 59 1C           STA SYMBOP+1
03457  378A  60                 RTS
03458  378B              ;*********************************
03459  378B              ; EQUATE TABLE SETUP
03460  378B              ;*********************************
03461  378B  AD 51 1C    EQUINT LDA TABINE
03462  378E  8D 4D 1C           STA TABINP






DISASS128.ASM......PAGE 0075

LINE# LOC   CODE        LINE


03463  3791  8D 4F 1C           STA TABINS
03464  3794  AD 52 1C           LDA TABINE+1
03465  3797  8D 4E 1C           STA TABINP+1
03466  379A  8D 50 1C           STA TABINS+1
03467  379D  60                 RTS
03468  379E              ;*********************************
03469  379E              ; ENTRY POINT FOR ADDRESS
03470  379E              ;*********************************
03471  379E  AD 57 1C    SYM    LDA SYMBOL
03472  37A1  F0 43              BEQ SYMEND
03473  37A3  AD 41 1C           LDA SELECT      ;COPY SELECT
03474  37A6  8D 64 1C           STA WORKED      ;ADDRESS INTO
03475  37A9  AD 42 1C           LDA SELECT+1    ;WORKED
03476  37AC  8D 65 1C           STA WORKED+1
03477  37AF  4C B7 37           JMP SYM1        ;CHECK FOR MATCH
03478  37B2              ;*********************************
03479  37B2              ; ENTRY POINT FOR OPCODES
03480  37B2              ;*********************************
03481  37B2  AD 57 1C    SYMOP  LDA SYMBOL
03482  37B5  F0 2F              BEQ SYMEND
03483  37B7              ;*********************************
03484  37B7              ; COMPARE ADDRESS TO SYMBOL TABLE
03485  37B7              ;*********************************
03486  37B7  20 7E 37    SYM1   JSR SSET
03487  37BA  20 87 38    SYM2   JSR GETC
03488  37BD  8D 67 1C           STA WORKER+1
03489  37C0  20 7E 38           JSR INCC
03490  37C3  20 87 38           JSR GETC
03491  37C6  8D 66 1C           STA WORKER
03492  37C9              ;*********************************
03493  37C9  38                 SEC             ;SET CARRY
03494  37CA  AD 66 1C           LDA WORKER
03495  37CD  ED 64 1C           SBC WORKED      ;SUB FROM LOW
03496  37D0  8D 70 1C           STA TEMP        ;STORE RESULT
03497  37D3  AD 67 1C           LDA WORKER+1
03498  37D6  ED 65 1C           SBC WORKED+1    ;SUB FROM HIGH
03499  37D9  0D 70 1C           ORA TEMP        ;OR RESULTS
03500  37DC  F0 0A              BEQ MATCH       ;CHECK FOR MATCH
03501  37DE  20 5A 38           JSR NEXTC       ;IF NOT NEXT
03502  37E1  B0 03              BCS SYMEND      ;END OF TABLE?
03503  37E3  4C BA 37           JMP SYM2        ;NO CHECK NEXT
03504  37E6  18          SYMEND CLC             ;NO MATCHES CLEAR
03505  37E7  60                 RTS             ;RETURN
03506  37E8              ;*********************************
03507  37E8              ; FOUND MATCH
03508  37E8              ;*********************************
03509  37E8  AD 31 1C    MATCH  LDA PASS        ;CHECK PASS
03510  37EB  CD 34 1C           CMP CPASS       ;IS IT LAST
03511  37EE  F0 18              BEQ MATCHS      ;IF SO PRINT
03512  37F0  CD 35 1C           CMP SPASS
03513  37F3  F0 3A              BEQ MATCHT
03514  37F5  20 92 2E           JSR RANGE       ;SYMBOL IN RANGE
03515  37F8  90 3F              BCC MATEXT      ;NO INTERNAL EQ
03516  37FA  20 7E 38           JSR INCC        ;INC TO SYMBOL
03517  37FD  20 87 38           JSR GETC        ;GET FIRST CHAR






DISASS128.ASM......PAGE 0076

LINE# LOC   CODE        LINE


03518  3800  C9 20              CMP #$20        ;SPACE
03519  3802  F0 03              BEQ MATONE      ;NOT EQUATE
03520  3804  4C 09 2F           JMP PUTI        ;PUT IN EQUATE
03521  3807  60          MATONE RTS             ;RETURN
03522  3808              ;*********************************
03523  3808              ; CHECK FOR SYMBOL+1
03524  3808              ;*********************************
03525  3808  20 7E 38    MATCHS JSR INCC        ;INC TO LABEL
03526  380B  20 87 38           JSR GETC        ;GET CHARARCTER
03527  380E  C9 20              CMP #$20        ;IS IT SPACE
03528  3810  D0 1D              BNE MATCHT      ;IF NOT GO ON
03529  3812  38                 SEC             ;SET CARRY
03530  3813  AD 58 1C           LDA SYMBOP      ;GET LOW POINT
03531  3816  E9 09              SBC #$09        ;LAST SYMBOL
03532  3818  48                 PHA             ;PUSH ON STACK
03533  3819  AD 59 1C           LDA SYMBOP+1    ;GET HIGH POINT
03534  381C  E9 00              SBC #$00        ;LAST SYMBOL
03535  381E  A8                 TAY             ;PUT IN Y
03536  381F  68                 PLA             ;GET LO POINT
03537  3820  20 3A 38           JSR STRSYM      ;PRINT SYMBOL
03538  3823  A9 2B              LDA #'+'         ;ASCII +
03539  3825  20 64 28           JSR PCHAR       ;PRINT IT
03540  3828  A9 31              LDA #'1'         ;ASCII 1
03541  382A  20 64 28           JSR PCHAR       ;PRINT IT
03542  382D  38                 SEC             ;C=1 SYMBOL
03543  382E  60                 RTS             ;RETURN
03544  382F              ;*********************************
03545  382F  AD 58 1C    MATCHT LDA SYMBOP      ;LOW BYTE LABEL
03546  3832  AC 59 1C           LDY SYMBOP+1    ;HIGH BYTE LABEL
03547  3835  20 3A 38           JSR STRSYM      ;PRINT LABEL
03548  3838              ;*********************************
03549  3838  38                 SEC             ;MATCH SET CARRY
03550  3839  60          MATEXT RTS             ;RETURN
03551  383A              ;*********************************
03552  383A              ; PRINT SYMBOL
03553  383A              ;*********************************
03554  383A  85 FB       STRSYM STA ZEROUR
03555  383C  84 FC              STY ZEROUR+1
03556  383E  A0 00              LDY #$00
03557  3840  B1 FB       STRSY1 LDA (ZEROUR),Y
03558  3842  F0 0A              BEQ SYEXIT
03559  3844  C9 20              CMP #$20
03560  3846  F0 06              BEQ SYEXIT
03561  3848  20 64 28           JSR PCHAR
03562  384B  C8                 INY
03563  384C  D0 F2              BNE STRSY1
03564  384E  60          SYEXIT RTS
03565  384F  B1 FB       FIXSYM LDA (ZEROUR),Y
03566  3851  F0 FB              BEQ SYEXIT
03567  3853  20 64 28           JSR PCHAR
03568  3856  C8                 INY
03569  3857  4C 4F 38           JMP FIXSYM
03570  385A              ;*********************************
03571  385A              ; INC SYMBOL ADDRESS TABLE POINTER
03572  385A              ;*********************************






DISASS128.ASM......PAGE 0077

LINE# LOC   CODE        LINE


03573  385A  18          NEXTC  CLC
03574  385B  AD 58 1C           LDA SYMBOP
03575  385E  69 08              ADC #$08
03576  3860  8D 58 1C           STA SYMBOP
03577  3863  AD 59 1C           LDA SYMBOP+1
03578  3866  69 00              ADC #$00
03579  3868  8D 59 1C           STA SYMBOP+1
03580  386B  CD 5D 1C           CMP SYMBOE+1
03581  386E  90 0A              BCC COK
03582  3870  D0 0A              BNE NCOK
03583  3872  AD 58 1C           LDA SYMBOP
03584  3875  CD 5C 1C           CMP SYMBOE
03585  3878  B0 02              BCS NCOK
03586  387A  18          COK    CLC
03587  387B  60                 RTS
03588  387C  38          NCOK   SEC
03589  387D  60                 RTS
03590  387E              ;*********************************
03591  387E  EE 58 1C    INCC   INC SYMBOP
03592  3881  D0 03              BNE *+5
03593  3883  EE 59 1C           INC SYMBOP+1
03594  3886  60                 RTS
03595  3887              ;*********************************
03596  3887              ; GET BYTE FROM ADDRESS TABLE
03597  3887              ;*********************************
03598  3887  AD 58 1C    GETC   LDA SYMBOP
03599  388A  85 FB              STA ZEROUR
03600  388C  AD 59 1C           LDA SYMBOP+1
03601  388F  85 FC              STA ZEROUR+1
03602  3891  A0 00              LDY #$00
03603  3893  B1 FB              LDA (ZEROUR),Y
03604  3895  60                 RTS
03605  3896              ;*********************************
03606  3896              ; PRINT EQUATE TABLE
03607  3896              ;*********************************
03608  3896  38          EQUPRT SEC
03609  3897  AD 4F 1C           LDA TABINS
03610  389A  ED 51 1C           SBC TABINE
03611  389D  8D 70 1C           STA TEMP
03612  38A0  AD 50 1C           LDA TABINS+1
03613  38A3  ED 52 1C           SBC TABINE+1
03614  38A6  0D 70 1C           ORA TEMP
03615  38A9  F0 55              BEQ EQUEND
03616  38AB  20 B4 2F           JSR SORT
03617  38AE  20 B5 2C           JSR COMENT
03618  38B1  20 7F 2E           JSR PRTOTH
03619  38B4  A9 84              LDA #<EQUATE
03620  38B6  A0 3B              LDY #>EQUATE
03621  38B8  20 0E 28           JSR STRPNT
03622  38BB  20 51 27           JSR NEWLIN
03623  38BE  20 B5 2C           JSR COMENT
03624  38C1  20 59 2F    EQUOP  JSR GETI
03625  38C4  8D 64 1C           STA WORKED
03626  38C7  20 50 2F           JSR INCI
03627  38CA  20 59 2F           JSR GETI






DISASS128.ASM......PAGE 0078

LINE# LOC   CODE        LINE


03628  38CD  8D 65 1C           STA WORKED+1
03629  38D0  20 7F 2E           JSR PRTOTH
03630  38D3  20 B2 37           JSR SYMOP
03631  38D6  B0 03              BCS EQUOP1
03632  38D8  20 13 2D           JSR PWORK
03633  38DB  A9 3D       EQUOP1 LDA #'='
03634  38DD  20 64 28           JSR PCHAR
03635  38E0  A9 24              LDA #'$'
03636  38E2  20 64 28           JSR PCHAR
03637  38E5  20 16 2D           JSR PWORKD
03638  38E8  20 51 27           JSR NEWLIN
03639  38EB              ;*********************************
03640  38EB  20 50 2F           JSR INCI
03641  38EE  AD 4E 1C           LDA TABINP+1
03642  38F1  CD 52 1C           CMP TABINE+1
03643  38F4  90 CB              BCC EQUOP
03644  38F6  D0 08              BNE EQUEND
03645  38F8  AD 4D 1C           LDA TABINP
03646  38FB  CD 51 1C           CMP TABINE
03647  38FE  90 C1              BCC EQUOP
03648  3900              ;*********************************
03649  3900  20 B5 2C    EQUEND JSR COMENT
03650  3903  4C F0 2E           JMP RESINT
03651  3906              ;*********************************
03652  3906              ; READ CROSS REFERENCE SEQ FILE
03653  3906              ;      INTO SYMBOL TABLE
03654  3906              ;*********************************
03655  3906              ; READ FILE NAME DEFAULT ON CR
03656  3906              ;*********************************
03657  3906  A9 D4       READXX LDA #<MSS3
03658  3908  A0 3A              LDY #>MSS3
03659  390A  20 0E 28           JSR STRPNT
03660  390D  20 E4 FF    SOP2   JSR GETIN
03661  3910  F0 FB              BEQ SOP2
03662  3912  C9 30              CMP #'0'
03663  3914  F0 04              BEQ SOP3
03664  3916  C9 31              CMP #'1'
03665  3918  D0 F3              BNE SOP2
03666  391A  20 D2 FF    SOP3   JSR CHROUT
03667  391D  8D 05 1D           STA TEXTER
03668  3920              ;*********************************
03669  3920  A9 16              LDA #<LOADF
03670  3922  A0 3B              LDY #>LOADF
03671  3924  20 0E 28           JSR STRPNT
03672  3927              ;*********************************
03673  3927  20 6F 27           JSR INSTNG
03674  392A  F0 20              BEQ READXF
03675  392C  98                 TYA
03676  392D  48                 PHA
03677  392E  20 DD 20           JSR INITD
03678  3931  68                 PLA
03679  3932  A8                 TAY
03680  3933  A2 00              LDX #$00
03681  3935  BD 86 3A    XFILE1 LDA NAMS,X
03682  3938  99 7B 1C           STA BUF,Y






DISASS128.ASM......PAGE 0079

LINE# LOC   CODE        LINE


03683  393B  C8                 INY
03684  393C  E8                 INX
03685  393D  E0 04              CPX #$04
03686  393F  D0 F4              BNE XFILE1
03687  3941  98                 TYA
03688  3942  A0 1C              LDY #>BUF
03689  3944  A2 7B              LDX #<BUF
03690  3946  20 BD FF           JSR SETNAM
03691  3949  4C 55 39           JMP REOPEN
03692  394C              ;*********************************
03693  394C              ; DEFAULT FILENAME XRFF0000
03694  394C              ;********************************
03695  394C  A9 0E       READXF LDA #$0E
03696  394E  A0 3A              LDY #>NAME
03697  3950  A2 7C              LDX #<NAME
03698  3952  20 BD FF           JSR SETNAM
03699  3955              ;*********************************
03700  3955              ; OPEN FILE
03701  3955              ;********************************
03702  3955  A9 03       REOPEN LDA #$03
03703  3957  A2 08              LDX #$08
03704  3959  A0 03              LDY #$03
03705  395B  20 BA FF           JSR SETLFS
03706  395E              ;
03707  395E  A9 00              LDA #$00        ;LOAD INTO BANK 1
03708  3960  A2 00              LDX #$00        ;PROGRAM IN BANK 0
03709  3962  20 68 FF           JSR SETBNK
03710  3965              ;
03711  3965  20 C0 FF           JSR OPEN
03712  3968              ;********************************
03713  3968              ; CHECK FOR DISK ERROR
03714  3968              ;*********************************
03715  3968  20 17 27           JSR DISERR
03716  396B  B0 3F              BCS QUITXX
03717  396D              ;*********************************
03718  396D              ; OUTPUT LOADING MESSAGE
03719  396D              ;*********************************
03720  396D  A9 34              LDA #<LOADM     ;MSG LOW
03721  396F  A0 3B              LDY #>LOADM     ;MSG HIGH
03722  3971  20 0E 28           JSR STRPNT      ;OUTPUT MSG
03723  3974              ;*********************************
03724  3974  A9 00              LDA #$00        ;COL COUNTER
03725  3976  8D 70 1C           STA TEMP
03726  3979              ;*********************************
03727  3979              ; INPUT AND LOAD SYMBOL TABLE
03728  3979              ;*********************************
03729  3979  20 BD 39    READX  JSR READS       ;INPUT SYMBOL
03730  397C  20 3B 3A           JSR PUTC
03731  397F  20 63 3A           JSR LINES       ;SCREEN OUT
03732  3982  20 E1 FF           JSR STOP
03733  3985  F0 05              BEQ QUITX
03734  3987  20 B7 FF           JSR READST
03735  398A  F0 ED              BEQ READX
03736  398C              ;*********************************
03737  398C              ;    CLOSE OPEN FILE






DISASS128.ASM......PAGE 0080

LINE# LOC   CODE        LINE


03738  398C              ;*********************************
03739  398C  A9 03       QUITX  LDA #$03
03740  398E  20 C3 FF           JSR CLOSE
03741  3991  20 CC FF           JSR CLRCHN
03742  3994  20 47 2D           JSR CRLF
03743  3997              ;*********************************
03744  3997              ; SET END OF TABLE
03745  3997              ;*********************************
03746  3997  AD 58 1C           LDA SYMBOP
03747  399A  8D 5C 1C           STA SYMBOE
03748  399D  AD 59 1C           LDA SYMBOP+1
03749  39A0  8D 5D 1C           STA SYMBOE+1
03750  39A3              ;*********************************
03751  39A3              ; OUTPUT LOADED MESSAGE
03752  39A3              ;*********************************
03753  39A3  A9 52              LDA #<LOADC
03754  39A5  A0 3B              LDY #>LOADC
03755  39A7  20 0E 28           JSR STRPNT
03756  39AA  18                 CLC
03757  39AB  60                 RTS
03758  39AC              ;*********************************
03759  39AC              ; OUTPUT ERROR MESSAGE
03760  39AC              ;*********************************
03761  39AC  A9 03       QUITXX LDA #$03
03762  39AE  20 C3 FF           JSR CLOSE
03763  39B1  20 CC FF           JSR CLRCHN
03764  39B4  A9 69              LDA #<LOADE
03765  39B6  A0 3B              LDY #>LOADE
03766  39B8  20 0E 28           JSR STRPNT
03767  39BB  38                 SEC
03768  39BC  60                 RTS
03769  39BD              ;*********************************
03770  39BD              ; READ SYMBOL FROM FILE
03771  39BD              ;*********************************
03772  39BD  A2 03       READS  LDX #$03        ;FILE NUMBER
03773  39BF  20 C6 FF           JSR CHKIN       ;FILE IS INPUT
03774  39C2  A0 02              LDY #$02        ;COUNTER
03775  39C4  20 CF FF           JSR CHRIN       ;INPUT CHAR
03776  39C7  99 F9 1C           STA SYMBUF,Y    ;1ST CHAR
03777  39CA  20 D2 FF           JSR CHROUT      ;PRITN IT
03778  39CD  C8                 INY             ;INC POINTER
03779  39CE  20 CF FF    READY  JSR CHRIN       ;NEXT CHAR
03780  39D1  99 F9 1C           STA SYMBUF,Y    ;STORE
03781  39D4  20 D2 FF           JSR CHROUT      ;PRINT IT
03782  39D7  C8                 INY             ;INC OFFSET
03783  39D8  C0 08              CPY #$08        ;8 IS FOR NULL
03784  39DA  D0 F2              BNE READY       ;BRANCH IF NOT
03785  39DC  A9 00              LDA #$00        ;NULL MARKER
03786  39DE  99 F9 1C           STA SYMBUF,Y    ;STORE AT END
03787  39E1              ;*********************************
03788  39E1  20 59 2D           JSR SPACE       ;PRINT SPACE
03789  39E4  20 24 2D           JSR DOLLAR      ;PRINT $ SIGN
03790  39E7              ;*********************************
03791  39E7  AD 05 1D           LDA TEXTER
03792  39EA  C9 30              CMP #'0'






DISASS128.ASM......PAGE 0081

LINE# LOC   CODE        LINE


03793  39EC  F0 2F              BEQ STDREF
03794  39EE              ;*********************************
03795  39EE  A0 00              LDY #$00
03796  39F0  20 FD 39           JSR XGET
03797  39F3  C8                 INY
03798  39F4  20 FD 39           JSR XGET
03799  39F7  20 CF FF           JSR CHRIN       ;GET $0D
03800  39FA  4C CC FF           JMP CLRCHN
03801  39FD              ;*********************************
03802  39FD  20 CF FF    XGET   JSR CHRIN
03803  3A00  20 D2 FF           JSR CHROUT
03804  3A03  20 BF 27           JSR BINARY
03805  3A06  0A                 ASL A
03806  3A07  0A                 ASL A
03807  3A08  0A                 ASL A
03808  3A09  0A                 ASL A
03809  3A0A  99 F9 1C           STA SYMBUF,Y
03810  3A0D  20 CF FF           JSR CHRIN
03811  3A10  20 D2 FF           JSR CHROUT
03812  3A13  20 BF 27           JSR BINARY
03813  3A16  19 F9 1C           ORA SYMBUF,Y
03814  3A19  99 F9 1C           STA SYMBUF,Y
03815  3A1C  60                 RTS
03816  3A1D              ;*********************************
03817  3A1D  A0 00       STDREF LDY #$00        ;ZERO OFFSET
03818  3A1F  20 CF FF           JSR CHRIN       ;HIGH BYTES
03819  3A22  99 F9 1C           STA SYMBUF,Y    ;
03820  3A25  8C 73 1C           STY SAVY        ;
03821  3A28  20 F8 27           JSR PRBYT       ;
03822  3A2B  AC 73 1C           LDY SAVY        ;
03823  3A2E  C8                 INY             ;
03824  3A2F  20 CF FF           JSR CHRIN       ;LOW BYTE
03825  3A32  99 F9 1C           STA SYMBUF,Y    ;
03826  3A35  20 F8 27           JSR PRBYT       ;
03827  3A38  4C CC FF           JMP CLRCHN      ;KEYBOARD INPUT
03828  3A3B              ;*********************************
03829  3A3B              ; MOVE SYMBOL FROM BUFFER TO TABLE
03830  3A3B              ;*********************************
03831  3A3B  A0 00       PUTC   LDY #$00
03832  3A3D  AD 58 1C           LDA SYMBOP
03833  3A40  85 FB              STA ZEROUR
03834  3A42  AD 59 1C           LDA SYMBOP+1
03835  3A45  85 FC              STA ZEROUR+1
03836  3A47  B9 F9 1C    PUT    LDA SYMBUF,Y
03837  3A4A  91 FB              STA (ZEROUR),Y
03838  3A4C  C8                 INY
03839  3A4D  C0 09              CPY #$09
03840  3A4F  D0 F6              BNE PUT
03841  3A51  18                 CLC
03842  3A52  AD 58 1C           LDA SYMBOP
03843  3A55  69 09              ADC #$09
03844  3A57  8D 58 1C           STA SYMBOP
03845  3A5A  AD 59 1C           LDA SYMBOP+1
03846  3A5D  69 00              ADC #$00
03847  3A5F  8D 59 1C           STA SYMBOP+1






DISASS128.ASM......PAGE 0082

LINE# LOC   CODE        LINE


03848  3A62  60                 RTS
03849  3A63              ;*********************************
03850  3A63              ; OUTPUT SYMBOL IN 4 COLUMNS
03851  3A63              ;*********************************
03852  3A63  EE 70 1C    LINES  INC TEMP
03853  3A66  A9 03              LDA #$03
03854  3A68  CD 70 1C           CMP TEMP
03855  3A6B  F0 05              BEQ RESET
03856  3A6D  A9 2E              LDA #'.'
03857  3A6F  4C D2 FF           JMP CHROUT
03858  3A72  A9 00       RESET  LDA #$00
03859  3A74  8D 70 1C           STA TEMP
03860  3A77  A9 0D              LDA #$0D
03861  3A79  4C D2 FF           JMP CHROUT
03862  3A7C              ;*********************************
03863  3A7C              ;   COMMAND MESSAGES
03864  3A7C              ;*********************************
03865  3A7C  30 3A       NAME   .BYTE '0:XRLL0000'
03866  3A86  2C 53       NAMS   .BYTE ',S,R'
03867  3A8A              ;*********************************
03868  3A8A  0D          MSS1   .BYTE $0D
03869  3A8B              ; .BYTE 'SYMBOLIC DISASSEMBLY (Y OR N/CR)? '
03870  3A8B  53 59              .BYTE 'SYMBOLIC DISASSEMBLY (Y/CR OR N)? '

03871  3AAD  00                 .BYTE 0
03872  3AAE  0D          MSS2   .BYTE $0D
03873  3AAF  4C 4F              .BYTE 'LOAD USER SYMBOL TABLE (Y OR N/CR)?
 '
03874  3AD3  00                 .BYTE 0
03875  3AD4  0D          MSS3   .BYTE $0D
03876  3AD5  46 4F              .BYTE 'FORMAT 0=STANDARD 1=ASCII : '
03877  3AF1  00                 .BYTE 0
03878  3AF2  0D          MSS4   .BYTE $0D
03879  3AF3  41 50              .BYTE 'APPEND DEFAULT TABLE (Y OR N/CR)? '

03880  3B15  00                 .BYTE 0
03881  3B16  0D          LOADF  .BYTE $0D
03882  3B17  53 59       .BYTE  'SYMBOL TABLE(CR OR D:NAME): '
03883  3B33  00          .BYTE  0
03884  3B34  0D          LOADM  .BYTE $0D,$0D
03884  3B35  0D 
03885  3B36  52 45       .BYTE  'READING SYMBOL TABLE FILE'
03886  3B4F  0D          .BYTE  $0D,$0D
03886  3B50  0D 
03887  3B51  00          .BYTE  0
03888  3B52  0D          LOADC  .BYTE $0D
03889  3B53  53 59       .BYTE  'SYMBOL TABLE LOADED'
03890  3B66  0D          .BYTE  $0D,$0D
03890  3B67  0D 
03891  3B68  00          .BYTE  0
03892  3B69  0D          LOADE  .BYTE $0D
03893  3B6A  53 59       .BYTE  'SYMBOL TABLE NOT LOADED'
03894  3B81  0D          .BYTE  $0D,$0D
03894  3B82  0D 
03895  3B83  00          .BYTE  0
03896  3B84              ;*********************************
03897  3B84  3B 20       EQUATE .BYTE '; EXTERNAL ADDRESS EQUATES'
03898  3B9E  00                 .BYTE 0






DISASS128.ASM......PAGE 0083

LINE# LOC   CODE        LINE


03899  3B9F              ;*********************************
03900  3B9F              ; PATCH CODE AREA
03901  3B9F              ;*********************************
03902  3B9F                     *=*+$0800
03903  439F              ;*********************************
03904  439F              ; BIT INSTRUCTION CODING
03905  439F              ;*********************************
03906  439F              BITOPT = *
03907  439F  A9 57              LDA #<MSB1      ;TABLE TYPE
03908  43A1  A0 25              LDY #>MSB1
03909  43A3  20 0E 28           JSR STRPNT
03910  43A6  20 E4 FF    BOP0   JSR GETIN
03911  43A9  F0 FB              BEQ BOP0
03912  43AB  C9 30              CMP #'0'        ;STANDARD
03913  43AD  F0 12              BEQ BSC
03914  43AF  C9 31              CMP #'1'        ;$2C ABS
03915  43B1  F0 0E              BEQ BSC 
03916  43B3  C9 32              CMP #'2'        ;$24 ZP
03917  43B5  F0 0A              BEQ BSC
03918  43B7  C9 33              CMP #'3'        ;$2C AND $24
03919  43B9  F0 06              BEQ BSC
03920  43BB  C9 0D              CMP #$0D        ;STANDARD
03921  43BD  D0 E7              BNE BOP0
03922  43BF  A9 30              LDA #'0'
03923  43C1              BSC    = *
03924  43C1  48                 PHA             ;STASH INPUT
03925  43C2  20 D2 FF           JSR CHROUT      ;OUTPUT FEEDBACK
03926  43C5  68                 PLA             ;POP INPUT
03927  43C6  49 30              EOR #$30        ;MAKE A NUMBER
03928  43C8  8D CC 43           STA BITFLG      ;SET FLAG
03929  43CB  60                 RTS
03930  43CC              ;*********************************
03931  43CC              ; BIT INSTRUCTION CODING FLAG
03932  43CC              ;*********************************
03933  43CC              BITFLG = *
03934  43CC  AA                 .BYTE $AA
03935  43CD              ;*********************************
03936  43CD              
03937  43CD              ;*********************************
03938  43CD              ; SYMBOL TABLE
03939  43CD              ;*********************************
03940  43CD              ;  KERNAL JUMP TABLE
03941  43CD              ;*********************************
03942  43CD              STABLE = *
03943  43CD  FF                 .BYTE $FF,$80,'IDBYTE',0
03943  43CE  80 
03943  43CF  49 44 
03943  43D5  00 
03944  43D6  FF                 .BYTE $FF,$81,'CINT  ',0
03944  43D7  81 
03944  43D8  43 49 
03944  43DE  00 
03945  43DF  FF                 .BYTE $FF,$84,'IOINIT',0
03945  43E0  84 
03945  43E1  49 4F 






DISASS128.ASM......PAGE 0084

LINE# LOC   CODE        LINE


03945  43E7  00 
03946  43E8  FF                 .BYTE $FF,$87,'RAMTAS',0
03946  43E9  87 
03946  43EA  52 41 
03946  43F0  00 
03947  43F1  FF                 .BYTE $FF,$8A,'RESTOR',0
03947  43F2  8A 
03947  43F3  52 45 
03947  43F9  00 
03948  43FA  FF                 .BYTE $FF,$8D,'VECTOR',0
03948  43FB  8D 
03948  43FC  56 45 
03948  4402  00 
03949  4403  FF                 .BYTE $FF,$90,'SETMSG',0
03949  4404  90 
03949  4405  53 45 
03949  440B  00 
03950  440C  FF                 .BYTE $FF,$93,'SECOND',0
03950  440D  93 
03950  440E  53 45 
03950  4414  00 
03951  4415  FF                 .BYTE $FF,$96,'TKSA  ',0
03951  4416  96 
03951  4417  54 4B 
03951  441D  00 
03952  441E  FF                 .BYTE $FF,$99,'MEMTOP',0
03952  441F  99 
03952  4420  4D 45 
03952  4426  00 
03953  4427  FF                 .BYTE $FF,$9C,'MEMBOT',0
03953  4428  9C 
03953  4429  4D 45 
03953  442F  00 
03954  4430  FF                 .BYTE $FF,$9F,'SCNKEY',0
03954  4431  9F 
03954  4432  53 43 
03954  4438  00 
03955  4439  FF                 .BYTE $FF,$A2,'SETTMO',0
03955  443A  A2 
03955  443B  53 45 
03955  4441  00 
03956  4442  FF                 .BYTE $FF,$A5,'ACPTR ',0
03956  4443  A5 
03956  4444  41 43 
03956  444A  00 
03957  444B  FF                 .BYTE $FF,$A8,'CIOUT ',0
03957  444C  A8 
03957  444D  43 49 
03957  4453  00 
03958  4454  FF                 .BYTE $FF,$AB,'UNTLK ',0
03958  4455  AB 
03958  4456  55 4E 
03958  445C  00 
03959  445D  FF                 .BYTE $FF,$AE,'UNLSN ',0
03959  445E  AE 






DISASS128.ASM......PAGE 0085

LINE# LOC   CODE        LINE


03959  445F  55 4E 
03959  4465  00 
03960  4466  FF                 .BYTE $FF,$B1,'LISTEN',0
03960  4467  B1 
03960  4468  4C 49 
03960  446E  00 
03961  446F  FF                 .BYTE $FF,$B4,'TALK  ',0
03961  4470  B4 
03961  4471  54 41 
03961  4477  00 
03962  4478  FF                 .BYTE $FF,$B7,'READST',0
03962  4479  B7 
03962  447A  52 45 
03962  4480  00 
03963  4481  FF                 .BYTE $FF,$BA,'SETLFS',0
03963  4482  BA 
03963  4483  53 45 
03963  4489  00 
03964  448A  FF                 .BYTE $FF,$BD,'SETNAM',0
03964  448B  BD 
03964  448C  53 45 
03964  4492  00 
03965  4493  FF                 .BYTE $FF,$C0,'OPEN  ',0
03965  4494  C0 
03965  4495  4F 50 
03965  449B  00 
03966  449C  FF                 .BYTE $FF,$C3,'CLOSE ',0
03966  449D  C3 
03966  449E  43 4C 
03966  44A4  00 
03967  44A5  FF                 .BYTE $FF,$C6,'CHKIN ',0
03967  44A6  C6 
03967  44A7  43 48 
03967  44AD  00 
03968  44AE  FF                 .BYTE $FF,$C9,'CHKOUT',0
03968  44AF  C9 
03968  44B0  43 48 
03968  44B6  00 
03969  44B7  FF                 .BYTE $FF,$CC,'CLRCHN',0
03969  44B8  CC 
03969  44B9  43 4C 
03969  44BF  00 
03970  44C0  FF                 .BYTE $FF,$CF,'CHRIN ',0
03970  44C1  CF 
03970  44C2  43 48 
03970  44C8  00 
03971  44C9  FF                 .BYTE $FF,$D2,'CHROUT',0
03971  44CA  D2 
03971  44CB  43 48 
03971  44D1  00 
03972  44D2  FF                 .BYTE $FF,$D5,'LOAD  ',0
03972  44D3  D5 
03972  44D4  4C 4F 
03972  44DA  00 
03973  44DB  FF                 .BYTE $FF,$D8,'SAVE  ',0






DISASS128.ASM......PAGE 0086

LINE# LOC   CODE        LINE


03973  44DC  D8 
03973  44DD  53 41 
03973  44E3  00 
03974  44E4  FF                 .BYTE $FF,$DB,'SETTIM',0
03974  44E5  DB 
03974  44E6  53 45 
03974  44EC  00 
03975  44ED  FF                 .BYTE $FF,$DE,'RDTIM ',0
03975  44EE  DE 
03975  44EF  52 44 
03975  44F5  00 
03976  44F6  FF                 .BYTE $FF,$E1,'STOP  ',0
03976  44F7  E1 
03976  44F8  53 54 
03976  44FE  00 
03977  44FF  FF                 .BYTE $FF,$E4,'GETIN ',0
03977  4500  E4 
03977  4501  47 45 
03977  4507  00 
03978  4508  FF                 .BYTE $FF,$E7,'CLALL ',0
03978  4509  E7 
03978  450A  43 4C 
03978  4510  00 
03979  4511  FF                 .BYTE $FF,$EA,'UDTIM ',0
03979  4512  EA 
03979  4513  55 44 
03979  4519  00 
03980  451A  FF                 .BYTE $FF,$ED,'SCREEN',0
03980  451B  ED 
03980  451C  53 43 
03980  4522  00 
03981  4523  FF                 .BYTE $FF,$F0,'PLOT  ',0
03981  4524  F0 
03981  4525  50 4C 
03981  452B  00 
03982  452C  FF                 .BYTE $FF,$F3,'IOBASE',0
03982  452D  F3 
03982  452E  49 4F 
03982  4534  00 
03983  4535              ;*********************************
03984  4535  FF                 .BYTE $FF,$FA,'NMIVEC',0
03984  4536  FA 
03984  4537  4E 4D 
03984  453D  00 
03985  453E  FF                 .BYTE $FF,$FC,'RESVEC',0
03985  453F  FC 
03985  4540  52 45 
03985  4546  00 
03986  4547  FF                 .BYTE $FF,$FE,'IRQVEC',0
03986  4548  FE 
03986  4549  49 52 
03986  454F  00 
03987  4550              ;*********************************
03988  4550  00          UTABLE .BYTE 0
03989  4551              ;*********************************






DISASS128.ASM......PAGE 0087

LINE# LOC   CODE        LINE


03990  4551              .END


ERRORS = 00000


SYMBOL TABLE

SYMBOL VALUE
 ABSBIT   2B9E    ABSEXT   2BC3    ABSLUT   2B9F    ABSX     2BC4
 ABSY     2BCA    AC0      3204    AC1      3207    ACC      2B53
 ACHECK   31F2    ADRS     1C6E    AFILE    22C1    AGET     22FC
 AGET1    2308    ALINE    3235    ALOP     3247    AOP      228D
 AOP1     2359    AOP2     2383    AOP3     23A8    AOPX     2354
 ASC      23C5    ASCCCC   3180    ASCI1    31AD    ASCII    31A2
 ASCIIQ   31DB    ASCKK    3197    B0000    2A6C    BASIC    1C0D
 BINARY   27BF    BITFLG   43CC    BITOPT   439F    BOP      22B8
 BOP0     43A6    BSC      43C1    BSTUB    0001    BUF      1C7B
 BYABIT   2A3B    BYTES    320A    BYTESX   3232    BYTT     2A13
 BYZBIT   2A16    CASCII   328A    CDATA    1D06    CHKIN    FFC6
 CHKOUT   FFC9    CHRIN    FFCF    CHROUT   FFD2    CLALL    FFE7
 CLOSE    FFC3    CLOSEA   FF4A    CLRCHN   FFCC    COK      387A
 COMENT   2CB5    COMET    2CBB    COMOPT   1C3C    COMPT    2CCB
 CONST0   2974    CONST1   2979    CPASS    1C34    CRLF     2D47
 CRLFPR   28AE    CRNO     27E3    CRNO1    27F0    CRYS     27D6
 CRYS1    27EE    CSHORT   2CC9    CUROFF   CD9F    CURON    CD6F
 DATABE   1D0E    DATABP   1D0A    DATABS   1D0C    DATAO1   310E
 DATAO2   3144    DATAOP   30FF    DATUT    31EC    DBYTES   3296
 DBYTEX   32C3    DECSL    2D98    DEVICE   1C38    DISA     1E4F
 DISASS   1E40    DISB     1E7D    DISC     1F0C    DISERR   2717
 DISFUL   1F09    DISL     29E8    DISL1    29F9    DLOOA    2742
 DLOOC    2738    DLOOE    272C    DLOOP    1EAE    DOLLAR   2D24
 DONE     1F83    DONED    1F64    DOP      1F91    DOP2     2285
 DOP3     2287    DSLINE   29D1    EA       1C3F    EAGOL    1C47
 EAOUT    1C4B    EAS      1D03    EASCI1   326E    EASCII   3273
 EFILE    2CA5    ENDAX    310B    ENDDAT   31EF    EPASS    1C33
 EQUATE   3B84    EQUEND   3900    EQUINT   378B    EQUOP    38C1
 EQUOP1   38DB    EQUPRT   3896    ERRCT    1C79    FILE     21C6
 FILEOK   21C0    FINAL    2A10    FINISH   289B    FIXSYM   384F
 FOP1     2401    FOP2     2403    FOROPT   1C3B    FORWRD   2C3D
 GETBYT   27A2    GETC     3887    GETI     2F59    GETIN    FFE4
 GETOPE   33D4    GETSL    2D80    GETWRD   277E    GFILE0   21B4
 HEADER   28CD    HEADES   2920    HEADFX   2948    HEADOK   293A
 HEADSY   293B    HEXA     2964    ILLEGL   2B12    ILLMSG   2DD4
 ILLOP    33B3    IMEXIT   2B8D    IMMEDT   2B58    IMPLI1   2BDE
 IMPLID   2BD0    IMPONE   2BDD    INCC     387E    INCI     2F50
 INCIE    2F48    INCSL    2D77    INDCMP   FF7A    INDFET   FF74
 INDRCT   2BEA    INDSTA   FF77    INDX     2BFF    INDY     2C08
 INEND    27A1    INENX    27BE    INIT     24A9    INITD    20DD
 INITIN   2EB8    INSTN1   2771    INSTNG   276F    INTCH    2F77
 INTCHA   2F68    INTCHK   2F74    INTEND   2FB0    INTEXT   2F46
 INTMAT   2FB2    INTOUT   309F    INTPR    30AA    INTPRM   30D1
 INTPRS   30CC    INTPRT   3089    INTSA    2DA4    INTSET   2ECA
 IPASS    1C32    ISKIP    2B4C    LARGE    301A    LINECK   26D8








SYMBOL TABLE

SYMBOL VALUE
 LINECO   2716    LINECT   1C77    LINEFL   1CDF    LINEOK   290F
 LINES    3A63    LISTCT   1C76    LOADC    3B52    LOADE    3B69
 LOADF    3B16    LOADM    3B34    LOOP1    30A5    LOOP2    30F9
 LPAREN   2D29    LTITLE   299A    LTITLS   29C4    MATCH    37E8
 MATCHS   3808    MATCHT   382F    MATEXT   3839    MATONE   3807
 MBYTE    3382    MCODES   3516    MDBYTE   3392    MEMEND   8000
 MEMSIZ   0039    MNAMES   343E    MNEMON   339B    MNLOOP   33A5
 MODES    3616    MPASS    1E11    MSA1     25DC    MSA2     25FE
 MSA3     2616    MSAOP    25BD    MSB1     2557    MSB4     2698
 MSB5     26B8    MSD1     24C4    MSD2     24D6    MSD4     24E6
 MSD4A    2500    MSD5     2513    MSF1     2454    MSF2     2470
 MSG      2407    MSG1     2484    MSG2     24AB    MSG5     262C
 MSGBIT   2DB1    MSGBZP   2DB9    MSGDIS   1E2D    MSGEND   2DCF
 MSGERR   1E23    MSR1     252F    MSS1     3A8A    MSS2     3AAE
 MSS3     3AD4    MSS4     3AF2    MWORD    338A    NAME     3A7C
 NAMS     3A86    NASCII   327B    NBUF     1CE3    NCHARS   1CE2
 NCOK     387C    NDATA    1D08    NEGREL   2DCB    NEWEXT   276E
 NEWLIN   2751    NEXLIN   28C0    NEXPTR   28BD    NEXPTS   2910
 NEXTBY   3369    NEXTC    385A    NEXTP    1EDF    NEXTSL   2D5E
 NOASC    3294    NOBINC   3380    NOFILE   21C4    NOHEX    27D2
 NOID     21D7    NOINC    2D75    NOPRT    226A    NOTABS   233F
 NPRAD    2D01    NPRAD1   2D02    OFFSET   1C43    OFILE    21DA
 OFILE1   21ED    OFILE2   21F2    OFILE3   221C    OFILE4   2230
 OFILED   21CF    ONEBIT   2AA0    ONEBX    2ACF    ONEBY    2ACC
 ONEBYT   2AA1    OPCPUT   2B0B    OPCSYM   2B0E    OPEN     FFC0
 OPERN1   33C7    OPERND   33CF    ORGIN    2C8F    OUFILE   2199
 OUTPUT   1C39    P1       2CF8    PAGECT   1C74    PAGER1   2909
 PASS     1C31    PAUS1    31D4    PAUSE    1ED8    PCHAR    2864
 PEXIT    2899    PFILE0   1FB1    PFILE1   1FB3    PMSG     1E17
 POSREL   2DC7    POVER    2CF5    PRAD     2CDE    PRBYT    27F8
 PRBYTS   27F2    PREND    30F6    PRFILE   20AB    PRIMM    FF7D
 PRIN     2879    PRINT    226C    PRLA     2CD4    PRO2RD   2085
 PROGED   1FF9    PROGM    24A5    PROGOK   20DC    PROGRD   1FE4
 PRTASS   33BA    PRTDAF   2E77    PRTDAL   2323    PRTDAS   2310
 PRTDAT   2E5B    PRTEST   2E54    PRTGET   2231    PRTNEX   231B
 PRTNU1   2833    PRTNU2   283A    PRTNU3   283B    PRTNUM   282A
 PRTOK    30E9    PRTON1   2DF6    PRTONE   2DE8    PRTOT1   2E8A
 PRTOTH   2E7F    PRTPAG   281F    PRTTH1   2E49    PRTTHE   2E23
 PRTTW1   2E18    PRTTWO   2DFE    PSELEC   2D0A    PUIT     2F23
 PUT      3A47    PUTC     3A3B    PUTI     2F09    PWORK    2D13
 PWORKD   2D16    Q00000   325C    QUITS    1F12    QUITX    398C
 QUITXX   39AC    QUTERR   1F29    RANG     2EA4    RANGE    2E92
 READS    39BD    READST   FFB7    READX    3979    READXF   394C
 READXX   3906    READY    39CE    RELATV   2C14    RELND    2C46
 RELNEG   2C71    RELP     2C83    RELPC    2C64    RELPM    2C75
 RELPUT   2C60    RELSYM   2C63    REOPEN   3955    RESET    3A72
 RESINT   2EF0    ROPT     1C37    ROUT     2EB6    RPAREN   2D2E
 S3       3002    SA       1C3D    SAGOL    1C45    SAOUT    1C49
 SAVA     1C71    SAVEE    1C6C    SAVEP    1C68    SAVES    1C6A
 SAVINT   2ED7    SAVX     1C72    SAVY     1C73    SBLOK    337B
 SCREN    288D    SCRNO1   295A    SCROFF   294B    SCRON    295B
 SELECT   1C41    SEMIC    2D1F    SETBNK   FF68    SETLFS   FFBA
 SETMSG   FF90    SETNAM   FFBD    SEXIT    281E    SKIPER   3188
 SLOK     2D70    SMALL    301D    SMALLP   1C55    SMALLS   1C53
 SOP      3716    SOP1     372A    SOP2     390D    SOP3     391A








SYMBOL TABLE

SYMBOL VALUE
 SOP4     3761    SORT     2FB4    SORT1    2FC9    SORT2    2FD8
 SORT3    305A    SORT4    3086    SORTOK   3083    SOUT     2814
 SPAC     2D51    SPAC6    2D4C    SPACE    2D59    SPACM    2D4E
 SPASS    1C35    SSET     377E    STABLE   43CD    STARTD   1C0F
 STARTS   20FE    STDREF   3A1D    STOP     FFE1    STRPNT   280E
 STRSY1   3840    STRSYM   383A    SUBP     33EA    SUBS     3422
 SUBS1    3406    SY       3773    SYEXIT   384E    SYM      379E
 SYM1     37B7    SYM2     37BA    SYMBOE   1C5C    SYMBOL   1C57
 SYMBOP   1C58    SYMBOS   1C5A    SYMBUF   1CF9    SYMEND   37E6
 SYMOP    37B2    SYTAB    373F    T2       3005    TABINE   1C51
 TABINP   1C4D    TABINS   1C4F    TDATA    1D10    TEMP     1C70
 TEXTER   1D05    TWOB     2B11    TWOBIT   2AD5    TWOBX    2B08
 TWOBY    2B05    TWOBYT   2AD6    UTABLE   4550    UYMBOE   1C62
 UYMBOP   1C5E    UYMBOS   1C60    VERSON   1CE1    VICREG   D011
 WIND1    217C    WIND2    217E    WINDOP   2140    WINDOW   1C3A
 WORD1    32DB    WORDM    3321    WORDPT   3315    WORDS    32C6
 WORDS2   3351    WORDS3   3363    WORDSX   3312    WORDSY   331B
 WORDXX   3366    WORKED   1C64    WORKER   1C66    WREADY   4D37
 WRITE    24A1    XFILE1   3935    XGET     39FD    XINDEX   2D33
 XOP0     23DC    XOP1     23EC    XOP2     23EE    XOPT     1C36
 XTITLE   297E    XTITLS   29B7    YINDEX   2D3D    YSHEX    27D4
 ZERBIT   2B8E    ZEROLG   00FB    ZEROPG   2B8F    ZEROUR   00FB
 ZEROX    2B92    ZEROY    2B98   

END OF ASSEMBLY
DISASS128.ASM......PAGE 0001

LINE# LOC   CODE        LINE


00001  0000              ;.PAGE 'DISASSEMBLER128'
00002  0000              ;.OPT LIST
00003  0000              ;*********************************
00004  0000              *=$1C01                ;START OF BASIC
00005  1C01              ;*********************************
00006  1C01              ; SET BSTUB TO ONE TO ALLOW FOR
00007  1C01              ; INSERTION OF BASIC STUB CODE
00008  1C01              ;*********************************
00009  1C01              BSTUB  = 1
00010  1C01              ;*********************************
00011  1C01              ;
00012  1C01              ;        DISASSEMBLER128
00013  1C01              ;    DISASSEMBLER.C128 V080282
00014  1C01              ;    SYMBOLIC DISASSEMBLER
00015  1C01              ;       BY DENTON MARLOWE
00016  1C01              ;
00017  1C01              ;  (C)1986 BY DENTON MARLOWE
00018  1C01              ;
00019  1C01              ; MACRO ASSEMBLER DEVELOPMENT SYSTEM
00020  1C01              ;  (C) 1982 BY COMMODORE MACHINES
00021  1C01              ;
00022  1C01              ;*********************************
00023  1C01              ;
00024  1C01              ; BASIC FORMAT PROGRAM
00025  1C01              ;
00026  1C01              ; 10 SYS (7183)
00027  1C01              ;
00028  1C01              ;*********************************
00029  1C01              ;.IF  BSTUB == 1
00031  1C01  0D 1C              .WORD BASIC     ;NEXT LINE POINTER
00032  1C03  0A                 .BYTE $0A,$00   ;LINE NUMBER
00032  1C04  00 
00033  1C05  9E                 .BYTE $9E       ;SYS COMMAND
00034  1C06  28 37              .BYTE '(7183)'  ;ASCII (7183)
00035  1C0C  00                 .BYTE 0         ;END OF LINE
00036  1C0D  00          BASIC  .BYTE 0,0       ;END OF BASIC
00036  1C0E  00 
00038  1C0F              ;.FI
00039  1C0F              ;*********************************
00040  1C0F              ;.LIB DIS.ASM
00041  1C0F              ;*********************************
00042  1C0F              ;.LIB OPTION.ASM
00043  1C0F              ;*********************************
00044  1C0F              ;.LIB UTIL.ASM
00045  1C0F              ;*********************************
00046  1C0F              ;.LIB MODE.ASM
00047  1C0F              ;*********************************
00048  1C0F              ;.LIB INTERNAL.ASM
00049  1C0F              ;*********************************
00050  1C0F              ;.LIB ASC.ASM
00051  1C0F              ;*********************************
00052  1C0F              ;.LIB TABLE.ASM
00053  1C0F              ;*********************************
00054  1C0F              ;.LIB SYM.ASM
00055  1C0F              ;*********************************






DISASS128.ASM......PAGE 0002

LINE# LOC   CODE        LINE


00056  1C0F              ;.END
00057  1C0F              ;*********************************
00058  1C0F              ; FILE DIS.ASM
00059  1C0F              ;*********************************
00060  1C0F              ;
00061  1C0F              ;        DISASSEMBLER128
00062  1C0F              ;    SYMBOLIC DISASSEMBLER
00063  1C0F              ;       BY DENTON MARLOWE
00064  1C0F              ;
00065  1C0F              ;  (C)1986 BY DENTON MARLOWE
00066  1C0F              ;
00067  1C0F              ;*********************************
00068  1C0F              ; KERNAL ADDRESS
00069  1C0F              ;*********************************
00070  1C0F              VICREG=$D011           ;SCREEN REGISTER
00071  1C0F              CHROUT=$FFD2           ;OUTPUT CHARACTER
00072  1C0F              CHKIN  =$FFC6          ;OPEN INPUT FILE
00073  1C0F              CHRIN  =$FFCF          ;GET KEYBOARD INPUT
00074  1C0F              GETIN  =$FFE4          ;GET KEYBOARD CHAR
00075  1C0F              CLRCHN=$FFCC           ;RESET I/O CHANNELS
00076  1C0F              STOP   =$FFE1          ;CHECK FOR STOP
00077  1C0F              READST=$FFB7           ;READ ST
00078  1C0F              SETNAM=$FFBD           ;SET FILENAME
00079  1C0F              SETLFS=$FFBA           ;SET LOGICAL FILE
00080  1C0F              OPEN   =$FFC0          ;OPEN FILE
00081  1C0F              CHKOUT=$FFC9           ;OPEN OUTPUT CHANNEL
00082  1C0F              CLOSE  =$FFC3          ;CLOSE LOGICAL FILE
00083  1C0F              ;WREADY=$E391 ;BASIC RETURN
00084  1C0F              WREADY=$4D37           ;BASIC RETURN
00085  1C0F              ;*********************************
00086  1C0F              ; ZERO PAGE ADDRESS
00087  1C0F              ;
00088  1C0F              ; USED: $FA,$FB,$FC,$FD,$FE,$FF
00089  1C0F              ;*********************************
00090  1C0F              ;ZEROUR=$02 ;ZEROPAGE POINTER
00091  1C0F              ZEROLG=$FB             ;POINTER FOR LONG LDA/STA
00092  1C0F              ZEROUR=$FB             ;ZEROPAGE POINTER
00093  1C0F              ;MEMSIZ=$37 ;TOP OF FREE RAM+1
00094  1C0F              MEMSIZ=$39             ;TOP OF FREE RAM+1
00095  1C0F              ;********************************
00096  1C0F              ; EXTERNAL ADDRESS EQUATES
00097  1C0F              ;********************************
00098  1C0F              CURON  = $CD6F
00099  1C0F              CUROFF = $CD9F
00100  1C0F              ;
00101  1C0F              SETBNK = $FF68         ;JSETBNK
00102  1C0F              CLOSEA = $FF4A         ;CLOSE-ALL 
00103  1C0F              INDFET = $FF74         ;LONG LDA
00104  1C0F              INDSTA = $FF77         ;LONG STA
00105  1C0F              INDCMP = $FF7A         ;LONG CMP
00106  1C0F              ;
00107  1C0F              CLALL  = $FFE7
00108  1C0F              ;
00109  1C0F              PRIMM  = $FF7D
00110  1C0F              ;*********************************






DISASS128.ASM......PAGE 0003

LINE# LOC   CODE        LINE


00111  1C0F              ;        ENTRY POINT
00112  1C0F              ;*********************************
00113  1C0F              *=$1C0F
00114  1C0F              ;*********************************
00115  1C0F              ;        ENTRY POINT
00116  1C0F              ;*********************************
00117  1C0F              STARTD = *
00118  1C0F              ;*********************************
00119  1C0F              ; SET FLAG TO ALLOW BASIC
00120  1C0F              ; AND KERNAL (ERROR) MESSAGES
00121  1C0F              ; $80 FOR BASIC
00122  1C0F              ; $40 FOR KERNAL
00123  1C0F              ;*********************************
00124  1C0F              SETMSG=$FF90
00125  1C0F  A9 40              LDA #$40        ;ALLOW KERNAL MESSAGES
00126  1C11  20 90 FF           JSR SETMSG
00127  1C14              ;********************************
00128  1C14              ; SET MMU
00129  1C14              ;********************************
00130  1C14  A9 00              LDA #$00        ;BANK 15
00131  1C16  8D 00 FF           STA $FF00       ;
00132  1C19                     
00133  1C19  A9 0E              LDA #$0E        ;NO BASIC ROM
00134  1C1B  8D 00 FF           STA $FF00       ;
00135  1C1E                     
00136  1C1E  A9 FC              LDA #$FC        ;SLOW SPEED
00137  1C20  8D 30 D0           STA $D030       ;
00138  1C23              ;********************************
00139  1C23              ; CLOSE ALL FILES
00140  1C23              ;********************************
00141  1C23  20 E7 FF           JSR CLALL
00142  1C26              ;********************************
00143  1C26              ; SET TOP OF MEMORY C128 AND PLUS4
00144  1C26              ;********************************
00145  1C26              MEMEND = $8000
00146  1C26  A9 00              LDA #<MEMEND
00147  1C28  85 39              STA MEMSIZ
00148  1C2A  A9 80              LDA #>MEMEND
00149  1C2C  85 3A              STA MEMSIZ+1
00150  1C2E              ;********************************
00151  1C2E              ; SETUP DISASSEMBLER
00152  1C2E              ;********************************
00153  1C2E  4C 40 1E           JMP DISASS
00154  1C31              ;*********************************
00155  1C31              ;       VARIABLES
00156  1C31              ;*********************************
00157  1C31  31          PASS   .BYTE '1'       ;PASS INDICATOR
00158  1C32  31          IPASS  .BYTE '1'       ;INTERNAL PASS
00159  1C33  32          EPASS  .BYTE '2'       ;EXTERNAL PASS
00160  1C34  33          CPASS  .BYTE '3'       ;PRINTING PASS
00161  1C35  34          SPASS  .BYTE '4'       ;SYMBOL PASS
00162  1C36              ;*********************************
00163  1C36  AA          XOPT   .BYTE $AA       ;LABEL GENERATION
00164  1C37  AA          ROPT   .BYTE $AA       ;REL ADDRESS OPT
00165  1C38  AA          DEVICE .BYTE $AA       ;OUTPUT DEVICE






DISASS128.ASM......PAGE 0004

LINE# LOC   CODE        LINE


00166  1C39  AA          OUTPUT .BYTE $AA       ;OUTPUT FLAG
00167  1C3A  AA          WINDOW .BYTE $AA       ;WINDOW FLAG
00168  1C3B  AA          FOROPT .BYTE $AA       ;FORMAT FLAG
00169  1C3C  AA          COMOPT .BYTE $AA       ;COMMENT FLAG
00170  1C3D              ;*********************************
00171  1C3D              ; DISASSEMBLY ADDRESS POINTERS
00172  1C3D              ;*********************************
00173  1C3D  AA AA       SA     .WORD $AAAA     ;START ADDRESS
00174  1C3F  AA AA       EA     .WORD $AAAA     ;END ADDRESS
00175  1C41  AA AA       SELECT .WORD $AAAA     ;BYTE POINTER
00176  1C43  AA AA       OFFSET .WORD $AAAA     ;ADDRESS OFFSET
00177  1C45  AA AA       SAGOL  .WORD $AAAA     ;GOLBAL START
00178  1C47  AA AA       EAGOL  .WORD $AAAA     ;GOLBAL END
00179  1C49  AA AA       SAOUT  .WORD $AAAA     ;START ADDRESS
00180  1C4B  AA AA       EAOUT  .WORD $AAAA     ;END ADDRESS
00181  1C4D              ;*********************************
00182  1C4D              ; INTERNAL ADDRESS TABLE
00183  1C4D              ;*********************************
00184  1C4D  AA AA       TABINP .WORD $AAAA     ;TABLE POINTER
00185  1C4F  AA AA       TABINS .WORD $AAAA     ;TABLE START
00186  1C51  AA AA       TABINE .WORD $AAAA     ;TABLE END
00187  1C53              ;*********************************
00188  1C53              ; SORT TABLE POINTERS
00189  1C53              ;*********************************
00190  1C53  AA AA       SMALLS .WORD $AAAA     ;TABLE START
00191  1C55  AA AA       SMALLP .WORD $AAAA     ;TABLE POINTER
00192  1C57              ;*********************************
00193  1C57              ; SYMBOL TABLE
00194  1C57              ;*********************************
00195  1C57  AA          SYMBOL .BYTE $AA       ;SYMBOL OPTION
00196  1C58  AA AA       SYMBOP .WORD $AAAA     ;TABLE POINTER
00197  1C5A  AA AA       SYMBOS .WORD $AAAA     ;TABLE START
00198  1C5C  AA AA       SYMBOE .WORD $AAAA     ;TABLE END
00199  1C5E              ;*********************************
00200  1C5E              ; UNDEFINED SYMBOL TABLE
00201  1C5E              ;*********************************
00202  1C5E  AA AA       UYMBOP .WORD $AAAA     ;TABLE POINTER
00203  1C60  AA AA       UYMBOS .WORD $AAAA     ;TABLE START
00204  1C62  AA AA       UYMBOE .WORD $AAAA     ;TABLE END
00205  1C64              ;*********************************
00206  1C64              ; TEMP WORKING STORAGE
00207  1C64              ;*********************************
00208  1C64  AA AA       WORKED .WORD $AAAA     ;TWO BYTE OP
00209  1C66  AA AA       WORKER .WORD $AAAA     ;TWO BYTE OP
00210  1C68  AA AA       SAVEP  .WORD $AAAA     ;TWO BYTE OP
00211  1C6A  AA AA       SAVES  .WORD $AAAA     ;TWO BYTE OP
00212  1C6C  AA AA       SAVEE  .WORD $AAAA     ;TWO BYTE OP
00213  1C6E              ;*********************************
00214  1C6E              ; OTHER VARIABLES
00215  1C6E              ;*********************************
00216  1C6E  AA AA       ADRS   .WORD $AAAA
00217  1C70  AA          TEMP   .BYTE $AA
00218  1C71  AA          SAVA   .BYTE $AA
00219  1C72  AA          SAVX   .BYTE $AA
00220  1C73  AA          SAVY   .BYTE $AA






DISASS128.ASM......PAGE 0005

LINE# LOC   CODE        LINE


00221  1C74              ;*********************************
00222  1C74              ; PRINTER OUTPUT STORAGE
00223  1C74              ;*********************************
00224  1C74  AA AA       PAGECT .WORD $AAAA     ;PAGE COUNT
00225  1C76  AA          LISTCT .BYTE $AA       ;LINE COUNT
00226  1C77  AA AA       LINECT .WORD $AAAA     ;LINE COUNT
00227  1C79  AA AA       ERRCT  .WORD $AAAA     ;ERROR COUNT
00228  1C7B              ;*********************************
00229  1C7B              ; INPUT BUFFER
00230  1C7B              ;*********************************
00231  1C7B              BUF    = *
00232  1C7B  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00232  1C7C  00 
00232  1C7D  00 
00232  1C7E  00 
00232  1C7F  00 
00232  1C80  00 
00232  1C81  00 
00232  1C82  00 
00232  1C83  00 
00232  1C84  00 
00233  1C85  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00233  1C86  00 
00233  1C87  00 
00233  1C88  00 
00233  1C89  00 
00233  1C8A  00 
00233  1C8B  00 
00233  1C8C  00 
00233  1C8D  00 
00233  1C8E  00 
00234  1C8F  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00234  1C90  00 
00234  1C91  00 
00234  1C92  00 
00234  1C93  00 
00234  1C94  00 
00234  1C95  00 
00234  1C96  00 
00234  1C97  00 
00234  1C98  00 
00235  1C99  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00235  1C9A  00 
00235  1C9B  00 
00235  1C9C  00 
00235  1C9D  00 
00235  1C9E  00 
00235  1C9F  00 
00235  1CA0  00 
00235  1CA1  00 
00235  1CA2  00 
00236  1CA3  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00236  1CA4  00 
00236  1CA5  00 
00236  1CA6  00 






DISASS128.ASM......PAGE 0006

LINE# LOC   CODE        LINE


00236  1CA7  00 
00236  1CA8  00 
00236  1CA9  00 
00236  1CAA  00 
00236  1CAB  00 
00236  1CAC  00 
00237  1CAD  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00237  1CAE  00 
00237  1CAF  00 
00237  1CB0  00 
00237  1CB1  00 
00237  1CB2  00 
00237  1CB3  00 
00237  1CB4  00 
00237  1CB5  00 
00237  1CB6  00 
00238  1CB7  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00238  1CB8  00 
00238  1CB9  00 
00238  1CBA  00 
00238  1CBB  00 
00238  1CBC  00 
00238  1CBD  00 
00238  1CBE  00 
00238  1CBF  00 
00238  1CC0  00 
00239  1CC1  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00239  1CC2  00 
00239  1CC3  00 
00239  1CC4  00 
00239  1CC5  00 
00239  1CC6  00 
00239  1CC7  00 
00239  1CC8  00 
00239  1CC9  00 
00239  1CCA  00 
00240  1CCB  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00240  1CCC  00 
00240  1CCD  00 
00240  1CCE  00 
00240  1CCF  00 
00240  1CD0  00 
00240  1CD1  00 
00240  1CD2  00 
00240  1CD3  00 
00240  1CD4  00 
00241  1CD5  00                 .BYTE 0,0,0,0,0,0,0,0,0,0
00241  1CD6  00 
00241  1CD7  00 
00241  1CD8  00 
00241  1CD9  00 
00241  1CDA  00 
00241  1CDB  00 
00241  1CDC  00 
00241  1CDD  00 






DISASS128.ASM......PAGE 0007

LINE# LOC   CODE        LINE


00241  1CDE  00 
00242  1CDF              ;*********************************
00243  1CDF              ; FILE NAME BUFFER
00244  1CDF              ;*********************************
00245  1CDF  AA AA       LINEFL .WORD $AAAA
00246  1CE1  AA          VERSON .BYTE $AA
00247  1CE2  AA          NCHARS .BYTE $AA
00248  1CE3              NBUF   = *
00249  1CE3  30 3A              .BYTE '0:'
00250  1CE5  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
00250  1CE6  AA 
00250  1CE7  AA 
00250  1CE8  AA 
00250  1CE9  AA 
00250  1CEA  AA 
00250  1CEB  AA 
00250  1CEC  AA 
00251  1CED  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA
00251  1CEE  AA 
00251  1CEF  AA 
00251  1CF0  AA 
00251  1CF1  AA 
00251  1CF2  AA 
00251  1CF3  AA 
00251  1CF4  AA 
00252  1CF5  AA                 .BYTE $AA,$AA,$AA,$AA
00252  1CF6  AA 
00252  1CF7  AA 
00252  1CF8  AA 
00253  1CF9              ;*********************************
00254  1CF9              ; SYMBOL TABLE BUFFER
00255  1CF9              ;*********************************
00256  1CF9              SYMBUF = *
00257  1CF9  AA                 .BYTE $AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,$AA,
$AA
00257  1CFA  AA 
00257  1CFB  AA 
00257  1CFC  AA 
00257  1CFD  AA 
00257  1CFE  AA 
00257  1CFF  AA 
00257  1D00  AA 
00257  1D01  AA 
00257  1D02  AA 
00258  1D03              ;*********************************
00259  1D03              ; DATA TABLE
00260  1D03              ;*********************************
00261  1D03  AA AA       EAS    .WORD $AAAA
00262  1D05  AA          TEXTER .BYTE $AA
00263  1D06  AA AA       CDATA  .WORD $AAAA
00264  1D08  AA AA       NDATA  .WORD $AAAA
00265  1D0A  AA AA       DATABP .WORD $AAAA     ;DATA POINT
00266  1D0C  AA AA       DATABS .WORD $AAAA     ;DATA START
00267  1D0E  AA AA       DATABE .WORD $AAAA     ;DATA END
00268  1D10              ;*********************************
00269  1D10              ; DATA TABLE






DISASS128.ASM......PAGE 0008

LINE# LOC   CODE        LINE


00270  1D10              ;*********************************
00271  1D10  AA          TDATA  .BYTE $AA
00272  1D11              ;*********************************
00273  1D11                     *=*+$0100
00274  1E11              ;*********************************
00275  1E11  0D          MPASS  .BYTE $0D,'PASS',0
00275  1E12  50 41 
00275  1E16  00 
00276  1E17  0D          PMSG   .BYTE $0D,$12,' PAUSE ',$92,$0D,0
00276  1E18  12 
00276  1E19  20 50 
00276  1E20  92 
00276  1E21  0D 
00276  1E22  00 
00277  1E23  45 52       MSGERR .BYTE 'ERRORS = ',0
00277  1E2C  00 
00278  1E2D  45 4E       MSGDIS .BYTE 'END OF DISASSEMBLY',0
00278  1E3F  00 
00279  1E40              ;*********************************
00280  1E40              ; INITIALIZE DISASSEMBLER
00281  1E40              ;*********************************
00282  1E40  A2 FF       DISASS LDX #$FF
00283  1E42  9A                 TXS
00284  1E43  D8                 CLD
00285  1E44  20 91 1F           JSR DOP         ;GET OPTIONS
00286  1E47  20 B8 2E           JSR INITIN      ;INIT POINTERS
00287  1E4A  A9 31              LDA #'1'        ;PASS ONE
00288  1E4C  8D 31 1C           STA PASS        ;SET PASS INDICATOR
00289  1E4F              ;*********************************
00290  1E4F              ; DISASSEMBLER LOOP
00291  1E4F              ;*********************************
00292  1E4F  20 A4 2D    DISA   JSR INTSA       ;SET SA
00293  1E52  A9 00              LDA #00         ;ZERO BYTE
00294  1E54  8D 06 1D           STA CDATA       ;SET TABLE NUMBER
00295  1E57  A9 11              LDA #<MPASS     ;PASS MSG
00296  1E59  A0 1E              LDY #>MPASS     ;
00297  1E5B  20 0E 28           JSR STRPNT      ;PRINT IT
00298  1E5E  AD 31 1C           LDA PASS        ;GET PASS
00299  1E61  20 64 28           JSR PCHAR       ;PRINT NUMBER
00300  1E64  20 47 2D           JSR CRLF        ;CR
00301  1E67              ;*********************************
00302  1E67  AD 31 1C           LDA PASS        ;GET PASS
00303  1E6A  CD 34 1C           CMP CPASS       ;IS IT LAST
00304  1E6D  F0 0E              BEQ DISB        ;IF SO PRINT
00305  1E6F  CD 33 1C           CMP EPASS       ;IS IT EXTERNAL
00306  1E72  D0 3A              BNE DLOOP       ;IF NOT GO ON
00307  1E74  20 D7 2E           JSR SAVINT      ;SAVE INTERNAL
00308  1E77  20 8B 37           JSR EQUINT      ;SET EQUATES
00309  1E7A  4C AE 1E           JMP DLOOP       ;GO ON
00310  1E7D              ;*********************************
00311  1E7D  A9 01       DISB   LDA #$01        ;ONE BYTE
00312  1E7F  8D 77 1C           STA LINECT      ;SET LINE # TO 1
00313  1E82  8D 74 1C           STA PAGECT      ;SET PAGE TO 1
00314  1E85  A9 00              LDA #$00        ;ZERO BYTE
00315  1E87  8D 78 1C           STA LINECT+1    ;SET LINE # TO 1






DISASS128.ASM......PAGE 0009

LINE# LOC   CODE        LINE


00316  1E8A  8D 75 1C           STA PAGECT+1    ;SET PAGE TO 1
00317  1E8D  8D 76 1C           STA LISTCT      ;SET LIST TO 0
00318  1E90  8D 79 1C           STA ERRCT       ;SET ERROR TO 0
00319  1E93  8D 7A 1C           STA ERRCT+1     ;SET ERROR TO 0
00320  1E96  8D DF 1C           STA LINEFL      ;SET LINE TO 0
00321  1E99  8D E0 1C           STA LINEFL+1    ;SET LINE TO 0
00322  1E9C  AD 39 1C           LDA OUTPUT      ;GET OUTPUT
00323  1E9F  8D 38 1C           STA DEVICE      ;SET OUTPUT
00324  1EA2              ;*********************************
00325  1EA2  20 CD 28           JSR HEADER      ;PRINT HEADER
00326  1EA5  20 CF 21           JSR OFILED      ;OPEN DISK FILE
00327  1EA8  20 8F 2C           JSR ORGIN       ;PRINT ORGIN LABEL
00328  1EAB  20 96 38           JSR EQUPRT      ;PRINT EQUATE
00329  1EAE              ;********************************
00330  1EAE  20 D1 29    DLOOP  JSR DSLINE      ;DIS ONE LINE
00331  1EB1  B0 2C              BCS NEXTP       ;IF EA STOP
00332  1EB3  20 D8 26           JSR LINECK      ;LINE COUNT
00333  1EB6  20 E1 FF           JSR STOP        ;CHECK STOP
00334  1EB9  F0 57              BEQ QUITS       ;IF SO QUIT
00335  1EBB  20 E4 FF           JSR GETIN       ;GET KEY
00336  1EBE  F0 EE              BEQ DLOOP       ;IF NONE NEXT
00337  1EC0  C9 20              CMP #' '          ;IS IT A SPACE
00338  1EC2  D0 EA              BNE DLOOP       ;IF NOT NEXT
00339  1EC4              ;*********************************
00340  1EC4              ; PAUSE LISTING
00341  1EC4              ;********************************
00342  1EC4  AD 38 1C           LDA DEVICE
00343  1EC7  48                 PHA
00344  1EC8  A9 03              LDA #$03
00345  1ECA  8D 38 1C           STA DEVICE
00346  1ECD  A9 17              LDA #<PMSG
00347  1ECF  A0 1E              LDY #>PMSG
00348  1ED1  20 0E 28           JSR STRPNT
00349  1ED4  68                 PLA
00350  1ED5  8D 38 1C           STA DEVICE
00351  1ED8  20 E4 FF    PAUSE  JSR GETIN       ;PAUSE FOR KEY
00352  1EDB  F0 FB              BEQ PAUSE       ;
00353  1EDD  D0 CF              BNE DLOOP       ;NEXT LINE
00354  1EDF              ;********************************
00355  1EDF  EE 31 1C    NEXTP  INC PASS        ;INC PASS
00356  1EE2  AD 31 1C           LDA PASS        ;GET PASS
00357  1EE5  CD 34 1C           CMP CPASS       ;LAST PASS?
00358  1EE8  90 1F              BCC DISFUL      ;IF LESS AGAIN
00359  1EEA  D0 20              BNE DISC        ;FINISH
00360  1EEC  AD 3A 1C           LDA WINDOW      ;WINDOW FLAG
00361  1EEF  F0 18              BEQ DISFUL      ;FULL OUTPUT
00362  1EF1              ;*********************************
00363  1EF1              ; WINDOWED OUTPUT
00364  1EF1              ;*********************************
00365  1EF1  AD 49 1C           LDA SAOUT       ;
00366  1EF4  8D 3D 1C           STA SA          ;
00367  1EF7  AD 4A 1C           LDA SAOUT+1     ;
00368  1EFA  8D 3E 1C           STA SA+1        ;
00369  1EFD  AD 4B 1C           LDA EAOUT       ;
00370  1F00  8D 3F 1C           STA EA          ;






DISASS128.ASM......PAGE 0010

LINE# LOC   CODE        LINE


00371  1F03  AD 4C 1C           LDA EAOUT+1     ;
00372  1F06  8D 40 1C           STA EA+1        ;
00373  1F09              ;*********************************
00374  1F09  4C 4F 1E    DISFUL JMP DISA        ;LAST PASS
00375  1F0C  20 77 2D    DISC   JSR INCSL
00376  1F0F  20 A5 2C           JSR EFILE       ;END FILE MSG
00377  1F12              ;*********************************
00378  1F12  AD 38 1C    QUITS  LDA DEVICE      ;CHECK DEV
00379  1F15  29 08              AND #$08        ;DISK FILE?
00380  1F17  F0 10              BEQ QUTERR      ;IF NOT BRANCH
00381  1F19  A9 08              LDA #$08        ;DISK
00382  1F1B  20 C3 FF           JSR CLOSE       ;CLOSE IT
00383  1F1E  AD 39 1C           LDA OUTPUT      ;GET OUTPUT
00384  1F21  29 07              AND #07         ;MASK DISK
00385  1F23  8D 39 1C           STA OUTPUT      ;RESET OUTPUT
00386  1F26  8D 38 1C           STA DEVICE      ;RESET OUTPUT
00387  1F29              ;*********************************
00388  1F29              ; PRINT ERRORS
00389  1F29              ;*********************************
00390  1F29  AD 39 1C    QUTERR LDA OUTPUT
00391  1F2C  09 03              ORA #$03
00392  1F2E  8D 39 1C           STA OUTPUT
00393  1F31  8D 38 1C           STA DEVICE
00394  1F34  20 51 27           JSR NEWLIN
00395  1F37  20 51 27           JSR NEWLIN
00396  1F3A  A9 23              LDA #<MSGERR
00397  1F3C  A0 1E              LDY #>MSGERR
00398  1F3E  20 0E 28           JSR STRPNT
00399  1F41  AE 79 1C           LDX ERRCT
00400  1F44  AD 7A 1C           LDA ERRCT+1
00401  1F47  20 2A 28           JSR PRTNUM
00402  1F4A              ;*********************************
00403  1F4A  AD 38 1C           LDA DEVICE      ;CHECK DEV
00404  1F4D  29 04              AND #$04        ;PRINTER?
00405  1F4F  F0 13              BEQ DONED       ;IF NOT DONE
00406  1F51  A9 04              LDA #$04        ;DEVICE 4
00407  1F53  8D 39 1C           STA OUTPUT      ;SET DEVICE
00408  1F56  8D 38 1C           STA DEVICE      ;SET DEVICE
00409  1F59  20 89 30           JSR INTPRT      ;PRINT INTABLE
00410  1F5C  A9 07              LDA #$07        ;DEVICE 3 AND 4
00411  1F5E  8D 38 1C           STA DEVICE      ;SET DEVICE
00412  1F61  8D 39 1C           STA OUTPUT      ;SET DEVICE
00413  1F64  20 51 27    DONED  JSR NEWLIN      ;NEWLINE
00414  1F67  20 51 27           JSR NEWLIN      ;NEWLINE
00415  1F6A  A9 2D              LDA #<MSGDIS    ;END MSG
00416  1F6C  A0 1E              LDY #>MSGDIS
00417  1F6E  20 0E 28           JSR STRPNT      ;PRINT IT
00418  1F71  20 51 27           JSR NEWLIN      ;NEW LINE
00419  1F74  AD 38 1C           LDA DEVICE      ;CHECK DEVICE
00420  1F77  29 04              AND #$04        ;PRINTER
00421  1F79  F0 08              BEQ DONE        ;
00422  1F7B  20 9B 28           JSR FINISH      ;FINISH PAGE
00423  1F7E  A9 04              LDA #$04        ;PRINTER
00424  1F80  20 C3 FF           JSR CLOSE       ;CLOSE FILE
00425  1F83              ;*********************************






DISASS128.ASM......PAGE 0011

LINE# LOC   CODE        LINE


00426  1F83  20 CC FF    DONE   JSR CLRCHN      ;RESET I/O
00427  1F86  20 5B 29           JSR SCRON       ;TURN SCREEN ON
00428  1F89                     
00429  1F89  A9 00              LDA #$00        ;BANK 15
00430  1F8B  8D 00 FF           STA $FF00       ; 
00431  1F8E                     
00432  1F8E  4C 37 4D           JMP WREADY      ;RETURN
00433  1F91              ;*********************************
00434  1F91              ;.FIL 0:OPTION.ASM
00435  1F91              ;*********************************
00436  1F91              ;.END
00437  1F91              ;*********************************
00438  1F91              ; FILE OPTION.ASM
00439  1F91              ;*********************************
00440  1F91              ;
00441  1F91              ;        DISASSEMBLER128
00442  1F91              ;    SYMBOLIC DISASSEMBLER
00443  1F91              ;       BY DENTON MARLOWE
00444  1F91              ;
00445  1F91              ;  (C)1986 BY DENTON MARLOWE
00446  1F91              ;
00447  1F91              ;*********************************
00448  1F91              ; DISASSEMBLER OPTIONS
00449  1F91              ;*********************************
00450  1F91  A9 03       DOP    LDA #$03        ;DEVICE #3 SCREEN
00451  1F93  8D 38 1C           STA DEVICE      ;CURRENT OUTPUT
00452  1F96  A9 00              LDA #$00        ;NO DEVICES
00453  1F98  8D 39 1C           STA OUTPUT      ;FINAL OUTPUT
00454  1F9B  A9 07              LDA #<MSG       ;START UP MSG
00455  1F9D  A0 24              LDY #>MSG
00456  1F9F  20 0E 28           JSR STRPNT      ;PRINT IT
00457  1FA2              ;*********************************
00458  1FA2              ; READ IN DISK FILE ?
00459  1FA2              ;*********************************
00460  1FA2  A9 54              LDA #<MSF1
00461  1FA4  A0 24              LDY #>MSF1
00462  1FA6  20 0E 28           JSR STRPNT
00463  1FA9  20 6F 27           JSR INSTNG
00464  1FAC  D0 03              BNE PFILE0
00465  1FAE  4C FE 20           JMP STARTS
00466  1FB1  A2 00       PFILE0 LDX #$00
00467  1FB3  BD A5 24    PFILE1 LDA PROGM,X
00468  1FB6  99 7B 1C           STA BUF,Y
00469  1FB9  C8                 INY
00470  1FBA  E8                 INX
00471  1FBB  E0 04              CPX #$04
00472  1FBD  D0 F4              BNE PFILE1
00473  1FBF  8C 71 1C           STY SAVA
00474  1FC2  20 DD 20           JSR INITD
00475  1FC5  20 AB 20           JSR PRFILE
00476  1FC8              ;*********************************
00477  1FC8              ; READ IN FILE FOR SA AND EA
00478  1FC8              ;*********************************
00479  1FC8  A2 08              LDX #$08        ;FILE #8
00480  1FCA  20 C6 FF           JSR CHKIN       ;INPUT FILE






DISASS128.ASM......PAGE 0012

LINE# LOC   CODE        LINE


00481  1FCD  20 CF FF           JSR CHRIN       ;GET LOW BYTE SA
00482  1FD0  8D 3D 1C           STA SA          ;SET START
00483  1FD3  20 CF FF           JSR CHRIN       ;GET HIGH BYTE SA
00484  1FD6  8D 3E 1C           STA SA+1        ;SET START
00485  1FD9  20 A4 2D           JSR INTSA       ;SET END
00486  1FDC              ;*********************************
00487  1FDC  A9 00              LDA #$00        ;ZERO BYTE
00488  1FDE  8D 6E 1C           STA ADRS        ;BYTE COUNTER
00489  1FE1  8D 6F 1C           STA ADRS+1      ;BYTE COUNTER
00490  1FE4  20 CF FF    PROGRD JSR CHRIN       ;INPUT BYTE
00491  1FE7  20 B7 FF           JSR READST      ;READ STATUS
00492  1FEA  D0 0D              BNE PROGED      ;IF NOT ZERO END
00493  1FEC  20 77 2D           JSR INCSL       ;INC END ADDRESS
00494  1FEF  EE 6E 1C           INC ADRS        ;INC BYTE COUNT
00495  1FF2  D0 03              BNE *+5         ;
00496  1FF4  EE 6F 1C           INC ADRS+1      ;
00497  1FF7  D0 EB              BNE PROGRD      ;NEXT BYTE
00498  1FF9  AD 41 1C    PROGED LDA SELECT      ;
00499  1FFC  8D 3F 1C           STA EA          ;
00500  1FFF  AD 42 1C           LDA SELECT+1    ;
00501  2002  8D 40 1C           STA EA+1        ;
00502  2005              ;*********************************
00503  2005  A9 08              LDA #$08        ;FILE #8
00504  2007  20 C3 FF           JSR CLOSE       ;CLOSE IT
00505  200A  20 CC FF           JSR CLRCHN      ;RESET I/O
00506  200D              ;*********************************
00507  200D              ; PRINT PROGRAM LOAD ADDRESS
00508  200D              ; AND END ADDRESS
00509  200D              ;*********************************
00510  200D  A9 70              LDA #<MSF2
00511  200F  A0 24              LDY #>MSF2
00512  2011  20 0E 28           JSR STRPNT
00513  2014  AD 3D 1C           LDA SA
00514  2017  8D 64 1C           STA WORKED
00515  201A  AD 3E 1C           LDA SA+1
00516  201D  8D 65 1C           STA WORKED+1
00517  2020  20 16 2D           JSR PWORKD
00518  2023              ;
00519  2023  A9 2D              LDA #'-'
00520  2025              ;
00521  2025  20 64 28           JSR PCHAR
00522  2028  20 24 2D           JSR DOLLAR
00523  202B  20 0A 2D           JSR PSELEC
00524  202E  20 47 2D           JSR CRLF
00525  2031              ;*********************************
00526  2031              ; CALCULATE BUFFER ADDRESS
00527  2031              ;*********************************
00528  2031  A5 39              LDA MEMSIZ
00529  2033  8D 41 1C           STA SELECT
00530  2036  A5 3A              LDA MEMSIZ+1
00531  2038  8D 42 1C           STA SELECT+1
00532  203B  20 98 2D           JSR DECSL
00533  203E  38                 SEC
00534  203F  AD 41 1C           LDA SELECT
00535  2042  ED 6E 1C           SBC ADRS






DISASS128.ASM......PAGE 0013

LINE# LOC   CODE        LINE


00536  2045  8D 41 1C           STA SELECT
00537  2048  AD 42 1C           LDA SELECT+1
00538  204B  ED 6F 1C           SBC ADRS+1
00539  204E  8D 42 1C           STA SELECT+1
00540  2051              ;*********************************
00541  2051              ; CALCULATE ADDRESS OFFSET
00542  2051              ;*********************************
00543  2051  38                 SEC
00544  2052  AD 41 1C           LDA SELECT
00545  2055  ED 3D 1C           SBC SA
00546  2058  8D 43 1C           STA OFFSET
00547  205B  8D 64 1C           STA WORKED
00548  205E  AD 42 1C           LDA SELECT+1
00549  2061  ED 3E 1C           SBC SA+1
00550  2064  8D 44 1C           STA OFFSET+1
00551  2067  8D 65 1C           STA WORKED+1
00552  206A  A9 00              LDA #<MSD4A
00553  206C  A0 25              LDY #>MSD4A
00554  206E  20 0E 28           JSR STRPNT
00555  2071  20 16 2D           JSR PWORKD
00556  2074  20 47 2D           JSR CRLF
00557  2077              ;*********************************
00558  2077              ; OPEN FILE AND READ PRG INTO BUF
00559  2077              ;*********************************
00560  2077  20 AB 20           JSR PRFILE      ;OPEN FILE
00561  207A  A2 08              LDX #$08        ;FILE #8
00562  207C  20 C6 FF           JSR CHKIN       ;INPUT FILE
00563  207F  20 CF FF           JSR CHRIN       ;GET LOW BYTE SA
00564  2082  20 CF FF           JSR CHRIN       ;GET HIGH BYTE SA
00565  2085  20 CF FF    PRO2RD JSR CHRIN       ;INPUT BYTE
00566  2088              ;
00567  2088  AE 41 1C           LDX SELECT      ;LOW BYTE POINTER
00568  208B  86 FB              STX ZEROUR      ;ZERO PAGE
00569  208D  AE 42 1C           LDX SELECT+1    ;HIGH BYTE POINTER
00570  2090  86 FC              STX ZEROUR+1    ;ZERO PAGE
00571  2092  A2 01              LDX #$01        ;RAM BANK 1
00572  2094  A0 00              LDY #$00        ;OFFSET
00573  2096  91 FB              STA (ZEROUR),Y  ;STORE BYTE
00574  2098              ; JSR INDSTA
00575  2098              ; 
00576  2098  20 77 2D           JSR INCSL       ;INC POINTER
00577  209B  20 B7 FF           JSR READST      ;READ STATUS
00578  209E  F0 E5              BEQ PRO2RD      ;NEXT BYTE
00579  20A0  A9 08              LDA #$08        ;FILE #8
00580  20A2  20 C3 FF           JSR CLOSE       ;CLOSE IT
00581  20A5  20 CC FF           JSR CLRCHN      ;RESET I/O
00582  20A8  4C 40 21           JMP WINDOP      ;WINDOW OPTION
00583  20AB              ;*********************************
00584  20AB              ; OPEN PROGRAM FILE
00585  20AB              ;*********************************
00586  20AB  AD 71 1C    PRFILE LDA SAVA
00587  20AE  A2 7B              LDX #<BUF
00588  20B0  A0 1C              LDY #>BUF
00589  20B2  20 BD FF           JSR SETNAM
00590  20B5  A9 08              LDA #$08






DISASS128.ASM......PAGE 0014

LINE# LOC   CODE        LINE


00591  20B7  A8                 TAY
00592  20B8  AA                 TAX
00593  20B9  20 BA FF           JSR SETLFS
00594  20BC              ;
00595  20BC  A9 00              LDA #$00        ;LOAD INTO BANK 1
00596  20BE  A2 00              LDX #$00        ;PROGRAM IN BANK 0
00597  20C0  20 68 FF           JSR SETBNK
00598  20C3              ;
00599  20C3  20 C0 FF           JSR OPEN
00600  20C6  20 17 27           JSR DISERR
00601  20C9  90 11              BCC PROGOK
00602  20CB  A9 08              LDA #$08
00603  20CD  20 C3 FF           JSR CLOSE
00604  20D0  68                 PLA
00605  20D1  68                 PLA
00606  20D2  68                 PLA
00607  20D3  68                 PLA
00608  20D4                     
00609  20D4  A9 00              LDA #$00        ;BANK 15
00610  20D6  8D 00 FF           STA $FF00       ; 
00611  20D9                     
00612  20D9                     
00613  20D9  4C 37 4D           JMP WREADY
00614  20DC              ;*********************************
00615  20DC  60          PROGOK RTS
00616  20DD              ;*********************************
00617  20DD              ; INIT DISK
00618  20DD              ;*********************************
00619  20DD  A9 02       INITD  LDA #$02
00620  20DF  A0 24              LDY #>INIT
00621  20E1  A2 A9              LDX #<INIT
00622  20E3  20 BD FF           JSR SETNAM
00623  20E6  A9 0F              LDA #$0F
00624  20E8  A2 08              LDX #$08
00625  20EA  A0 0F              LDY #$0F
00626  20EC  20 BA FF           JSR SETLFS
00627  20EF              ;
00628  20EF  A9 00              LDA #$00        ;LOAD INTO BANK 1
00629  20F1  A2 00              LDX #$00        ;PROGRAM IN BANK 0
00630  20F3  20 68 FF           JSR SETBNK
00631  20F6              ;
00632  20F6  20 C0 FF           JSR OPEN
00633  20F9  A9 0F              LDA #$0F
00634  20FB  4C C3 FF           JMP CLOSE
00635  20FE              ;*********************************
00636  20FE              ; GET START ADDRESS
00637  20FE              ;*********************************
00638  20FE  A9 C4       STARTS LDA #<MSD1
00639  2100  A0 24              LDY #>MSD1
00640  2102  20 0E 28           JSR STRPNT
00641  2105  20 7E 27           JSR GETWRD
00642  2108  AD 6E 1C           LDA ADRS
00643  210B  8D 3D 1C           STA SA
00644  210E  AD 6F 1C           LDA ADRS+1
00645  2111  8D 3E 1C           STA SA+1






DISASS128.ASM......PAGE 0015

LINE# LOC   CODE        LINE


00646  2114              ;*********************************
00647  2114              ; GET END ADDRESS
00648  2114              ;*********************************
00649  2114  A9 D6              LDA #<MSD2
00650  2116  A0 24              LDY #>MSD2
00651  2118  20 0E 28           JSR STRPNT
00652  211B  20 7E 27           JSR GETWRD
00653  211E  AD 6E 1C           LDA ADRS
00654  2121  8D 3F 1C           STA EA
00655  2124  AD 6F 1C           LDA ADRS+1
00656  2127  8D 40 1C           STA EA+1
00657  212A              ;*********************************
00658  212A              ; ADDRRESS OFFSET
00659  212A              ;*********************************
00660  212A  A9 E6              LDA #<MSD4
00661  212C  A0 24              LDY #>MSD4
00662  212E  20 0E 28           JSR STRPNT
00663  2131  20 7E 27           JSR GETWRD
00664  2134  AD 6E 1C           LDA ADRS
00665  2137  8D 43 1C           STA OFFSET
00666  213A  AD 6F 1C           LDA ADRS+1
00667  213D  8D 44 1C           STA OFFSET+1
00668  2140              ;*********************************
00669  2140              ; OUTPUT WINDOW
00670  2140              ;*********************************
00671  2140  A9 13       WINDOP LDA #<MSD5
00672  2142  A0 25              LDY #>MSD5
00673  2144  20 0E 28           JSR STRPNT
00674  2147  20 E3 27           JSR CRNO
00675  214A  B0 30              BCS WIND1
00676  214C  A9 C4              LDA #<MSD1
00677  214E  A0 24              LDY #>MSD1
00678  2150  20 0E 28           JSR STRPNT
00679  2153  20 7E 27           JSR GETWRD
00680  2156  AD 6E 1C           LDA ADRS
00681  2159  8D 49 1C           STA SAOUT
00682  215C  AD 6F 1C           LDA ADRS+1
00683  215F  8D 4A 1C           STA SAOUT+1
00684  2162  A9 D6              LDA #<MSD2
00685  2164  A0 24              LDY #>MSD2
00686  2166  20 0E 28           JSR STRPNT
00687  2169  20 7E 27           JSR GETWRD
00688  216C  AD 6E 1C           LDA ADRS
00689  216F  8D 4B 1C           STA EAOUT
00690  2172  AD 6F 1C           LDA ADRS+1
00691  2175  8D 4C 1C           STA EAOUT+1
00692  2178  A9 FF              LDA #$FF
00693  217A  30 02              BMI WIND2
00694  217C  A9 00       WIND1  LDA #$00
00695  217E  8D 3A 1C    WIND2  STA WINDOW
00696  2181              ;*********************************
00697  2181              ; SETUP GOBAL POINTER
00698  2181              ;*********************************
00699  2181  AD 3D 1C           LDA SA
00700  2184  8D 45 1C           STA SAGOL






DISASS128.ASM......PAGE 0016

LINE# LOC   CODE        LINE


00701  2187  AD 3E 1C           LDA SA+1
00702  218A  8D 46 1C           STA SAGOL+1
00703  218D  AD 3F 1C           LDA EA
00704  2190  8D 47 1C           STA EAGOL
00705  2193  AD 40 1C           LDA EA+1
00706  2196  8D 48 1C           STA EAGOL+1
00707  2199              ;*********************************
00708  2199              ; SOURCE FILE OUTPUT?
00709  2199              ;*********************************
00710  2199  A9 84       OUFILE LDA #<MSG1
00711  219B  A0 24              LDY #>MSG1
00712  219D  20 0E 28           JSR STRPNT
00713  21A0              ;*********************************
00714  21A0  A9 00              LDA #$00
00715  21A2  8D E2 1C           STA NCHARS
00716  21A5  20 6F 27           JSR INSTNG
00717  21A8  F0 1A              BEQ NOFILE
00718  21AA  A9 30              LDA #'0'
00719  21AC  8D E1 1C           STA VERSON
00720  21AF  8C E2 1C           STY NCHARS
00721  21B2  A2 00              LDX #$00
00722  21B4  BD 7B 1C    GFILE0 LDA BUF,X
00723  21B7  9D E3 1C           STA NBUF,X
00724  21BA  E8                 INX
00725  21BB  EC E2 1C           CPX NCHARS
00726  21BE  D0 F4              BNE GFILE0
00727  21C0              ;*********************************
00728  21C0  A9 08       FILEOK LDA #$08
00729  21C2  D0 02              BNE FILE
00730  21C4  A9 00       NOFILE LDA #$00
00731  21C6  0D 39 1C    FILE   ORA OUTPUT
00732  21C9  8D 39 1C           STA OUTPUT
00733  21CC  4C 31 22           JMP PRTGET
00734  21CF              ;*********************************
00735  21CF              ;     OPEN SOURCE DISK FILE
00736  21CF              ;*********************************
00737  21CF  AC E2 1C    OFILED LDY NCHARS
00738  21D2  F0 03              BEQ NOID
00739  21D4  20 DD 20           JSR INITD
00740  21D7  20 4B 29    NOID   JSR SCROFF
00741  21DA              ;*********************************
00742  21DA  AC E2 1C    OFILE  LDY NCHARS
00743  21DD  F0 51              BEQ OFILE4
00744  21DF  AD E1 1C           LDA VERSON
00745  21E2  C9 30              CMP #'0'
00746  21E4  F0 07              BEQ OFILE1
00747  21E6  AD E1 1C           LDA VERSON
00748  21E9  99 E3 1C           STA NBUF,Y
00749  21EC  C8                 INY
00750  21ED  EE E1 1C    OFILE1 INC VERSON
00751  21F0  A2 00              LDX #$00
00752  21F2  BD A1 24    OFILE2 LDA WRITE,X
00753  21F5  99 E3 1C           STA NBUF,Y
00754  21F8  C8                 INY
00755  21F9  E8                 INX






DISASS128.ASM......PAGE 0017

LINE# LOC   CODE        LINE


00756  21FA  E0 04              CPX #$04
00757  21FC  D0 F4              BNE OFILE2
00758  21FE  98                 TYA
00759  21FF  A0 1C              LDY #>NBUF
00760  2201  A2 E3              LDX #<NBUF
00761  2203  20 BD FF           JSR SETNAM
00762  2206  A9 08              LDA #$08
00763  2208  AA                 TAX
00764  2209  A8                 TAY
00765  220A  20 BA FF           JSR SETLFS
00766  220D              ;
00767  220D  A9 00              LDA #$00        ;LOAD INTO BANK 1
00768  220F  A2 00              LDX #$00        ;PROGRAM IN BANK 0
00769  2211  20 68 FF           JSR SETBNK
00770  2214              ;
00771  2214  20 C0 FF           JSR OPEN
00772  2217  20 17 27           JSR DISERR
00773  221A  90 14              BCC OFILE4
00774  221C              ;*********************************
00775  221C              ;  CLOSE OUT FILE ON ERROR
00776  221C              ;*********************************
00777  221C  A9 08       OFILE3 LDA #$08
00778  221E  20 C3 FF           JSR CLOSE
00779  2221  20 CC FF           JSR CLRCHN
00780  2224  68                 PLA
00781  2225  68                 PLA
00782  2226  68                 PLA
00783  2227  68                 PLA
00784  2228                     
00785  2228  A9 00              LDA #$00        ;BANK 15
00786  222A  8D 00 FF           STA $FF00       ; 
00787  222D                     
00788  222D  4C 37 4D           JMP WREADY
00789  2230  60          OFILE4 RTS
00790  2231              ;*********************************
00791  2231              ; GET PRINTER OPTION
00792  2231              ;*********************************
00793  2231  A9 AB       PRTGET LDA #<MSG2
00794  2233  A0 24              LDY #>MSG2
00795  2235  20 0E 28           JSR STRPNT
00796  2238  20 D6 27           JSR CRYS
00797  223B  B0 2D              BCS NOPRT
00798  223D  A9 00              LDA #$00
00799  223F  20 BD FF           JSR SETNAM
00800  2242  A9 04              LDA #$04
00801  2244  A2 04              LDX #$04
00802  2246  A0 00              LDY #$00
00803  2248  20 BA FF           JSR SETLFS
00804  224B              ;
00805  224B  A9 00              LDA #$00        ;LOAD INTO BANK 1
00806  224D  A2 00              LDX #$00        ;PROGRAM IN BANK 0
00807  224F  20 68 FF           JSR SETBNK
00808  2252              ;
00809  2252  20 C0 FF           JSR OPEN
00810  2255  A2 04              LDX #$04






DISASS128.ASM......PAGE 0018

LINE# LOC   CODE        LINE


00811  2257  20 C9 FF           JSR CHKOUT
00812  225A  20 B7 FF           JSR READST
00813  225D  29 80              AND #$80
00814  225F  08                 PHP
00815  2260  20 CC FF           JSR CLRCHN
00816  2263  28                 PLP
00817  2264  30 04              BMI NOPRT
00818  2266  A9 04              LDA #$04
00819  2268  D0 02              BNE PRINT
00820  226A  A9 03       NOPRT  LDA #$03
00821  226C  0D 39 1C    PRINT  ORA OUTPUT
00822  226F  8D 39 1C           STA OUTPUT
00823  2272              ;*********************************
00824  2272              ; GO GET SYMBOLIC OPTION
00825  2272              ;*********************************
00826  2272  20 16 37           JSR SOP
00827  2275              ;*********************************
00828  2275              ; GET RELATIVE ADDRESS OPTION
00829  2275              ;*********************************
00830  2275  A9 2F              LDA #<MSR1
00831  2277  A0 25              LDY #>MSR1
00832  2279  20 0E 28           JSR STRPNT
00833  227C  20 D6 27           JSR CRYS
00834  227F  90 04              BCC DOP2
00835  2281  A9 01              LDA #$01
00836  2283  D0 02              BNE DOP3
00837  2285  A9 00       DOP2   LDA #$00
00838  2287  8D 37 1C    DOP3   STA ROPT
00839  228A              ;*********************************
00840  228A              ; GET BIT INSTRUCTION CODING OPTION
00841  228A              ;*********************************
00842  228A  20 9F 43           JSR BITOPT
00843  228D              ;*********************************
00844  228D              ; DATA TABLE OPTION
00845  228D              ;*********************************
00846  228D  AD 5C 1C    AOP    LDA SYMBOE
00847  2290  8D 0A 1D           STA DATABP
00848  2293  8D 0C 1D           STA DATABS
00849  2296  8D 0E 1D           STA DATABE
00850  2299  85 FB              STA ZEROUR
00851  229B  AD 5D 1C           LDA SYMBOE+1
00852  229E  8D 0B 1D           STA DATABP+1
00853  22A1  8D 0D 1D           STA DATABS+1
00854  22A4  8D 0F 1D           STA DATABE+1
00855  22A7  85 FC              STA ZEROUR+1
00856  22A9              ;*********************************
00857  22A9  A9 BD              LDA #<MSAOP
00858  22AB  A0 25              LDY #>MSAOP
00859  22AD  20 0E 28           JSR STRPNT
00860  22B0  20 6F 27           JSR INSTNG
00861  22B3  D0 03              BNE BOP
00862  22B5  4C 3F 23           JMP NOTABS
00863  22B8              ;*********************************
00864  22B8  98          BOP    TYA
00865  22B9  48                 PHA






DISASS128.ASM......PAGE 0019

LINE# LOC   CODE        LINE


00866  22BA  20 DD 20           JSR INITD
00867  22BD  68                 PLA
00868  22BE  A8                 TAY
00869  22BF  A2 00              LDX #$00
00870  22C1  BD 86 3A    AFILE  LDA NAMS,X
00871  22C4  99 7B 1C           STA BUF,Y
00872  22C7  C8                 INY
00873  22C8  E8                 INX
00874  22C9  E0 04              CPX #$04
00875  22CB  D0 F4              BNE AFILE
00876  22CD  98                 TYA
00877  22CE  A0 1C              LDY #>BUF
00878  22D0  A2 7B              LDX #<BUF
00879  22D2  20 BD FF           JSR SETNAM
00880  22D5  A9 03              LDA #$03
00881  22D7  A2 08              LDX #$08
00882  22D9  A0 03              LDY #$03
00883  22DB  20 BA FF           JSR SETLFS
00884  22DE              ;
00885  22DE  A9 00              LDA #$00        ;LOAD INTO BANK 1
00886  22E0  A2 00              LDX #$00        ;PROGRAM IN BANK 0
00887  22E2  20 68 FF           JSR SETBNK
00888  22E5              ;
00889  22E5  20 C0 FF           JSR OPEN
00890  22E8  20 17 27           JSR DISERR
00891  22EB  B0 1B              BCS AGET1
00892  22ED  A2 03              LDX #$03
00893  22EF  20 C6 FF           JSR CHKIN
00894  22F2              ;*********************************
00895  22F2              ; READ IN DATA TABLE
00896  22F2              ;*********************************
00897  22F2  A0 00              LDY #$00
00898  22F4  20 CF FF           JSR CHRIN
00899  22F7  8D 08 1D           STA NDATA
00900  22FA  F0 0C              BEQ AGET1
00901  22FC  20 CF FF    AGET   JSR CHRIN
00902  22FF  99 10 1D           STA TDATA,Y
00903  2302  C8                 INY
00904  2303  20 B7 FF           JSR READST
00905  2306  F0 F4              BEQ AGET
00906  2308  A9 03       AGET1  LDA #$03
00907  230A  20 C3 FF           JSR CLOSE
00908  230D  20 CC FF           JSR CLRCHN
00909  2310              ;*********************************
00910  2310              ; PRINT DATA TABLE
00911  2310              ;*********************************
00912  2310  AD 08 1D    PRTDAS LDA NDATA
00913  2313  8D 06 1D           STA CDATA
00914  2316  A0 00              LDY #$00
00915  2318  8C 73 1C           STY SAVY
00916  231B  20 47 2D    PRTNEX JSR CRLF
00917  231E  A2 05              LDX #$05
00918  2320  8E 72 1C           STX SAVX
00919  2323  AC 73 1C    PRTDAL LDY SAVY
00920  2326  B9 10 1D           LDA TDATA,Y






DISASS128.ASM......PAGE 0020

LINE# LOC   CODE        LINE


00921  2329  20 F8 27           JSR PRBYT
00922  232C  20 59 2D           JSR SPACE
00923  232F  EE 73 1C           INC SAVY
00924  2332  CE 72 1C           DEC SAVX
00925  2335  D0 EC              BNE PRTDAL
00926  2337  CE 06 1D           DEC CDATA
00927  233A  D0 DF              BNE PRTNEX
00928  233C              ;*********************************
00929  233C  4C DC 23           JMP XOP0
00930  233F              ;*********************************
00931  233F              ; READ DATA FOR KEYBOARD
00932  233F              ;*********************************
00933  233F  A9 DC       NOTABS LDA #<MSA1      ;NUMBER OF DATA
00934  2341  A0 25              LDY #>MSA1
00935  2343  20 0E 28           JSR STRPNT
00936  2346  20 7E 27           JSR GETWRD      ;INPUT HEX BYTE
00937  2349  AD 6E 1C           LDA ADRS        ;GET BYTE
00938  234C  8D 08 1D           STA NDATA       ;SET NUM TABLES
00939  234F  D0 03              BNE AOPX        ;0 DATA THEN END
00940  2351  4C DC 23           JMP XOP0        ;RETURN
00941  2354  A9 00       AOPX   LDA #$00        ;ZERO OFFSET
00942  2356  8D 06 1D           STA CDATA       ;FIRST TABLE
00943  2359              ;*********************************
00944  2359              ; CALCULATE TABLE OFFSET
00945  2359              ;*********************************
00946  2359  AD 06 1D    AOP1   LDA CDATA       ;GET TABLE NUMBER
00947  235C  0A                 ASL A           ;*2
00948  235D  0A                 ASL A           ;*4
00949  235E  18                 CLC             ;C=0
00950  235F  6D 06 1D           ADC CDATA       ;*5
00951  2362  8D 73 1C           STA SAVY        ;STORE AS OFFSET
00952  2365              ;*********************************
00953  2365  A9 FE              LDA #<MSA2
00954  2367  A0 25              LDY #>MSA2
00955  2369  20 0E 28           JSR STRPNT      ;PRINT MSG
00956  236C  20 7E 27           JSR GETWRD      ;GET ADDRESS
00957  236F  AC 73 1C           LDY SAVY        ;GET OFFSET
00958  2372  AD 6E 1C           LDA ADRS
00959  2375  99 10 1D           STA TDATA,Y
00960  2378  C8                 INY
00961  2379  AD 6F 1C           LDA ADRS+1
00962  237C  99 10 1D           STA TDATA,Y
00963  237F  C8                 INY
00964  2380  8C 73 1C           STY SAVY
00965  2383              ;*********************************
00966  2383              ; END OF DATA TABLE
00967  2383              ;*********************************
00968  2383  A9 16       AOP2   LDA #<MSA3
00969  2385  A0 26              LDY #>MSA3
00970  2387  20 0E 28           JSR STRPNT
00971  238A  20 7E 27           JSR GETWRD      ;GET ADDRESS
00972  238D  AC 73 1C           LDY SAVY
00973  2390  AD 6E 1C           LDA ADRS
00974  2393  99 10 1D           STA TDATA,Y
00975  2396  C8                 INY






DISASS128.ASM......PAGE 0021

LINE# LOC   CODE        LINE


00976  2397  AD 6F 1C           LDA ADRS+1
00977  239A  99 10 1D           STA TDATA,Y
00978  239D  C8                 INY
00979  239E  8C 73 1C           STY SAVY
00980  23A1              ;*********************************
00981  23A1              ; GET TYPE OF TABLE
00982  23A1              ;*********************************
00983  23A1  A9 2C              LDA #<MSG5      ;TABLE TYPE
00984  23A3  A0 26              LDY #>MSG5
00985  23A5  20 0E 28           JSR STRPNT
00986  23A8  20 E4 FF    AOP3   JSR GETIN
00987  23AB  F0 FB              BEQ AOP3
00988  23AD  C9 30              CMP #'0'
00989  23AF  F0 14              BEQ ASC
00990  23B1  C9 31              CMP #'1'
00991  23B3  F0 10              BEQ ASC
00992  23B5  C9 32              CMP #'2'
00993  23B7  F0 0C              BEQ ASC
00994  23B9  C9 33              CMP #'3'
00995  23BB  F0 08              BEQ ASC
00996  23BD  C9 34              CMP #'4'
00997  23BF  F0 04              BEQ ASC
00998  23C1  C9 53              CMP #'S'
00999  23C3  D0 E3              BNE AOP3
01000  23C5  20 D2 FF    ASC    JSR CHROUT
01001  23C8  AC 73 1C           LDY SAVY
01002  23CB  99 10 1D           STA TDATA,Y
01003  23CE              ;*********************************
01004  23CE  EE 06 1D           INC CDATA       ;INC TABLE COUNT
01005  23D1  AD 06 1D           LDA CDATA       ;GET TABLE COUNT
01006  23D4  CD 08 1D           CMP NDATA       ;ALL TABLES?
01007  23D7  F0 03              BEQ XOP0        ;IF NOT GET MORE
01008  23D9  4C 59 23           JMP AOP1        ;IF NOT GET MORE
01009  23DC              ;*********************************
01010  23DC              ; GET LABEL GENERATION OPTION
01011  23DC              ;*********************************
01012  23DC  A9 98       XOP0   LDA #<MSB4
01013  23DE  A0 26              LDY #>MSB4
01014  23E0  20 0E 28           JSR STRPNT
01015  23E3  20 D6 27           JSR CRYS
01016  23E6  B0 04              BCS XOP1
01017  23E8  A9 01              LDA #$01
01018  23EA  D0 02              BNE XOP2
01019  23EC  A9 00       XOP1   LDA #$00
01020  23EE  8D 36 1C    XOP2   STA XOPT
01021  23F1              ;*********************************
01022  23F1              ; OUTPUT FORMAT OPTION
01023  23F1              ;*********************************
01024  23F1  A9 B8              LDA #<MSB5
01025  23F3  A0 26              LDY #>MSB5
01026  23F5  20 0E 28           JSR STRPNT
01027  23F8  20 D6 27           JSR CRYS
01028  23FB  B0 04              BCS FOP1
01029  23FD  A9 00              LDA #$00
01030  23FF  F0 02              BEQ FOP2






DISASS128.ASM......PAGE 0022

LINE# LOC   CODE        LINE


01031  2401  A9 FF       FOP1   LDA #$FF
01032  2403  8D 3B 1C    FOP2   STA FOROPT
01033  2406              ;*********************************
01034  2406  60                 RTS
01035  2407              ;*********************************
01036  2407              ;   COMMAND MESSAGES
01037  2407              ;*********************************
01038  2407  0D          MSG    .BYTE $0D,$0D
01038  2408  0D 
01039  2409  43 42       .BYTE  'CBM RESIDENT DISASSEMBLER'
01040  2422  20 56       .BYTE  ' V080282'
01041  242A  0D          .BYTE  $0D
01042  242B  28 43       .BYTE  '(C) 1982 BY COMMODORE '
01043  2441  42 55       .BYTE  'BUSINESS MACHINES'
01044  2452  0D          .BYTE  $0D
01045  2453  00          .BYTE  0
01046  2454              ;*********************************
01047  2454  0D          MSF1   .BYTE $0D
01048  2455  50 52       .BYTE  'PROGRAM FILE (CR OR NAME):'
01049  246F  00          .BYTE  0
01050  2470  0D          MSF2   .BYTE $0D
01051  2471  50 52       .BYTE  'PROGRAM ADDRESS: $'
01052  2483  00          .BYTE  0
01053  2484              ;*********************************
01054  2484  0D          MSG1   .BYTE $0D
01055  2485  45 44       .BYTE  'EDITOR64 FILE (CR OR NAME):'
01056  24A0  00          .BYTE  0
01057  24A1              ;*********************************
01058  24A1  2C 53       WRITE  .BYTE ',S,W'
01059  24A5  2C 50       PROGM  .BYTE ',P,R'
01060  24A9  49 30       INIT   .BYTE 'I0'
01061  24AB              ;*********************************
01062  24AB  0D          MSG2   .BYTE $0D
01063  24AC  48 41       .BYTE  'HARD COPY (Y/CR OR N)? '
01064  24C3  00          .BYTE  0
01065  24C4              ;*********************************
01066  24C4  0D          MSD1   .BYTE $0D
01067  24C5  53 54       .BYTE  'START ADDRESS :$'
01068  24D5  00          .BYTE  0
01069  24D6              ;*********************************
01070  24D6  0D          MSD2   .BYTE $0D
01071  24D7  45 4E       .BYTE  'END ADDRESS :$'
01072  24E5  00          .BYTE  0
01073  24E6              ;*********************************
01074  24E6  0D          MSD4   .BYTE $0D
01075  24E7  41 44       .BYTE  'ADDRESS OFFSET (OR CR):$'
01076  24FF  00          .BYTE  0
01077  2500              ;*********************************
01078  2500  0D          MSD4A  .BYTE $0D
01079  2501  41 44       .BYTE  'ADDRESS OFFSET :$'
01080  2512  00          .BYTE  0
01081  2513              ;*********************************
01082  2513  0D          MSD5   .BYTE $0D
01083  2514  57 49       .BYTE  'WINDOW OUTPUT(Y OR N/CR)? '
01084  252E  00          .BYTE  0






DISASS128.ASM......PAGE 0023

LINE# LOC   CODE        LINE


01085  252F              ;*********************************
01086  252F  0D          MSR1   .BYTE $0D
01087  2530  52 45       .BYTE  'RELATIVE BRANCH TO LABEL '
01088  2549  28 59       .BYTE  '(Y/CR OR N)? '
01089  2556  00          .BYTE  0
01090  2557              ;*********************************
01091  2557  0D          MSB1   .BYTE $0D
01092  2558  42 49              .BYTE 'BIT INSTRUCTION CODING'
01093  256E  0D                 .BYTE $0D,$0D
01093  256F  0D 
01094  2570  30 2F              .BYTE '0/CR STANDARD',$0D
01094  257D  0D 
01095  257E  31 20              .BYTE '1     $2C ABS',$0D
01095  258B  0D 
01096  258C  32 20              .BYTE '2     $24 ZP',$0D
01096  2598  0D 
01097  2599  33 20              .BYTE '3     $2C AND $24',$0D
01097  25AA  0D 
01098  25AB  0D                 .BYTE $0D
01099  25AC  45 4E              .BYTE 'ENTER BIT CODE: '
01100  25BC  00                 .BYTE 0
01101  25BD              ;*********************************
01102  25BD  0D          MSAOP  .BYTE $0D
01103  25BE  44 41       .BYTE  'DATA TABLE FILE (CR OR NAME):'
01104  25DB  00          .BYTE  0
01105  25DC  0D          MSA1   .BYTE $0D
01106  25DD  4E 55       .BYTE  'NUMBER OF DATA TABLES (OR CR) :$'
01107  25FD  00          .BYTE  0
01108  25FE  0D          MSA2   .BYTE $0D
01109  25FF  54 41       .BYTE  'TABLE START ADDRESS :$'
01110  2615  00          .BYTE  0
01111  2616  0D          MSA3   .BYTE $0D
01112  2617  54 41       .BYTE  'TABLE END ADDRESS :$'
01113  262B  00          .BYTE  0
01114  262C  0D          MSG5   .BYTE $0D,$0D
01114  262D  0D 
01115  262E  44 49              .BYTE 'DISASSEMBLY OPTIONS'
01116  2641  0D                 .BYTE $0D,$0D
01116  2642  0D 
01117  2643  30 20              .BYTE '0 ASCII',$0D
01117  264A  0D 
01118  264B  31 20              .BYTE '1 BYTE',$0D
01118  2651  0D 
01119  2652  32 20              .BYTE '2 WORD',$0D
01119  2658  0D 
01120  2659  33 20              .BYTE '3 DBYTE',$0D
01120  2660  0D 
01121  2661  34 20              .BYTE '4 WORD-1',$0D
01121  2669  0D 
01122  266A  53 20              .BYTE 'S SKIP ADDRESS RANGE',$0D
01122  267E  0D 
01123  267F  45 4E              .BYTE 'ENTER DISASSEMBLY CODE: '
01124  2697  00                 .BYTE 0
01125  2698              ;*********************************
01126  2698  0D          MSB4   .BYTE $0D






DISASS128.ASM......PAGE 0024

LINE# LOC   CODE        LINE


01127  2699  4C 41       .BYTE  'LABLE GENERATION (Y/CR OR N)? '
01128  26B7  00          .BYTE  0
01129  26B8              ;*********************************
01130  26B8  0D          MSB5   .BYTE $0D
01131  26B9  46 4F       .BYTE  'FORMATED LISTING (Y/CR OR N)? '
01132  26D7  00          .BYTE  0
01133  26D8              ;*********************************
01134  26D8              ;.FIL 0:UTIL.ASM
01135  26D8              ;*********************************
01136  26D8              ;.END
01137  26D8              ;*********************************
01138  26D8              ; FILE UTIL.ASM
01139  26D8              ;*********************************
01140  26D8              ;
01141  26D8              ;        DISASSEMBLER128
01142  26D8              ;    SYMBOLIC DISASSEMBLER
01143  26D8              ;       BY DENTON MARLOWE
01144  26D8              ;
01145  26D8              ;  (C)1986 BY DENTON MARLOWE
01146  26D8              ;
01147  26D8              ;*********************************
01148  26D8              ;      *** UTILITIES ***
01149  26D8              ;*********************************
01150  26D8              ; CHECK LINE COUNT FOR OUTPUT FILE
01151  26D8              ;*********************************
01152  26D8  AD 31 1C    LINECK LDA PASS
01153  26DB  CD 34 1C           CMP CPASS
01154  26DE  D0 36              BNE LINECO
01155  26E0  AD 38 1C           LDA DEVICE
01156  26E3  29 08              AND #$08
01157  26E5  F0 2F              BEQ LINECO
01158  26E7              ;*********************************
01159  26E7              ; CLOSE SOURCE FILE AND OPEN NEXT
01160  26E7              ;*********************************
01161  26E7  38                 SEC
01162  26E8  AD DF 1C           LDA LINEFL
01163  26EB  E9 20              SBC #$20
01164  26ED  8D 70 1C           STA TEMP
01165  26F0  AD E0 1C           LDA LINEFL+1
01166  26F3  E9 03              SBC #$03
01167  26F5  0D 70 1C           ORA TEMP
01168  26F8  90 1C              BCC LINECO
01169  26FA  EA                 NOP
01170  26FB  EA                 NOP
01171  26FC  EA                 NOP
01172  26FD  20 A5 2C           JSR EFILE
01173  2700  A9 08              LDA #$08
01174  2702  20 C3 FF           JSR CLOSE
01175  2705  20 DA 21           JSR OFILE
01176  2708  A9 00              LDA #$00
01177  270A  8D DF 1C           STA LINEFL
01178  270D  8D E0 1C           STA LINEFL+1
01179  2710  20 8F 2C           JSR ORGIN
01180  2713  20 B5 2C           JSR COMENT
01181  2716  60          LINECO RTS






DISASS128.ASM......PAGE 0025

LINE# LOC   CODE        LINE


01182  2717              ;*********************************
01183  2717              ;  DISK ERROR CHECK
01184  2717              ;*********************************
01185  2717  A9 08       DISERR LDA #$08        ;DEV #8
01186  2719  85 BA              STA $BA         ;PUT IN DEV TABLE
01187  271B  20 B4 FF           JSR $FFB4       ;SEND TALK
01188  271E  A9 6F              LDA #$6F        ;SECONDARY ADDRESS
01189  2720  85 B9              STA $B9         ;PUT IN TABLE
01190  2722  20 96 FF           JSR $FF96       ;SEND SEC
01191  2725  20 A5 FF           JSR $FFA5       ;GET FIRST BYTE
01192  2728  C9 30              CMP #$30        ;IS IT A ZERO
01193  272A  D0 0C              BNE DLOOC       ;IF NOT ZERO ERROR
01194  272C  20 A5 FF    DLOOE  JSR $FFA5       ;GET BYTE
01195  272F  C9 0D              CMP #$0D        ;IS IT CR?
01196  2731  D0 F9              BNE DLOOE       ;GET NEXT BYTE
01197  2733  20 AB FF           JSR $FFAB       ;UNTALK
01198  2736  18                 CLC             ;NO ERROR FLAG
01199  2737  60                 RTS             ;RETURN
01200  2738              ;*********************************
01201  2738              ; PRINT DISK ERROR
01202  2738              ;*********************************
01203  2738  48          DLOOC  PHA             ;STACK BYTE
01204  2739  A9 0D              LDA #$0D        ;ASCII CR
01205  273B  20 D2 FF           JSR CHROUT      ;PRINT IT
01206  273E  68                 PLA             ;GET BYTE
01207  273F  20 D2 FF           JSR CHROUT      ;PRINT IT
01208  2742  20 A5 FF    DLOOA  JSR $FFA5       ;GET NEXT BYTE
01209  2745  20 D2 FF           JSR CHROUT      ;PRINT IT
01210  2748  C9 0D              CMP #$0D        ;IS IT CR
01211  274A  D0 F6              BNE DLOOA       ;GET NEXT BYTE
01212  274C  20 AB FF           JSR $FFAB       ;UNTALK
01213  274F  38                 SEC             ;SET ERROR FLAG
01214  2750  60                 RTS             ;RETURN
01215  2751              ;*********************************
01216  2751              ; START NEW LINE AND INC COUNT
01217  2751              ;*********************************
01218  2751  EE 77 1C    NEWLIN INC LINECT
01219  2754  D0 03              BNE *+5
01220  2756  EE 78 1C           INC LINECT+1
01221  2759  EE DF 1C           INC LINEFL
01222  275C  D0 03              BNE *+5
01223  275E  EE E0 1C           INC LINEFL+1
01224  2761  20 47 2D           JSR CRLF
01225  2764  AD 38 1C           LDA DEVICE
01226  2767  29 04              AND #$04
01227  2769  F0 03              BEQ NEWEXT
01228  276B  20 C0 28           JSR NEXLIN
01229  276E  60          NEWEXT RTS
01230  276F              ;*********************************
01231  276F              ; INPUT UTILITIES
01232  276F              ;*********************************
01233  276F              ; INPUT STRING ROUTINE
01234  276F              ;*********************************
01235  276F  A0 00       INSTNG LDY #$00
01236  2771  20 CF FF    INSTN1 JSR CHRIN






DISASS128.ASM......PAGE 0026

LINE# LOC   CODE        LINE


01237  2774  99 7B 1C           STA BUF,Y
01238  2777  C8                 INY
01239  2778  C9 0D              CMP #$0D
01240  277A  D0 F5              BNE INSTN1
01241  277C  88                 DEY
01242  277D  60                 RTS
01243  277E              ;*********************************
01244  277E              ; INPUT HEX CHAR STRING
01245  277E              ;*********************************
01246  277E  A9 00       GETWRD LDA #$00
01247  2780  8D 6E 1C           STA ADRS
01248  2783  8D 6F 1C           STA ADRS+1
01249  2786  20 6F 27           JSR INSTNG
01250  2789  88                 DEY
01251  278A  30 15              BMI INEND
01252  278C              ;*********************************
01253  278C              ; PROCESS INPUT
01254  278C              ;*********************************
01255  278C  20 A2 27           JSR GETBYT
01256  278F  AD 70 1C           LDA TEMP
01257  2792  8D 6E 1C           STA ADRS
01258  2795  88                 DEY
01259  2796  30 09              BMI INEND
01260  2798  20 A2 27           JSR GETBYT
01261  279B  AD 70 1C           LDA TEMP
01262  279E  8D 6F 1C           STA ADRS+1
01263  27A1  60          INEND  RTS
01264  27A2              ;*********************************
01265  27A2              ; COVERT BUFFER INTO BYTES
01266  27A2              ;*********************************
01267  27A2  B9 7B 1C    GETBYT LDA BUF,Y
01268  27A5  20 BF 27           JSR BINARY
01269  27A8  8D 70 1C           STA TEMP
01270  27AB  88                 DEY
01271  27AC  30 10              BMI INENX
01272  27AE  B9 7B 1C           LDA BUF,Y
01273  27B1  20 BF 27           JSR BINARY
01274  27B4  0A                 ASL A
01275  27B5  0A                 ASL A
01276  27B6  0A                 ASL A
01277  27B7  0A                 ASL A
01278  27B8  0D 70 1C           ORA TEMP
01279  27BB  8D 70 1C           STA TEMP
01280  27BE  60          INENX  RTS
01281  27BF              ;*********************************
01282  27BF              ; CONVERT A INTO HEX NIBBLE
01283  27BF              ;*********************************
01284  27BF  38          BINARY SEC
01285  27C0  E9 30              SBC #'0'
01286  27C2  90 0E              BCC NOHEX
01287  27C4  C9 0A              CMP #$0A
01288  27C6  90 0C              BCC YSHEX
01289  27C8  E9 07              SBC #$07
01290  27CA  C9 10              CMP #$10
01291  27CC  B0 04              BCS NOHEX






DISASS128.ASM......PAGE 0027

LINE# LOC   CODE        LINE


01292  27CE  C9 0A              CMP #$0A
01293  27D0  B0 02              BCS YSHEX
01294  27D2  38          NOHEX  SEC
01295  27D3  60                 RTS
01296  27D4  18          YSHEX  CLC
01297  27D5  60                 RTS
01298  27D6              ;*********************************
01299  27D6              ; GET OPTION (CR/Y OR N): Y=C=0
01300  27D6              ;*********************************
01301  27D6  20 CF FF    CRYS   JSR CHRIN
01302  27D9  C9 59              CMP #'Y'
01303  27DB  F0 11              BEQ CRYS1
01304  27DD  C9 0D              CMP #$0D
01305  27DF  F0 0D              BEQ CRYS1
01306  27E1  D0 0D              BNE CRNO1
01307  27E3              ;*********************************
01308  27E3              ; GET OPTION (Y OR CR/N): Y=C=0
01309  27E3              ;*********************************
01310  27E3  20 CF FF    CRNO   JSR CHRIN
01311  27E6  C9 4E              CMP #'N'
01312  27E8  F0 06              BEQ CRNO1
01313  27EA  C9 0D              CMP #$0D
01314  27EC  F0 02              BEQ CRNO1
01315  27EE  18          CRYS1  CLC
01316  27EF  60                 RTS
01317  27F0  38          CRNO1  SEC
01318  27F1  60                 RTS
01319  27F2              ;*********************************
01320  27F2              ; PRINT UTILITES
01321  27F2              ;*********************************
01322  27F2              ; PRINT WORD MSB IN Y LSB IN A
01323  27F2              ;*********************************
01324  27F2  48          PRBYTS PHA             ;PUT A ON STACK
01325  27F3  98                 TYA             ;PUT HIH BYTE IN A
01326  27F4  20 F8 27           JSR PRBYT       ;PRINT MSB
01327  27F7  68                 PLA             ;GET LSB
01328  27F8              ;*********************************
01329  27F8              ; PRINT BYTE IN A
01330  27F8              ;*********************************
01331  27F8  48          PRBYT  PHA             ;PUT BYTE ON STACK
01332  27F9  4A                 LSR A           ;4 RIGHT SHIFTS
01333  27FA  4A                 LSR A           ;TO MOVE HIGH
01334  27FB  4A                 LSR A           ;NIBBLE TO LOW
01335  27FC  4A                 LSR A           ;NIB WITH HIGH 0'S
01336  27FD  A8                 TAY             ;USE AS POINTER
01337  27FE  B9 64 29           LDA HEXA,Y      ;GET ASCII
01338  2801  20 64 28           JSR PCHAR       ;PRINT
01339  2804  68                 PLA             ;PULL BYTE OUT
01340  2805  29 0F              AND #$0F        ;MASK HIGH NIBBLE
01341  2807  A8                 TAY             ;USE AS POINTER
01342  2808  B9 64 29           LDA HEXA,Y      ;GET ASCII
01343  280B  4C 64 28           JMP PCHAR       ;PRINT
01344  280E              ;*********************************
01345  280E              ; STRING OUTPUT ROUTINE
01346  280E              ;*********************************






DISASS128.ASM......PAGE 0028

LINE# LOC   CODE        LINE


01347  280E  85 FB       STRPNT STA ZEROUR      ;POINTER TO
01348  2810  84 FC              STY ZEROUR+1    ;MESSAGE
01349  2812  A0 00              LDY #$00        ;OFFSET
01350  2814  B1 FB       SOUT   LDA (ZEROUR),Y  ;GET CHAR
01351  2816  F0 06              BEQ SEXIT       ;IF ZERO EXIT
01352  2818  20 64 28           JSR PCHAR       ;PRINT
01353  281B  C8                 INY             ;INC OFFSET
01354  281C  D0 F6              BNE SOUT        ;LOOP
01355  281E  60          SEXIT  RTS             ;RETURN
01356  281F              ;*********************************
01357  281F              ; PRINT DEC NUMBER (0000)
01358  281F              ;*********************************
01359  281F  86 FB       PRTPAG STX ZEROUR      ;LOW  BYTE NUM
01360  2821  85 FC              STA ZEROUR+1    ;HIGH BYTE NUM
01361  2823  A2 03              LDX #$03        ;4 CHARS
01362  2825  8E 72 1C           STX SAVX        ;SAVE COUNT
01363  2828  D0 09              BNE PRTNU1      ;BRANCH
01364  282A              ;*********************************
01365  282A              ; PRINT DEC NUMBER (00000)
01366  282A              ;*********************************
01367  282A  86 FB       PRTNUM STX ZEROUR      ;LOW  BYTE NUM
01368  282C  85 FC              STA ZEROUR+1    ;HIGH BYTE NUM
01369  282E  A2 04              LDX #$04        ;5 CHARS
01370  2830  8E 72 1C           STX SAVX        ;SAVE COUNT
01371  2833              ;*********************************
01372  2833              ; PRINT DEC NUMBER AND LEADING 0
01373  2833              ;*********************************
01374  2833  AE 72 1C    PRTNU1 LDX SAVX
01375  2836  A0 30              LDY #$30
01376  2838  D0 01              BNE PRTNU3
01377  283A  C8          PRTNU2 INY 
01378  283B  38          PRTNU3 SEC 
01379  283C  A5 FB              LDA ZEROUR
01380  283E  FD 74 29           SBC CONST0,X
01381  2841  85 FB              STA ZEROUR
01382  2843  A5 FC              LDA ZEROUR+1
01383  2845  FD 79 29           SBC CONST1,X
01384  2848  85 FC              STA ZEROUR+1
01385  284A  B0 EE              BCS PRTNU2
01386  284C  A5 FB              LDA ZEROUR
01387  284E  7D 74 29           ADC CONST0,X
01388  2851  85 FB              STA ZEROUR
01389  2853  A5 FC              LDA ZEROUR+1
01390  2855  7D 79 29           ADC CONST1,X
01391  2858  85 FC              STA ZEROUR+1
01392  285A  98                 TYA
01393  285B  20 64 28           JSR PCHAR
01394  285E  CE 72 1C           DEC SAVX
01395  2861  10 D0              BPL PRTNU1
01396  2863  60                 RTS
01397  2864              ;*********************************
01398  2864              ;  OUTPUT CHAR TO OPEN CHANNEL
01399  2864              ;*********************************
01400  2864  48          PCHAR  PHA             ;SAVE CHAR
01401  2865  AD 38 1C           LDA DEVICE      ;GET FILE FLAG






DISASS128.ASM......PAGE 0029

LINE# LOC   CODE        LINE


01402  2868  29 08              AND #$08        ;CHECK FOR DISK
01403  286A  F0 0D              BEQ PRIN        ;IF NONE BRANCH
01404  286C  A2 08              LDX #$08        ;DISK FILE #1
01405  286E  20 C9 FF           JSR CHKOUT      ;FILE IS OUTPUT
01406  2871  68                 PLA             ;GET CHAR
01407  2872  48                 PHA             ;RESAVE CHAR
01408  2873  20 D2 FF           JSR CHROUT      ;OUTPUT TO DISK
01409  2876  20 CC FF           JSR CLRCHN      ;RESET OUTPUT
01410  2879  AD 38 1C    PRIN   LDA DEVICE      ;GET DEVICE FLAG
01411  287C  29 04              AND #$04        ;CHECK FOR PRINTER
01412  287E  F0 0D              BEQ SCREN       ;IF NOT BRANCH
01413  2880  A2 04              LDX #$04        ;PRINT FILE #4
01414  2882  20 C9 FF           JSR CHKOUT      ;FILE IS OUTPUT
01415  2885  68                 PLA             ;GET CHAR
01416  2886  48                 PHA             ;RESAVE CHAR
01417  2887  20 D2 FF           JSR CHROUT      ;OUTPUT TO PRINTER
01418  288A  20 CC FF           JSR CLRCHN      ;RESET OUTPUT
01419  288D  AD 38 1C    SCREN  LDA DEVICE      ;GET DEVICE FLAG
01420  2890  29 03              AND #$03        ;CHECK FOR SCREEN
01421  2892  F0 05              BEQ PEXIT       ;IF NOT BRANCH
01422  2894  68                 PLA             ;GET CHAR
01423  2895  48                 PHA             ;RESAVE CHAR
01424  2896  20 D2 FF           JSR CHROUT      ;OUTPUT TO SCREEN
01425  2899  68          PEXIT  PLA             ;GET CHAR
01426  289A  60                 RTS             ;RETURN
01427  289B              ;*********************************
01428  289B              ; PRINTER OUTPUT ROUTINES
01429  289B              ;*********************************
01430  289B              ; FINISH OUT PAGE WITH CR
01431  289B              ;*********************************
01432  289B  20 AE 28    FINISH JSR CRLFPR      ;PRINT CR
01433  289E  EE 76 1C           INC LISTCT      ;INC LINE COUNT
01434  28A1  AD 76 1C           LDA LISTCT      ;GET COUNT
01435  28A4  C9 42              CMP #$42        ;66 LINES
01436  28A6  D0 F3              BNE FINISH      ;IF NOT MORE
01437  28A8  A9 00              LDA #$00        ;ZERO BYTE
01438  28AA  8D 76 1C           STA LISTCT      ;RESET COUNT
01439  28AD  60                 RTS             ;RETURN
01440  28AE              ;*********************************
01441  28AE              ; PRINT CR TO PRINTER
01442  28AE              ;*********************************
01443  28AE  A9 04       CRLFPR LDA #$04        ;DEVICE #4
01444  28B0  8D 38 1C           STA DEVICE      ;SET PRINTER
01445  28B3  20 47 2D           JSR CRLF        ;CR
01446  28B6  AD 39 1C           LDA OUTPUT      ;GET DEVICE
01447  28B9  8D 38 1C           STA DEVICE      ;RESET DEVICE
01448  28BC  60                 RTS             ;RETURN
01449  28BD              ;*********************************
01450  28BD              ; START NEWLINE AND CHECK COUNT
01451  28BD              ;*********************************
01452  28BD  20 AE 28    NEXPTR JSR CRLFPR      ;PRINT CR
01453  28C0  EE 76 1C    NEXLIN INC LISTCT      ;INC LINE COUNT
01454  28C3  AD 76 1C           LDA LISTCT      ;GET COUNT
01455  28C6  C9 3C              CMP #$3C        ;48 LINES
01456  28C8  D0 45              BNE LINEOK      ;IF NOT BRANCH






DISASS128.ASM......PAGE 0030

LINE# LOC   CODE        LINE


01457  28CA  20 9B 28           JSR FINISH      ;FINISH PAGE
01458  28CD              ;*********************************
01459  28CD              ; START NEW PAGE WITH HEADING
01460  28CD              ;*********************************
01461  28CD  AD 38 1C    HEADER LDA DEVICE      ;CHECK DEVICE
01462  28D0  29 04              AND #$04        ;PRINTER?
01463  28D2  F0 3B              BEQ LINEOK      ;IF NOT EXIT
01464  28D4  20 BD 28           JSR NEXPTR      ;NEXT LINE
01465  28D7  A9 04              LDA #$04        ;DEVICE #4
01466  28D9  8D 38 1C           STA DEVICE      ;SET DEVICE
01467  28DC  A9 7E              LDA #<XTITLE    ;HEADER
01468  28DE  A0 29              LDY #>XTITLE    ;
01469  28E0  20 0E 28           JSR STRPNT      ;PRINT IT
01470  28E3              ;*********************************
01471  28E3              ; PRINT PAGE COUNT AND HEADER
01472  28E3              ;*********************************
01473  28E3  AE 74 1C           LDX PAGECT
01474  28E6  AD 75 1C           LDA PAGECT+1
01475  28E9  20 1F 28           JSR PRTPAG
01476  28EC  20 BD 28           JSR NEXPTR
01477  28EF  20 BD 28           JSR NEXPTR
01478  28F2  A9 04              LDA #$04
01479  28F4  8D 38 1C           STA DEVICE
01480  28F7  A9 9A              LDA #<LTITLE
01481  28F9  A0 29              LDY #>LTITLE
01482  28FB  20 0E 28           JSR STRPNT
01483  28FE  20 BD 28           JSR NEXPTR
01484  2901              ;*********************************
01485  2901              ; INC PAGE COUNT
01486  2901              ;*********************************
01487  2901  EE 74 1C           INC PAGECT
01488  2904  D0 03              BNE PAGER1
01489  2906  EE 75 1C           INC PAGECT+1
01490  2909  20 BD 28    PAGER1 JSR NEXPTR
01491  290C  20 BD 28           JSR NEXPTR
01492  290F  60          LINEOK RTS 
01493  2910              ;*********************************
01494  2910              ; SYMBOL TABLE ROUTINES
01495  2910              ;*********************************
01496  2910              ; START NEWLINE AND CHECK COUNT
01497  2910              ;*********************************
01498  2910  20 AE 28    NEXPTS JSR CRLFPR      ;PRINT CR
01499  2913  EE 76 1C           INC LISTCT      ;INC LINE COUNT
01500  2916  AD 76 1C           LDA LISTCT      ;GET COUNT
01501  2919  C9 3C              CMP #$3C        ;48 LINES
01502  291B  D0 1D              BNE HEADOK      ;IF NOT BRANCH
01503  291D  20 9B 28           JSR FINISH      ;FINISH PAGE
01504  2920              ;*********************************
01505  2920              ; START NEW PAGE WITH HEADING
01506  2920              ;*********************************
01507  2920  20 10 29    HEADES JSR NEXPTS      ;NEXT LINE
01508  2923  A9 B7              LDA #<XTITLS    ;HEADER
01509  2925  A0 29              LDY #>XTITLS    ;
01510  2927  20 0E 28           JSR STRPNT      ;PRINT IT
01511  292A  20 10 29           JSR NEXPTS






DISASS128.ASM......PAGE 0031

LINE# LOC   CODE        LINE


01512  292D  20 10 29           JSR NEXPTS
01513  2930  A9 C4              LDA #<LTITLS
01514  2932  A0 29              LDY #>LTITLS
01515  2934  20 0E 28           JSR STRPNT
01516  2937  20 10 29           JSR NEXPTS
01517  293A  60          HEADOK RTS
01518  293B              ;*********************************
01519  293B              ; CHECK FOR NEW PAGE FOR SYMBOL
01520  293B              ;*********************************
01521  293B  AD 76 1C    HEADSY LDA LISTCT
01522  293E  C9 35              CMP #$35
01523  2940  B0 06              BCS HEADFX
01524  2942  20 10 29           JSR NEXPTS
01525  2945  4C 10 29           JMP NEXPTS
01526  2948  4C 9B 28    HEADFX JMP FINISH
01527  294B              ;*********************************
01528  294B              ; SCREEN UTILITES
01529  294B              ;*********************************
01530  294B  AD 38 1C    SCROFF LDA DEVICE
01531  294E  29 04              AND #$04
01532  2950  F0 08              BEQ SCRNO1
01533  2952  AD 11 D0           LDA VICREG
01534  2955  29 EF              AND #$EF
01535  2957  8D 11 D0           STA VICREG
01536  295A  60          SCRNO1 RTS
01537  295B              ;*********************************
01538  295B  AD 11 D0    SCRON  LDA VICREG
01539  295E  09 10              ORA #$10
01540  2960  8D 11 D0           STA VICREG
01541  2963  60                 RTS
01542  2964              ;*********************************
01543  2964              ; HEX-TO-ASCII TABLE
01544  2964              ;*********************************
01545  2964  30 31       HEXA   .BYTE '0123456789ABCDEF'
01546  2974              ;*********************************
01547  2974              ; CONSTANTS FOR PRTNUM ROUTINE
01548  2974              ;*********************************
01549  2974  01          CONST0 .BYTE $01,$0A,$64,$E8,$10
01549  2975  0A 
01549  2976  64 
01549  2977  E8 
01549  2978  10 
01550  2979  00          CONST1 .BYTE $00,$00,$00,$03,$27
01550  297A  00 
01550  297B  00 
01550  297C  03 
01550  297D  27 
01551  297E              ;*********************************
01552  297E              ; PAGE TITLE
01553  297E              ;*********************************
01554  297E  44 49       XTITLE .BYTE 'DISASSEMBLER128.......PAGE '
01555  2999  00                 .BYTE $00
01556  299A  4C 49       LTITLE .BYTE 'LINE# LOC   CODE        LINE'
01557  29B6  00                 .BYTE $00
01558  29B7              ;********************************






DISASS128.ASM......PAGE 0032

LINE# LOC   CODE        LINE


01559  29B7              ; SYMBOL PAGE TITLE
01560  29B7              ;********************************
01561  29B7  53 59       XTITLS .BYTE 'SYMBOL TABLE',0
01561  29C3  00 
01562  29C4  53 59       LTITLS .BYTE 'SYMBOL VALUE',0
01562  29D0  00 
01563  29D1              ;*********************************
01564  29D1              ;.FIL 0:MODE.ASM
01565  29D1              ;*********************************
01566  29D1              ;.END
01567  29D1              ;*********************************
01568  29D1              ; FILE MODE.ASM
01569  29D1              ;*********************************
01570  29D1              ;
01571  29D1              ;        DISASSEMBLER128
01572  29D1              ;    SYMBOLIC DISASSEMBLER
01573  29D1              ;       BY DENTON MARLOWE
01574  29D1              ;
01575  29D1              ;  (C)1986 BY DENTON MARLOWE
01576  29D1              ;
01577  29D1              ;*********************************
01578  29D1              ; ADDRESSING MODE UTILITIES
01579  29D1              ;*********************************
01580  29D1              ;      DISASSEMBLE ONE LINE
01581  29D1              ;*********************************
01582  29D1  20 FF 30    DSLINE JSR DATAOP      ;CHECK FOR DATA
01583  29D4  30 3D              BMI BYTT        ;N=1 THEN FOUND
01584  29D6              ;*********************************
01585  29D6              ; CHECK BIT ZP DECODING OPTIONS
01586  29D6              ;*********************************
01587  29D6  AD CC 43           LDA BITFLG      ;CHECK BIT FLAG
01588  29D9  F0 0D              BEQ DISL        ;IF ZERO NO BIT
01589  29DB                     
01590  29DB  20 80 2D           JSR GETSL       ;GET BYTE
01591  29DE  C9 24              CMP #$24        ;ZEROPAGE BIT
01592  29E0  F0 34              BEQ BYZBIT      ;
01593  29E2  C9 2C              CMP #$2C        ;ZEROPAGE BIT
01594  29E4  F0 55              BEQ BYABIT      ;
01595  29E6  D0 00              BNE DISL        ;
01596  29E8              ;*********************************
01597  29E8              ; CHECK BIT ABS DECODING OPTIONS
01598  29E8              ;*********************************
01599  29E8              
01600  29E8              ;********************************
01601  29E8              ; PROCESS LINE OF CODE
01602  29E8              ;********************************
01603  29E8              DISL   = *
01604  29E8  20 80 2D           JSR GETSL       ;GET BYTE
01605  29EB  AE 31 1C           LDX PASS        ;GET PASS COUNT
01606  29EE  EC 34 1C           CPX CPASS       ;LAST
01607  29F1  F0 06              BEQ DISL1       ;IF LAST BRANCH
01608  29F3  20 C7 33           JSR OPERN1      ;IF LAST BRANCH
01609  29F6  4C 13 2A           JMP BYTT        ;NEXT INSTRUCTION
01610  29F9              ;********************************
01611  29F9              ; PRINT DISASSEMBLY ADDRESS






DISASS128.ASM......PAGE 0033

LINE# LOC   CODE        LINE


01612  29F9              ;********************************
01613  29F9  20 BA 33    DISL1  JSR PRTASS      ;PRINT LINE DATA
01614  29FC  20 DE 2C           JSR PRAD        ;PRINT ADDRESS
01615  29FF  20 59 2D           JSR SPACE       ;SPACE OVER
01616  2A02              ;********************************
01617  2A02              ; PRINT INSTRUCTION
01618  2A02              ;********************************
01619  2A02  20 80 2D           JSR GETSL       ;GET BYTE
01620  2A05  48                 PHA             ;STORE
01621  2A06  20 9B 33           JSR MNEMON      ;PRINT MNEMONIC
01622  2A09  20 59 2D           JSR SPACE       ;SPACE OVER
01623  2A0C  68                 PLA             ;GET BYTE
01624  2A0D  20 CF 33           JSR OPERND      ;PRINT OPERAND
01625  2A10  20 51 27    FINAL  JSR NEWLIN      ;START NEW LINE
01626  2A13  4C 5E 2D    BYTT   JMP NEXTSL      ;NEXT INSTRUCTION
01627  2A16              ;********************************
01628  2A16              ;      BIT ZP SKIP TRICK
01629  2A16              ;
01630  2A16              ; THE SKIP WILL ALWAYS INVOLVE
01631  2A16              ; A FOLLWING OPCODE THAT IS EITHER
01632  2A16              ; AN OPCODE WITH NO OPERAND OR
01633  2A16              ; OR ONE BYTE OPERAND LIKE A BRANCH
01634  2A16              ; OR ZERO PAGE INSTRUCTION
01635  2A16              ;*********************************
01636  2A16              BYZBIT = *
01637  2A16  AD CC 43           LDA BITFLG
01638  2A19  29 02              AND #$02
01639  2A1B  F0 CB              BEQ DISL
01640  2A1D              ;********************************
01641  2A1D              ;      TO SKIP OR NOT
01642  2A1D              ;*********************************
01643  2A1D  20 77 2D           JSR INCSL       ;INC TO OPERAND
01644  2A20  20 80 2D           JSR GETSL       ;GET OPERAND
01645  2A23  48                 PHA
01646  2A24  20 98 2D           JSR DECSL
01647  2A27  68                 PLA
01648  2A28                                     ;CHECK FOR SKIP
01649  2A28  C9 10              CMP #$10        ;BPL SKIP
01650  2A2A  F0 40              BEQ B0000
01651  2A2C  C9 18              CMP #$18        ;CLC SKIP
01652  2A2E  F0 3C              BEQ B0000
01653  2A30  C9 30              CMP #$30        ;BMI
01654  2A32  F0 38              BEQ B0000
01655  2A34  C9 38              CMP #$38        ;SEC
01656  2A36  F0 34              BEQ B0000
01657  2A38              ;
01658  2A38  4C E8 29           JMP DISL
01659  2A3B              ;********************************
01660  2A3B              ;      BIT ABS SKIP TRICK
01661  2A3B              ;*********************************
01662  2A3B              BYABIT = *
01663  2A3B  AD CC 43           LDA BITFLG
01664  2A3E  29 01              AND #$01
01665  2A40  F0 A6              BEQ DISL
01666  2A42              ;********************************






DISASS128.ASM......PAGE 0034

LINE# LOC   CODE        LINE


01667  2A42              ;      TO SKIP OR NOT
01668  2A42              ;*********************************
01669  2A42  20 77 2D           JSR INCSL       ;INC TO OPERAND
01670  2A45  20 80 2D           JSR GETSL       ;GET OPERAND
01671  2A48  48                 PHA
01672  2A49  20 98 2D           JSR DECSL
01673  2A4C  68                 PLA
01674  2A4D                                     ;CHECK FOR SKIP
01675  2A4D  C9 A1              CMP #$A1        ;LDY A IMMEDIATE SKIP
01676  2A4F  F0 1B              BEQ B0000
01677  2A51  C9 A2              CMP #$A2        ;LDA A IMMEDIATE SKIP
01678  2A53  F0 17              BEQ B0000
01679  2A55  C9 A9              CMP #$A9        ;LDX A IMMEDIATE SKIP
01680  2A57  F0 13              BEQ B0000
01681  2A59                     
01682  2A59  C9 65              CMP #$65        ;ADC ZP
01683  2A5B  F0 0F              BEQ B0000
01684  2A5D                     
01685  2A5D  C9 85              CMP #$85        ;STA ZP
01686  2A5F  F0 0B              BEQ B0000
01687  2A61                     
01688  2A61  C9 B1              CMP #$B1        ;LDA (ZP),Y
01689  2A63  F0 07              BEQ B0000
01690  2A65                     
01691  2A65  C9 E6              CMP #$E6        ;INC
01692  2A67  F0 03              BEQ B0000
01693  2A69              ;
01694  2A69  4C E8 29           JMP DISL
01695  2A6C              ;********************************
01696  2A6C              ;      PRINTING PASS?
01697  2A6C              ;*********************************
01698  2A6C              B0000  = *
01699  2A6C  AD 31 1C           LDA PASS        ;GET PASS COUNT
01700  2A6F  CD 34 1C           CMP CPASS       ;LAST
01701  2A72  D0 9F              BNE BYTT        ;IF NOT NEXT BYTE
01702  2A74              ;*********************************
01703  2A74              ;  PRINT LINE DATA FOR .BYTE
01704  2A74              ;*********************************
01705  2A74  20 B5 2C           JSR COMENT      ;COMENT LINE
01706  2A77              ;
01707  2A77  20 5B 2E           JSR PRTDAT      ;PRINT LINE DATA
01708  2A7A  20 E8 2D           JSR PRTONE      ;ONE BYTE
01709  2A7D  20 DE 2C           JSR PRAD        ;PRINT ADDRESS
01710  2A80  20 59 2D           JSR SPACE       ;SPACE OVER
01711  2A83  A9 B1              LDA #<MSGBIT    ;.BYTE $
01712  2A85  A0 2D              LDY #>MSGBIT    ;
01713  2A87  20 0E 28           JSR STRPNT      ;PRINT IT
01714  2A8A              ;
01715  2A8A  20 80 2D           JSR GETSL       ;GET BYTE
01716  2A8D  20 F8 27           JSR PRBYT       ;PRINT BYTE
01717  2A90              ;
01718  2A90  A9 B9              LDA #<MSGBZP    ;BIT COMMENT
01719  2A92  A0 2D              LDY #>MSGBZP    ;
01720  2A94  20 0E 28           JSR STRPNT      ;PRINT IT
01721  2A97              ;






DISASS128.ASM......PAGE 0035

LINE# LOC   CODE        LINE


01722  2A97  20 51 27           JSR NEWLIN      ;PRINT BYTE
01723  2A9A                                     ;JSR INCSL    ;INC SELECT
01724  2A9A  20 BB 2C           JSR COMET       ;COMENT LINE
01725  2A9D                                     ;JSR DECSL    ;REASET SELE
CT
01726  2A9D  4C 10 2A           JMP FINAL       ;CR AND NEXT BYTE
01727  2AA0              ;*********************************
01728  2AA0              ;BYTEXT JMP DISL1
01729  2AA0              ;*********************************
01730  2AA0              ; ADDRESSING MODE UTILITIES
01731  2AA0              ;*********************************
01732  2AA0              ;
01733  2AA0              ;*********************************
01734  2AA0              ; ANALYSIS OPERAND ROUTINES
01735  2AA0              ;*********************************
01736  2AA0              ;    BIT ZP ONE-BYTE OPERAND
01737  2AA0              ; ZERO PAGE BIT IS ALMOST ALWAYS
01738  2AA0              ;   A BIT TRICK TO SKIP THE NEXT
01739  2AA0              ;          OPCODE
01740  2AA0              ;********************************
01741  2AA0  EA          ONEBIT NOP
01742  2AA1              ;*********************************
01743  2AA1              ;      ONE-BYTE OPERAND
01744  2AA1              ;********************************
01745  2AA1  20 77 2D    ONEBYT JSR INCSL       ;INC TO BYTE
01746  2AA4  20 80 2D           JSR GETSL       ;GET BYTE
01747  2AA7  8D 64 1C           STA WORKED      ;STORE OPERAND
01748  2AAA  A9 00              LDA #$00        ;ZERO BYTE
01749  2AAC  8D 65 1C           STA WORKED+1    ;ZERO HIGH BYTE
01750  2AAF  AD 31 1C           LDA PASS        ;GET PASS COUNT
01751  2AB2  CD 32 1C           CMP IPASS       ;INTERNAL
01752  2AB5  F0 54              BEQ OPCPUT      ;TABLE OPERAND
01753  2AB7  CD 33 1C           CMP EPASS       ;EXTERNAL
01754  2ABA  F0 52              BEQ OPCSYM      ;EXTERNAL EQUATE
01755  2ABC              ;*********************************
01756  2ABC              ; OUTPUT OPERAND
01757  2ABC              ;*********************************
01758  2ABC  20 B2 37           JSR SYMOP       ;CHECK FOR SYMBOL
01759  2ABF  B0 50              BCS TWOB        ;SYMBOL FOUND
01760  2AC1  20 92 2E           JSR RANGE       ;IS IT INTERNAL
01761  2AC4  90 06              BCC ONEBY       ;GENERATE LABEL
01762  2AC6  20 24 2D           JSR DOLLAR      ;EXTERNAL
01763  2AC9  4C CF 2A           JMP ONEBX       ;PRINT ADDRESS
01764  2ACC  20 D4 2C    ONEBY  JSR PRLA        ;PRINT XX
01765  2ACF  AD 64 1C    ONEBX  LDA WORKED      ;GET OPERAND
01766  2AD2  4C F8 27           JMP PRBYT       ;PRINT BYTE
01767  2AD5              ;********************************
01768  2AD5              ;      BIT ABS TWO-BYTE OPERAND
01769  2AD5              ;********************************
01770  2AD5  EA          TWOBIT NOP
01771  2AD6              ;********************************
01772  2AD6              ;      TWO-BYTE OPERAND
01773  2AD6              ;********************************
01774  2AD6  20 77 2D    TWOBYT JSR INCSL       ;INC TO BYTE
01775  2AD9  20 80 2D           JSR GETSL       ;GET BYTE
01776  2ADC  8D 64 1C           STA WORKED      ;STORE LOW BYTE






DISASS128.ASM......PAGE 0036

LINE# LOC   CODE        LINE


01777  2ADF  20 77 2D           JSR INCSL       ;INC TO BYTE
01778  2AE2  20 80 2D           JSR GETSL       ;GET BYTE
01779  2AE5  8D 65 1C           STA WORKED+1    ;STORE HIGH BYTE
01780  2AE8  AD 31 1C           LDA PASS        ;GET PASS COUNT
01781  2AEB  CD 32 1C           CMP IPASS       ;INTERNAL
01782  2AEE  F0 1B              BEQ OPCPUT      ;TABLE OPERNAD
01783  2AF0  CD 33 1C           CMP EPASS       ;EXTERNAL
01784  2AF3  F0 19              BEQ OPCSYM      ;EXTERNAL EQUATE
01785  2AF5              ;********************************
01786  2AF5              ;  OUTPUT OPERAND
01787  2AF5              ;********************************
01788  2AF5  20 B2 37           JSR SYMOP       ;CHECK SYMBOL
01789  2AF8  B0 17              BCS TWOB        ;C=1 FOUND ONE
01790  2AFA  20 92 2E           JSR RANGE       ;IS IT INTERNAL
01791  2AFD  90 06              BCC TWOBY       ;GERNERATE LABEL
01792  2AFF  20 24 2D           JSR DOLLAR      ;EXTERNAL
01793  2B02  4C 08 2B           JMP TWOBX       ;
01794  2B05              ;********************************
01795  2B05              ;  OUTPUT OPERAND
01796  2B05              ;********************************
01797  2B05              TWOBY  =*
01798  2B05  20 D4 2C           JSR PRLA        ;PRINT XX
01799  2B08              TWOBX  = *
01800  2B08  4C 16 2D           JMP PWORKD      ;PRINT ADDRESS
01801  2B0B              OPCPUT = *
01802  2B0B  4C 09 2F           JMP PUTI        ;PUT IN TABLE
01803  2B0E              OPCSYM = *
01804  2B0E  4C B2 37           JMP SYMOP       ;CHECK EXT EQUATE
01805  2B11              TWOB   = *
01806  2B11  60                 RTS             ;RETURN
01807  2B12              ;*********************************
01808  2B12              ; ILLEGAL MODES, UNUSED OPCODES
01809  2B12              ;
01810  2B12              ; ZZZZ XX .BYTE $XX ;'Y' ;??? ILLEGAL OPCODE
01811  2B12              ;
01812  2B12              ;*********************************
01813  2B12  EE 79 1C    ILLEGL INC ERRCT       ;INC ERROR COUNT
01814  2B15  D0 03              BNE *+5         ;SKIP NEXT LINE
01815  2B17  EE 7A 1C           INC ERRCT+1     ;INC ERROR COUNT
01816  2B1A  A0 33              LDY #>MBYTE     ;.BYTE
01817  2B1C  A9 82              LDA #<MBYTE     ;
01818  2B1E  20 0E 28           JSR STRPNT      ;PRINT STRING
01819  2B21  20 24 2D           JSR DOLLAR      ;PRINT $
01820  2B24  20 80 2D           JSR GETSL       ;GET ILLEGAL BYTE
01821  2B27                     
01822  2B27              ;BEGIN REV 2017-3
01823  2B27  48                 PHA             ;PUT BYTE ON STACK
01824  2B28              ;
01825  2B28  20 F8 27           JSR PRBYT       ;PRINT IT
01826  2B2B  20 59 2D           JSR SPACE       ;SPACE OVER
01827  2B2E              ;
01828  2B2E  68                 PLA             ;POP BYTE OFF STACK
01829  2B2F  20 8A 32           JSR CASCII      ;IS IT PRINTABLE ASCII
01830  2B32  B0 18              BCS ISKIP       ;IF NOT EXIT
01831  2B34  48                 PHA             ;STACK IT






DISASS128.ASM......PAGE 0037

LINE# LOC   CODE        LINE


01832  2B35  20 59 2D           JSR SPACE       ;SPACE OVER
01833  2B38  20 1F 2D           JSR SEMIC       ;COMMENT
01834  2B3B  A9 27              LDA #'''        ;QUOTE
01835  2B3D  20 64 28           JSR PCHAR       ;PRINT IT
01836  2B40  68                 PLA             ;POP IT
01837  2B41  20 64 28           JSR PCHAR       ;PRINT IT
01838  2B44  A9 27              LDA #'''        ;QUOTE
01839  2B46  20 64 28           JSR PCHAR       ;PRINT IT
01840  2B49  20 59 2D           JSR SPACE       ;SPACE OVER
01841  2B4C              ;
01842  2B4C              ISKIP  = *
01843  2B4C              ;END REV 2017-3
01844  2B4C  A0 2D              LDY #>ILLMSG
01845  2B4E  A9 D4              LDA #<ILLMSG
01846  2B50  4C 0E 28           JMP STRPNT
01847  2B53              ;********************************
01848  2B53              ;      ACCUMULATOR MODE
01849  2B53              ;********************************
01850  2B53  A9 41       ACC    LDA #'A'        ;ASCII A
01851  2B55  4C 64 28           JMP PCHAR       ;PRINT IT
01852  2B58              ;********************************
01853  2B58              ;       IMMEDIATE MODE
01854  2B58              ;********************************
01855  2B58  20 77 2D    IMMEDT JSR INCSL       ;INC TO DATA BYTE
01856  2B5B  AE 31 1C           LDX PASS        ;GET PASS
01857  2B5E  EC 34 1C           CPX CPASS       ;LAST PASS
01858  2B61  D0 2A              BNE IMEXIT      ;EXIT
01859  2B63  A9 23              LDA #'#'        ;ASCII #
01860  2B65  20 64 28           JSR PCHAR       ;PRINT IT
01861  2B68  20 24 2D           JSR DOLLAR      ;PRINT $
01862  2B6B  20 80 2D           JSR GETSL       ;GET BYTE
01863  2B6E  48                 PHA             ;STACK IT
01864  2B6F  20 F8 27           JSR PRBYT       ;PRINT IT
01865  2B72  68                 PLA             ;POP IT
01866  2B73  20 8A 32           JSR CASCII      ;PRINTABLE ASCII
01867  2B76  B0 15              BCS IMEXIT      ;IF NOT EXIT
01868  2B78  48                 PHA             ;STACK IT
01869  2B79  20 4C 2D           JSR SPAC6       ;SPACE OVER
01870  2B7C  20 1F 2D           JSR SEMIC       ;COMMENT
01871  2B7F  A9 27              LDA #'''        ;QUOTE
01872  2B81  20 64 28           JSR PCHAR       ;PRINT IT
01873  2B84  68                 PLA             ;POP IT
01874  2B85  20 64 28           JSR PCHAR       ;PRINT IT
01875  2B88  A9 27              LDA #'''        ;QUOTE
01876  2B8A  20 64 28           JSR PCHAR       ;PRINT IT
01877  2B8D  60          IMEXIT RTS             ;EXIT
01878  2B8E              ;*********************************
01879  2B8E              ;      BIT ZERO PAGE MODE
01880  2B8E              ;*********************************
01881  2B8E  EA          ZERBIT NOP
01882  2B8F              ;*********************************
01883  2B8F              ;      ZERO PAGE MODE
01884  2B8F              ;*********************************
01885  2B8F  4C A1 2A    ZEROPG JMP ONEBYT      ;PRINT ONE BYTE
01886  2B92              ;*********************************






DISASS128.ASM......PAGE 0038

LINE# LOC   CODE        LINE


01887  2B92              ;      ZERO PAGE,X MODE
01888  2B92              ;********************************
01889  2B92  20 A1 2A    ZEROX  JSR ONEBYT      ;PRINT ONE BYTE
01890  2B95  4C 33 2D           JMP XINDEX      ;PRINT ,X
01891  2B98              ;********************************
01892  2B98              ;       ZERO PAGE,Y MODE
01893  2B98              ;********************************
01894  2B98  20 A1 2A    ZEROY  JSR ONEBYT      ;PRINT ONE BYTE
01895  2B9B  4C 3D 2D           JMP YINDEX      ;PRINT ,Y
01896  2B9E              ;*********************************
01897  2B9E              ;         BIT ABSOLUTE MODE
01898  2B9E              ;*********************************
01899  2B9E  EA          ABSBIT NOP
01900  2B9F              ;*********************************
01901  2B9F              ;         ABSOLUTE MODE
01902  2B9F              ;*********************************
01903  2B9F  20 D6 2A    ABSLUT JSR TWOBYT      ;PRINT TWO BYTE
01904  2BA2  20 98 2D           JSR DECSL       ;DEC TO SECOND
01905  2BA5  20 98 2D           JSR DECSL       ;DEC TO OPCODE
01906  2BA8  20 80 2D           JSR GETSL       ;GET BYTE
01907  2BAB  48                 PHA
01908  2BAC  20 77 2D           JSR INCSL
01909  2BAF  20 77 2D           JSR INCSL
01910  2BB2  68                 PLA
01911  2BB3  C9 4C              CMP #$4C        ;IS IT JMP
01912  2BB5  D0 0C              BNE ABSEXT      ;IF NOT EXIT
01913  2BB7  20 51 27           JSR NEWLIN      ;NEXT LINE
01914  2BBA  20 77 2D           JSR INCSL
01915  2BBD  20 BB 2C           JSR COMET       ;COMMENT LINE
01916  2BC0  20 98 2D           JSR DECSL
01917  2BC3  60          ABSEXT RTS             ;RETURN
01918  2BC4              ;*********************************
01919  2BC4              ;       ABSOLUTE,X MODE
01920  2BC4              ;********************************
01921  2BC4  20 D6 2A    ABSX   JSR TWOBYT      ;PRINT TWO BYTE
01922  2BC7  4C 33 2D           JMP XINDEX      ;PRINT ,X
01923  2BCA              ;********************************
01924  2BCA              ;       ABSOLUTE,Y MODE
01925  2BCA              ;********************************
01926  2BCA  20 D6 2A    ABSY   JSR TWOBYT      ;PRINT TWO BYTE
01927  2BCD  4C 3D 2D           JMP YINDEX      ;PRINT ,Y
01928  2BD0              ;********************************
01929  2BD0              ;       IMPLIED MODE
01930  2BD0              ;********************************
01931  2BD0  20 80 2D    IMPLID JSR GETSL       ;GET BYTE
01932  2BD3  F0 09              BEQ IMPLI1      ;BRK
01933  2BD5  C9 60              CMP #$60        ;CHECK CODE
01934  2BD7  F0 05              BEQ IMPLI1      ;RTS
01935  2BD9  C9 40              CMP #$40        ;CHECK CODE
01936  2BDB  F0 01              BEQ IMPLI1      ;RTI
01937  2BDD  60          IMPONE RTS             ;RETURN
01938  2BDE  20 51 27    IMPLI1 JSR NEWLIN      ;PRINT NEW LINE
01939  2BE1  20 77 2D           JSR INCSL
01940  2BE4  20 BB 2C           JSR COMET       ;COMMENT LINE
01941  2BE7  4C 98 2D           JMP DECSL






DISASS128.ASM......PAGE 0039

LINE# LOC   CODE        LINE


01942  2BEA              ;********************************
01943  2BEA              ;       INDIRECT MODE
01944  2BEA              ;********************************
01945  2BEA  20 29 2D    INDRCT JSR LPAREN      ;PRINT (
01946  2BED  20 D6 2A           JSR TWOBYT      ;PRINT TWO BYTE
01947  2BF0  20 2E 2D           JSR RPAREN      ;PRINT )
01948  2BF3  20 51 27           JSR NEWLIN      ;NEXT LINE
01949  2BF6  20 77 2D           JSR INCSL
01950  2BF9  20 BB 2C           JSR COMET       ;COMMENT LINE
01951  2BFC  4C 98 2D           JMP DECSL
01952  2BFF              ;********************************
01953  2BFF              ;     INDIRECT,X MODE
01954  2BFF              ;********************************
01955  2BFF  20 29 2D    INDX   JSR LPAREN      ;PRINT (
01956  2C02  20 92 2B           JSR ZEROX       ;PRINT $HH,X
01957  2C05  4C 2E 2D           JMP RPAREN      ;PRINT )
01958  2C08              ;********************************
01959  2C08              ;     INDIRECT,Y MODE
01960  2C08              ;********************************
01961  2C08  20 29 2D    INDY   JSR LPAREN      ;PRINT (
01962  2C0B  20 A1 2A           JSR ONEBYT      ;PRINT ONE BYTE
01963  2C0E  20 2E 2D           JSR RPAREN      ;PRINT )
01964  2C11  4C 3D 2D           JMP YINDEX      ;PRINT ,Y
01965  2C14              ;*********************************
01966  2C14              ;      RELATIVE MODE
01967  2C14              ;*********************************
01968  2C14  20 77 2D    RELATV JSR INCSL       ;INC BYTE POINTER
01969  2C17  AD 31 1C           LDA PASS        ;GET PASS COUNT
01970  2C1A  CD 33 1C           CMP EPASS       ;EXTERNAL
01971  2C1D  F0 44              BEQ RELSYM      ;EXIT ON EXTERNAL
01972  2C1F              ;
01973  2C1F  AD 41 1C           LDA SELECT      ;GET LOW POINTER
01974  2C22  8D 64 1C           STA WORKED      ;STORE TEMP
01975  2C25  AD 42 1C           LDA SELECT+1    ;GET HIGH POINTER
01976  2C28  8D 65 1C           STA WORKED+1    ;STORE TEMP
01977  2C2B  EE 64 1C           INC WORKED      ;ADD 1 TO ADDRESS
01978  2C2E  D0 03              BNE *+5         ;ZERO MEANS CARRY
01979  2C30  EE 65 1C           INC WORKED+1    ;INC HIGH ADDRESS
01980  2C33              ;
01981  2C33  20 80 2D           JSR GETSL       ;GET BYTE BRANCH OFFSET
01982  2C36  C9 00              CMP #$00        ;IS IT ZERO
01983  2C38  10 03              BPL FORWRD      ;IF SO BRANCH
01984  2C3A  CE 65 1C           DEC WORKED+1    ;DEC HIGH POINTER
01985  2C3D  18          FORWRD CLC             ;CLEAR CARRY FLAG
01986  2C3E  6D 64 1C           ADC WORKED      ;ADD IN OPERAND
01987  2C41  90 03              BCC RELND       ;TO SELECT ADDRES
01988  2C43  EE 65 1C           INC WORKED+1    ;AND NOW POINTS
01989  2C46  8D 64 1C    RELND  STA WORKED      ;TARGET ADDRESS
01990  2C49              ;
01991  2C49  AD 31 1C           LDA PASS        ;GET PASS COUNT
01992  2C4C  CD 32 1C           CMP IPASS       ;INTERNAL
01993  2C4F  F0 0F              BEQ RELPUT      ;ADDRESS TABLE
01994  2C51              ;
01995  2C51  20 B2 37           JSR SYMOP       ;CHECK FOR SYMBOL
01996  2C54  B0 0D              BCS RELSYM      ;C=1 SYMBOL






DISASS128.ASM......PAGE 0040

LINE# LOC   CODE        LINE


01997  2C56              ;
01998  2C56  AD 37 1C           LDA ROPT        ;CHECK OPTION
01999  2C59  C9 01              CMP #$01        ;REL TO * ?
02000  2C5B  F0 07              BEQ RELPC       ;IF SO DO IT
02001  2C5D              ;
02002  2C5D  4C 13 2D           JMP PWORK       ;PRINT ADDRESS
02003  2C60              ;
02004  2C60              RELPUT = *
02005  2C60  4C 09 2F           JMP PUTI        ;PUT IN TABLE
02006  2C63              ;
02007  2C63  60          RELSYM RTS             ;RETURN
02008  2C64              ;*********************************
02009  2C64              ; PRINT RELATIVE TO PC
02010  2C64              ;*********************************
02011  2C64  20 80 2D    RELPC  JSR GETSL       ;GET BRANCH DATA
02012  2C67  48                 PHA             ;SAVE ON STACK
02013  2C68  30 07              BMI RELNEG      ;BACKWARD ?
02014  2C6A  A9 C7              LDA #<POSREL
02015  2C6C  A0 2D              LDY #>POSREL
02016  2C6E  4C 75 2C           JMP RELPM
02017  2C71  A9 CB       RELNEG LDA #<NEGREL
02018  2C73  A0 2D              LDY #>NEGREL
02019  2C75  20 0E 28    RELPM  JSR STRPNT
02020  2C78  68                 PLA             ;GET BRANCH DATA
02021  2C79  18                 CLC             ;CLEAR CARRY
02022  2C7A  69 02              ADC #$02        ;ADD 2 FOR BRANCH
02023  2C7C  10 05              BPL RELP        ;FORWARD ?
02024  2C7E  18                 CLC             ;CLEAR CARRY
02025  2C7F  49 FF              EOR #$FF        ;COMPLMENT
02026  2C81  69 01              ADC #$01        ;ADD 1 FOR 2'S
02027  2C83  20 F8 27    RELP   JSR PRBYT       ;PRINT BRANCH
02028  2C86  20 4C 2D           JSR SPAC6       ;SPACE
02029  2C89  20 1F 2D           JSR SEMIC       ;COMMENT CHAR
02030  2C8C  4C 13 2D           JMP PWORK       ;PRINT ADDRESS
02031  2C8F              ;*********************************
02032  2C8F              ;  ORGIN LABEL
02033  2C8F              ;*********************************
02034  2C8F  20 7F 2E    ORGIN  JSR PRTOTH      ;PRINT LINE DATA
02035  2C92  A9 2A              LDA #'*'        ;PC
02036  2C94  20 64 28           JSR PCHAR       ;PRINT IT
02037  2C97  A9 3D              LDA #'='        ;EQUALS
02038  2C99  20 64 28           JSR PCHAR       ;PRINT IT
02039  2C9C  20 24 2D           JSR DOLLAR      ;ASCII $
02040  2C9F  20 0A 2D           JSR PSELEC      ;PRINT ADDRESS
02041  2CA2  4C 51 27           JMP NEWLIN      ;START NEWLINE
02042  2CA5              ;*********************************
02043  2CA5              ; END OF FILE LABLE
02044  2CA5              ;*********************************
02045  2CA5  20 B5 2C    EFILE  JSR COMENT      ;COMMENT LINE
02046  2CA8  20 7F 2E           JSR PRTOTH      ;PRINT LINE DATA
02047  2CAB  A9 CF              LDA #<MSGEND    ;END MESSAGE
02048  2CAD  A0 2D              LDY #>MSGEND
02049  2CAF  20 0E 28           JSR STRPNT      ;PRINT IT
02050  2CB2  4C 51 27           JMP NEWLIN      ;NEW LINE
02051  2CB5              ;*********************************






DISASS128.ASM......PAGE 0041

LINE# LOC   CODE        LINE


02052  2CB5              ; PRINT COMMENT LINE
02053  2CB5              ;*********************************
02054  2CB5  20 BB 2C    COMENT JSR COMET       ;PRINT COMMENT
02055  2CB8  4C 51 27           JMP NEWLIN      ;NEXT LINE
02056  2CBB              ;*********************************
02057  2CBB  20 7F 2E    COMET  JSR PRTOTH      ;PRINT LINE DATA
02058  2CBE  20 1F 2D           JSR SEMIC       ;PRINT COMMENT
02059  2CC1  AD 3B 1C           LDA FOROPT
02060  2CC4  D0 03              BNE CSHORT
02061  2CC6  A0 20              LDY #$20        ;COUNTER
02062  2CC8  2C                 .BYTE $2C
02063  2CC9  A0 10       CSHORT LDY #$10
02064  2CCB  A9 2A       COMPT  LDA #'*'        ;STAR
02065  2CCD  20 64 28           JSR PCHAR       ;PRINT CHAR
02066  2CD0  88                 DEY             ;DEC COUNTER
02067  2CD1  D0 F8              BNE COMPT       ;20 OR 10 STARS
02068  2CD3  60                 RTS             ;RETURN
02069  2CD4              ;*********************************
02070  2CD4              ;     PRINT SELECTED ADDRESS
02071  2CD4              ;*********************************
02072  2CD4  A9 58       PRLA   LDA #'X'        ;XX LABEL
02073  2CD6  20 64 28           JSR PCHAR       ;
02074  2CD9  A9 58              LDA #'X'        ;
02075  2CDB  4C 64 28           JMP PCHAR       ;
02076  2CDE              ;*********************************
02077  2CDE              ; PRINT CODE ADDRESS
02078  2CDE              ;*********************************
02079  2CDE  20 9E 37    PRAD   JSR SYM         ;CHECK FOR SYMBOLIC
02080  2CE1  B0 1F              BCS NPRAD1      ;C=1 SYMBOLIC LABEL
02081  2CE3  AD 36 1C           LDA XOPT        ;CHECK GENERATION
02082  2CE6  F0 10              BEQ P1          ;NO LABELS
02083  2CE8  20 68 2F           JSR INTCHA      ;IS ADDRESS IN TAB
02084  2CEB  B0 0B              BCS P1          ;C=1 YES
02085  2CED  AD 3B 1C           LDA FOROPT      ;CHECK FORMAT
02086  2CF0  F0 03              BEQ POVER       ;STD FORMAT
02087  2CF2  4C 59 2D           JMP SPACE       ;ONE SPACE
02088  2CF5  4C 4C 2D    POVER  JMP SPAC6       ;SPACE OVER
02089  2CF8              ;*********************************
02090  2CF8              ; PRINT ADDRESS AS LABEL
02091  2CF8              ;*********************************
02092  2CF8  20 D4 2C    P1     JSR PRLA        ;PRINT XX
02093  2CFB  20 0A 2D           JSR PSELEC      ;PRINT ADDRESS
02094  2CFE  EA                 NOP
02095  2CFF  EA                 NOP
02096  2D00  EA                 NOP
02097  2D01  60          NPRAD  RTS             ;RETURN
02098  2D02              ;*********************************
02099  2D02  AD 3B 1C    NPRAD1 LDA FOROPT
02100  2D05  D0 FA              BNE NPRAD
02101  2D07  4C 4F 38           JMP FIXSYM
02102  2D0A              ;*********************************
02103  2D0A              ; PRINT SELECT ADDRESS
02104  2D0A              ;*********************************
02105  2D0A  AD 41 1C    PSELEC LDA SELECT      ;LOW BYTE
02106  2D0D  AC 42 1C           LDY SELECT+1    ;HIGH BYTE






DISASS128.ASM......PAGE 0042

LINE# LOC   CODE        LINE


02107  2D10  4C F2 27           JMP PRBYTS      ;PRINT THEM
02108  2D13              ;*********************************
02109  2D13              ; PRINT WORKED ADDRESS WITH XX
02110  2D13              ;*********************************
02111  2D13  20 D4 2C    PWORK  JSR PRLA        ;PRINT XX
02112  2D16              ;*********************************
02113  2D16              ; PRINT WORKED ADDRESS
02114  2D16              ;*********************************
02115  2D16  AD 64 1C    PWORKD LDA WORKED      ;LOW BYTE
02116  2D19  AC 65 1C           LDY WORKED+1    ;HIGH BYTE
02117  2D1C  4C F2 27           JMP PRBYTS      ;PRINT THEM
02118  2D1F              ;********************************
02119  2D1F              ; PRINT SEMICOLON FOR COMMENT
02120  2D1F              ;********************************
02121  2D1F  A9 3B       SEMIC  LDA #';'
02122  2D21  4C 64 28           JMP PCHAR
02123  2D24              ;********************************
02124  2D24              ; PRINT DOLLAR SIGN FOR HEX
02125  2D24              ;********************************
02126  2D24  A9 24       DOLLAR LDA #'$'
02127  2D26  4C 64 28           JMP PCHAR
02128  2D29              ;********************************
02129  2D29              ; PRINT LEFT PARENTTHESES
02130  2D29              ;********************************
02131  2D29  A9 28       LPAREN LDA #'('
02132  2D2B  4C 64 28           JMP PCHAR
02133  2D2E              ;********************************
02134  2D2E              ; PRINT RIGHT PARENTTHESES
02135  2D2E              ;********************************
02136  2D2E  A9 29       RPAREN LDA #')'
02137  2D30  4C 64 28           JMP PCHAR
02138  2D33              ;********************************
02139  2D33              ; PRINT A COMMA AND AN "X"
02140  2D33              ;********************************
02141  2D33  A9 2C       XINDEX LDA #','
02142  2D35  20 64 28           JSR PCHAR
02143  2D38  A9 58              LDA #'X'
02144  2D3A  4C 64 28           JMP PCHAR
02145  2D3D              ;********************************
02146  2D3D              ; PRINT A COMMA AND A "Y"
02147  2D3D              ;********************************
02148  2D3D  A9 2C       YINDEX LDA #','
02149  2D3F  20 64 28           JSR PCHAR
02150  2D42  A9 59              LDA #'Y'
02151  2D44  4C 64 28           JMP PCHAR
02152  2D47              ;********************************
02153  2D47              ; PRINT CARRAIGE RETURN
02154  2D47              ;*********************************
02155  2D47  A9 0D       CRLF   LDA #$0D        ;ASCII CR
02156  2D49  4C 64 28           JMP PCHAR       ;PRINT
02157  2D4C              ;*********************************
02158  2D4C              ; PRINT SIX SPACES
02159  2D4C              ;*********************************
02160  2D4C  A9 05       SPAC6  LDA #$05
02161  2D4E  8D 70 1C    SPACM  STA TEMP






DISASS128.ASM......PAGE 0043

LINE# LOC   CODE        LINE


02162  2D51  20 59 2D    SPAC   JSR SPACE
02163  2D54  CE 70 1C           DEC TEMP
02164  2D57  D0 F8              BNE SPAC
02165  2D59              ;*********************************
02166  2D59              ; PRINT SPACE
02167  2D59              ;*********************************
02168  2D59  A9 20       SPACE  LDA #$20        ;ASCII SPACE
02169  2D5B  4C 64 28           JMP PCHAR       ;PRINT
02170  2D5E              ;*********************************
02171  2D5E              ; SELECT NEXT BYTE
02172  2D5E              ;*********************************
02173  2D5E  AD 42 1C    NEXTSL LDA SELECT+1
02174  2D61  CD 40 1C           CMP EA+1
02175  2D64  90 0A              BCC SLOK
02176  2D66  D0 0D              BNE NOINC
02177  2D68  AD 41 1C           LDA SELECT
02178  2D6B  CD 3F 1C           CMP EA
02179  2D6E  B0 05              BCS NOINC
02180  2D70  20 77 2D    SLOK   JSR INCSL
02181  2D73  18                 CLC
02182  2D74  60                 RTS
02183  2D75  38          NOINC  SEC
02184  2D76  60                 RTS
02185  2D77              ;*********************************
02186  2D77              ; INC SELECTED BYTE
02187  2D77              ;*********************************
02188  2D77  EE 41 1C    INCSL  INC SELECT
02189  2D7A  D0 03              BNE *+5
02190  2D7C  EE 42 1C           INC SELECT+1
02191  2D7F  60                 RTS
02192  2D80              ;*********************************
02193  2D80              ; GET SELECTED BYTE
02194  2D80              ; C128 BYTE IN RAM BANK 1
02195  2D80              ;*********************************
02196  2D80  18          GETSL  CLC
02197  2D81  AD 41 1C           LDA SELECT
02198  2D84  6D 43 1C           ADC OFFSET
02199  2D87  85 FB              STA ZEROUR
02200  2D89  AD 42 1C           LDA SELECT+1
02201  2D8C  6D 44 1C           ADC OFFSET+1
02202  2D8F  85 FC              STA ZEROUR+1
02203  2D91  A0 00              LDY #$00
02204  2D93  A2 01              LDX #$01        ;RAM BANK 1
02205  2D95  B1 FB              LDA (ZEROUR),Y
02206  2D97              ; JSR INDFET
02207  2D97  60                 RTS
02208  2D98              ;*********************************
02209  2D98              ; DEC SLECTED BYTE
02210  2D98              ;*********************************
02211  2D98  AD 41 1C    DECSL  LDA SELECT
02212  2D9B  D0 03              BNE *+5
02213  2D9D  CE 42 1C           DEC SELECT+1
02214  2DA0  CE 41 1C           DEC SELECT
02215  2DA3  60                 RTS
02216  2DA4              ;*********************************






DISASS128.ASM......PAGE 0044

LINE# LOC   CODE        LINE


02217  2DA4              ; INITIALIZE SELECT
02218  2DA4              ;*********************************
02219  2DA4  AD 3D 1C    INTSA  LDA SA
02220  2DA7  8D 41 1C           STA SELECT
02221  2DAA  AD 3E 1C           LDA SA+1
02222  2DAD  8D 42 1C           STA SELECT+1
02223  2DB0  60                 RTS
02224  2DB1              ;*********************************
02225  2DB1              ; ASCII STRING DATA
02226  2DB1              ;*********************************
02227  2DB1  2E 42       MSGBIT .BYTE '.BYTE $',0
02227  2DB8  00 
02228  2DB9  20 3B       MSGBZP .BYTE '         ;BIT ZP SKIP',0
02228  2DC6  00 
02229  2DC7  2A 2B 24    POSREL .BYTE '*+$',0
02229  2DCA  00 
02230  2DCB  2A 2D 24    NEGREL .BYTE '*-$',0
02230  2DCE  00 
02231  2DCF  2E 45       MSGEND .BYTE '.END',0
02231  2DD3  00 
02232  2DD4  3B 3F       ILLMSG .BYTE ';??? ILLEGAL OPCODE',0
02232  2DE7  00 
02233  2DE8              ;*********************************
02234  2DE8              ; PRINT ONE BYTE OPCODE DATA
02235  2DE8              ;*********************************
02236  2DE8  20 80 2D    PRTONE JSR GETSL       ;GET BYTE
02237  2DEB  20 F8 27           JSR PRBYT       ;PRINT BYTE
02238  2DEE  AD 3B 1C           LDA FOROPT
02239  2DF1  F0 03              BEQ PRTON1
02240  2DF3  A9 07              LDA #$07
02241  2DF5  2C                 .BYTE $2C
02242  2DF6  A9 09       PRTON1 LDA #$09        ;10 SPACES
02243  2DF8  20 4E 2D           JSR SPACM       ;
02244  2DFB  4C 54 2E           JMP PRTEST      ;RESET I/O DEVICE
02245  2DFE              ;*********************************
02246  2DFE              ; PRINT TWO BYTE OPCODE DATA
02247  2DFE              ;*********************************
02248  2DFE  20 80 2D    PRTTWO JSR GETSL       ;GET BYTE
02249  2E01  20 F8 27           JSR PRBYT       ;PRINT BYTE
02250  2E04  20 59 2D           JSR SPACE       ;
02251  2E07  20 77 2D           JSR INCSL       ;INC TO OPERAND
02252  2E0A  20 80 2D           JSR GETSL       ;GET BYTE
02253  2E0D  20 F8 27           JSR PRBYT       ;PRINT IT
02254  2E10  AD 3B 1C           LDA FOROPT
02255  2E13  F0 03              BEQ PRTTW1
02256  2E15  A9 04              LDA #$04
02257  2E17  2C                 .BYTE $2C
02258  2E18  A9 06       PRTTW1 LDA #$06        ;7 SPACES
02259  2E1A  20 4E 2D           JSR SPACM       ;
02260  2E1D  20 98 2D           JSR DECSL       ;RESET POINTER
02261  2E20  4C 54 2E           JMP PRTEST      ;RESET I/O DEVICE
02262  2E23              ;*********************************
02263  2E23              ; PRINT THREE BYTE OPCODE DATA
02264  2E23              ;*********************************
02265  2E23  20 80 2D    PRTTHE JSR GETSL       ;GET BYTE






DISASS128.ASM......PAGE 0045

LINE# LOC   CODE        LINE


02266  2E26  20 F8 27           JSR PRBYT       ;PRINT BYTE
02267  2E29  20 59 2D           JSR SPACE       ;
02268  2E2C  20 77 2D           JSR INCSL       ;INC TO OPERAND
02269  2E2F  20 80 2D           JSR GETSL       ;GET BYTE
02270  2E32  20 F8 27           JSR PRBYT       ;PRINT IT
02271  2E35  20 59 2D           JSR SPACE       ;
02272  2E38  20 77 2D           JSR INCSL       ;INC TO LAST BYTE
02273  2E3B  20 80 2D           JSR GETSL       ;GET BYTE
02274  2E3E  20 F8 27           JSR PRBYT       ;PRINT IT
02275  2E41  AD 3B 1C           LDA FOROPT
02276  2E44  F0 03              BEQ PRTTH1
02277  2E46  A9 01              LDA #$01
02278  2E48  2C                 .BYTE $2C
02279  2E49  A9 03       PRTTH1 LDA #$03        ;4 SPACES
02280  2E4B  20 4E 2D           JSR SPACM       ;
02281  2E4E  20 98 2D           JSR DECSL       ;DEC POINTER
02282  2E51  20 98 2D           JSR DECSL       ;DEC POINTER
02283  2E54              ;*********************************
02284  2E54              ; RESET I/O DEVICE (DISK IF USED)
02285  2E54              ;*********************************
02286  2E54  AD 39 1C    PRTEST LDA OUTPUT      ;GET I/O DEVICE
02287  2E57  8D 38 1C           STA DEVICE      ;RESET I/O
02288  2E5A  60                 RTS             ;RETURN
02289  2E5B              ;*********************************
02290  2E5B              ; PRINT LINE DATA FOR OPCODE
02291  2E5B              ;*********************************
02292  2E5B  AD 38 1C    PRTDAT LDA DEVICE      ;OUTPUT DEVICE
02293  2E5E  29 07              AND #$07        ;MASK DISK
02294  2E60  8D 38 1C           STA DEVICE      ;RESET
02295  2E63  AD 3B 1C           LDA FOROPT      ;CHECK FORMAT
02296  2E66  D0 0F              BNE PRTDAF      ;SKIP LINE #
02297  2E68  AD 78 1C           LDA LINECT+1    ;HIH BYTE LINE
02298  2E6B  AE 77 1C           LDX LINECT      ;LOW BYTE LINE
02299  2E6E  20 2A 28           JSR PRTNUM      ;PRINT NUMBER
02300  2E71  20 59 2D           JSR SPACE       ;
02301  2E74  20 59 2D           JSR SPACE       ;
02302  2E77  20 0A 2D    PRTDAF JSR PSELEC      ;PRINT ADDRESS
02303  2E7A  A9 01              LDA #$01        ;2 SPACES
02304  2E7C  4C 4E 2D           JMP SPACM       ;
02305  2E7F              ;*********************************
02306  2E7F              ; PRINT LINE DATA FOR OTHER LINES
02307  2E7F              ;*********************************
02308  2E7F  20 5B 2E    PRTOTH JSR PRTDAT      ;PRINT LINE
02309  2E82  AD 3B 1C           LDA FOROPT
02310  2E85  F0 03              BEQ PRTOT1
02311  2E87  A9 09              LDA #$09
02312  2E89  2C                 .BYTE $2C
02313  2E8A  A9 0B       PRTOT1 LDA #$0B        ;12 SPACES
02314  2E8C  20 4E 2D           JSR SPACM       ;
02315  2E8F  4C 54 2E           JMP PRTEST      ;RESET I/O
02316  2E92              ;********************************
02317  2E92              ;.FIL 0:INTERNAL.ASM
02318  2E92              ;********************************
02319  2E92              ;.END
02320  2E92              ;*********************************






DISASS128.ASM......PAGE 0046

LINE# LOC   CODE        LINE


02321  2E92              ; FILE INTERNAL.ASM
02322  2E92              ;*********************************
02323  2E92              ;
02324  2E92              ;        DISASSEMBLER128
02325  2E92              ;    SYMBOLIC DISASSEMBLER
02326  2E92              ;       BY DENTON MARLOWE
02327  2E92              ;
02328  2E92              ;  (C)1986 BY DENTON MARLOWE
02329  2E92              ;
02330  2E92              ;*********************************
02331  2E92              ; INTERNAL ADDRESS TABLE ROUTINES
02332  2E92              ;*********************************
02333  2E92              ; CHECK FOR OUT OF RANGE ADDRESS
02334  2E92              ;*********************************
02335  2E92  AD 65 1C    RANGE  LDA WORKED+1    ;GET HIGH
02336  2E95  CD 48 1C           CMP EAGOL+1     ;COMPARE
02337  2E98  90 0A              BCC RANG        ;< CHECK START
02338  2E9A  D0 1A              BNE ROUT        ;> OUT OF RANGE
02339  2E9C  AD 64 1C           LDA WORKED      ;GET LOW
02340  2E9F  CD 47 1C           CMP EAGOL       ;COMPARE
02341  2EA2  B0 12              BCS ROUT        ;> OUT OF RANGE
02342  2EA4              ;*********************************
02343  2EA4  AD 65 1C    RANG   LDA WORKED+1    ;GET HIGH
02344  2EA7  CD 46 1C           CMP SAGOL+1     ;COMPARE
02345  2EAA  90 0A              BCC ROUT        ;< OUT OF RANGE
02346  2EAC  AD 64 1C           LDA WORKED      ;GET LOW
02347  2EAF  CD 45 1C           CMP SAGOL       ;COMPARE
02348  2EB2  90 02              BCC ROUT        ;< OUT OF RANGE
02349  2EB4              ;*********************************
02350  2EB4  18                 CLC             ;C=0 IN RANGE
02351  2EB5  60                 RTS
02352  2EB6  38          ROUT   SEC             ;C=1 OUT RANGE
02353  2EB7  60                 RTS
02354  2EB8              ;*********************************
02355  2EB8              ; INITIALIZE INTERNAL TABLE
02356  2EB8              ;*********************************
02357  2EB8  AD 0E 1D    INITIN LDA DATABE
02358  2EBB  8D 4F 1C           STA TABINS
02359  2EBE  8D 51 1C           STA TABINE
02360  2EC1  AD 0F 1D           LDA DATABE+1
02361  2EC4  8D 50 1C           STA TABINS+1
02362  2EC7  8D 52 1C           STA TABINE+1
02363  2ECA              ;*********************************
02364  2ECA              ; INITIALIZE INTERNAL TABLE POINT
02365  2ECA              ;*********************************
02366  2ECA  AD 4F 1C    INTSET LDA TABINS
02367  2ECD  8D 4D 1C           STA TABINP
02368  2ED0  AD 50 1C           LDA TABINS+1
02369  2ED3  8D 4E 1C           STA TABINP+1
02370  2ED6  60                 RTS
02371  2ED7              ;*********************************
02372  2ED7              ; SAVE INTERNAL TABLE POINTERS
02373  2ED7              ;*********************************
02374  2ED7  AD 4F 1C    SAVINT LDA TABINS
02375  2EDA  8D 6A 1C           STA SAVES






DISASS128.ASM......PAGE 0047

LINE# LOC   CODE        LINE


02376  2EDD  AD 50 1C           LDA TABINS+1
02377  2EE0  8D 6B 1C           STA SAVES+1
02378  2EE3  AD 51 1C           LDA TABINE
02379  2EE6  8D 6C 1C           STA SAVEE
02380  2EE9  AD 52 1C           LDA TABINE+1
02381  2EEC  8D 6D 1C           STA SAVEE+1
02382  2EEF  60                 RTS
02383  2EF0              ;*********************************
02384  2EF0              ; RESTORE INTERNAL TABLE POINTERS
02385  2EF0              ;*********************************
02386  2EF0  AD 6A 1C    RESINT LDA SAVES
02387  2EF3  8D 4F 1C           STA TABINS
02388  2EF6  AD 6B 1C           LDA SAVES+1
02389  2EF9  8D 50 1C           STA TABINS+1
02390  2EFC  AD 6C 1C           LDA SAVEE
02391  2EFF  8D 51 1C           STA TABINE
02392  2F02  AD 6D 1C           LDA SAVEE+1
02393  2F05  8D 52 1C           STA TABINE+1
02394  2F08  60                 RTS
02395  2F09              ;*********************************
02396  2F09              ; PUT ADDRESS IN INTERNAL TABLE
02397  2F09              ;*********************************
02398  2F09  38          PUTI   SEC
02399  2F0A  AD 4F 1C           LDA TABINS
02400  2F0D  ED 51 1C           SBC TABINE
02401  2F10  8D 70 1C           STA TEMP
02402  2F13  AD 50 1C           LDA TABINS+1
02403  2F16  ED 52 1C           SBC TABINE+1
02404  2F19  0D 70 1C           ORA TEMP
02405  2F1C  F0 05              BEQ PUIT
02406  2F1E              ;
02407  2F1E  20 74 2F           JSR INTCHK      ;IS ADDRESS IN TAB
02408  2F21  B0 23              BCS INTEXT      ;IF SO EXIT
02409  2F23              ;
02410  2F23  AD 51 1C    PUIT   LDA TABINE      ;GET LOW END
02411  2F26  85 FB              STA ZEROUR      ;STORE
02412  2F28  AD 52 1C           LDA TABINE+1    ;GET HIGH END
02413  2F2B  85 FC              STA ZEROUR+1    ;STORE
02414  2F2D  A0 00              LDY #$00        ;OFFSET
02415  2F2F  AD 64 1C           LDA WORKED      ;GET LOW ADDRESS
02416  2F32  91 FB              STA (ZEROUR),Y  ;PUT IN TABLE
02417  2F34  C8                 INY             ;OFFSET TO HIGH
02418  2F35  AD 65 1C           LDA WORKED+1    ;GET HIGH ADDRESS
02419  2F38  91 FB              STA (ZEROUR),Y  ;PUT IN TABLE
02420  2F3A              ;
02421  2F3A  20 1F 2D           JSR SEMIC       ;PRINT ;
02422  2F3D  20 16 2D           JSR PWORKD      ;PRINT ADDRESS
02423  2F40              ;*********************************
02424  2F40  20 48 2F           JSR INCIE       ;INC TO HIGH & LOW
02425  2F43  4C 48 2F           JMP INCIE       ;INC TO HIGH & LOW
02426  2F46              ;
02427  2F46              INTEXT = *
02428  2F46  18                 CLC             ;C=0 FOR NO MATCH
02429  2F47  60                 RTS             ;RETURN
02430  2F48              ;*********************************






DISASS128.ASM......PAGE 0048

LINE# LOC   CODE        LINE


02431  2F48              ; INC INTERNAL END TABLE POINTER
02432  2F48              ;*********************************
02433  2F48  EE 51 1C    INCIE  INC TABINE
02434  2F4B  D0 03              BNE *+5
02435  2F4D  EE 52 1C           INC TABINE+1
02436  2F50              ;*********************************
02437  2F50              ; INC INTERNAL ADDRESS POINTER
02438  2F50              ;*********************************
02439  2F50  EE 4D 1C    INCI   INC TABINP
02440  2F53  D0 03              BNE *+5
02441  2F55  EE 4E 1C           INC TABINP+1
02442  2F58  60                 RTS
02443  2F59              ;*********************************
02444  2F59              ; GET BYTE FROM INTERNAL TABLE
02445  2F59              ;*********************************
02446  2F59  AD 4D 1C    GETI   LDA TABINP
02447  2F5C  85 FB              STA ZEROUR
02448  2F5E  AD 4E 1C           LDA TABINP+1
02449  2F61  85 FC              STA ZEROUR+1
02450  2F63  A0 00              LDY #$00
02451  2F65  B1 FB              LDA (ZEROUR),Y
02452  2F67  60                 RTS
02453  2F68              ;*********************************
02454  2F68              ; CHECK IF ADDRESS IN TABLE
02455  2F68              ;*********************************
02456  2F68  AD 41 1C    INTCHA LDA SELECT
02457  2F6B  8D 64 1C           STA WORKED
02458  2F6E  AD 42 1C           LDA SELECT+1
02459  2F71  8D 65 1C           STA WORKED+1
02460  2F74              ;*********************************
02461  2F74  20 CA 2E    INTCHK JSR INTSET
02462  2F77  20 59 2F    INTCH  JSR GETI
02463  2F7A  8D 66 1C           STA WORKER
02464  2F7D  20 50 2F           JSR INCI
02465  2F80  20 59 2F           JSR GETI
02466  2F83  8D 67 1C           STA WORKER+1
02467  2F86  38                 SEC
02468  2F87  AD 65 1C           LDA WORKED+1
02469  2F8A  ED 67 1C           SBC WORKER+1
02470  2F8D  8D 70 1C           STA TEMP
02471  2F90  AD 64 1C           LDA WORKED
02472  2F93  ED 66 1C           SBC WORKER
02473  2F96  0D 70 1C           ORA TEMP
02474  2F99  F0 17              BEQ INTMAT
02475  2F9B              ;*********************************
02476  2F9B  20 50 2F           JSR INCI
02477  2F9E  AD 4E 1C           LDA TABINP+1
02478  2FA1  CD 52 1C           CMP TABINE+1
02479  2FA4  90 D1              BCC INTCH
02480  2FA6  D0 08              BNE INTEND
02481  2FA8  AD 4D 1C           LDA TABINP
02482  2FAB  CD 51 1C           CMP TABINE
02483  2FAE  90 C7              BCC INTCH
02484  2FB0              ;*********************************
02485  2FB0  18          INTEND CLC






DISASS128.ASM......PAGE 0049

LINE# LOC   CODE        LINE


02486  2FB1  60                 RTS
02487  2FB2  38          INTMAT SEC
02488  2FB3  60                 RTS
02489  2FB4              ;*********************************
02490  2FB4              ; 2 BYTE TABLE SORT ROUTINE
02491  2FB4              ;*********************************
02492  2FB4  20 CA 2E    SORT   JSR INTSET      ;SET POINTERS
02493  2FB7  AD 4F 1C           LDA TABINS
02494  2FBA  8D 53 1C           STA SMALLS
02495  2FBD  8D 55 1C           STA SMALLP
02496  2FC0  AD 50 1C           LDA TABINS+1
02497  2FC3  8D 54 1C           STA SMALLS+1
02498  2FC6  8D 56 1C           STA SMALLP+1
02499  2FC9              ;*********************************
02500  2FC9              ; PUT FIRST WORD INTO TEMP
02501  2FC9              ;*********************************
02502  2FC9  20 59 2F    SORT1  JSR GETI
02503  2FCC  8D 70 1C           STA TEMP
02504  2FCF  20 50 2F           JSR INCI
02505  2FD2  20 59 2F           JSR GETI
02506  2FD5  8D 71 1C           STA TEMP+1
02507  2FD8              ;*********************************
02508  2FD8              ; INC TO NEXT WORD AND COMPARE
02509  2FD8              ; SMALLP POINTS TO LOW BYTE
02510  2FD8              ;*********************************
02511  2FD8  20 50 2F    SORT2  JSR INCI
02512  2FDB  AD 4D 1C           LDA TABINP
02513  2FDE  8D 55 1C           STA SMALLP
02514  2FE1  AD 4E 1C           LDA TABINP+1
02515  2FE4  8D 56 1C           STA SMALLP+1
02516  2FE7  20 59 2F           JSR GETI
02517  2FEA  8D 64 1C           STA WORKED
02518  2FED  20 50 2F           JSR INCI
02519  2FF0  AD 4E 1C           LDA TABINP+1
02520  2FF3  CD 52 1C           CMP TABINE+1
02521  2FF6  90 0D              BCC T2
02522  2FF8  D0 08              BNE S3
02523  2FFA  AD 4D 1C           LDA TABINP
02524  2FFD  CD 51 1C           CMP TABINE
02525  3000  90 03              BCC T2
02526  3002  4C 5A 30    S3     JMP SORT3
02527  3005  20 59 2F    T2     JSR GETI
02528  3008  8D 65 1C           STA WORKED+1
02529  300B  CD 71 1C           CMP TEMP+1
02530  300E  90 0D              BCC SMALL
02531  3010  D0 08              BNE LARGE
02532  3012  AD 64 1C           LDA WORKED
02533  3015  CD 70 1C           CMP TEMP
02534  3018  90 03              BCC SMALL
02535  301A  4C D8 2F    LARGE  JMP SORT2
02536  301D              ;*********************************
02537  301D              ; WORD IS SMALL THAN TEMP PUT IT
02538  301D              ; WHERE TEMP CAME FROM (SMALLS)
02539  301D              ;*********************************
02540  301D  AD 53 1C    SMALL  LDA SMALLS






DISASS128.ASM......PAGE 0050

LINE# LOC   CODE        LINE


02541  3020  85 FB              STA ZEROUR
02542  3022  AD 54 1C           LDA SMALLS+1
02543  3025  85 FC              STA ZEROUR+1
02544  3027  A0 00              LDY #$00
02545  3029  AD 64 1C           LDA WORKED
02546  302C  91 FB              STA (ZEROUR),Y
02547  302E  C8                 INY
02548  302F  AD 65 1C           LDA WORKED+1
02549  3032  91 FB              STA (ZEROUR),Y
02550  3034              ;*********************************
02551  3034              ; PUT TEMP IN PLACE OF WORD
02552  3034              ; SMALLP POINTS TO LO ADDRESS
02553  3034              ;*********************************
02554  3034  AD 55 1C           LDA SMALLP
02555  3037  85 FB              STA ZEROUR
02556  3039  AD 56 1C           LDA SMALLP+1
02557  303C  85 FC              STA ZEROUR+1
02558  303E  A0 00              LDY #$00
02559  3040  AD 70 1C           LDA TEMP
02560  3043  91 FB              STA (ZEROUR),Y
02561  3045  C8                 INY
02562  3046  AD 71 1C           LDA TEMP+1
02563  3049  91 FB              STA (ZEROUR),Y
02564  304B              ;*********************************
02565  304B  AD 53 1C           LDA SMALLS
02566  304E  8D 4D 1C           STA TABINP
02567  3051  AD 54 1C           LDA SMALLS+1
02568  3054  8D 4E 1C           STA TABINP+1
02569  3057  4C C9 2F           JMP SORT1
02570  305A              ;*********************************
02571  305A              ; IF AFTER SCAN TO TABLE GOTO NEXT
02572  305A              ; WORD IN TABLE FOR CHECK
02573  305A              ;*********************************
02574  305A  18          SORT3  CLC
02575  305B  AD 53 1C           LDA SMALLS
02576  305E  69 02              ADC #$02
02577  3060  8D 53 1C           STA SMALLS
02578  3063  8D 4D 1C           STA TABINP
02579  3066  AD 54 1C           LDA SMALLS+1
02580  3069  69 00              ADC #$00
02581  306B  8D 54 1C           STA SMALLS+1
02582  306E  8D 4E 1C           STA TABINP+1
02583  3071  AD 54 1C           LDA SMALLS+1
02584  3074  CD 52 1C           CMP TABINE+1
02585  3077  90 0A              BCC SORTOK
02586  3079  D0 0B              BNE SORT4
02587  307B  AD 53 1C           LDA SMALLS
02588  307E  CD 51 1C           CMP TABINE
02589  3081  B0 03              BCS SORT4
02590  3083  4C C9 2F    SORTOK JMP SORT1
02591  3086              ;*********************************
02592  3086  4C CA 2E    SORT4  JMP INTSET
02593  3089              ;*********************************
02594  3089              ; PRINT INTERNAL ADDRESS TABLE
02595  3089              ;*********************************






DISASS128.ASM......PAGE 0051

LINE# LOC   CODE        LINE


02596  3089  38          INTPRT SEC
02597  308A  AD 4F 1C           LDA TABINS
02598  308D  ED 51 1C           SBC TABINE
02599  3090  8D 70 1C           STA TEMP
02600  3093  AD 50 1C           LDA TABINS+1
02601  3096  ED 52 1C           SBC TABINE+1
02602  3099  0D 70 1C           ORA TEMP
02603  309C  D0 01              BNE INTOUT
02604  309E  60                 RTS
02605  309F              ;*********************************
02606  309F  20 3B 29    INTOUT JSR HEADSY
02607  30A2  20 B4 2F           JSR SORT
02608  30A5              ;*********************************
02609  30A5  A9 03       LOOP1  LDA #$03
02610  30A7  8D 71 1C           STA SAVA
02611  30AA  20 59 2F    INTPR  JSR GETI
02612  30AD  8D 64 1C           STA WORKED
02613  30B0  20 50 2F           JSR INCI
02614  30B3  20 59 2F           JSR GETI
02615  30B6  8D 65 1C           STA WORKED+1
02616  30B9  20 59 2D           JSR SPACE
02617  30BC  20 B2 37           JSR SYMOP
02618  30BF  90 0B              BCC INTPRS
02619  30C1  20 4F 38           JSR FIXSYM
02620  30C4  A9 02              LDA #$02
02621  30C6  20 4E 2D           JSR SPACM
02622  30C9  4C D1 30           JMP INTPRM
02623  30CC  A9 08       INTPRS LDA #$08
02624  30CE  20 4E 2D           JSR SPACM
02625  30D1  20 16 2D    INTPRM JSR PWORKD
02626  30D4  20 50 2F           JSR INCI
02627  30D7  AD 4E 1C           LDA TABINP+1
02628  30DA  CD 52 1C           CMP TABINE+1
02629  30DD  90 0A              BCC PRTOK
02630  30DF  D0 15              BNE PREND
02631  30E1  AD 4D 1C           LDA TABINP
02632  30E4  CD 51 1C           CMP TABINE
02633  30E7  B0 0D              BCS PREND
02634  30E9  CE 71 1C    PRTOK  DEC SAVA
02635  30EC  30 0B              BMI LOOP2
02636  30EE  A9 02              LDA #$02
02637  30F0  20 4E 2D           JSR SPACM
02638  30F3  4C AA 30           JMP INTPR
02639  30F6  4C 10 29    PREND  JMP NEXPTS
02640  30F9  20 10 29    LOOP2  JSR NEXPTS
02641  30FC  4C A5 30           JMP LOOP1
02642  30FF              ;*********************************
02643  30FF              ;.FIL 0:ASC.ASM
02644  30FF              ;*********************************
02645  30FF              ;.END
02646  30FF              ;*********************************
02647  30FF              ; FILE ASC.ASM
02648  30FF              ;*********************************
02649  30FF              ;
02650  30FF              ;        DISASSEMBLER128






DISASS128.ASM......PAGE 0052

LINE# LOC   CODE        LINE


02651  30FF              ;    SYMBOLIC DISASSEMBLER
02652  30FF              ;       BY DENTON MARLOWE
02653  30FF              ;
02654  30FF              ;  (C)1986 BY DENTON MARLOWE
02655  30FF              ;
02656  30FF              ;*********************************
02657  30FF              ; DATA TABLE HANDLER
02658  30FF              ;*********************************
02659  30FF  AD 08 1D    DATAOP LDA NDATA       ;GET NUM TABLES
02660  3102  F0 07              BEQ ENDAX       ;IF ZERO EXIT
02661  3104  A9 00              LDA #$00        ;ZERO BYTE
02662  3106  8D 06 1D           STA CDATA       ;SET FIRST TABLE
02663  3109  F0 03              BEQ DATAO1      ;
02664  310B  4C EF 31    ENDAX  JMP ENDDAT      ;
02665  310E              ;*********************************
02666  310E  AD 06 1D    DATAO1 LDA CDATA       ;CURRENT TABLE
02667  3111  CD 08 1D           CMP NDATA       ;LAST TABLE DONE
02668  3114  F0 F5              BEQ ENDAX       ;IF SO EXIT
02669  3116  0A                 ASL A           ;CDATA*2
02670  3117  0A                 ASL A           ;CDATA*4
02671  3118  18                 CLC
02672  3119  6D 06 1D           ADC CDATA       ;CDATA*5
02673  311C  A8                 TAY             ;PUT INTO INDEX
02674  311D  B9 10 1D           LDA TDATA,Y     ;START LOW
02675  3120  8D 66 1C           STA WORKER      ;STORE
02676  3123  C8                 INY             ;INC OFFSET
02677  3124  B9 10 1D           LDA TDATA,Y     ;START HIGH
02678  3127  8D 67 1C           STA WORKER+1    ;STORE
02679  312A  38                 SEC             ;C=1
02680  312B  AD 66 1C           LDA WORKER      ;
02681  312E  ED 41 1C           SBC SELECT      ;
02682  3131  8D 70 1C           STA TEMP        ;
02683  3134  AD 67 1C           LDA WORKER+1    ;
02684  3137  ED 42 1C           SBC SELECT+1    ;
02685  313A  0D 70 1C           ORA TEMP        ;
02686  313D  F0 05              BEQ DATAO2      ;MATCH
02687  313F  EE 06 1D           INC CDATA       ;NEXT TABLE
02688  3142  D0 CA              BNE DATAO1      ;CHECK FOR MATCH
02689  3144              ;*********************************
02690  3144              ; GET TABLE DATA
02691  3144              ;*********************************
02692  3144  C8          DATAO2 INY             ;INC OFFSET
02693  3145  B9 10 1D           LDA TDATA,Y     ;END LOW
02694  3148  8D 03 1D           STA EAS         ;STORE
02695  314B  C8                 INY             ;INC OFFSET
02696  314C  B9 10 1D           LDA TDATA,Y     ;END HIGH
02697  314F  8D 04 1D           STA EAS+1       ;STORE
02698  3152  C8                 INY             ;INC OFFSET
02699  3153  B9 10 1D           LDA TDATA,Y     ;DATA TYPE
02700  3156  8D 05 1D           STA TEXTER      ;STORE
02701  3159  C9 53              CMP #'S'        ;IS IT SKIPPER
02702  315B  D0 23              BNE ASCCCC      ;
02703  315D              ;*********************************
02704  315D              ; SKIP RANGE OF ADDRESSES
02705  315D              ;*********************************






DISASS128.ASM......PAGE 0053

LINE# LOC   CODE        LINE


02706  315D  AD 31 1C           LDA PASS
02707  3160  CD 34 1C           CMP CPASS
02708  3163  D0 1B              BNE ASCCCC
02709  3165  AD 03 1D           LDA EAS
02710  3168  8D 41 1C           STA SELECT
02711  316B  AD 04 1D           LDA EAS+1
02712  316E  8D 42 1C           STA SELECT+1
02713  3171  20 77 2D           JSR INCSL
02714  3174  20 8F 2C           JSR ORGIN
02715  3177  20 98 2D           JSR DECSL
02716  317A  20 B5 2C           JSR COMENT
02717  317D  4C EC 31           JMP DATUT
02718  3180              ;*********************************
02719  3180              ; CHECK PASS
02720  3180              ;*********************************
02721  3180  AD 31 1C    ASCCCC LDA PASS
02722  3183  CD 33 1C           CMP EPASS       ;EXTERNAL
02723  3186  D0 0F              BNE ASCKK
02724  3188  AD 03 1D    SKIPER LDA EAS
02725  318B  8D 41 1C           STA SELECT
02726  318E  AD 04 1D           LDA EAS+1
02727  3191  8D 42 1C           STA SELECT+1
02728  3194  4C EC 31           JMP DATUT
02729  3197              ;*********************************
02730  3197              ; DISASSEMBLER LOOP FOR DATA
02731  3197              ;*********************************
02732  3197  AD 31 1C    ASCKK  LDA PASS        ;GET PASS
02733  319A  CD 34 1C           CMP CPASS       ;IS IT LAST
02734  319D  D0 0E              BNE ASCI1       ;NO PRINT
02735  319F  20 B5 2C           JSR COMENT      ;COMMENT LINE
02736  31A2  AD 31 1C    ASCII  LDA PASS        ;GET PASS
02737  31A5  CD 34 1C           CMP CPASS       ;IS IT LAST
02738  31A8  D0 03              BNE ASCI1       ;NO PRINT
02739  31AA  20 5B 2E           JSR PRTDAT      ;PRINT LINE
02740  31AD  20 F2 31    ASCI1  JSR ACHECK      ;DIS ONE LINE
02741  31B0  B0 29              BCS ASCIIQ      ;IF EA STOP
02742  31B2              ;*********************************
02743  31B2  20 E1 FF           JSR STOP
02744  31B5  F0 24              BEQ ASCIIQ
02745  31B7  20 E4 FF           JSR GETIN
02746  31BA  F0 E6              BEQ ASCII
02747  31BC  C9 20              CMP #' '
02748  31BE  D0 E2              BNE ASCII
02749  31C0  AD 38 1C           LDA DEVICE
02750  31C3  48                 PHA
02751  31C4  A9 03              LDA #$03
02752  31C6  8D 38 1C           STA DEVICE
02753  31C9  A9 17              LDA #<PMSG
02754  31CB  A0 1E              LDY #>PMSG
02755  31CD  20 0E 28           JSR STRPNT
02756  31D0  68                 PLA
02757  31D1  8D 38 1C           STA DEVICE
02758  31D4  20 E4 FF    PAUS1  JSR GETIN
02759  31D7  F0 FB              BEQ PAUS1
02760  31D9  D0 C7              BNE ASCII






DISASS128.ASM......PAGE 0054

LINE# LOC   CODE        LINE


02761  31DB              ;*********************************
02762  31DB  AD 31 1C    ASCIIQ LDA PASS        ;GET PASS
02763  31DE  CD 34 1C           CMP CPASS       ;IS IT LAST
02764  31E1  D0 09              BNE DATUT       ;EXIT
02765  31E3  20 77 2D           JSR INCSL
02766  31E6  20 B5 2C           JSR COMENT      ;COMMENT LINE
02767  31E9  20 98 2D           JSR DECSL
02768  31EC              ;*********************************
02769  31EC              ; EXIT TO NEXTSL
02770  31EC              ;*********************************
02771  31EC  A9 FF       DATUT  LDA #$FF        ;SET N=1
02772  31EE  60                 RTS             ;RETURN
02773  31EF  A9 00       ENDDAT LDA #$00        ;SET N=0
02774  31F1  60                 RTS             ;RETURN
02775  31F2              ;*********************************
02776  31F2              ; CHECK OPTIONS
02777  31F2              ;*********************************
02778  31F2  AD 05 1D    ACHECK LDA TEXTER      ;GET DATA TYPE
02779  31F5  C9 34              CMP #'4'         ;WORD-1
02780  31F7  F0 0B              BEQ AC0
02781  31F9  C9 33              CMP #'3'         ;DBYTE
02782  31FB  F0 0A              BEQ AC1
02783  31FD  C9 32              CMP #'2'         ;WORD
02784  31FF  F0 03              BEQ AC0
02785  3201  4C 0A 32           JMP BYTES       ;BYTE OR ASCII
02786  3204  4C C6 32    AC0    JMP WORDS       ;WORD OR WORD-1
02787  3207  4C 96 32    AC1    JMP DBYTES      ;DBYTES
02788  320A              ;*********************************
02789  320A              ; .BYTE DIRECTIVE
02790  320A              ;*********************************
02791  320A  AD 31 1C    BYTES  LDA PASS        ;GET PASS
02792  320D  CD 34 1C           CMP CPASS       ;IS IT LAST
02793  3210  D0 20              BNE BYTESX      ;IF NOT EXIT
02794  3212  20 E8 2D           JSR PRTONE      ;PRINT BYTE
02795  3215  20 DE 2C           JSR PRAD        ;PRINT ADDRESS
02796  3218  A0 33              LDY #>MBYTE     ;.BYTE
02797  321A  A9 82              LDA #<MBYTE     ;
02798  321C  20 0E 28           JSR STRPNT      ;PRINT IT
02799  321F  AD 05 1D           LDA TEXTER      ;GET TYPE
02800  3222  C9 30              CMP #'0'          ;ASCII
02801  3224  F0 0F              BEQ ALINE       ;ASCII BYTES
02802  3226  20 24 2D           JSR DOLLAR      ;PRINT $
02803  3229  20 80 2D           JSR GETSL       ;GET BYTE
02804  322C  20 F8 27           JSR PRBYT       ;PRINT BYTE
02805  322F  20 51 27           JSR NEWLIN      ;NEXT LINE
02806  3232  4C 69 33    BYTESX JMP NEXTBY      ;NEXT BYTE
02807  3235              ;*********************************
02808  3235              ; ASCII TEXT
02809  3235              ;*********************************
02810  3235  A9 00       ALINE  LDA #$00        ;ZERO BYTE
02811  3237  8D 70 1C           STA TEMP        ;STORE IN COUNT
02812  323A              ;*********************************
02813  323A              ; CHECK FIRST BYTE OF LINE
02814  323A              ;*********************************
02815  323A  20 80 2D           JSR GETSL       ;GET BYTE






DISASS128.ASM......PAGE 0055

LINE# LOC   CODE        LINE


02816  323D  20 8A 32           JSR CASCII      ;CHECK FOR ASCII
02817  3240  B0 39              BCS NASCII      ;IF NOT BRANCH
02818  3242  A9 27              LDA #'''        ;PRINT ONE QUOTE
02819  3244  20 64 28           JSR PCHAR       ;PRINT IT
02820  3247              ;*********************************
02821  3247  20 80 2D    ALOP   JSR GETSL       ;GET BYTE
02822  324A  20 8A 32           JSR CASCII      ;IS IT ASCII
02823  324D  B0 24              BCS EASCII      ;IF NOT END LINE
02824  324F  20 64 28           JSR PCHAR       ;PRINT ASCII
02825  3252              ; REV 2-12-2018 START
02826  3252              ; IF CHAR = ' THEN PRINT SECOND '
02827  3252  20 80 2D           JSR GETSL       ; GET BYTE AGAIN
02828  3255  C9 27              CMP #$27        ;'''
02829  3257  D0 03              BNE Q00000
02830  3259  20 64 28           JSR PCHAR       ;PRINT ASCII
02831  325C              Q00000 = *
02832  325C              ; REV 2-12-2018 END
02833  325C  20 69 33           JSR NEXTBY      ;INC SELECT
02834  325F  B0 0D              BCS EASCI1      ;C=1 IF END
02835  3261  EE 70 1C           INC TEMP        ;INC COUNT
02836  3264  AD 70 1C           LDA TEMP        ;LOAD COUNT
02837  3267  C9 28              CMP #$28        ;40 CHAR
02838  3269  F0 08              BEQ EASCII      ;IF SO END
02839  326B  4C 47 32           JMP ALOP        ;NEXT
02840  326E              ;*********************************
02841  326E  20 73 32    EASCI1 JSR EASCII
02842  3271  38                 SEC
02843  3272  60                 RTS
02844  3273              ;*********************************
02845  3273  A9 27       EASCII LDA #'''        ;PRINT ONE QUOTE
02846  3275  20 64 28           JSR PCHAR       ;
02847  3278  4C 51 27           JMP NEWLIN      ;PRINT CR
02848  327B              ;*********************************
02849  327B  20 24 2D    NASCII JSR DOLLAR      ;PRINT $
02850  327E  20 80 2D           JSR GETSL       ;GET BYTE
02851  3281  20 F8 27           JSR PRBYT       ;PRINT IT
02852  3284  20 51 27           JSR NEWLIN      ;PRINT CR
02853  3287  4C 69 33           JMP NEXTBY      ;NEXT SL
02854  328A              ;*********************************
02855  328A              ; CHECK ACCUM FOR PRINTABLE ASCII
02856  328A              ;*********************************
02857  328A  C9 20       CASCII CMP #$20        ;< SPACE
02858  328C  30 06              BMI NOASC       ;IF LESS NOASCII
02859  328E  C9 60              CMP #$60        ;> _
02860  3290  B0 02              BCS NOASC       ;IF GREATER NO
02861  3292  18                 CLC             ;CLEAR CARRY OK
02862  3293  60                 RTS             ;RETURN
02863  3294  38          NOASC  SEC             ;SET CARRY BAD
02864  3295  60                 RTS             ;RETURN
02865  3296              ;*********************************
02866  3296              ; .DBYTE DIRECTIVE
02867  3296              ;*********************************
02868  3296  AD 31 1C    DBYTES LDA PASS        ;CHECK PASS
02869  3299  CD 34 1C           CMP CPASS       ;LAST PASS
02870  329C  D0 25              BNE DBYTEX      ;EXIT






DISASS128.ASM......PAGE 0056

LINE# LOC   CODE        LINE


02871  329E  20 FE 2D           JSR PRTTWO      ;PRINT 2 BYTES
02872  32A1  20 DE 2C           JSR PRAD        ;PRINT ADDRESS
02873  32A4  A0 33              LDY #>MDBYTE    ;.DBYTE
02874  32A6  A9 92              LDA #<MDBYTE    ;
02875  32A8  20 0E 28           JSR STRPNT      ;PRINT IT
02876  32AB  20 80 2D           JSR GETSL       ;GET BYTE
02877  32AE  8D 65 1C           STA WORKED+1    ;STORE
02878  32B1  20 77 2D           JSR INCSL       ;GET BYTE
02879  32B4  20 80 2D           JSR GETSL       ;GET BYTE
02880  32B7  8D 64 1C           STA WORKED      ;STORE
02881  32BA  20 24 2D           JSR DOLLAR      ;PRINT $
02882  32BD  20 16 2D           JSR PWORKD      ;PRINT WORD
02883  32C0  20 51 27           JSR NEWLIN      ;PRINT CR
02884  32C3  4C 69 33    DBYTEX JMP NEXTBY      ;NEXT SL
02885  32C6              ;*********************************
02886  32C6              ; .WORD DIRECTIVE
02887  32C6              ;*********************************
02888  32C6  AD 31 1C    WORDS  LDA PASS        ;GET PASS
02889  32C9  CD 34 1C           CMP CPASS         ;LAST
02890  32CC  D0 0D              BNE WORD1       ;IF NOT BRANCH
02891  32CE  20 FE 2D           JSR PRTTWO      ;PRINT 2 BYTES
02892  32D1  20 DE 2C           JSR PRAD        ;PRINT ADDRESS
02893  32D4  A0 33              LDY #>MWORD     ;.WORD
02894  32D6  A9 8A              LDA #<MWORD     ;
02895  32D8  20 0E 28           JSR STRPNT      ;PRINT IT
02896  32DB              ;*********************************
02897  32DB              ; GET WORD INTO WORKED
02898  32DB              ;*********************************
02899  32DB  20 80 2D    WORD1  JSR GETSL       ;GET BYTE
02900  32DE  8D 64 1C           STA WORKED      ;STORE BYTE
02901  32E1  8D 55 1C           STA SMALLP      ;STORE BYTE
02902  32E4  20 77 2D           JSR INCSL       ;GET BYTE
02903  32E7  20 80 2D           JSR GETSL       ;GET BYTE
02904  32EA  8D 65 1C           STA WORKED+1    ;STORE BYTE
02905  32ED  8D 56 1C           STA SMALLP+1    ;STORE BYTE
02906  32F0  AD 05 1D           LDA TEXTER      ;GET OPTION
02907  32F3  C9 34              CMP #'4'          ;.WORD ADRS-1
02908  32F5  F0 2A              BEQ WORDM       ;BRANCH
02909  32F7              ;*********************************
02910  32F7              ; CHECK PASS
02911  32F7              ;*********************************
02912  32F7  AD 31 1C           LDA PASS        ;CHECK PASS
02913  32FA  CD 32 1C           CMP IPASS       ;INTERNAL
02914  32FD  F0 16              BEQ WORDPT      ;TABLE WORD
02915  32FF  CD 33 1C           CMP EPASS
02916  3302  F0 17              BEQ WORDSY
02917  3304              ;*********************************
02918  3304              ; PRINT WORD
02919  3304              ;*********************************
02920  3304  20 B2 37           JSR SYMOP       ;CHECK SYMBOL
02921  3307  B0 5A              BCS WORDS3      ;C=1 SYMBOL
02922  3309  20 24 2D           JSR DOLLAR      ;PRINT $
02923  330C  20 16 2D           JSR PWORKD      ;PRINT WORD
02924  330F  20 51 27           JSR NEWLIN      ;PRINT CR
02925  3312  4C 69 33    WORDSX JMP NEXTBY      ;NEXT SL






DISASS128.ASM......PAGE 0057

LINE# LOC   CODE        LINE


02926  3315  20 09 2F    WORDPT JSR PUTI        ;PUT IN TABLE
02927  3318  4C 69 33           JMP NEXTBY      ;NEXT SL
02928  331B  20 B2 37    WORDSY JSR SYMOP
02929  331E  4C 69 33           JMP NEXTBY
02930  3321              ;*********************************
02931  3321              ; .WORD ADDRESS-1
02932  3321              ;*********************************
02933  3321  18          WORDM  CLC
02934  3322  AD 64 1C           LDA WORKED
02935  3325  69 01              ADC #$01
02936  3327  8D 64 1C           STA WORKED
02937  332A  AD 65 1C           LDA WORKED+1
02938  332D  69 00              ADC #$00
02939  332F  8D 65 1C           STA WORKED+1
02940  3332              ;*********************************
02941  3332              ; CHECK PASS
02942  3332              ;*********************************
02943  3332  AD 31 1C           LDA PASS        ;CHECK PASS
02944  3335  CD 32 1C           CMP IPASS       ;INTERNAL
02945  3338  F0 DB              BEQ WORDPT      ;TABLE WORD
02946  333A  CD 33 1C           CMP EPASS       ;EXTERNAL
02947  333D  F0 DC              BEQ WORDSY      ;TABLE WORD
02948  333F              ;*********************************
02949  333F              ; PRINT WORD
02950  333F              ;*********************************
02951  333F  20 B2 37           JSR SYMOP       ;CHECK SYMBOL
02952  3342  90 0D              BCC WORDS2      ;C=0 NO SYMBOL
02953  3344  A9 2D              LDA #'-'
02954  3346  20 64 28           JSR PCHAR
02955  3349  A9 31              LDA #'1'
02956  334B  20 64 28           JSR PCHAR
02957  334E  4C 63 33           JMP WORDS3
02958  3351              ;*********************************
02959  3351  20 24 2D    WORDS2 JSR DOLLAR      ;PRINT $
02960  3354  AD 55 1C           LDA SMALLP
02961  3357  8D 64 1C           STA WORKED
02962  335A  AD 56 1C           LDA SMALLP+1
02963  335D  8D 65 1C           STA WORKED+1
02964  3360  20 16 2D           JSR PWORKD      ;PRINT WORD
02965  3363  20 51 27    WORDS3 JSR NEWLIN      ;PRINT CR
02966  3366  4C 69 33    WORDXX JMP NEXTBY      ;NEXT SL
02967  3369              ;*********************************
02968  3369              ; SELECT NEXT BYTE OF DATA
02969  3369              ;*********************************
02970  3369  AD 42 1C    NEXTBY LDA SELECT+1
02971  336C  CD 04 1D           CMP EAS+1
02972  336F  90 0A              BCC SBLOK
02973  3371  D0 0D              BNE NOBINC
02974  3373  AD 41 1C           LDA SELECT
02975  3376  CD 03 1D           CMP EAS
02976  3379  B0 05              BCS NOBINC
02977  337B  20 77 2D    SBLOK  JSR INCSL
02978  337E  18                 CLC
02979  337F  60                 RTS
02980  3380  38          NOBINC SEC






DISASS128.ASM......PAGE 0058

LINE# LOC   CODE        LINE


02981  3381  60                 RTS
02982  3382              ;*********************************
02983  3382  20 2E       MBYTE  .BYTE ' .BYTE ',0
02983  3389  00 
02984  338A  20 2E       MWORD  .BYTE ' .WORD ',0
02984  3391  00 
02985  3392  20 2E       MDBYTE .BYTE ' .DBYTE ',0
02985  339A  00 
02986  339B              ;*********************************
02987  339B              ;.FIL 0:TABLE.ASM
02988  339B              ;*********************************
02989  339B              ;.END
02990  339B              ;*********************************
02991  339B              ; FILE TABLE.ASM
02992  339B              ;*********************************
02993  339B              ;
02994  339B              ;        DISASSEMBLER128
02995  339B              ;    SYMBOLIC DISASSEMBLER
02996  339B              ;       BY DENTON MARLOWE
02997  339B              ;
02998  339B              ;  (C)1986 BY DENTON MARLOWE
02999  339B              ;
03000  339B              ;*********************************
03001  339B              ;       PRINT MNEMONIC
03002  339B              ;
03003  339B              ; OPCODE IN A
03004  339B              ;
03005  339B              ; BUG ILLEGAL OPCODE WOULD PRINT OUT AS
03006  339B              ;
03007  339B              ; ZZZZ XX ...  .BYTE $XX ;??? ILLEGAL OPCODE
03008  339B              ; WHERE THE "..." WERE THREE NULLS
03009  339B              ; BECAUSE ILLEGAL OPCODE MNEMONIC IS CODES AS 0,0
,0
03010  339B              ;
03011  339B              ;*********************************
03012  339B  A2 03       MNEMON LDX #3          ;3 CHARACTERS
03013  339D  8E 70 1C           STX TEMP        ;COUNTER
03014  33A0  AA                 TAX             ;CODE IS INDEX
03015  33A1  BD 16 35           LDA MCODES,X    ;GET OFFSET
03016  33A4  AA                 TAX             ;INDEX OFFSET
03017  33A5  BD 3E 34    MNLOOP LDA MNAMES,X    ;GET CHARACTER
03018  33A8              ;BEGIN REV 2017-0
03019  33A8  F0 09              BEQ ILLOP       ;ILLEGAL OPCODE MNEMONIC C
HAR IS A NULL
03020  33AA              ;END REV 2017-0
03021  33AA  8E 72 1C           STX SAVX        ;SAVE INDEX
03022  33AD  20 64 28           JSR PCHAR       ;PRINT CHAR
03023  33B0  AE 72 1C           LDX SAVX        ;GET INDEX
03024  33B3              ;BEGIN REV 2017-1
03025  33B3              ILLOP  = *
03026  33B3              ;END REV 2017-0
03027  33B3  E8                 INX             ;NEXT CHAR
03028  33B4  CE 70 1C           DEC TEMP        ;DEC COUNT
03029  33B7  D0 EC              BNE MNLOOP      ;LOOP TILL 0
03030  33B9  60                 RTS             ;RETURN
03031  33BA              ;*********************************
03032  33BA              ;        PRINT OPERAND






DISASS128.ASM......PAGE 0059

LINE# LOC   CODE        LINE


03033  33BA              ;*********************************
03034  33BA  48          PRTASS PHA             ;STACK INDEX
03035  33BB  20 5B 2E           JSR PRTDAT      ;PRINT LINE DATA
03036  33BE  68                 PLA             ;PULL INDEX
03037  33BF  A8                 TAY             ;SAVE INDEX
03038  33C0  A9 EA              LDA #<SUBP
03039  33C2  A2 33              LDX #>SUBP
03040  33C4  4C D4 33           JMP GETOPE      ;LOOK UP ROUTINE
03041  33C7              ;*********************************
03042  33C7  A8          OPERN1 TAY             ;SAVE INDEX
03043  33C8  A9 06              LDA #<SUBS1
03044  33CA  A2 34              LDX #>SUBS1
03045  33CC  4C D4 33           JMP GETOPE      ;LOOK UP ROUTINE
03046  33CF              ;*********************************
03047  33CF  A8          OPERND TAY             ;SAVE INDEX
03048  33D0  A9 22              LDA #<SUBS
03049  33D2  A2 34              LDX #>SUBS
03050  33D4              ;*********************************
03051  33D4              ; LOOK UP AND JMP TO ROUTINE
03052  33D4              ;*********************************
03053  33D4  85 FB       GETOPE STA ZEROUR      ;LOW TABLE
03054  33D6  86 FC              STX ZEROUR+1    ;HIGH TABLE
03055  33D8  B9 16 36           LDA MODES,Y     ;GET OFFSET
03056  33DB  A8                 TAY             ;INDEX OFFSET
03057  33DC  B1 FB              LDA (ZEROUR),Y  ;GET LOW BYTE
03058  33DE  8D 6E 1C           STA ADRS        ;STORE
03059  33E1  C8                 INY             ;INC INDEX
03060  33E2  B1 FB              LDA (ZEROUR),Y  ;GET HIGH BYTE
03061  33E4  8D 6F 1C           STA ADRS+1      ;STORE
03062  33E7  6C 6E 1C           JMP (ADRS)      ;INDIRECT JMP
03063  33EA              ;*********************************
03064  33EA              ; TABLE OF ADDRESSING MODE SUBS
03065  33EA              ;*********************************
03066  33EA              ; MACHINE LANGUAGE ROUTINES
03067  33EA              ;*********************************
03068  33EA              SUBP   = *             ; MODES
03069  33EA  E8 2D       .WORD  PRTONE          ; 0  $00
03070  33EC  E8 2D       .WORD  PRTONE          ; 2  $02
03071  33EE  FE 2D       .WORD  PRTTWO          ; 4  $04
03072  33F0  FE 2D       .WORD  PRTTWO          ; 6  $06
03073  33F2  FE 2D       .WORD  PRTTWO          ; 8  $08
03074  33F4  FE 2D       .WORD  PRTTWO          ; 10 $0A
03075  33F6  23 2E       .WORD  PRTTHE          ; 12 $0C
03076  33F8  23 2E       .WORD  PRTTHE          ; 14 $0E
03077  33FA  23 2E       .WORD  PRTTHE          ; 16 $10
03078  33FC  E8 2D       .WORD  PRTONE          ; 18 $12
03079  33FE  FE 2D       .WORD  PRTTWO          ; 20 $14
03080  3400  FE 2D       .WORD  PRTTWO          ; 22 $16
03081  3402  FE 2D       .WORD  PRTTWO          ; 24 $18
03082  3404  23 2E       .WORD  PRTTHE          ; 26 $1A
03083  3406              ;*********************************
03084  3406              ; CODE ANALYSIS ROUTINES
03085  3406              ;*********************************
03086  3406              SUBS1  = *             ; MODES
03087  3406  DD 2B       .WORD  IMPONE          ; 0  $00






DISASS128.ASM......PAGE 0060

LINE# LOC   CODE        LINE


03088  3408  DD 2B       .WORD  IMPONE          ; 2  $02
03089  340A  58 2B       .WORD  IMMEDT          ; 4  $04
03090  340C  A1 2A       .WORD  ONEBYT          ; 6  $06
03091  340E  A1 2A       .WORD  ONEBYT          ; 8  $08
03092  3410  A1 2A       .WORD  ONEBYT          ; 10 $0A
03093  3412  D6 2A       .WORD  TWOBYT          ; 12 $0C
03094  3414  D6 2A       .WORD  TWOBYT          ; 14 $0E
03095  3416  D6 2A       .WORD  TWOBYT          ; 16 $10
03096  3418  DD 2B       .WORD  IMPONE          ; 18 $12
03097  341A  14 2C       .WORD  RELATV          ; 20 $14
03098  341C  A1 2A       .WORD  ONEBYT          ; 22 $16
03099  341E  A1 2A       .WORD  ONEBYT          ; 24 $18
03100  3420  D6 2A       .WORD  TWOBYT          ; 26 $1A
03101  3422              ;*********************************
03102  3422              ; FINAL PASS ADDRESSING MODES
03103  3422              ;*********************************
03104  3422              SUBS   = *             ; MODES
03105  3422  12 2B       .WORD  ILLEGL          ; 0  $00
03106  3424  53 2B       .WORD  ACC             ; 2  $02
03107  3426  58 2B       .WORD  IMMEDT          ; 4  $04
03108  3428  8F 2B       .WORD  ZEROPG          ; 6  $06
03109  342A  92 2B       .WORD  ZEROX           ; 8  $08
03110  342C  98 2B       .WORD  ZEROY           ; 10 $0A
03111  342E  9F 2B       .WORD  ABSLUT          ; 12 $0C
03112  3430  C4 2B       .WORD  ABSX            ; 14 $0E
03113  3432  CA 2B       .WORD  ABSY            ; 16 $10
03114  3434  D0 2B       .WORD  IMPLID          ; 18 $12
03115  3436  14 2C       .WORD  RELATV          ; 20 $14
03116  3438  FF 2B       .WORD  INDX            ; 22 $16
03117  343A  08 2C       .WORD  INDY            ; 24 $18
03118  343C  EA 2B       .WORD  INDRCT          ; 26 $1A
03119  343E              ;*********************************
03120  343E              ; LIST OF MNEMONICS
03121  343E              ;*********************************
03122  343E              MNAMES = *             ; MCODES
03123  343E  00          .BYTE  0,0,0           ; 0   $00
03123  343F  00 
03123  3440  00 
03124  3441  41 44 43    .BYTE  'ADC'           ; 3   $03
03125  3444  41 4E 44    .BYTE  'AND'           ; 6   $06
03126  3447  41 53 4C    .BYTE  'ASL'           ; 9   $09
03127  344A  42 43 43    .BYTE  'BCC'           ; 12  $0C
03128  344D  42 43 53    .BYTE  'BCS'           ; 15  $0F
03129  3450  42 45 51    .BYTE  'BEQ'           ; 18  $12
03130  3453  42 49 54    .BYTE  'BIT'           ; 21  $15
03131  3456  42 4D 49    .BYTE  'BMI'           ; 24  $18
03132  3459  42 4E 45    .BYTE  'BNE'           ; 27  $1B
03133  345C  42 50 4C    .BYTE  'BPL'           ; 30  $1E
03134  345F  42 52 4B    .BYTE  'BRK'           ; 33  $21
03135  3462  42 56 43    .BYTE  'BVC'           ; 36  $24
03136  3465  42 56 53    .BYTE  'BVS'           ; 39  $27
03137  3468  43 4C 43    .BYTE  'CLC'           ; 42  $2A
03138  346B  43 4C 44    .BYTE  'CLD'           ; 45  $2D
03139  346E  43 4C 49    .BYTE  'CLI'           ; 48  $30
03140  3471  43 4C 56    .BYTE  'CLV'           ; 51  $33






DISASS128.ASM......PAGE 0061

LINE# LOC   CODE        LINE


03141  3474  43 4D 50    .BYTE  'CMP'           ; 54  $36
03142  3477  43 50 58    .BYTE  'CPX'           ; 57  $39
03143  347A  43 50 59    .BYTE  'CPY'           ; 60  $3C
03144  347D  44 45 43    .BYTE  'DEC'           ; 63  $3F
03145  3480  44 45 58    .BYTE  'DEX'           ; 66  $42
03146  3483  44 45 59    .BYTE  'DEY'           ; 69  $45
03147  3486  45 4F 52    .BYTE  'EOR'           ; 72  $48
03148  3489  49 4E 43    .BYTE  'INC'           ; 75  $4B
03149  348C  49 4E 58    .BYTE  'INX'           ; 78  $4E
03150  348F  49 4E 59    .BYTE  'INY'           ; 81  $51
03151  3492  4A 4D 50    .BYTE  'JMP'           ; 84  $54
03152  3495  4A 53 52    .BYTE  'JSR'           ; 87  $57
03153  3498  4C 44 41    .BYTE  'LDA'           ; 90  $5A
03154  349B  4C 44 58    .BYTE  'LDX'           ; 93  $5D
03155  349E  4C 44 59    .BYTE  'LDY'           ; 96  $60
03156  34A1  4C 53 52    .BYTE  'LSR'           ; 99  $63
03157  34A4  4E 4F 50    .BYTE  'NOP'           ; 102 $66
03158  34A7  4F 52 41    .BYTE  'ORA'           ; 105 $69
03159  34AA  50 48 41    .BYTE  'PHA'           ; 108 $6C
03160  34AD  50 48 50    .BYTE  'PHP'           ; 111 $6F
03161  34B0  50 4C 41    .BYTE  'PLA'           ; 114 $72
03162  34B3  50 4C 50    .BYTE  'PLP'           ; 117 $75
03163  34B6  52 4F 4C    .BYTE  'ROL'           ; 120 $78
03164  34B9  52 4F 52    .BYTE  'ROR'           ; 123 $7B
03165  34BC  52 54 49    .BYTE  'RTI'           ; 126 $7E
03166  34BF  52 54 53    .BYTE  'RTS'           ; 129 $81
03167  34C2  53 42 43    .BYTE  'SBC'           ; 132 $84
03168  34C5  53 45 43    .BYTE  'SEC'           ; 135 $87
03169  34C8  53 45 44    .BYTE  'SED'           ; 138 $8A
03170  34CB  53 45 49    .BYTE  'SEI'           ; 141 $8D
03171  34CE  53 54 41    .BYTE  'STA'           ; 144 $90
03172  34D1  53 54 58    .BYTE  'STX'           ; 147 $93
03173  34D4  53 54 59    .BYTE  'STY'           ; 150 $96
03174  34D7  54 41 58    .BYTE  'TAX'           ; 153 $99
03175  34DA  54 41 59    .BYTE  'TAY'           ; 156 $9C
03176  34DD  54 53 58    .BYTE  'TSX'           ; 159 $9F
03177  34E0  54 58 41    .BYTE  'TXA'           ; 162 $A2
03178  34E3  54 58 53    .BYTE  'TXS'           ; 165 $A5
03179  34E6  54 59 41    .BYTE  'TYA'           ; 168 $A8
03180  34E9              ;*********************************
03181  34E9              ; QUASI-OPCODES
03182  34E9              ;*********************************
03183  34E9  41 53 4F    .BYTE  'ASO'           ; 171 $AB
03184  34EC  52 4C 41    .BYTE  'RLA'           ; 174 $AE
03185  34EF  4C 53 45    .BYTE  'LSE'           ; 177 $B1
03186  34F2  52 52 41    .BYTE  'RRA'           ; 180 $B4
03187  34F5  41 58 53    .BYTE  'AXS'           ; 183 $B7
03188  34F8  4C 41 58    .BYTE  'LAX'           ; 186 $BA
03189  34FB  44 43 4D    .BYTE  'DCM'           ; 189 $BD
03190  34FE  49 4E 53    .BYTE  'INS'           ; 192 $C0
03191  3501  41 4C 52    .BYTE  'ALR'           ; 195 $C3
03192  3504  41 52 52    .BYTE  'ARR'           ; 198 $C6
03193  3507  4F 41 4C    .BYTE  'OAL'           ; 201 $C9
03194  350A  53 41 58    .BYTE  'SAX'           ; 204 $CC
03195  350D  4E 4F 50    .BYTE  'NOP'           ; 207 $CF






DISASS128.ASM......PAGE 0062

LINE# LOC   CODE        LINE


03196  3510  53 4B 42    .BYTE  'SKB'           ; 210 $D2
03197  3513  53 4B 57    .BYTE  'SKW'           ; 213 $D5
03198  3516              ;*********************************
03199  3516              ; TABLE OF MNEMONIC CODES
03200  3516              ;*********************************
03201  3516              ;
03202  3516              ;A MNEMONIC'S CODE IS ITS OFFSET
03203  3516              ;    INTO MNAMES, THE LIST OF
03204  3516              ;         MNEONIC NAMES.
03205  3516              ;
03206  3516              ;*********************************
03207  3516              MCODES = *
03208  3516              ;     0X  1X  2X  3X  4X  5X  6X  7X
03209  3516              ; 0X  BRK ORA KIL SLO NOP ORA ASL SLO
03210  3516  21          .BYTE  $21,$69,$00,$00,$00,$69,$09,$00
03210  3517  69 
03210  3518  00 
03210  3519  00 
03210  351A  00 
03210  351B  69 
03210  351C  09 
03210  351D  00 
03211  351E              ;     8X  9X  AX  BX  CX  DX  EX  FX
03212  351E                                     ;PHP ORA ASL ANC NOP ORA A
SL SLO
03213  351E  6F          .BYTE  $6F,$69,$09,$00,$00,$69,$09,$00
03213  351F  69 
03213  3520  09 
03213  3521  00 
03213  3522  00 
03213  3523  69 
03213  3524  09 
03213  3525  00 
03214  3526              ; 1X  BPL ORA KIL SLO NOP ORA ASL SLO
03215  3526  1E          .BYTE  $1E,$69,$00,$00,$00,$69,$09,$00
03215  3527  69 
03215  3528  00 
03215  3529  00 
03215  352A  00 
03215  352B  69 
03215  352C  09 
03215  352D  00 
03216  352E                                     ;CLC ORA NOP SLO NOP ORA A
SL SLO
03217  352E  2A          .BYTE  $2A,$69,$00,$00,$00,$69,$09,$00
03217  352F  69 
03217  3530  00 
03217  3531  00 
03217  3532  00 
03217  3533  69 
03217  3534  09 
03217  3535  00 
03218  3536              ; 2X  JSR AND KIL RLA BIT AND ROL RLA
03219  3536  57          .BYTE  $57,$06,$00,$00,$15,$06,$78,$00
03219  3537  06 
03219  3538  00 
03219  3539  00 






DISASS128.ASM......PAGE 0063

LINE# LOC   CODE        LINE


03219  353A  15 
03219  353B  06 
03219  353C  78 
03219  353D  00 
03220  353E                                     ;PLP ABD ROL ANC BIT AND R
OL RLA
03221  353E  75          .BYTE  $75,$06,$78,$00,$15,$06,$78,$00
03221  353F  06 
03221  3540  78 
03221  3541  00 
03221  3542  15 
03221  3543  06 
03221  3544  78 
03221  3545  00 
03222  3546              ; 3X  BMI AND KIL RLA NOP AND ROL RLA
03223  3546  18          .BYTE  $18,$06,$00,$00,$00,$06,$78,$00
03223  3547  06 
03223  3548  00 
03223  3549  00 
03223  354A  00 
03223  354B  06 
03223  354C  78 
03223  354D  00 
03224  354E              ;     SEC AND NOP RLA NOP AND ROL RLA
03225  354E  87          .BYTE  $87,$06,$00,$00,$00,$06,$78,$00
03225  354F  06 
03225  3550  00 
03225  3551  00 
03225  3552  00 
03225  3553  06 
03225  3554  78 
03225  3555  00 
03226  3556              ; 4X  RTI EOR KIL SRE NOP EOR LSR SRE
03227  3556  7E          .BYTE  $7E,$48,$00,$00,$00,$48,$63,$00
03227  3557  48 
03227  3558  00 
03227  3559  00 
03227  355A  00 
03227  355B  48 
03227  355C  63 
03227  355D  00 
03228  355E              ;     PHA EOR LSR ALR JMP EOR LSR SRE
03229  355E  6C          .BYTE  $6C,$48,$63,$00,$54,$48,$63,$00
03229  355F  48 
03229  3560  63 
03229  3561  00 
03229  3562  54 
03229  3563  48 
03229  3564  63 
03229  3565  00 
03230  3566              ; 5X  BVC EOR KIL SRE NOP EOR LSR SRE
03231  3566  24          .BYTE  $24,$48,$00,$00,$00,$48,$63,$00
03231  3567  48 
03231  3568  00 
03231  3569  00 
03231  356A  00 






DISASS128.ASM......PAGE 0064

LINE# LOC   CODE        LINE


03231  356B  48 
03231  356C  63 
03231  356D  00 
03232  356E              ;     CLI EOR NOP SRE NOP EOR LSR SRE
03233  356E  30          .BYTE  $30,$48,$00,$00,$00,$48,$63,$00
03233  356F  48 
03233  3570  00 
03233  3571  00 
03233  3572  00 
03233  3573  48 
03233  3574  63 
03233  3575  00 
03234  3576              ; 6X  RTS ADC KIL RRA NOP ADC ROR RRA
03235  3576  81          .BYTE  $81,$03,$00,$00,$00,$03,$7B,$00
03235  3577  03 
03235  3578  00 
03235  3579  00 
03235  357A  00 
03235  357B  03 
03235  357C  7B 
03235  357D  00 
03236  357E              ;     PLA ADC ROR ARR JMP ADC ROR RRA
03237  357E  72          .BYTE  $72,$03,$7B,$00,$54,$03,$7B,$00
03237  357F  03 
03237  3580  7B 
03237  3581  00 
03237  3582  54 
03237  3583  03 
03237  3584  7B 
03237  3585  00 
03238  3586              ; 7X  BVS ADC KIL RRA NOP ADC ROR RRA
03239  3586  27          .BYTE  $27,$03,$00,$00,$00,$03,$7B,$00
03239  3587  03 
03239  3588  00 
03239  3589  00 
03239  358A  00 
03239  358B  03 
03239  358C  7B 
03239  358D  00 
03240  358E              ;     SEI ADC NOP RRA NOP ADC ROR RRA
03241  358E  8D          .BYTE  $8D,$03,$00,$00,$00,$03,$7B,$00
03241  358F  03 
03241  3590  00 
03241  3591  00 
03241  3592  00 
03241  3593  03 
03241  3594  7B 
03241  3595  00 
03242  3596              ; 8X  NOP STA NOP SAX STY STA STX SAX
03243  3596  00          .BYTE  $00,$90,$00,$00,$96,$90,$93,$00
03243  3597  90 
03243  3598  00 
03243  3599  00 
03243  359A  96 
03243  359B  90 






DISASS128.ASM......PAGE 0065

LINE# LOC   CODE        LINE


03243  359C  93 
03243  359D  00 
03244  359E              ;     DEY NOP TXA XXA STY STA STX SAX
03245  359E  45          .BYTE  $45,$00,$A2,$00,$96,$90,$93,$00
03245  359F  00 
03245  35A0  A2 
03245  35A1  00 
03245  35A2  96 
03245  35A3  90 
03245  35A4  93 
03245  35A5  00 
03246  35A6              ; 9X  BCC STA KIL AHX STY STA STX SAX 
03247  35A6  0C          .BYTE  $0C,$90,$00,$00,$96,$90,$93,$00
03247  35A7  90 
03247  35A8  00 
03247  35A9  00 
03247  35AA  96 
03247  35AB  90 
03247  35AC  93 
03247  35AD  00 
03248  35AE              ;     TYA STA TXS TAS SHY STA SHX AHX
03249  35AE  A8          .BYTE  $A8,$90,$A5,$00,$00,$90,$00,$00
03249  35AF  90 
03249  35B0  A5 
03249  35B1  00 
03249  35B2  00 
03249  35B3  90 
03249  35B4  00 
03249  35B5  00 
03250  35B6              ; AX  LDY LDA LDX LAX LDY LDA LDX LAX
03251  35B6  60          .BYTE  $60,$5A,$5D,$00,$60,$5A,$5D,$00
03251  35B7  5A 
03251  35B8  5D 
03251  35B9  00 
03251  35BA  60 
03251  35BB  5A 
03251  35BC  5D 
03251  35BD  00 
03252  35BE              ;     TAY LDA TAX LAX LDY LDA LDX LAX
03253  35BE  9C          .BYTE  $9C,$5A,$99,$00,$60,$5A,$5D,$00
03253  35BF  5A 
03253  35C0  99 
03253  35C1  00 
03253  35C2  60 
03253  35C3  5A 
03253  35C4  5D 
03253  35C5  00 
03254  35C6              ; BX  BCS LDA KIL LAX LDY LDA LDX LAX
03255  35C6  0F          .BYTE  $0F,$5A,$00,$00,$60,$5A,$5D,$00
03255  35C7  5A 
03255  35C8  00 
03255  35C9  00 
03255  35CA  60 
03255  35CB  5A 
03255  35CC  5D 






DISASS128.ASM......PAGE 0066

LINE# LOC   CODE        LINE


03255  35CD  00 
03256  35CE              ;     CLV LDA TSX LAS LDY LDA LDX LAX
03257  35CE  33          .BYTE  $33,$5A,$9F,$00,$60,$5A,$5D,$00
03257  35CF  5A 
03257  35D0  9F 
03257  35D1  00 
03257  35D2  60 
03257  35D3  5A 
03257  35D4  5D 
03257  35D5  00 
03258  35D6              ; CX  CPY CMP NOP DCP CPY CMP DEC DCP
03259  35D6  3C          .BYTE  $3C,$36,$00,$00,$3C,$36,$3F,$00
03259  35D7  36 
03259  35D8  00 
03259  35D9  00 
03259  35DA  3C 
03259  35DB  36 
03259  35DC  3F 
03259  35DD  00 
03260  35DE              ;     INY CMP DEX AXS CPY CMP DEC DCP
03261  35DE  51          .BYTE  $51,$36,$42,$00,$3C,$36,$3F,$00
03261  35DF  36 
03261  35E0  42 
03261  35E1  00 
03261  35E2  3C 
03261  35E3  36 
03261  35E4  3F 
03261  35E5  00 
03262  35E6              ; DX  BNE CMP KIL DCP NOP CMP DEC DCP
03263  35E6  1B          .BYTE  $1B,$36,$00,$00,$00,$36,$3F,$00
03263  35E7  36 
03263  35E8  00 
03263  35E9  00 
03263  35EA  00 
03263  35EB  36 
03263  35EC  3F 
03263  35ED  00 
03264  35EE              ;     CLD CMP NOP DCP NOP CMP DEC DCP
03265  35EE  2D          .BYTE  $2D,$36,$00,$00,$00,$36,$3F,$00
03265  35EF  36 
03265  35F0  00 
03265  35F1  00 
03265  35F2  00 
03265  35F3  36 
03265  35F4  3F 
03265  35F5  00 
03266  35F6              ; EX  CPX SBC NOP ISC CPX SBC INC ISC
03267  35F6  39          .BYTE  $39,$84,$00,$00,$39,$84,$4B,$00
03267  35F7  84 
03267  35F8  00 
03267  35F9  00 
03267  35FA  39 
03267  35FB  84 
03267  35FC  4B 
03267  35FD  00 






DISASS128.ASM......PAGE 0067

LINE# LOC   CODE        LINE


03268  35FE              ;     INX SBC NOP SBC CPX SBC INC ISC
03269  35FE  4E          .BYTE  $4E,$84,$66,$00,$39,$84,$4B,$00
03269  35FF  84 
03269  3600  66 
03269  3601  00 
03269  3602  39 
03269  3603  84 
03269  3604  4B 
03269  3605  00 
03270  3606              ; FX  BEQ SBC KIL ISC NOP SBC INC ISC
03271  3606  12          .BYTE  $12,$84,$00,$00,$00,$84,$4B,$00
03271  3607  84 
03271  3608  00 
03271  3609  00 
03271  360A  00 
03271  360B  84 
03271  360C  4B 
03271  360D  00 
03272  360E              ;     SED SBC NOP ISC NOP SBC INC ISC
03273  360E  8A          .BYTE  $8A,$84,$00,$00,$00,$84,$4B,$00
03273  360F  84 
03273  3610  00 
03273  3611  00 
03273  3612  00 
03273  3613  84 
03273  3614  4B 
03273  3615  00 
03274  3616              ;*********************************
03275  3616              ; TABLE OF ADDRESSING MODE CODES
03276  3616              ;*********************************
03277  3616              ;
03278  3616              ; AN ADDRESSING MODE'S CODE IS
03279  3616              ; ITS OFFSET INTO SUBS, THE TABLE
03280  3616              ; OF ADDRESSING MODE SUBROUTINES
03281  3616              ;
03282  3616              ; ILLEGL ; 0  $00
03283  3616              ; ACC    ; 2  $02
03284  3616              ; IMMEDT ; 4  $04
03285  3616              ; ZEROPG ; 6  $06
03286  3616              ; ZEROX  ; 8  $08
03287  3616              ; ZEROY  ; 10 $0A
03288  3616              ; ABSLUT ; 12 $0C
03289  3616              ; ABSX   ; 14 $0E
03290  3616              ; ABSY   ; 16 $10
03291  3616              ; IMPLID ; 18 $12
03292  3616              ; RELATV ; 20 $14
03293  3616              ; INDX   ; 22 $16
03294  3616              ; INDY   ; 24 $18
03295  3616              ; INDRCT ; 26 $1A
03296  3616              ;*********************************
03297  3616              MODES  = * 
03298  3616              ; 0X   0  1 2 3 4 5 6 7
03299  3616  12          .BYTE  18,22,0,0,0,6,6,0
03299  3617  16 
03299  3618  00 






DISASS128.ASM......PAGE 0068

LINE# LOC   CODE        LINE


03299  3619  00 
03299  361A  00 
03299  361B  06 
03299  361C  06 
03299  361D  00 
03300  361E              ;      8  9 A B C D E F
03301  361E  12          .BYTE  18,4,2,0,0,12,12,0
03301  361F  04 
03301  3620  02 
03301  3621  00 
03301  3622  00 
03301  3623  0C 
03301  3624  0C 
03301  3625  00 
03302  3626              ; 1X   0  1 2 3 4 5 6 7
03303  3626  14          .BYTE  20,24,0,0,0,8,8,0
03303  3627  18 
03303  3628  00 
03303  3629  00 
03303  362A  00 
03303  362B  08 
03303  362C  08 
03303  362D  00 
03304  362E              ;      8  9 A B C D E F
03305  362E  12          .BYTE  18,16,0,0,0,14,14,0
03305  362F  10 
03305  3630  00 
03305  3631  00 
03305  3632  00 
03305  3633  0E 
03305  3634  0E 
03305  3635  00 
03306  3636              ; 2X   0  1 2 3 4 5 6 7
03307  3636  0C          .BYTE  12,22,0,0,6,6,6,0
03307  3637  16 
03307  3638  00 
03307  3639  00 
03307  363A  06 
03307  363B  06 
03307  363C  06 
03307  363D  00 
03308  363E              ;.BYTE 12,22,0,0,28,6,6,0
03309  363E              ;      8  9 A B C D E F
03310  363E  12          .BYTE  18,4,2,0,12,12,12,0
03310  363F  04 
03310  3640  02 
03310  3641  00 
03310  3642  0C 
03310  3643  0C 
03310  3644  0C 
03310  3645  00 
03311  3646              ;.BYTE 18,4,2,0,30,12,12,0
03312  3646              ; 3X   0  1 2 3 4 5 6 7
03313  3646  14          .BYTE  20,24,0,0,0,8,8,0
03313  3647  18 






DISASS128.ASM......PAGE 0069

LINE# LOC   CODE        LINE


03313  3648  00 
03313  3649  00 
03313  364A  00 
03313  364B  08 
03313  364C  08 
03313  364D  00 
03314  364E              ;      8  9 A B C D E F
03315  364E  12          .BYTE  18,16,0,0,0,14,14,0
03315  364F  10 
03315  3650  00 
03315  3651  00 
03315  3652  00 
03315  3653  0E 
03315  3654  0E 
03315  3655  00 
03316  3656              ; 4X   0  1 2 3 4 5 6 7
03317  3656  12          .BYTE  18,22,0,0,0,6,6,0
03317  3657  16 
03317  3658  00 
03317  3659  00 
03317  365A  00 
03317  365B  06 
03317  365C  06 
03317  365D  00 
03318  365E              ;      8  9 A B C D E F
03319  365E  12          .BYTE  18,4,2,0,12,12,12,0
03319  365F  04 
03319  3660  02 
03319  3661  00 
03319  3662  0C 
03319  3663  0C 
03319  3664  0C 
03319  3665  00 
03320  3666              ; 5X   0  1 2 3 4 5 6 7
03321  3666  14          .BYTE  20,24,0,0,0,8,8,0
03321  3667  18 
03321  3668  00 
03321  3669  00 
03321  366A  00 
03321  366B  08 
03321  366C  08 
03321  366D  00 
03322  366E              ;      8  9 A B C D E F
03323  366E  12          .BYTE  18,16,0,0,0,14,14,0
03323  366F  10 
03323  3670  00 
03323  3671  00 
03323  3672  00 
03323  3673  0E 
03323  3674  0E 
03323  3675  00 
03324  3676              ; 6X   0  1 2 3 4 5 6 7
03325  3676  12          .BYTE  18,22,0,0,0,6,6,0
03325  3677  16 
03325  3678  00 






DISASS128.ASM......PAGE 0070

LINE# LOC   CODE        LINE


03325  3679  00 
03325  367A  00 
03325  367B  06 
03325  367C  06 
03325  367D  00 
03326  367E              ;      8  9 A B C D E F
03327  367E  12          .BYTE  18,4,2,0,26,12,12,0
03327  367F  04 
03327  3680  02 
03327  3681  00 
03327  3682  1A 
03327  3683  0C 
03327  3684  0C 
03327  3685  00 
03328  3686              ; 7X   0  1 2 3 4 5 6 7
03329  3686  14          .BYTE  20,24,0,0,0,8,8,0
03329  3687  18 
03329  3688  00 
03329  3689  00 
03329  368A  00 
03329  368B  08 
03329  368C  08 
03329  368D  00 
03330  368E              ;      8  9 A B C D E F
03331  368E  12          .BYTE  18,16,0,0,0,14,14,0
03331  368F  10 
03331  3690  00 
03331  3691  00 
03331  3692  00 
03331  3693  0E 
03331  3694  0E 
03331  3695  00 
03332  3696              ; 8X   0  1 2 3 4 5 6 7
03333  3696  00          .BYTE  0,22,0,0,6,6,6,0
03333  3697  16 
03333  3698  00 
03333  3699  00 
03333  369A  06 
03333  369B  06 
03333  369C  06 
03333  369D  00 
03334  369E              ;      8  9 A B C D E F
03335  369E  12          .BYTE  18,0,18,0,12,12,12,0
03335  369F  00 
03335  36A0  12 
03335  36A1  00 
03335  36A2  0C 
03335  36A3  0C 
03335  36A4  0C 
03335  36A5  00 
03336  36A6              ; 9X   0  1 2 3 4 5 6 7
03337  36A6  14          .BYTE  20,24,0,0,8,8,10,0
03337  36A7  18 
03337  36A8  00 
03337  36A9  00 






DISASS128.ASM......PAGE 0071

LINE# LOC   CODE        LINE


03337  36AA  08 
03337  36AB  08 
03337  36AC  0A 
03337  36AD  00 
03338  36AE              ;      8  9 A B C D E F
03339  36AE  12          .BYTE  18,16,18,0,0,14,0,0
03339  36AF  10 
03339  36B0  12 
03339  36B1  00 
03339  36B2  00 
03339  36B3  0E 
03339  36B4  00 
03339  36B5  00 
03340  36B6              ; AX   0  1 2 3 4 5 6 7
03341  36B6  04          .BYTE  4,22,4,0,6,6,6,0
03341  36B7  16 
03341  36B8  04 
03341  36B9  00 
03341  36BA  06 
03341  36BB  06 
03341  36BC  06 
03341  36BD  00 
03342  36BE              ;      8  9 A B C D E F
03343  36BE  12          .BYTE  18,4,18,0,12,12,12,0
03343  36BF  04 
03343  36C0  12 
03343  36C1  00 
03343  36C2  0C 
03343  36C3  0C 
03343  36C4  0C 
03343  36C5  00 
03344  36C6              ; BX   0  1 2 3 4 5 6 7
03345  36C6  14          .BYTE  20,24,0,0,8,8,10,0
03345  36C7  18 
03345  36C8  00 
03345  36C9  00 
03345  36CA  08 
03345  36CB  08 
03345  36CC  0A 
03345  36CD  00 
03346  36CE              ;      8  9 A B C D E F
03347  36CE  12          .BYTE  18,16,18,0,14,14,16,0
03347  36CF  10 
03347  36D0  12 
03347  36D1  00 
03347  36D2  0E 
03347  36D3  0E 
03347  36D4  10 
03347  36D5  00 
03348  36D6              ; CX   0  1 2 3 4 5 6 7
03349  36D6  04          .BYTE  4,22,0,0,6,6,6,0
03349  36D7  16 
03349  36D8  00 
03349  36D9  00 
03349  36DA  06 






DISASS128.ASM......PAGE 0072

LINE# LOC   CODE        LINE


03349  36DB  06 
03349  36DC  06 
03349  36DD  00 
03350  36DE              ;      8  9 A B C D E F
03351  36DE  12          .BYTE  18,4,18,0,12,12,12,0
03351  36DF  04 
03351  36E0  12 
03351  36E1  00 
03351  36E2  0C 
03351  36E3  0C 
03351  36E4  0C 
03351  36E5  00 
03352  36E6              ; DX   0  1 2 3 4 5 6 7
03353  36E6  14          .BYTE  20,24,0,0,0,8,8,0
03353  36E7  18 
03353  36E8  00 
03353  36E9  00 
03353  36EA  00 
03353  36EB  08 
03353  36EC  08 
03353  36ED  00 
03354  36EE              ;      8  9 A B C D E F
03355  36EE  12          .BYTE  18,16,0,0,0,14,14,0
03355  36EF  10 
03355  36F0  00 
03355  36F1  00 
03355  36F2  00 
03355  36F3  0E 
03355  36F4  0E 
03355  36F5  00 
03356  36F6              ; EX   0  1 2 3 4 5 6 7
03357  36F6  04          .BYTE  4,22,0,0,6,6,6,0
03357  36F7  16 
03357  36F8  00 
03357  36F9  00 
03357  36FA  06 
03357  36FB  06 
03357  36FC  06 
03357  36FD  00 
03358  36FE              ;      8  9 A B C D E F
03359  36FE  12          .BYTE  18,4,18,0,12,12,12,0
03359  36FF  04 
03359  3700  12 
03359  3701  00 
03359  3702  0C 
03359  3703  0C 
03359  3704  0C 
03359  3705  00 
03360  3706              ; FX   0  1 2 3 4 5 6 7
03361  3706  14          .BYTE  20,24,0,0,0,8,8,0
03361  3707  18 
03361  3708  00 
03361  3709  00 
03361  370A  00 
03361  370B  08 






DISASS128.ASM......PAGE 0073

LINE# LOC   CODE        LINE


03361  370C  08 
03361  370D  00 
03362  370E              ;      8  9 A B C D E F
03363  370E  12          .BYTE  18,16,0,0,0,14,14,0
03363  370F  10 
03363  3710  00 
03363  3711  00 
03363  3712  00 
03363  3713  0E 
03363  3714  0E 
03363  3715  00 
03364  3716              ;*********************************
03365  3716              ;.FIL 0:SYM.ASM
03366  3716              ;*********************************
03367  3716              ;.END
03368  3716              ;*********************************
03369  3716              ; FILE SYMBOL.ASM
03370  3716              ;*********************************
03371  3716              ;
03372  3716              ;        DISASSEMBLER128
03373  3716              ;    SYMBOLIC DISASSEMBLER
03374  3716              ;       BY DENTON MARLOWE
03375  3716              ;
03376  3716              ;  (C)1986 BY DENTON MARLOWE
03377  3716              ;
03378  3716              ;*********************************
03379  3716              ; SYMBOLIC ROUTINES
03380  3716              ;*********************************
03381  3716              ; SYMBOLIC DISASSEMBLY OPTION
03382  3716              ;*********************************
03383  3716  A9 8A       SOP    LDA #<MSS1      ;LOW BYTE MESSAGE
03384  3718  A0 3A              LDY #>MSS1      ;HIGH BYTE MESSAGE
03385  371A  20 0E 28           JSR STRPNT      ;OUTPUT MESSAGE
03386  371D              ;      JSR CRNO    ;GET KEY PRESS
03387  371D  20 D6 27           JSR CRYS
03388  3720  90 08              BCC SOP1        ;C=0 YES
03389  3722              ;*********************************
03390  3722              ; ABSOLUTE DISASSEMBLY SELECTED
03391  3722              ;*********************************
03392  3722  A9 00              LDA #$00        ;SET SYMBLOIC FLAG
03393  3724  8D 57 1C           STA SYMBOL      ;STORE FLAG
03394  3727  4C 73 37           JMP SY          ;FOR INTERNAL
03395  372A              ;*********************************
03396  372A              ; SYMBOLIC DISASSEMBLY SELECTED
03397  372A              ;*********************************
03398  372A  A9 01       SOP1   LDA #$01        ;SET SYMBOLIC FLAG
03399  372C  8D 57 1C           STA SYMBOL      ;STORE FLAG
03400  372F              ;*********************************
03401  372F              ; SETUP START OF TABLE POINTER
03402  372F              ;*********************************
03403  372F  A9 CD              LDA #<STABLE
03404  3731  8D 5A 1C           STA SYMBOS
03405  3734  8D 58 1C           STA SYMBOP
03406  3737  A9 43              LDA #>STABLE
03407  3739  8D 5B 1C           STA SYMBOS+1






DISASS128.ASM......PAGE 0074

LINE# LOC   CODE        LINE


03408  373C  8D 59 1C           STA SYMBOP+1
03409  373F              ;*********************************
03410  373F              ; CHECK FOR SYMBOL TABLE OPTION
03411  373F              ;*********************************
03412  373F  A9 AE       SYTAB  LDA #<MSS2      ;LOW BYTE MESSAGE
03413  3741  A0 3A              LDY #>MSS2      ;HIGH BYTE MESSAGE
03414  3743  20 0E 28           JSR STRPNT      ;OUTPUT MESSAGE
03415  3746  20 E3 27           JSR CRNO        ;GET KEY PRESS
03416  3749  B0 28              BCS SY          ;C=1 NO
03417  374B              ;*********************************
03418  374B              ; APPEND SYMBOL TABLE
03419  374B              ;*********************************
03420  374B  A9 F2              LDA #<MSS4
03421  374D  A0 3A              LDY #>MSS4
03422  374F  20 0E 28           JSR STRPNT
03423  3752  20 E3 27           JSR CRNO
03424  3755  B0 0A              BCS SOP4
03425  3757  A9 50              LDA #<UTABLE
03426  3759  8D 58 1C           STA SYMBOP
03427  375C  A9 45              LDA #>UTABLE
03428  375E  8D 59 1C           STA SYMBOP+1
03429  3761              ;*********************************
03430  3761              ; GO AND LOAD TABLE
03431  3761              ;*********************************
03432  3761  20 06 39    SOP4   JSR READXX      ;READ FILE
03433  3764  B0 0D              BCS SY          ;C=1 ERROR
03434  3766              ;*********************************
03435  3766              ; SETUP END OF TABLE POINTER
03436  3766              ;*********************************
03437  3766  AD 58 1C           LDA SYMBOP      ;XREF POINTER
03438  3769  8D 5C 1C           STA SYMBOE
03439  376C  AD 59 1C           LDA SYMBOP+1
03440  376F  8D 5D 1C           STA SYMBOE+1
03441  3772  60                 RTS
03442  3773              ;*********************************
03443  3773              ; DEFAULT SYMBOL TABLE END
03444  3773              ;*********************************
03445  3773  A9 50       SY     LDA #<UTABLE
03446  3775  8D 5C 1C           STA SYMBOE
03447  3778  A9 45              LDA #>UTABLE
03448  377A  8D 5D 1C           STA SYMBOE+1
03449  377D  60                 RTS
03450  377E              ;*********************************
03451  377E              ; SET OR RESET SYMBOL TABLE
03452  377E              ;*********************************
03453  377E  AD 5A 1C    SSET   LDA SYMBOS
03454  3781  8D 58 1C           STA SYMBOP
03455  3784  AD 5B 1C           LDA SYMBOS+1
03456  3787  8D 59 1C           STA SYMBOP+1
03457  378A  60                 RTS
03458  378B              ;*********************************
03459  378B              ; EQUATE TABLE SETUP
03460  378B              ;*********************************
03461  378B  AD 51 1C    EQUINT LDA TABINE
03462  378E  8D 4D 1C           STA TABINP






DISASS128.ASM......PAGE 0075

LINE# LOC   CODE        LINE


03463  3791  8D 4F 1C           STA TABINS
03464  3794  AD 52 1C           LDA TABINE+1
03465  3797  8D 4E 1C           STA TABINP+1
03466  379A  8D 50 1C           STA TABINS+1
03467  379D  60                 RTS
03468  379E              ;*********************************
03469  379E              ; ENTRY POINT FOR ADDRESS
03470  379E              ;*********************************
03471  379E  AD 57 1C    SYM    LDA SYMBOL
03472  37A1  F0 43              BEQ SYMEND
03473  37A3  AD 41 1C           LDA SELECT      ;COPY SELECT
03474  37A6  8D 64 1C           STA WORKED      ;ADDRESS INTO
03475  37A9  AD 42 1C           LDA SELECT+1    ;WORKED
03476  37AC  8D 65 1C           STA WORKED+1
03477  37AF  4C B7 37           JMP SYM1        ;CHECK FOR MATCH
03478  37B2              ;*********************************
03479  37B2              ; ENTRY POINT FOR OPCODES
03480  37B2              ;*********************************
03481  37B2  AD 57 1C    SYMOP  LDA SYMBOL
03482  37B5  F0 2F              BEQ SYMEND
03483  37B7              ;*********************************
03484  37B7              ; COMPARE ADDRESS TO SYMBOL TABLE
03485  37B7              ;*********************************
03486  37B7  20 7E 37    SYM1   JSR SSET
03487  37BA  20 87 38    SYM2   JSR GETC
03488  37BD  8D 67 1C           STA WORKER+1
03489  37C0  20 7E 38           JSR INCC
03490  37C3  20 87 38           JSR GETC
03491  37C6  8D 66 1C           STA WORKER
03492  37C9              ;*********************************
03493  37C9  38                 SEC             ;SET CARRY
03494  37CA  AD 66 1C           LDA WORKER
03495  37CD  ED 64 1C           SBC WORKED      ;SUB FROM LOW
03496  37D0  8D 70 1C           STA TEMP        ;STORE RESULT
03497  37D3  AD 67 1C           LDA WORKER+1
03498  37D6  ED 65 1C           SBC WORKED+1    ;SUB FROM HIGH
03499  37D9  0D 70 1C           ORA TEMP        ;OR RESULTS
03500  37DC  F0 0A              BEQ MATCH       ;CHECK FOR MATCH
03501  37DE  20 5A 38           JSR NEXTC       ;IF NOT NEXT
03502  37E1  B0 03              BCS SYMEND      ;END OF TABLE?
03503  37E3  4C BA 37           JMP SYM2        ;NO CHECK NEXT
03504  37E6  18          SYMEND CLC             ;NO MATCHES CLEAR
03505  37E7  60                 RTS             ;RETURN
03506  37E8              ;*********************************
03507  37E8              ; FOUND MATCH
03508  37E8              ;*********************************
03509  37E8  AD 31 1C    MATCH  LDA PASS        ;CHECK PASS
03510  37EB  CD 34 1C           CMP CPASS       ;IS IT LAST
03511  37EE  F0 18              BEQ MATCHS      ;IF SO PRINT
03512  37F0  CD 35 1C           CMP SPASS
03513  37F3  F0 3A              BEQ MATCHT
03514  37F5  20 92 2E           JSR RANGE       ;SYMBOL IN RANGE
03515  37F8  90 3F              BCC MATEXT      ;NO INTERNAL EQ
03516  37FA  20 7E 38           JSR INCC        ;INC TO SYMBOL
03517  37FD  20 87 38           JSR GETC        ;GET FIRST CHAR






DISASS128.ASM......PAGE 0076

LINE# LOC   CODE        LINE


03518  3800  C9 20              CMP #$20        ;SPACE
03519  3802  F0 03              BEQ MATONE      ;NOT EQUATE
03520  3804  4C 09 2F           JMP PUTI        ;PUT IN EQUATE
03521  3807  60          MATONE RTS             ;RETURN
03522  3808              ;*********************************
03523  3808              ; CHECK FOR SYMBOL+1
03524  3808              ;*********************************
03525  3808  20 7E 38    MATCHS JSR INCC        ;INC TO LABEL
03526  380B  20 87 38           JSR GETC        ;GET CHARARCTER
03527  380E  C9 20              CMP #$20        ;IS IT SPACE
03528  3810  D0 1D              BNE MATCHT      ;IF NOT GO ON
03529  3812  38                 SEC             ;SET CARRY
03530  3813  AD 58 1C           LDA SYMBOP      ;GET LOW POINT
03531  3816  E9 09              SBC #$09        ;LAST SYMBOL
03532  3818  48                 PHA             ;PUSH ON STACK
03533  3819  AD 59 1C           LDA SYMBOP+1    ;GET HIGH POINT
03534  381C  E9 00              SBC #$00        ;LAST SYMBOL
03535  381E  A8                 TAY             ;PUT IN Y
03536  381F  68                 PLA             ;GET LO POINT
03537  3820  20 3A 38           JSR STRSYM      ;PRINT SYMBOL
03538  3823  A9 2B              LDA #'+'         ;ASCII +
03539  3825  20 64 28           JSR PCHAR       ;PRINT IT
03540  3828  A9 31              LDA #'1'         ;ASCII 1
03541  382A  20 64 28           JSR PCHAR       ;PRINT IT
03542  382D  38                 SEC             ;C=1 SYMBOL
03543  382E  60                 RTS             ;RETURN
03544  382F              ;*********************************
03545  382F  AD 58 1C    MATCHT LDA SYMBOP      ;LOW BYTE LABEL
03546  3832  AC 59 1C           LDY SYMBOP+1    ;HIGH BYTE LABEL
03547  3835  20 3A 38           JSR STRSYM      ;PRINT LABEL
03548  3838              ;*********************************
03549  3838  38                 SEC             ;MATCH SET CARRY
03550  3839  60          MATEXT RTS             ;RETURN
03551  383A              ;*********************************
03552  383A              ; PRINT SYMBOL
03553  383A              ;*********************************
03554  383A  85 FB       STRSYM STA ZEROUR
03555  383C  84 FC              STY ZEROUR+1
03556  383E  A0 00              LDY #$00
03557  3840  B1 FB       STRSY1 LDA (ZEROUR),Y
03558  3842  F0 0A              BEQ SYEXIT
03559  3844  C9 20              CMP #$20
03560  3846  F0 06              BEQ SYEXIT
03561  3848  20 64 28           JSR PCHAR
03562  384B  C8                 INY
03563  384C  D0 F2              BNE STRSY1
03564  384E  60          SYEXIT RTS
03565  384F  B1 FB       FIXSYM LDA (ZEROUR),Y
03566  3851  F0 FB              BEQ SYEXIT
03567  3853  20 64 28           JSR PCHAR
03568  3856  C8                 INY
03569  3857  4C 4F 38           JMP FIXSYM
03570  385A              ;*********************************
03571  385A              ; INC SYMBOL ADDRESS TABLE POINTER
03572  385A              ;*********************************






DISASS128.ASM......PAGE 0077

LINE# LOC   CODE        LINE


03573  385A  18          NEXTC  CLC
03574  385B  AD 58 1C           LDA SYMBOP
03575  385E  69 08              ADC #$08
03576  3860  8D 58 1C           STA SYMBOP
03577  3863  AD 59 1C           LDA SYMBOP+1
03578  3866  69 00              ADC #$00
03579  3868  8D 59 1C           STA SYMBOP+1
03580  386B  CD 5D 1C           CMP SYMBOE+1
03581  386E  90 0A              BCC COK
03582  3870  D0 0A              BNE NCOK
03583  3872  AD 58 1C           LDA SYMBOP
03584  3875  CD 5C 1C           CMP SYMBOE
03585  3878  B0 02              BCS NCOK
03586  387A  18          COK    CLC
03587  387B  60                 RTS
03588  387C  38          NCOK   SEC
03589  387D  60                 RTS
03590  387E              ;*********************************
03591  387E  EE 58 1C    INCC   INC SYMBOP
03592  3881  D0 03              BNE *+5
03593  3883  EE 59 1C           INC SYMBOP+1
03594  3886  60                 RTS
03595  3887              ;*********************************
03596  3887              ; GET BYTE FROM ADDRESS TABLE
03597  3887              ;*********************************
03598  3887  AD 58 1C    GETC   LDA SYMBOP
03599  388A  85 FB              STA ZEROUR
03600  388C  AD 59 1C           LDA SYMBOP+1
03601  388F  85 FC              STA ZEROUR+1
03602  3891  A0 00              LDY #$00
03603  3893  B1 FB              LDA (ZEROUR),Y
03604  3895  60                 RTS
03605  3896              ;*********************************
03606  3896              ; PRINT EQUATE TABLE
03607  3896              ;*********************************
03608  3896  38          EQUPRT SEC
03609  3897  AD 4F 1C           LDA TABINS
03610  389A  ED 51 1C           SBC TABINE
03611  389D  8D 70 1C           STA TEMP
03612  38A0  AD 50 1C           LDA TABINS+1
03613  38A3  ED 52 1C           SBC TABINE+1
03614  38A6  0D 70 1C           ORA TEMP
03615  38A9  F0 55              BEQ EQUEND
03616  38AB  20 B4 2F           JSR SORT
03617  38AE  20 B5 2C           JSR COMENT
03618  38B1  20 7F 2E           JSR PRTOTH
03619  38B4  A9 84              LDA #<EQUATE
03620  38B6  A0 3B              LDY #>EQUATE
03621  38B8  20 0E 28           JSR STRPNT
03622  38BB  20 51 27           JSR NEWLIN
03623  38BE  20 B5 2C           JSR COMENT
03624  38C1  20 59 2F    EQUOP  JSR GETI
03625  38C4  8D 64 1C           STA WORKED
03626  38C7  20 50 2F           JSR INCI
03627  38CA  20 59 2F           JSR GETI






DISASS128.ASM......PAGE 0078

LINE# LOC   CODE        LINE


03628  38CD  8D 65 1C           STA WORKED+1
03629  38D0  20 7F 2E           JSR PRTOTH
03630  38D3  20 B2 37           JSR SYMOP
03631  38D6  B0 03              BCS EQUOP1
03632  38D8  20 13 2D           JSR PWORK
03633  38DB  A9 3D       EQUOP1 LDA #'='
03634  38DD  20 64 28           JSR PCHAR
03635  38E0  A9 24              LDA #'$'
03636  38E2  20 64 28           JSR PCHAR
03637  38E5  20 16 2D           JSR PWORKD
03638  38E8  20 51 27           JSR NEWLIN
03639  38EB              ;*********************************
03640  38EB  20 50 2F           JSR INCI
03641  38EE  AD 4E 1C           LDA TABINP+1
03642  38F1  CD 52 1C           CMP TABINE+1
03643  38F4  90 CB              BCC EQUOP
03644  38F6  D0 08              BNE EQUEND
03645  38F8  AD 4D 1C           LDA TABINP
03646  38FB  CD 51 1C           CMP TABINE
03647  38FE  90 C1              BCC EQUOP
03648  3900              ;*********************************
03649  3900  20 B5 2C    EQUEND JSR COMENT
03650  3903  4C F0 2E           JMP RESINT
03651  3906              ;*********************************
03652  3906              ; READ CROSS REFERENCE SEQ FILE
03653  3906              ;      INTO SYMBOL TABLE
03654  3906              ;*********************************
03655  3906              ; READ FILE NAME DEFAULT ON CR
03656  3906              ;*********************************
03657  3906  A9 D4       READXX LDA #<MSS3
03658  3908  A0 3A              LDY #>MSS3
03659  390A  20 0E 28           JSR STRPNT
03660  390D  20 E4 FF    SOP2   JSR GETIN
03661  3910  F0 FB              BEQ SOP2
03662  3912  C9 30              CMP #'0'
03663  3914  F0 04              BEQ SOP3
03664  3916  C9 31              CMP #'1'
03665  3918  D0 F3              BNE SOP2
03666  391A  20 D2 FF    SOP3   JSR CHROUT
03667  391D  8D 05 1D           STA TEXTER
03668  3920              ;*********************************
03669  3920  A9 16              LDA #<LOADF
03670  3922  A0 3B              LDY #>LOADF
03671  3924  20 0E 28           JSR STRPNT
03672  3927              ;*********************************
03673  3927  20 6F 27           JSR INSTNG
03674  392A  F0 20              BEQ READXF
03675  392C  98                 TYA
03676  392D  48                 PHA
03677  392E  20 DD 20           JSR INITD
03678  3931  68                 PLA
03679  3932  A8                 TAY
03680  3933  A2 00              LDX #$00
03681  3935  BD 86 3A    XFILE1 LDA NAMS,X
03682  3938  99 7B 1C           STA BUF,Y






DISASS128.ASM......PAGE 0079

LINE# LOC   CODE        LINE


03683  393B  C8                 INY
03684  393C  E8                 INX
03685  393D  E0 04              CPX #$04
03686  393F  D0 F4              BNE XFILE1
03687  3941  98                 TYA
03688  3942  A0 1C              LDY #>BUF
03689  3944  A2 7B              LDX #<BUF
03690  3946  20 BD FF           JSR SETNAM
03691  3949  4C 55 39           JMP REOPEN
03692  394C              ;*********************************
03693  394C              ; DEFAULT FILENAME XRFF0000
03694  394C              ;********************************
03695  394C  A9 0E       READXF LDA #$0E
03696  394E  A0 3A              LDY #>NAME
03697  3950  A2 7C              LDX #<NAME
03698  3952  20 BD FF           JSR SETNAM
03699  3955              ;*********************************
03700  3955              ; OPEN FILE
03701  3955              ;********************************
03702  3955  A9 03       REOPEN LDA #$03
03703  3957  A2 08              LDX #$08
03704  3959  A0 03              LDY #$03
03705  395B  20 BA FF           JSR SETLFS
03706  395E              ;
03707  395E  A9 00              LDA #$00        ;LOAD INTO BANK 1
03708  3960  A2 00              LDX #$00        ;PROGRAM IN BANK 0
03709  3962  20 68 FF           JSR SETBNK
03710  3965              ;
03711  3965  20 C0 FF           JSR OPEN
03712  3968              ;********************************
03713  3968              ; CHECK FOR DISK ERROR
03714  3968              ;*********************************
03715  3968  20 17 27           JSR DISERR
03716  396B  B0 3F              BCS QUITXX
03717  396D              ;*********************************
03718  396D              ; OUTPUT LOADING MESSAGE
03719  396D              ;*********************************
03720  396D  A9 34              LDA #<LOADM     ;MSG LOW
03721  396F  A0 3B              LDY #>LOADM     ;MSG HIGH
03722  3971  20 0E 28           JSR STRPNT      ;OUTPUT MSG
03723  3974              ;*********************************
03724  3974  A9 00              LDA #$00        ;COL COUNTER
03725  3976  8D 70 1C           STA TEMP
03726  3979              ;*********************************
03727  3979              ; INPUT AND LOAD SYMBOL TABLE
03728  3979              ;*********************************
03729  3979  20 BD 39    READX  JSR READS       ;INPUT SYMBOL
03730  397C  20 3B 3A           JSR PUTC
03731  397F  20 63 3A           JSR LINES       ;SCREEN OUT
03732  3982  20 E1 FF           JSR STOP
03733  3985  F0 05              BEQ QUITX
03734  3987  20 B7 FF           JSR READST
03735  398A  F0 ED              BEQ READX
03736  398C              ;*********************************
03737  398C              ;    CLOSE OPEN FILE






DISASS128.ASM......PAGE 0080

LINE# LOC   CODE        LINE


03738  398C              ;*********************************
03739  398C  A9 03       QUITX  LDA #$03
03740  398E  20 C3 FF           JSR CLOSE
03741  3991  20 CC FF           JSR CLRCHN
03742  3994  20 47 2D           JSR CRLF
03743  3997              ;*********************************
03744  3997              ; SET END OF TABLE
03745  3997              ;*********************************
03746  3997  AD 58 1C           LDA SYMBOP
03747  399A  8D 5C 1C           STA SYMBOE
03748  399D  AD 59 1C           LDA SYMBOP+1
03749  39A0  8D 5D 1C           STA SYMBOE+1
03750  39A3              ;*********************************
03751  39A3              ; OUTPUT LOADED MESSAGE
03752  39A3              ;*********************************
03753  39A3  A9 52              LDA #<LOADC
03754  39A5  A0 3B              LDY #>LOADC
03755  39A7  20 0E 28           JSR STRPNT
03756  39AA  18                 CLC
03757  39AB  60                 RTS
03758  39AC              ;*********************************
03759  39AC              ; OUTPUT ERROR MESSAGE
03760  39AC              ;*********************************
03761  39AC  A9 03       QUITXX LDA #$03
03762  39AE  20 C3 FF           JSR CLOSE
03763  39B1  20 CC FF           JSR CLRCHN
03764  39B4  A9 69              LDA #<LOADE
03765  39B6  A0 3B              LDY #>LOADE
03766  39B8  20 0E 28           JSR STRPNT
03767  39BB  38                 SEC
03768  39BC  60                 RTS
03769  39BD              ;*********************************
03770  39BD              ; READ SYMBOL FROM FILE
03771  39BD              ;*********************************
03772  39BD  A2 03       READS  LDX #$03        ;FILE NUMBER
03773  39BF  20 C6 FF           JSR CHKIN       ;FILE IS INPUT
03774  39C2  A0 02              LDY #$02        ;COUNTER
03775  39C4  20 CF FF           JSR CHRIN       ;INPUT CHAR
03776  39C7  99 F9 1C           STA SYMBUF,Y    ;1ST CHAR
03777  39CA  20 D2 FF           JSR CHROUT      ;PRITN IT
03778  39CD  C8                 INY             ;INC POINTER
03779  39CE  20 CF FF    READY  JSR CHRIN       ;NEXT CHAR
03780  39D1  99 F9 1C           STA SYMBUF,Y    ;STORE
03781  39D4  20 D2 FF           JSR CHROUT      ;PRINT IT
03782  39D7  C8                 INY             ;INC OFFSET
03783  39D8  C0 08              CPY #$08        ;8 IS FOR NULL
03784  39DA  D0 F2              BNE READY       ;BRANCH IF NOT
03785  39DC  A9 00              LDA #$00        ;NULL MARKER
03786  39DE  99 F9 1C           STA SYMBUF,Y    ;STORE AT END
03787  39E1              ;*********************************
03788  39E1  20 59 2D           JSR SPACE       ;PRINT SPACE
03789  39E4  20 24 2D           JSR DOLLAR      ;PRINT $ SIGN
03790  39E7              ;*********************************
03791  39E7  AD 05 1D           LDA TEXTER
03792  39EA  C9 30              CMP #'0'






DISASS128.ASM......PAGE 0081

LINE# LOC   CODE        LINE


03793  39EC  F0 2F              BEQ STDREF
03794  39EE              ;*********************************
03795  39EE  A0 00              LDY #$00
03796  39F0  20 FD 39           JSR XGET
03797  39F3  C8                 INY
03798  39F4  20 FD 39           JSR XGET
03799  39F7  20 CF FF           JSR CHRIN       ;GET $0D
03800  39FA  4C CC FF           JMP CLRCHN
03801  39FD              ;*********************************
03802  39FD  20 CF FF    XGET   JSR CHRIN
03803  3A00  20 D2 FF           JSR CHROUT
03804  3A03  20 BF 27           JSR BINARY
03805  3A06  0A                 ASL A
03806  3A07  0A                 ASL A
03807  3A08  0A                 ASL A
03808  3A09  0A                 ASL A
03809  3A0A  99 F9 1C           STA SYMBUF,Y
03810  3A0D  20 CF FF           JSR CHRIN
03811  3A10  20 D2 FF           JSR CHROUT
03812  3A13  20 BF 27           JSR BINARY
03813  3A16  19 F9 1C           ORA SYMBUF,Y
03814  3A19  99 F9 1C           STA SYMBUF,Y
03815  3A1C  60                 RTS
03816  3A1D              ;*********************************
03817  3A1D  A0 00       STDREF LDY #$00        ;ZERO OFFSET
03818  3A1F  20 CF FF           JSR CHRIN       ;HIGH BYTES
03819  3A22  99 F9 1C           STA SYMBUF,Y    ;
03820  3A25  8C 73 1C           STY SAVY        ;
03821  3A28  20 F8 27           JSR PRBYT       ;
03822  3A2B  AC 73 1C           LDY SAVY        ;
03823  3A2E  C8                 INY             ;
03824  3A2F  20 CF FF           JSR CHRIN       ;LOW BYTE
03825  3A32  99 F9 1C           STA SYMBUF,Y    ;
03826  3A35  20 F8 27           JSR PRBYT       ;
03827  3A38  4C CC FF           JMP CLRCHN      ;KEYBOARD INPUT
03828  3A3B              ;*********************************
03829  3A3B              ; MOVE SYMBOL FROM BUFFER TO TABLE
03830  3A3B              ;*********************************
03831  3A3B  A0 00       PUTC   LDY #$00
03832  3A3D  AD 58 1C           LDA SYMBOP
03833  3A40  85 FB              STA ZEROUR
03834  3A42  AD 59 1C           LDA SYMBOP+1
03835  3A45  85 FC              STA ZEROUR+1
03836  3A47  B9 F9 1C    PUT    LDA SYMBUF,Y
03837  3A4A  91 FB              STA (ZEROUR),Y
03838  3A4C  C8                 INY
03839  3A4D  C0 09              CPY #$09
03840  3A4F  D0 F6              BNE PUT
03841  3A51  18                 CLC
03842  3A52  AD 58 1C           LDA SYMBOP
03843  3A55  69 09              ADC #$09
03844  3A57  8D 58 1C           STA SYMBOP
03845  3A5A  AD 59 1C           LDA SYMBOP+1
03846  3A5D  69 00              ADC #$00
03847  3A5F  8D 59 1C           STA SYMBOP+1






DISASS128.ASM......PAGE 0082

LINE# LOC   CODE        LINE


03848  3A62  60                 RTS
03849  3A63              ;*********************************
03850  3A63              ; OUTPUT SYMBOL IN 4 COLUMNS
03851  3A63              ;*********************************
03852  3A63  EE 70 1C    LINES  INC TEMP
03853  3A66  A9 03              LDA #$03
03854  3A68  CD 70 1C           CMP TEMP
03855  3A6B  F0 05              BEQ RESET
03856  3A6D  A9 2E              LDA #'.'
03857  3A6F  4C D2 FF           JMP CHROUT
03858  3A72  A9 00       RESET  LDA #$00
03859  3A74  8D 70 1C           STA TEMP
03860  3A77  A9 0D              LDA #$0D
03861  3A79  4C D2 FF           JMP CHROUT
03862  3A7C              ;*********************************
03863  3A7C              ;   COMMAND MESSAGES
03864  3A7C              ;*********************************
03865  3A7C  30 3A       NAME   .BYTE '0:XRLL0000'
03866  3A86  2C 53       NAMS   .BYTE ',S,R'
03867  3A8A              ;*********************************
03868  3A8A  0D          MSS1   .BYTE $0D
03869  3A8B              ; .BYTE 'SYMBOLIC DISASSEMBLY (Y OR N/CR)? '
03870  3A8B  53 59              .BYTE 'SYMBOLIC DISASSEMBLY (Y/CR OR N)? '

03871  3AAD  00                 .BYTE 0
03872  3AAE  0D          MSS2   .BYTE $0D
03873  3AAF  4C 4F              .BYTE 'LOAD USER SYMBOL TABLE (Y OR N/CR)?
 '
03874  3AD3  00                 .BYTE 0
03875  3AD4  0D          MSS3   .BYTE $0D
03876  3AD5  46 4F              .BYTE 'FORMAT 0=STANDARD 1=ASCII : '
03877  3AF1  00                 .BYTE 0
03878  3AF2  0D          MSS4   .BYTE $0D
03879  3AF3  41 50              .BYTE 'APPEND DEFAULT TABLE (Y OR N/CR)? '

03880  3B15  00                 .BYTE 0
03881  3B16  0D          LOADF  .BYTE $0D
03882  3B17  53 59       .BYTE  'SYMBOL TABLE(CR OR D:NAME): '
03883  3B33  00          .BYTE  0
03884  3B34  0D          LOADM  .BYTE $0D,$0D
03884  3B35  0D 
03885  3B36  52 45       .BYTE  'READING SYMBOL TABLE FILE'
03886  3B4F  0D          .BYTE  $0D,$0D
03886  3B50  0D 
03887  3B51  00          .BYTE  0
03888  3B52  0D          LOADC  .BYTE $0D
03889  3B53  53 59       .BYTE  'SYMBOL TABLE LOADED'
03890  3B66  0D          .BYTE  $0D,$0D
03890  3B67  0D 
03891  3B68  00          .BYTE  0
03892  3B69  0D          LOADE  .BYTE $0D
03893  3B6A  53 59       .BYTE  'SYMBOL TABLE NOT LOADED'
03894  3B81  0D          .BYTE  $0D,$0D
03894  3B82  0D 
03895  3B83  00          .BYTE  0
03896  3B84              ;*********************************
03897  3B84  3B 20       EQUATE .BYTE '; EXTERNAL ADDRESS EQUATES'
03898  3B9E  00                 .BYTE 0






DISASS128.ASM......PAGE 0083

LINE# LOC   CODE        LINE


03899  3B9F              ;*********************************
03900  3B9F              ; PATCH CODE AREA
03901  3B9F              ;*********************************
03902  3B9F                     *=*+$0800
03903  439F              ;*********************************
03904  439F              ; BIT INSTRUCTION CODING
03905  439F              ;*********************************
03906  439F              BITOPT = *
03907  439F  A9 57              LDA #<MSB1      ;TABLE TYPE
03908  43A1  A0 25              LDY #>MSB1
03909  43A3  20 0E 28           JSR STRPNT
03910  43A6  20 E4 FF    BOP0   JSR GETIN
03911  43A9  F0 FB              BEQ BOP0
03912  43AB  C9 30              CMP #'0'        ;STANDARD
03913  43AD  F0 12              BEQ BSC
03914  43AF  C9 31              CMP #'1'        ;$2C ABS
03915  43B1  F0 0E              BEQ BSC 
03916  43B3  C9 32              CMP #'2'        ;$24 ZP
03917  43B5  F0 0A              BEQ BSC
03918  43B7  C9 33              CMP #'3'        ;$2C AND $24
03919  43B9  F0 06              BEQ BSC
03920  43BB  C9 0D              CMP #$0D        ;STANDARD
03921  43BD  D0 E7              BNE BOP0
03922  43BF  A9 30              LDA #'0'
03923  43C1              BSC    = *
03924  43C1  48                 PHA             ;STASH INPUT
03925  43C2  20 D2 FF           JSR CHROUT      ;OUTPUT FEEDBACK
03926  43C5  68                 PLA             ;POP INPUT
03927  43C6  49 30              EOR #$30        ;MAKE A NUMBER
03928  43C8  8D CC 43           STA BITFLG      ;SET FLAG
03929  43CB  60                 RTS
03930  43CC              ;*********************************
03931  43CC              ; BIT INSTRUCTION CODING FLAG
03932  43CC              ;*********************************
03933  43CC              BITFLG = *
03934  43CC  AA                 .BYTE $AA
03935  43CD              ;*********************************
03936  43CD              
03937  43CD              ;*********************************
03938  43CD              ; SYMBOL TABLE
03939  43CD              ;*********************************
03940  43CD              ;  KERNAL JUMP TABLE
03941  43CD              ;*********************************
03942  43CD              STABLE = *
03943  43CD  FF                 .BYTE $FF,$80,'IDBYTE',0
03943  43CE  80 
03943  43CF  49 44 
03943  43D5  00 
03944  43D6  FF                 .BYTE $FF,$81,'CINT  ',0
03944  43D7  81 
03944  43D8  43 49 
03944  43DE  00 
03945  43DF  FF                 .BYTE $FF,$84,'IOINIT',0
03945  43E0  84 
03945  43E1  49 4F 






DISASS128.ASM......PAGE 0084

LINE# LOC   CODE        LINE


03945  43E7  00 
03946  43E8  FF                 .BYTE $FF,$87,'RAMTAS',0
03946  43E9  87 
03946  43EA  52 41 
03946  43F0  00 
03947  43F1  FF                 .BYTE $FF,$8A,'RESTOR',0
03947  43F2  8A 
03947  43F3  52 45 
03947  43F9  00 
03948  43FA  FF                 .BYTE $FF,$8D,'VECTOR',0
03948  43FB  8D 
03948  43FC  56 45 
03948  4402  00 
03949  4403  FF                 .BYTE $FF,$90,'SETMSG',0
03949  4404  90 
03949  4405  53 45 
03949  440B  00 
03950  440C  FF                 .BYTE $FF,$93,'SECOND',0
03950  440D  93 
03950  440E  53 45 
03950  4414  00 
03951  4415  FF                 .BYTE $FF,$96,'TKSA  ',0
03951  4416  96 
03951  4417  54 4B 
03951  441D  00 
03952  441E  FF                 .BYTE $FF,$99,'MEMTOP',0
03952  441F  99 
03952  4420  4D 45 
03952  4426  00 
03953  4427  FF                 .BYTE $FF,$9C,'MEMBOT',0
03953  4428  9C 
03953  4429  4D 45 
03953  442F  00 
03954  4430  FF                 .BYTE $FF,$9F,'SCNKEY',0
03954  4431  9F 
03954  4432  53 43 
03954  4438  00 
03955  4439  FF                 .BYTE $FF,$A2,'SETTMO',0
03955  443A  A2 
03955  443B  53 45 
03955  4441  00 
03956  4442  FF                 .BYTE $FF,$A5,'ACPTR ',0
03956  4443  A5 
03956  4444  41 43 
03956  444A  00 
03957  444B  FF                 .BYTE $FF,$A8,'CIOUT ',0
03957  444C  A8 
03957  444D  43 49 
03957  4453  00 
03958  4454  FF                 .BYTE $FF,$AB,'UNTLK ',0
03958  4455  AB 
03958  4456  55 4E 
03958  445C  00 
03959  445D  FF                 .BYTE $FF,$AE,'UNLSN ',0
03959  445E  AE 






DISASS128.ASM......PAGE 0085

LINE# LOC   CODE        LINE


03959  445F  55 4E 
03959  4465  00 
03960  4466  FF                 .BYTE $FF,$B1,'LISTEN',0
03960  4467  B1 
03960  4468  4C 49 
03960  446E  00 
03961  446F  FF                 .BYTE $FF,$B4,'TALK  ',0
03961  4470  B4 
03961  4471  54 41 
03961  4477  00 
03962  4478  FF                 .BYTE $FF,$B7,'READST',0
03962  4479  B7 
03962  447A  52 45 
03962  4480  00 
03963  4481  FF                 .BYTE $FF,$BA,'SETLFS',0
03963  4482  BA 
03963  4483  53 45 
03963  4489  00 
03964  448A  FF                 .BYTE $FF,$BD,'SETNAM',0
03964  448B  BD 
03964  448C  53 45 
03964  4492  00 
03965  4493  FF                 .BYTE $FF,$C0,'OPEN  ',0
03965  4494  C0 
03965  4495  4F 50 
03965  449B  00 
03966  449C  FF                 .BYTE $FF,$C3,'CLOSE ',0
03966  449D  C3 
03966  449E  43 4C 
03966  44A4  00 
03967  44A5  FF                 .BYTE $FF,$C6,'CHKIN ',0
03967  44A6  C6 
03967  44A7  43 48 
03967  44AD  00 
03968  44AE  FF                 .BYTE $FF,$C9,'CHKOUT',0
03968  44AF  C9 
03968  44B0  43 48 
03968  44B6  00 
03969  44B7  FF                 .BYTE $FF,$CC,'CLRCHN',0
03969  44B8  CC 
03969  44B9  43 4C 
03969  44BF  00 
03970  44C0  FF                 .BYTE $FF,$CF,'CHRIN ',0
03970  44C1  CF 
03970  44C2  43 48 
03970  44C8  00 
03971  44C9  FF                 .BYTE $FF,$D2,'CHROUT',0
03971  44CA  D2 
03971  44CB  43 48 
03971  44D1  00 
03972  44D2  FF                 .BYTE $FF,$D5,'LOAD  ',0
03972  44D3  D5 
03972  44D4  4C 4F 
03972  44DA  00 
03973  44DB  FF                 .BYTE $FF,$D8,'SAVE  ',0






DISASS128.ASM......PAGE 0086

LINE# LOC   CODE        LINE


03973  44DC  D8 
03973  44DD  53 41 
03973  44E3  00 
03974  44E4  FF                 .BYTE $FF,$DB,'SETTIM',0
03974  44E5  DB 
03974  44E6  53 45 
03974  44EC  00 
03975  44ED  FF                 .BYTE $FF,$DE,'RDTIM ',0
03975  44EE  DE 
03975  44EF  52 44 
03975  44F5  00 
03976  44F6  FF                 .BYTE $FF,$E1,'STOP  ',0
03976  44F7  E1 
03976  44F8  53 54 
03976  44FE  00 
03977  44FF  FF                 .BYTE $FF,$E4,'GETIN ',0
03977  4500  E4 
03977  4501  47 45 
03977  4507  00 
03978  4508  FF                 .BYTE $FF,$E7,'CLALL ',0
03978  4509  E7 
03978  450A  43 4C 
03978  4510  00 
03979  4511  FF                 .BYTE $FF,$EA,'UDTIM ',0
03979  4512  EA 
03979  4513  55 44 
03979  4519  00 
03980  451A  FF                 .BYTE $FF,$ED,'SCREEN',0
03980  451B  ED 
03980  451C  53 43 
03980  4522  00 
03981  4523  FF                 .BYTE $FF,$F0,'PLOT  ',0
03981  4524  F0 
03981  4525  50 4C 
03981  452B  00 
03982  452C  FF                 .BYTE $FF,$F3,'IOBASE',0
03982  452D  F3 
03982  452E  49 4F 
03982  4534  00 
03983  4535              ;*********************************
03984  4535  FF                 .BYTE $FF,$FA,'NMIVEC',0
03984  4536  FA 
03984  4537  4E 4D 
03984  453D  00 
03985  453E  FF                 .BYTE $FF,$FC,'RESVEC',0
03985  453F  FC 
03985  4540  52 45 
03985  4546  00 
03986  4547  FF                 .BYTE $FF,$FE,'IRQVEC',0
03986  4548  FE 
03986  4549  49 52 
03986  454F  00 
03987  4550              ;*********************************
03988  4550  00          UTABLE .BYTE 0
03989  4551              ;*********************************






DISASS128.ASM......PAGE 0087

LINE# LOC   CODE        LINE


03990  4551              .END


ERRORS = 00000


SYMBOL TABLE

SYMBOL VALUE
 ABSBIT   2B9E    ABSEXT   2BC3    ABSLUT   2B9F    ABSX     2BC4
 ABSY     2BCA    AC0      3204    AC1      3207    ACC      2B53
 ACHECK   31F2    ADRS     1C6E    AFILE    22C1    AGET     22FC
 AGET1    2308    ALINE    3235    ALOP     3247    AOP      228D
 AOP1     2359    AOP2     2383    AOP3     23A8    AOPX     2354
 ASC      23C5    ASCCCC   3180    ASCI1    31AD    ASCII    31A2
 ASCIIQ   31DB    ASCKK    3197    B0000    2A6C    BASIC    1C0D
 BINARY   27BF    BITFLG   43CC    BITOPT   439F    BOP      22B8
 BOP0     43A6    BSC      43C1    BSTUB    0001    BUF      1C7B
 BYABIT   2A3B    BYTES    320A    BYTESX   3232    BYTT     2A13
 BYZBIT   2A16    CASCII   328A    CDATA    1D06    CHKIN    FFC6
 CHKOUT   FFC9    CHRIN    FFCF    CHROUT   FFD2    CLALL    FFE7
 CLOSE    FFC3    CLOSEA   FF4A    CLRCHN   FFCC    COK      387A
 COMENT   2CB5    COMET    2CBB    COMOPT   1C3C    COMPT    2CCB
 CONST0   2974    CONST1   2979    CPASS    1C34    CRLF     2D47
 CRLFPR   28AE    CRNO     27E3    CRNO1    27F0    CRYS     27D6
 CRYS1    27EE    CSHORT   2CC9    CUROFF   CD9F    CURON    CD6F
 DATABE   1D0E    DATABP   1D0A    DATABS   1D0C    DATAO1   310E
 DATAO2   3144    DATAOP   30FF    DATUT    31EC    DBYTES   3296
 DBYTEX   32C3    DECSL    2D98    DEVICE   1C38    DISA     1E4F
 DISASS   1E40    DISB     1E7D    DISC     1F0C    DISERR   2717
 DISFUL   1F09    DISL     29E8    DISL1    29F9    DLOOA    2742
 DLOOC    2738    DLOOE    272C    DLOOP    1EAE    DOLLAR   2D24
 DONE     1F83    DONED    1F64    DOP      1F91    DOP2     2285
 DOP3     2287    DSLINE   29D1    EA       1C3F    EAGOL    1C47
 EAOUT    1C4B    EAS      1D03    EASCI1   326E    EASCII   3273
 EFILE    2CA5    ENDAX    310B    ENDDAT   31EF    EPASS    1C33
 EQUATE   3B84    EQUEND   3900    EQUINT   378B    EQUOP    38C1
 EQUOP1   38DB    EQUPRT   3896    ERRCT    1C79    FILE     21C6
 FILEOK   21C0    FINAL    2A10    FINISH   289B    FIXSYM   384F
 FOP1     2401    FOP2     2403    FOROPT   1C3B    FORWRD   2C3D
 GETBYT   27A2    GETC     3887    GETI     2F59    GETIN    FFE4
 GETOPE   33D4    GETSL    2D80    GETWRD   277E    GFILE0   21B4
 HEADER   28CD    HEADES   2920    HEADFX   2948    HEADOK   293A
 HEADSY   293B    HEXA     2964    ILLEGL   2B12    ILLMSG   2DD4
 ILLOP    33B3    IMEXIT   2B8D    IMMEDT   2B58    IMPLI1   2BDE
 IMPLID   2BD0    IMPONE   2BDD    INCC     387E    INCI     2F50
 INCIE    2F48    INCSL    2D77    INDCMP   FF7A    INDFET   FF74
 INDRCT   2BEA    INDSTA   FF77    INDX     2BFF    INDY     2C08
 INEND    27A1    INENX    27BE    INIT     24A9    INITD    20DD
 INITIN   2EB8    INSTN1   2771    INSTNG   276F    INTCH    2F77
 INTCHA   2F68    INTCHK   2F74    INTEND   2FB0    INTEXT   2F46
 INTMAT   2FB2    INTOUT   309F    INTPR    30AA    INTPRM   30D1
 INTPRS   30CC    INTPRT   3089    INTSA    2DA4    INTSET   2ECA
 IPASS    1C32    ISKIP    2B4C    LARGE    301A    LINECK   26D8








SYMBOL TABLE

SYMBOL VALUE
 LINECO   2716    LINECT   1C77    LINEFL   1CDF    LINEOK   290F
 LINES    3A63    LISTCT   1C76    LOADC    3B52    LOADE    3B69
 LOADF    3B16    LOADM    3B34    LOOP1    30A5    LOOP2    30F9
 LPAREN   2D29    LTITLE   299A    LTITLS   29C4    MATCH    37E8
 MATCHS   3808    MATCHT   382F    MATEXT   3839    MATONE   3807
 MBYTE    3382    MCODES   3516    MDBYTE   3392    MEMEND   8000
 MEMSIZ   0039    MNAMES   343E    MNEMON   339B    MNLOOP   33A5
 MODES    3616    MPASS    1E11    MSA1     25DC    MSA2     25FE
 MSA3     2616    MSAOP    25BD    MSB1     2557    MSB4     2698
 MSB5     26B8    MSD1     24C4    MSD2     24D6    MSD4     24E6
 MSD4A    2500    MSD5     2513    MSF1     2454    MSF2     2470
 MSG      2407    MSG1     2484    MSG2     24AB    MSG5     262C
 MSGBIT   2DB1    MSGBZP   2DB9    MSGDIS   1E2D    MSGEND   2DCF
 MSGERR   1E23    MSR1     252F    MSS1     3A8A    MSS2     3AAE
 MSS3     3AD4    MSS4     3AF2    MWORD    338A    NAME     3A7C
 NAMS     3A86    NASCII   327B    NBUF     1CE3    NCHARS   1CE2
 NCOK     387C    NDATA    1D08    NEGREL   2DCB    NEWEXT   276E
 NEWLIN   2751    NEXLIN   28C0    NEXPTR   28BD    NEXPTS   2910
 NEXTBY   3369    NEXTC    385A    NEXTP    1EDF    NEXTSL   2D5E
 NOASC    3294    NOBINC   3380    NOFILE   21C4    NOHEX    27D2
 NOID     21D7    NOINC    2D75    NOPRT    226A    NOTABS   233F
 NPRAD    2D01    NPRAD1   2D02    OFFSET   1C43    OFILE    21DA
 OFILE1   21ED    OFILE2   21F2    OFILE3   221C    OFILE4   2230
 OFILED   21CF    ONEBIT   2AA0    ONEBX    2ACF    ONEBY    2ACC
 ONEBYT   2AA1    OPCPUT   2B0B    OPCSYM   2B0E    OPEN     FFC0
 OPERN1   33C7    OPERND   33CF    ORGIN    2C8F    OUFILE   2199
 OUTPUT   1C39    P1       2CF8    PAGECT   1C74    PAGER1   2909
 PASS     1C31    PAUS1    31D4    PAUSE    1ED8    PCHAR    2864
 PEXIT    2899    PFILE0   1FB1    PFILE1   1FB3    PMSG     1E17
 POSREL   2DC7    POVER    2CF5    PRAD     2CDE    PRBYT    27F8
 PRBYTS   27F2    PREND    30F6    PRFILE   20AB    PRIMM    FF7D
 PRIN     2879    PRINT    226C    PRLA     2CD4    PRO2RD   2085
 PROGED   1FF9    PROGM    24A5    PROGOK   20DC    PROGRD   1FE4
 PRTASS   33BA    PRTDAF   2E77    PRTDAL   2323    PRTDAS   2310
 PRTDAT   2E5B    PRTEST   2E54    PRTGET   2231    PRTNEX   231B
 PRTNU1   2833    PRTNU2   283A    PRTNU3   283B    PRTNUM   282A
 PRTOK    30E9    PRTON1   2DF6    PRTONE   2DE8    PRTOT1   2E8A
 PRTOTH   2E7F    PRTPAG   281F    PRTTH1   2E49    PRTTHE   2E23
 PRTTW1   2E18    PRTTWO   2DFE    PSELEC   2D0A    PUIT     2F23
 PUT      3A47    PUTC     3A3B    PUTI     2F09    PWORK    2D13
 PWORKD   2D16    Q00000   325C    QUITS    1F12    QUITX    398C
 QUITXX   39AC    QUTERR   1F29    RANG     2EA4    RANGE    2E92
 READS    39BD    READST   FFB7    READX    3979    READXF   394C
 READXX   3906    READY    39CE    RELATV   2C14    RELND    2C46
 RELNEG   2C71    RELP     2C83    RELPC    2C64    RELPM    2C75
 RELPUT   2C60    RELSYM   2C63    REOPEN   3955    RESET    3A72
 RESINT   2EF0    ROPT     1C37    ROUT     2EB6    RPAREN   2D2E
 S3       3002    SA       1C3D    SAGOL    1C45    SAOUT    1C49
 SAVA     1C71    SAVEE    1C6C    SAVEP    1C68    SAVES    1C6A
 SAVINT   2ED7    SAVX     1C72    SAVY     1C73    SBLOK    337B
 SCREN    288D    SCRNO1   295A    SCROFF   294B    SCRON    295B
 SELECT   1C41    SEMIC    2D1F    SETBNK   FF68    SETLFS   FFBA
 SETMSG   FF90    SETNAM   FFBD    SEXIT    281E    SKIPER   3188
 SLOK     2D70    SMALL    301D    SMALLP   1C55    SMALLS   1C53
 SOP      3716    SOP1     372A    SOP2     390D    SOP3     391A








SYMBOL TABLE

SYMBOL VALUE
 SOP4     3761    SORT     2FB4    SORT1    2FC9    SORT2    2FD8
 SORT3    305A    SORT4    3086    SORTOK   3083    SOUT     2814
 SPAC     2D51    SPAC6    2D4C    SPACE    2D59    SPACM    2D4E
 SPASS    1C35    SSET     377E    STABLE   43CD    STARTD   1C0F
 STARTS   20FE    STDREF   3A1D    STOP     FFE1    STRPNT   280E
 STRSY1   3840    STRSYM   383A    SUBP     33EA    SUBS     3422
 SUBS1    3406    SY       3773    SYEXIT   384E    SYM      379E
 SYM1     37B7    SYM2     37BA    SYMBOE   1C5C    SYMBOL   1C57
 SYMBOP   1C58    SYMBOS   1C5A    SYMBUF   1CF9    SYMEND   37E6
 SYMOP    37B2    SYTAB    373F    T2       3005    TABINE   1C51
 TABINP   1C4D    TABINS   1C4F    TDATA    1D10    TEMP     1C70
 TEXTER   1D05    TWOB     2B11    TWOBIT   2AD5    TWOBX    2B08
 TWOBY    2B05    TWOBYT   2AD6    UTABLE   4550    UYMBOE   1C62
 UYMBOP   1C5E    UYMBOS   1C60    VERSON   1CE1    VICREG   D011
 WIND1    217C    WIND2    217E    WINDOP   2140    WINDOW   1C3A
 WORD1    32DB    WORDM    3321    WORDPT   3315    WORDS    32C6
 WORDS2   3351    WORDS3   3363    WORDSX   3312    WORDSY   331B
 WORDXX   3366    WORKED   1C64    WORKER   1C66    WREADY   4D37
 WRITE    24A1    XFILE1   3935    XGET     39FD    XINDEX   2D33
 XOP0     23DC    XOP1     23EC    XOP2     23EE    XOPT     1C36
 XTITLE   297E    XTITLS   29B7    YINDEX   2D3D    YSHEX    27D4
 ZERBIT   2B8E    ZEROLG   00FB    ZEROPG   2B8F    ZEROUR   00FB
 ZEROX    2B92    ZEROY    2B98   

END OF ASSEMBLY

CROSS REFERENCE......PAGE    1


* ABSBIT $2B9E  1899
  ABSEXT $2BC3  1912  1917
  ABSLUT $2B9F  1903  3111
  ABSX   $2BC4  1921  3112
  ABSY   $2BCA  1926  3113
  AC0    $3204  2780  2784  2786
  AC1    $3207  2782  2787
  ACC    $2B53  1850  3106
  ACHECK $31F2  2740  2778
  ADRS   $1C6E   216   488   489   494   496   535   538   642   644   653

                 655   664   666   680   682   688   690   937   958   961

                 973   976  1247  1248  1257  1262  3058  3061  3062
  AFILE  $22C1   870   875
  AGET   $22FC   901   905
  AGET1  $2308   891   900   906
  ALINE  $3235  2801  2810
  ALOP   $3247  2821  2839
* AOP    $228D   846
  AOP1   $2359   946  1008
* AOP2   $2383   968
  AOP3   $23A8   986   987   999
  AOPX   $2354   939   941
  ASC    $23C5   989   991   993   995   997  1000
  ASCCCC $3180  2702  2708  2721
  ASCI1  $31AD  2734  2738  2740
  ASCII  $31A2  2736  2746  2748  2760
  ASCIIQ $31DB  2741  2744  2762
  ASCKK  $3197  2723  2732
  B0000  $2A6C  1650  1652  1654  1656  1676  1678  1680  1683  1686  1689

                1692  1698
  BASIC  $1C0D    31    36
  BINARY $27BF  1268  1273  1284  3804  3812
  BITFLG $43CC  1587  1637  1663  3928  3933
  BITOPT $439F   842  3906
  BOP    $22B8   861   864
  BOP0   $43A6  3910  3911  3921
  BSC    $43C1  3913  3915  3917  3919  3923
  BSTUB  $0001     9    30
  BUF    $1C7B   231   468   587   588   722   871   877   878  1237  1267

                1272  3682  3688  3689
  BYABIT $2A3B  1594  1662
  BYTES  $320A  2785  2791
  BYTESX $3232  2793  2806
  BYTT   $2A13  1583  1609  1626  1701
  BYZBIT $2A16  1592  1636
  CASCII $328A  1829  1866  2816  2822  2857
  CDATA  $1D06   263   294   913   926   942   946   950  1004  1005  2662

                2666  2672  2687
  CHKIN  $FFC6    72   480   562   893  3773
  CHKOUT $FFC9    81   811  1405  1414
  CHRIN  $FFCF    73   481   483   490   563   564   565   898   901  1236

                1301  1310  3775  3779  3799  3802  3810  3818  3824
  CHROUT $FFD2    71  1000  1205  1207  1209  1408  1417  1424  3666  3777

                3781  3803  3811  3857  3861  3925
  CLALL  $FFE7   107   141
  CLOSE  $FFC3    82   382   424   504   580   603   634   778   907  1174








CROSS REFERENCE......PAGE    2


                3740  3762
* CLOSEA $FF4A   102
  CLRCHN $FFCC    75   426   505   581   779   815   908  1409  1418  3741

                3763  3800  3827
  COK    $387A  3581  3586
  COMENT $2CB5  1180  1705  2045  2054  2716  2735  2766  3617  3623  3649

  COMET  $2CBB  1724  1915  1940  1950  2054  2057
* COMOPT $1C3C   169
  COMPT  $2CCB  2064  2067
  CONST0 $2974  1380  1387  1549
  CONST1 $2979  1383  1390  1550
  CPASS  $1C34   160   303   357  1153  1606  1700  1857  2707  2733  2737

                2763  2792  2869  2889  3510
  CRLF   $2D47   300   524   556   916  1224  1445  2155  3742
  CRLFPR $28AE  1432  1443  1452  1498
  CRNO   $27E3   674  1310  3415  3423
  CRNO1  $27F0  1306  1312  1314  1317
  CRYS   $27D6   796   833  1015  1027  1301  3387
  CRYS1  $27EE  1303  1305  1315
  CSHORT $2CC9  2060  2063
* CUROFF $CD9F    99
* CURON  $CD6F    98
  DATABE $1D0E   267   849   854  2357  2360
  DATABP $1D0A   265   847   852
  DATABS $1D0C   266   848   853
  DATAO1 $310E  2663  2666  2688
  DATAO2 $3144  2686  2692
  DATAOP $30FF  1582  2659
  DATUT  $31EC  2717  2728  2764  2771
  DBYTES $3296  2787  2868
  DBYTEX $32C3  2870  2884
  DECSL  $2D98   532  1646  1672  1904  1905  1916  1941  1951  2211  2260

                2281  2282  2715  2767
  DEVICE $1C38   165   323   342   345   350   378   386   393   403   408

                 411   419   451  1155  1225  1401  1410  1419  1444  1447

                1461  1466  1479  1530  2287  2292  2294  2749  2752  2757

  DISA   $1E4F   292   374
  DISASS $1E40   153   282
  DISB   $1E7D   304   311
  DISC   $1F0C   359   375
  DISERR $2717   600   772   890  1185  3715
  DISFUL $1F09   358   361   374
  DISL   $29E8  1588  1595  1603  1639  1658  1665  1694
  DISL1  $29F9  1607  1613
  DLOOA  $2742  1208  1211
  DLOOC  $2738  1193  1203
  DLOOE  $272C  1194  1196
  DLOOP  $1EAE   306   309   330   336   338   353
  DOLLAR $2D24   522  1762  1792  1819  1861  2039  2126  2802  2849  2881

                2922  2959  3789
  DONE   $1F83   421   426
  DONED  $1F64   405   413
  DOP    $1F91   285   450
  DOP2   $2285   834   837
  DOP3   $2287   836   838
  DSLINE $29D1   330  1582







CROSS REFERENCE......PAGE    3


  EA     $1C3F   174   370   372   499   501   654   656   703   705  2174

                2178
  EAGOL  $1C47   178   704   706  2336  2340
  EAOUT  $1C4B   180   369   371   689   691
  EAS    $1D03   261  2694  2697  2709  2711  2724  2726  2971  2975
  EASCI1 $326E  2834  2841
  EASCII $3273  2823  2838  2841  2845
  EFILE  $2CA5   376  1172  2045
  ENDAX  $310B  2660  2664  2668
  ENDDAT $31EF  2664  2773
  EPASS  $1C33   159   305  1753  1783  1970  2722  2915  2946
  EQUATE $3B84  3619  3620  3897
  EQUEND $3900  3615  3644  3649
  EQUINT $378B   308  3461
  EQUOP  $38C1  3624  3643  3647
  EQUOP1 $38DB  3631  3633
  EQUPRT $3896   328  3608
  ERRCT  $1C79   227   318   319   399   400  1813  1815
  FILE   $21C6   729   731
* FILEOK $21C0   728
  FINAL  $2A10  1625  1726
  FINISH $289B   422  1432  1436  1457  1503  1526
  FIXSYM $384F  2101  2619  3565  3569
  FOP1   $2401  1028  1031
  FOP2   $2403  1030  1032
  FOROPT $1C3B   168  1032  2059  2085  2099  2238  2254  2275  2295  2309

  FORWRD $2C3D  1983  1985
  GETBYT $27A2  1255  1260  1267
  GETC   $3887  3487  3490  3517  3526  3598
  GETI   $2F59  2446  2462  2465  2502  2505  2516  2527  2611  2614  3624

                3627
  GETIN  $FFE4    74   335   351   986  2745  2758  3660  3910
  GETOPE $33D4  3040  3045  3053
  GETSL  $2D80  1590  1604  1619  1644  1670  1715  1746  1775  1778  1820

                1862  1906  1931  1981  2011  2196  2236  2248  2252  2265

                2269  2273  2803  2815  2821  2827  2850  2876  2879  2899

                2903
  GETWRD $277E   641   652   663   679   687   936   956   971  1246
  GFILE0 $21B4   722   726
  HEADER $28CD   325  1461
* HEADES $2920  1507
  HEADFX $2948  1523  1526
  HEADOK $293A  1502  1517
  HEADSY $293B  1521  2606
  HEXA   $2964  1337  1342  1545
  ILLEGL $2B12  1813  3105
  ILLMSG $2DD4  1844  1845  2232
  ILLOP  $33B3  3019  3025
  IMEXIT $2B8D  1858  1867  1877
  IMMEDT $2B58  1855  3089  3107
  IMPLI1 $2BDE  1932  1934  1936  1938
  IMPLID $2BD0  1931  3114
  IMPONE $2BDD  1937  3087  3088  3096
  INCC   $387E  3489  3516  3525  3591
  INCI   $2F50  2439  2464  2476  2504  2511  2518  2613  2626  3626  3640

  INCIE  $2F48  2424  2425  2433







CROSS REFERENCE......PAGE    4


  INCSL  $2D77   375   493   576  1643  1669  1745  1774  1777  1855  1908

                1909  1914  1939  1949  1968  2180  2188  2251  2268  2272

                2713  2765  2878  2902  2977
* INDCMP $FF7A   105
* INDFET $FF74   103
  INDRCT $2BEA  1945  3118
* INDSTA $FF77   104
  INDX   $2BFF  1955  3116
  INDY   $2C08  1961  3117
  INEND  $27A1  1251  1259  1263
  INENX  $27BE  1271  1280
  INIT   $24A9   620   621  1060
  INITD  $20DD   474   619   739   866  3677
  INITIN $2EB8   286  2357
  INSTN1 $2771  1236  1240
  INSTNG $276F   463   716   860  1235  1249  3673
  INTCH  $2F77  2462  2479  2483
  INTCHA $2F68  2083  2456
  INTCHK $2F74  2407  2461
  INTEND $2FB0  2480  2485
  INTEXT $2F46  2408  2427
  INTMAT $2FB2  2474  2487
  INTOUT $309F  2603  2606
  INTPR  $30AA  2611  2638
  INTPRM $30D1  2622  2625
  INTPRS $30CC  2618  2623
  INTPRT $3089   409  2596
  INTSA  $2DA4   292   485  2219
  INTSET $2ECA  2366  2461  2492  2592
  IPASS  $1C32   158  1751  1781  1992  2913  2944
  ISKIP  $2B4C  1830  1842
  LARGE  $301A  2531  2535
  LINECK $26D8   332  1152
  LINECO $2716  1154  1157  1168  1181
  LINECT $1C77   226   312   315  1218  1220  2297  2298
  LINEFL $1CDF   245   320   321  1162  1165  1177  1178  1221  1223
  LINEOK $290F  1456  1463  1492
  LINES  $3A63  3731  3852
  LISTCT $1C76   225   317  1433  1434  1438  1453  1454  1499  1500  1521

  LOADC  $3B52  3753  3754  3888
  LOADE  $3B69  3764  3765  3892
  LOADF  $3B16  3669  3670  3881
  LOADM  $3B34  3720  3721  3884
  LOOP1  $30A5  2609  2641
  LOOP2  $30F9  2635  2640
  LPAREN $2D29  1945  1955  1961  2131
  LTITLE $299A  1480  1481  1556
  LTITLS $29C4  1513  1514  1562
  MATCH  $37E8  3500  3509
  MATCHS $3808  3511  3525
  MATCHT $382F  3513  3528  3545
  MATEXT $3839  3515  3550
  MATONE $3807  3519  3521
  MBYTE  $3382  1816  1817  2796  2797  2983
  MCODES $3516  3015  3207
  MDBYTE $3392  2873  2874  2985







CROSS REFERENCE......PAGE    5


  MEMEND $8000   145   146   148
  MEMSIZ $0039    94   147   149   528   530
  MNAMES $343E  3017  3122
  MNEMON $339B  1621  3012
  MNLOOP $33A5  3017  3029
  MODES  $3616  3055  3297
  MPASS  $1E11   275   295   296
  MSA1   $25DC   933   934  1105
  MSA2   $25FE   953   954  1108
  MSA3   $2616   968   969  1111
  MSAOP  $25BD   857   858  1102
  MSB1   $2557  1091  3907  3908
  MSB4   $2698  1012  1013  1126
  MSB5   $26B8  1024  1025  1130
  MSD1   $24C4   638   639   676   677  1066
  MSD2   $24D6   649   650   684   685  1070
  MSD4   $24E6   660   661  1074
  MSD4A  $2500   552   553  1078
  MSD5   $2513   671   672  1082
  MSF1   $2454   460   461  1047
  MSF2   $2470   510   511  1050
  MSG    $2407   454   455  1038
  MSG1   $2484   710   711  1054
  MSG2   $24AB   793   794  1062
  MSG5   $262C   983   984  1114
  MSGBIT $2DB1  1711  1712  2227
  MSGBZP $2DB9  1718  1719  2228
  MSGDIS $1E2D   278   415   416
  MSGEND $2DCF  2047  2048  2231
  MSGERR $1E23   277   396   397
  MSR1   $252F   830   831  1086
  MSS1   $3A8A  3383  3384  3868
  MSS2   $3AAE  3412  3413  3872
  MSS3   $3AD4  3657  3658  3875
  MSS4   $3AF2  3420  3421  3878
  MWORD  $338A  2893  2894  2984
  NAME   $3A7C  3696  3697  3865
  NAMS   $3A86   870  3681  3866
  NASCII $327B  2817  2849
  NBUF   $1CE3   248   723   748   753   759   760
  NCHARS $1CE2   247   715   720   725   737   742
  NCOK   $387C  3582  3585  3588
  NDATA  $1D08   264   899   912   938  1006  2659  2667
  NEGREL $2DCB  2017  2018  2230
  NEWEXT $276E  1227  1229
  NEWLIN $2751   394   395   413   414   418  1218  1625  1722  1913  1938

                1948  2041  2050  2055  2805  2847  2852  2883  2924  2965

                3622  3638
  NEXLIN $28C0  1228  1453
  NEXPTR $28BD  1452  1464  1476  1477  1483  1490  1491
  NEXPTS $2910  1498  1507  1511  1512  1516  1524  1525  2639  2640
  NEXTBY $3369  2806  2833  2853  2884  2925  2927  2929  2966  2970
  NEXTC  $385A  3501  3573
  NEXTP  $1EDF   331   355
  NEXTSL $2D5E  1626  2173
  NOASC  $3294  2858  2860  2863







CROSS REFERENCE......PAGE    6


  NOBINC $3380  2973  2976  2980
  NOFILE $21C4   717   730
  NOHEX  $27D2  1286  1291  1294
  NOID   $21D7   738   740
  NOINC  $2D75  2176  2179  2183
  NOPRT  $226A   797   817   820
  NOTABS $233F   862   933
  NPRAD  $2D01  2097  2100
  NPRAD1 $2D02  2080  2099
  OFFSET $1C43   176   546   550   665   667  2198  2201
  OFILE  $21DA   742  1175
  OFILE1 $21ED   746   750
  OFILE2 $21F2   752   757
* OFILE3 $221C   777
  OFILE4 $2230   743   773   789
  OFILED $21CF   326   737
* ONEBIT $2AA0  1741
  ONEBX  $2ACF  1763  1765
  ONEBY  $2ACC  1761  1764
  ONEBYT $2AA1  1745  1885  1889  1894  1962  3090  3091  3092  3098  3099

  OPCPUT $2B0B  1752  1782  1801
  OPCSYM $2B0E  1754  1784  1803
  OPEN   $FFC0    80   599   632   771   809   889  3711
  OPERN1 $33C7  1608  3042
  OPERND $33CF  1624  3047
  ORGIN  $2C8F   327  1179  2034  2714
* OUFILE $2199   710
  OUTPUT $1C39   166   322   383   385   390   392   407   412   453   731

                 732   821   822  1446  2286
  P1     $2CF8  2082  2084  2092
  PAGECT $1C74   224   313   316  1473  1474  1487  1489
  PAGER1 $2909  1488  1490
  PASS   $1C31   157   288   298   302   355   356  1152  1605  1699  1750

                1780  1856  1969  1991  2706  2721  2732  2736  2762  2791

                2868  2888  2912  2943  3509
  PAUS1  $31D4  2758  2759
  PAUSE  $1ED8   351   352
  PCHAR  $2864   299   521  1338  1343  1352  1393  1400  1835  1837  1839

                1851  1860  1872  1874  1876  2036  2038  2065  2073  2075

                2122  2127  2132  2137  2142  2144  2149  2151  2156  2169

                2819  2824  2830  2846  2954  2956  3022  3539  3541  3561

                3567  3634  3636
  PEXIT  $2899  1421  1425
  PFILE0 $1FB1   464   466
  PFILE1 $1FB3   467   472
  PMSG   $1E17   276   346   347  2753  2754
  POSREL $2DC7  2014  2015  2229
  POVER  $2CF5  2086  2088
  PRAD   $2CDE  1614  1709  2079  2795  2872  2892
  PRBYT  $27F8   921  1326  1331  1716  1766  1825  1864  2027  2237  2249

                2253  2266  2270  2274  2804  2851  3821  3826
  PRBYTS $27F2  1324  2107  2117
  PREND  $30F6  2630  2633  2639
  PRFILE $20AB   475   560   586
* PRIMM  $FF7D   109
  PRIN   $2879  1403  1410







CROSS REFERENCE......PAGE    7


  PRINT  $226C   819   821
  PRLA   $2CD4  1764  1798  2072  2092  2111
  PRO2RD $2085   565   578
  PROGED $1FF9   492   498
  PROGM  $24A5   467  1059
  PROGOK $20DC   601   615
  PROGRD $1FE4   490   497
  PRTASS $33BA  1613  3034
  PRTDAF $2E77  2296  2302
  PRTDAL $2323   919   925
* PRTDAS $2310   912
  PRTDAT $2E5B  1707  2292  2308  2739  3035
  PRTEST $2E54  2244  2261  2286  2315
  PRTGET $2231   733   793
  PRTNEX $231B   916   927
  PRTNU1 $2833  1363  1374  1395
  PRTNU2 $283A  1377  1385
  PRTNU3 $283B  1376  1378
  PRTNUM $282A   401  1367  2299
  PRTOK  $30E9  2629  2634
  PRTON1 $2DF6  2239  2242
  PRTONE $2DE8  1708  2236  2794  3069  3070  3078
  PRTOT1 $2E8A  2310  2313
  PRTOTH $2E7F  2034  2046  2057  2308  3618  3629
  PRTPAG $281F  1359  1475
  PRTTH1 $2E49  2276  2279
  PRTTHE $2E23  2265  3075  3076  3077  3082
  PRTTW1 $2E18  2255  2258
  PRTTWO $2DFE  2248  2871  2891  3071  3072  3073  3074  3079  3080  3081

  PSELEC $2D0A   523  2040  2093  2105  2302
  PUIT   $2F23  2405  2410
  PUT    $3A47  3836  3840
  PUTC   $3A3B  3730  3831
  PUTI   $2F09  1802  2005  2398  2926  3520
  PWORK  $2D13  2002  2030  2111  3632
  PWORKD $2D16   517   555  1800  2115  2422  2625  2882  2923  2964  3637

  Q00000 $325C  2829  2831
  QUITS  $1F12   334   378
  QUITX  $398C  3733  3739
  QUITXX $39AC  3716  3761
  QUTERR $1F29   380   390
  RANG   $2EA4  2337  2343
  RANGE  $2E92  1760  1790  2335  3514
  READS  $39BD  3729  3772
  READST $FFB7    77   491   577   812   904  3734
  READX  $3979  3729  3735
  READXF $394C  3674  3695
  READXX $3906  3432  3657
  READY  $39CE  3779  3784
  RELATV $2C14  1968  3097  3115
  RELND  $2C46  1987  1989
  RELNEG $2C71  2013  2017
  RELP   $2C83  2023  2027
  RELPC  $2C64  2000  2011
  RELPM  $2C75  2016  2019
  RELPUT $2C60  1993  2004







CROSS REFERENCE......PAGE    8


  RELSYM $2C63  1971  1996  2007
  REOPEN $3955  3691  3702
  RESET  $3A72  3855  3858
  RESINT $2EF0  2386  3650
  ROPT   $1C37   164   838  1998
  ROUT   $2EB6  2338  2341  2345  2348  2352
  RPAREN $2D2E  1947  1957  1963  2136
  S3     $3002  2522  2526
  SA     $1C3D   173   366   368   482   484   513   515   545   549   643

                 645   699   701  2219  2221
  SAGOL  $1C45   177   700   702  2344  2347
  SAOUT  $1C49   179   365   367   681   683
  SAVA   $1C71   218   473   586  2610  2634
  SAVEE  $1C6C   212  2379  2381  2390  2392
* SAVEP  $1C68   210
  SAVES  $1C6A   211  2375  2377  2386  2388
  SAVINT $2ED7   307  2374
  SAVX   $1C72   219   918   924  1362  1370  1374  1394  3021  3023
  SAVY   $1C73   220   915   919   923   951   957   964   972   979  1001

                3820  3822
  SBLOK  $337B  2972  2977
  SCREN  $288D  1412  1419
  SCRNO1 $295A  1532  1536
  SCROFF $294B   740  1530
  SCRON  $295B   427  1538
  SELECT $1C41   175   498   500   529   531   534   536   537   539   544

                 548   567   569  1973  1975  2105  2106  2173  2177  2188

                2190  2197  2200  2211  2213  2214  2220  2222  2456  2458

                2681  2684  2710  2712  2725  2727  2970  2974  3473  3475

  SEMIC  $2D1F  1833  1870  2029  2058  2121  2421
  SETBNK $FF68   101   597   630   769   807   887  3709
  SETLFS $FFBA    79   593   626   765   803   883  3705
  SETMSG $FF90   124   126
  SETNAM $FFBD    78   589   622   761   799   879  3690  3698
  SEXIT  $281E  1351  1355
* SKIPER $3188  2724
  SLOK   $2D70  2175  2180
  SMALL  $301D  2530  2534  2540
  SMALLP $1C55   191  2495  2498  2513  2515  2554  2556  2901  2905  2960

                2962
  SMALLS $1C53   190  2494  2497  2540  2542  2565  2567  2575  2577  2579

                2581  2583  2587
  SOP    $3716   826  3383
  SOP1   $372A  3388  3398
  SOP2   $390D  3660  3661  3665
  SOP3   $391A  3663  3666
  SOP4   $3761  3424  3432
  SORT   $2FB4  2492  2607  3616
  SORT1  $2FC9  2502  2569  2590
  SORT2  $2FD8  2511  2535
  SORT3  $305A  2526  2574
  SORT4  $3086  2586  2589  2592
  SORTOK $3083  2585  2590
  SOUT   $2814  1350  1354
  SPAC   $2D51  2162  2164
  SPAC6  $2D4C  1869  2028  2088  2160







CROSS REFERENCE......PAGE    9


  SPACE  $2D59   922  1615  1622  1710  1826  1832  1840  2087  2162  2168

                2250  2267  2271  2300  2301  2616  3788
  SPACM  $2D4E  2161  2243  2259  2280  2304  2314  2621  2624  2637
  SPASS  $1C35   161  3512
  SSET   $377E  3453  3486
  STABLE $43CD  3403  3406  3942
* STARTD $1C0F   117
  STARTS $20FE   465   638
  STDREF $3A1D  3793  3817
  STOP   $FFE1    76   333  2743  3732
  STRPNT $280E   297   348   398   417   456   462   512   554   640   651

                 662   673   678   686   712   795   832   859   935   955

                 970   985  1014  1026  1347  1469  1482  1510  1515  1713

                1720  1818  1846  2019  2049  2755  2798  2875  2895  3385

                3414  3422  3621  3659  3671  3722  3755  3766  3909
  STRSY1 $3840  3557  3563
  STRSYM $383A  3537  3547  3554
  SUBP   $33EA  3038  3039  3068
  SUBS   $3422  3048  3049  3104
  SUBS1  $3406  3043  3044  3086
  SY     $3773  3394  3416  3433  3445
  SYEXIT $384E  3558  3560  3564  3566
  SYM    $379E  2079  3471
  SYM1   $37B7  3477  3486
  SYM2   $37BA  3487  3503
  SYMBOE $1C5C   198   846   851  3438  3440  3446  3448  3580  3584  3747

                3749
  SYMBOL $1C57   195  3393  3399  3471  3481
  SYMBOP $1C58   196  3405  3408  3426  3428  3437  3439  3454  3456  3530

                3533  3545  3546  3574  3576  3577  3579  3583  3591  3593

                3598  3600  3746  3748  3832  3834  3842  3844  3845  3847

  SYMBOS $1C5A   197  3404  3407  3453  3455
  SYMBUF $1CF9   256  3776  3780  3786  3809  3813  3814  3819  3825  3836

  SYMEND $37E6  3472  3482  3502  3504
  SYMOP  $37B2  1758  1788  1804  1995  2617  2920  2928  2951  3481  3630

* SYTAB  $373F  3412
  T2     $3005  2521  2525  2527
  TABINE $1C51   186  2359  2362  2378  2380  2391  2393  2400  2403  2410

                2412  2433  2435  2478  2482  2520  2524  2584  2588  2598

                2601  2628  2632  3461  3464  3610  3613  3642  3646
  TABINP $1C4D   184  2367  2369  2439  2441  2446  2448  2477  2481  2512

                2514  2519  2523  2566  2568  2578  2582  2627  2631  3462

                3465  3641  3645
  TABINS $1C4F   185  2358  2361  2366  2368  2374  2376  2387  2389  2399

                2402  2493  2496  2597  2600  3463  3466  3609  3612
  TDATA  $1D10   271   902   920   959   962   974   977  1002  2674  2677

                2693  2696  2699
  TEMP   $1C70   217  1164  1167  1256  1261  1269  1278  1279  2161  2163

                2401  2404  2470  2473  2503  2506  2529  2533  2559  2562

                2599  2602  2682  2685  2811  2835  2836  3013  3028  3496

                3499  3611  3614  3725  3852  3854  3859
  TEXTER $1D05   262  2700  2778  2799  2906  3667  3791
  TWOB   $2B11  1759  1789  1805
* TWOBIT $2AD5  1770
  TWOBX  $2B08  1793  1799
  TWOBY  $2B05  1791  1797







CROSS REFERENCE......PAGE   10


  TWOBYT $2AD6  1774  1903  1921  1926  1946  3093  3094  3095  3100
  UTABLE $4550  3425  3427  3445  3447  3988
* UYMBOE $1C62   204
* UYMBOP $1C5E   202
* UYMBOS $1C60   203
  VERSON $1CE1   246   719   744   747   750
  VICREG $D011    70  1533  1535  1538  1540
  WIND1  $217C   675   694
  WIND2  $217E   693   695
  WINDOP $2140   582   671
  WINDOW $1C3A   167   360   695
  WORD1  $32DB  2890  2899
  WORDM  $3321  2908  2933
  WORDPT $3315  2914  2926  2945
  WORDS  $32C6  2786  2888
  WORDS2 $3351  2952  2959
  WORDS3 $3363  2921  2957  2965
* WORDSX $3312  2925
  WORDSY $331B  2916  2928  2947
* WORDXX $3366  2966
  WORKED $1C64   208   514   516   547   551  1747  1749  1765  1776  1779

                1974  1976  1977  1979  1984  1986  1988  1989  2115  2116

                2335  2339  2343  2346  2415  2418  2457  2459  2468  2471

                2517  2528  2532  2545  2548  2612  2615  2877  2880  2900

                2904  2934  2936  2937  2939  2961  2963  3474  3476  3495

                3498  3625  3628
  WORKER $1C66   209  2463  2466  2469  2472  2675  2678  2680  2683  3488

                3491  3494  3497
  WREADY $4D37    84   432   613   788
  WRITE  $24A1   752  1058
  XFILE1 $3935  3681  3686
  XGET   $39FD  3796  3798  3802
  XINDEX $2D33  1890  1922  2141
  XOP0   $23DC   929   940  1007  1012
  XOP1   $23EC  1016  1019
  XOP2   $23EE  1018  1020
  XOPT   $1C36   163  1020  2081
  XTITLE $297E  1467  1468  1554
  XTITLS $29B7  1508  1509  1561
  YINDEX $2D3D  1895  1927  1964  2148
  YSHEX  $27D4  1288  1293  1296
* ZERBIT $2B8E  1881
* ZEROLG $00FB    91
  ZEROPG $2B8F  1885  3108
  ZEROUR $00FB    92   568   570   573   850   855  1347  1348  1350  1359

                1360  1367  1368  1379  1381  1382  1384  1386  1388  1389

                1391  2199  2202  2205  2411  2413  2416  2419  2447  2449

                2451  2541  2543  2546  2549  2555  2557  2560  2563  3053

                3054  3057  3060  3554  3555  3557  3565  3599  3601  3603

                3833  3835  3837
  ZEROX  $2B92  1889  1956  3109
  ZEROY  $2B98  1894  3110












































































